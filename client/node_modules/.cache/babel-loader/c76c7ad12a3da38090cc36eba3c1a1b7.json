{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { Component, Property, Event, closest, Collection, Complex, attributes, detach, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { NotifyPropertyChanges, ChildProperty, select, isVisible } from '@syncfusion/ej2-base';\nimport { KeyboardEvents, Browser, formatUnit, L10n } from '@syncfusion/ej2-base';\nimport { setStyleAttribute as setStyle, isNullOrUndefined as isNOU, selectAll, addClass, removeClass, remove } from '@syncfusion/ej2-base';\nimport { EventHandler, rippleEffect, Touch, compile, Animation } from '@syncfusion/ej2-base';\nimport { getRandomId, SanitizeHtmlHelper, Draggable } from '@syncfusion/ej2-base';\nimport { Toolbar } from '../toolbar/toolbar';\nvar CLS_TAB = 'e-tab';\nvar CLS_HEADER = 'e-tab-header';\nvar CLS_BLA_TEM = 'blazor-template';\nvar CLS_CONTENT = 'e-content';\nvar CLS_NEST = 'e-nested';\nvar CLS_ITEMS = 'e-items';\nvar CLS_ITEM = 'e-item';\nvar CLS_TEMPLATE = 'e-template';\nvar CLS_RTL = 'e-rtl';\nvar CLS_ACTIVE = 'e-active';\nvar CLS_DISABLE = 'e-disable';\nvar CLS_HIDDEN = 'e-hidden';\nvar CLS_FOCUS = 'e-focused';\nvar CLS_ICONS = 'e-icons';\nvar CLS_ICON = 'e-icon';\nvar CLS_ICON_TAB = 'e-icon-tab';\nvar CLS_ICON_CLOSE = 'e-close-icon';\nvar CLS_CLOSE_SHOW = 'e-close-show';\nvar CLS_TEXT = 'e-tab-text';\nvar CLS_INDICATOR = 'e-indicator';\nvar CLS_WRAP = 'e-tab-wrap';\nvar CLS_TEXT_WRAP = 'e-text-wrap';\nvar CLS_TAB_ICON = 'e-tab-icon';\nvar CLS_TB_ITEMS = 'e-toolbar-items';\nvar CLS_TB_ITEM = 'e-toolbar-item';\nvar CLS_TB_POP = 'e-toolbar-pop';\nvar CLS_TB_POPUP = 'e-toolbar-popup';\nvar CLS_HOR_NAV = 'e-hor-nav';\nvar CLS_POPUP_OPEN = 'e-popup-open';\nvar CLS_POPUP_CLOSE = 'e-popup-close';\nvar CLS_PROGRESS = 'e-progress';\nvar CLS_IGNORE = 'e-ignore';\nvar CLS_OVERLAY = 'e-overlay';\nvar CLS_HSCRCNT = 'e-hscroll-content';\nvar CLS_VSCRCNT = 'e-vscroll-content';\nvar CLS_VTAB = 'e-vertical-tab';\nvar CLS_VERTICAL = 'e-vertical';\nvar CLS_VLEFT = 'e-vertical-left';\nvar CLS_VRIGHT = 'e-vertical-right';\nvar CLS_HBOTTOM = 'e-horizontal-bottom';\nvar CLS_FILL = 'e-fill-mode';\nvar TABITEMPREFIX = 'tabitem_';\nvar CLS_REORDER_ACTIVE_ITEM = 'e-reorder-active-item';\n/**\r\n * Objects used for configuring the Tab selecting item action properties.\r\n */\n\nvar TabActionSettings =\n/** @class */\nfunction (_super) {\n  __extends(TabActionSettings, _super);\n\n  function TabActionSettings() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  __decorate([Property('SlideLeftIn')], TabActionSettings.prototype, \"effect\", void 0);\n\n  __decorate([Property(600)], TabActionSettings.prototype, \"duration\", void 0);\n\n  __decorate([Property('ease')], TabActionSettings.prototype, \"easing\", void 0);\n\n  return TabActionSettings;\n}(ChildProperty);\n\nexport { TabActionSettings };\n/**\r\n * Objects used for configuring the Tab animation properties.\r\n */\n\nvar TabAnimationSettings =\n/** @class */\nfunction (_super) {\n  __extends(TabAnimationSettings, _super);\n\n  function TabAnimationSettings() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  __decorate([Complex({\n    effect: 'SlideLeftIn',\n    duration: 600,\n    easing: 'ease'\n  }, TabActionSettings)], TabAnimationSettings.prototype, \"previous\", void 0);\n\n  __decorate([Complex({\n    effect: 'SlideRightIn',\n    duration: 600,\n    easing: 'ease'\n  }, TabActionSettings)], TabAnimationSettings.prototype, \"next\", void 0);\n\n  return TabAnimationSettings;\n}(ChildProperty);\n\nexport { TabAnimationSettings };\n/**\r\n * Objects used for configuring the Tab item header properties.\r\n */\n\nvar Header =\n/** @class */\nfunction (_super) {\n  __extends(Header, _super);\n\n  function Header() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  __decorate([Property('')], Header.prototype, \"text\", void 0);\n\n  __decorate([Property('')], Header.prototype, \"iconCss\", void 0);\n\n  __decorate([Property('left')], Header.prototype, \"iconPosition\", void 0);\n\n  return Header;\n}(ChildProperty);\n\nexport { Header };\n/**\r\n * An array of object that is used to configure the Tab.\r\n */\n\nvar TabItem =\n/** @class */\nfunction (_super) {\n  __extends(TabItem, _super);\n\n  function TabItem() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  __decorate([Complex({}, Header)], TabItem.prototype, \"header\", void 0);\n\n  __decorate([Property(null)], TabItem.prototype, \"headerTemplate\", void 0);\n\n  __decorate([Property('')], TabItem.prototype, \"content\", void 0);\n\n  __decorate([Property('')], TabItem.prototype, \"cssClass\", void 0);\n\n  __decorate([Property(false)], TabItem.prototype, \"disabled\", void 0);\n\n  __decorate([Property(true)], TabItem.prototype, \"visible\", void 0);\n\n  __decorate([Property()], TabItem.prototype, \"id\", void 0);\n\n  return TabItem;\n}(ChildProperty);\n\nexport { TabItem };\n/**\r\n * Tab is a content panel to show multiple contents in a single space, one at a time.\r\n * Each Tab item has an associated content, that will be displayed based on the active Tab header item.\r\n * ```html\r\n * <div id=\"tab\"></div>\r\n * <script>\r\n *   var tabObj = new Tab();\r\n *   tab.appendTo(\"#tab\");\r\n * </script>\r\n * ```\r\n */\n\nvar Tab =\n/** @class */\nfunction (_super) {\n  __extends(Tab, _super);\n  /**\r\n   * Initializes a new instance of the Tab class.\r\n   *\r\n   * @param {TabModel} options  - Specifies Tab model properties as options.\r\n   * @param {string | HTMLElement} element  - Specifies the element that is rendered as a Tab.\r\n   */\n\n\n  function Tab(options, element) {\n    var _this = _super.call(this, options, element) || this;\n\n    _this.show = {};\n    _this.hide = {};\n    _this.maxHeight = 0;\n    _this.title = 'Close';\n    _this.isInteracted = false;\n    _this.lastIndex = 0;\n    _this.isAdd = false;\n    _this.isIconAlone = false;\n    _this.draggableItems = [];\n    _this.resizeContext = _this.refreshActElePosition.bind(_this);\n    /**\r\n     * Contains the keyboard configuration of the Tab.\r\n     */\n\n    _this.keyConfigs = {\n      tab: 'tab',\n      home: 'home',\n      end: 'end',\n      enter: 'enter',\n      space: 'space',\n      delete: 'delete',\n      moveLeft: 'leftarrow',\n      moveRight: 'rightarrow',\n      moveUp: 'uparrow',\n      moveDown: 'downarrow'\n    };\n    return _this;\n  }\n  /**\r\n   * Removes the component from the DOM and detaches all its related event handlers, attributes and classes.\r\n   *\r\n   * @returns {void}\r\n   */\n\n\n  Tab.prototype.destroy = function () {\n    var _this = this;\n\n    if (this.isReact) {\n      this.clearTemplate();\n    }\n\n    if (!isNOU(this.tbObj)) {\n      this.tbObj.destroy();\n    }\n\n    this.unWireEvents();\n    ['role', 'aria-disabled', 'aria-activedescendant', 'tabindex', 'aria-orientation'].forEach(function (val) {\n      _this.element.removeAttribute(val);\n    });\n    this.expTemplateContent();\n\n    if (!this.isTemplate) {\n      while (this.element.firstElementChild) {\n        remove(this.element.firstElementChild);\n      }\n    } else {\n      var cntEle = select('.' + CLS_TAB + ' > .' + CLS_CONTENT, this.element);\n      this.element.classList.remove(CLS_TEMPLATE);\n\n      if (!isNOU(cntEle)) {\n        cntEle.innerHTML = this.cnt;\n      }\n    }\n\n    _super.prototype.destroy.call(this);\n\n    this.trigger('destroyed');\n  };\n  /**\r\n   * Refresh the tab component\r\n   *\r\n   * @returns {void}\r\n   */\n\n\n  Tab.prototype.refresh = function () {\n    if (this.isReact) {\n      this.clearTemplate();\n    }\n\n    _super.prototype.refresh.call(this);\n\n    if (this.isReact) {\n      this.renderReactTemplates();\n    }\n  };\n  /**\r\n   * Initialize component\r\n   *\r\n   * @private\r\n   * @returns {void}\r\n   */\n\n\n  Tab.prototype.preRender = function () {\n    var nested = closest(this.element, '.' + CLS_CONTENT);\n    this.prevIndex = 0;\n    this.isNested = false;\n    this.isPopup = false;\n    this.initRender = true;\n    this.isSwipeed = false;\n    this.itemIndexArray = [];\n    this.templateEle = [];\n\n    if (!isNOU(nested)) {\n      nested.parentElement.classList.add(CLS_NEST);\n      this.isNested = true;\n    }\n\n    var name = Browser.info.name;\n    var css = name === 'msie' ? 'e-ie' : name === 'edge' ? 'e-edge' : name === 'safari' ? 'e-safari' : '';\n    setStyle(this.element, {\n      'width': formatUnit(this.width),\n      'height': formatUnit(this.height)\n    });\n    this.setCssClass(this.element, this.cssClass, true);\n    attributes(this.element, {\n      role: 'tablist',\n      'aria-disabled': 'false',\n      'aria-activedescendant': ''\n    });\n    this.setCssClass(this.element, css, true);\n    this.updatePopAnimationConfig();\n  };\n  /**\r\n   * Initialize the component rendering\r\n   *\r\n   * @private\r\n   * @returns {void}\r\n   */\n\n\n  Tab.prototype.render = function () {\n    this.btnCls = this.createElement('span', {\n      className: CLS_ICONS + ' ' + CLS_ICON_CLOSE,\n      attrs: {\n        title: this.title\n      }\n    });\n    this.tabId = this.element.id.length > 0 ? '-' + this.element.id : getRandomId();\n    this.renderContainer();\n    this.wireEvents();\n    this.initRender = false;\n  };\n\n  Tab.prototype.renderContainer = function () {\n    var ele = this.element;\n    this.items.forEach(function (item, index) {\n      if (isNOU(item.id) && !isNOU(item.setProperties)) {\n        item.setProperties({\n          id: TABITEMPREFIX + index.toString()\n        }, true);\n      }\n    });\n\n    if (this.items.length > 0 && ele.children.length === 0) {\n      ele.appendChild(this.createElement('div', {\n        className: CLS_CONTENT\n      }));\n      this.setOrientation(this.headerPlacement, this.createElement('div', {\n        className: CLS_HEADER\n      }));\n      this.isTemplate = false;\n    } else if (this.element.children.length > 0) {\n      this.isTemplate = true;\n      ele.classList.add(CLS_TEMPLATE);\n      var header = ele.querySelector('.' + CLS_HEADER);\n\n      if (header && this.headerPlacement === 'Bottom') {\n        this.setOrientation(this.headerPlacement, header);\n      }\n    }\n\n    if (!isNOU(select('.' + CLS_HEADER, this.element)) && !isNOU(select('.' + CLS_CONTENT, this.element))) {\n      this.renderHeader();\n      this.tbItems = select('.' + CLS_HEADER + ' .' + CLS_TB_ITEMS, this.element);\n\n      if (!isNOU(this.tbItems)) {\n        rippleEffect(this.tbItems, {\n          selector: '.e-tab-wrap'\n        });\n      }\n\n      this.renderContent();\n\n      if (selectAll('.' + CLS_TB_ITEM, this.element).length > 0) {\n        this.tbItems = select('.' + CLS_HEADER + ' .' + CLS_TB_ITEMS, this.element);\n        this.bdrLine = this.createElement('div', {\n          className: CLS_INDICATOR + ' ' + CLS_HIDDEN + ' ' + CLS_IGNORE\n        });\n        var scrCnt = select('.' + this.scrCntClass, this.tbItems);\n\n        if (!isNOU(scrCnt)) {\n          scrCnt.insertBefore(this.bdrLine, scrCnt.firstChild);\n        } else {\n          this.tbItems.insertBefore(this.bdrLine, this.tbItems.firstChild);\n        }\n\n        this.setContentHeight(true);\n        this.select(this.selectedItem);\n      }\n\n      if (!isNOU(this.tbItem)) {\n        for (var i = 0; i < this.items.length; i++) {\n          var tabID = this.items[i].id;\n          this.tbItem[i].setAttribute('data-id', tabID);\n        }\n      }\n\n      this.setRTL(this.enableRtl);\n    }\n  };\n\n  Tab.prototype.serverItemsChanged = function () {\n    this.enableAnimation = false;\n    this.setActive(this.selectedItem, true);\n\n    if (this.loadOn !== 'Dynamic' && !isNOU(this.cntEle)) {\n      var itemCollection = [].slice.call(this.cntEle.children);\n      var content_1 = CLS_CONTENT + this.tabId + '_' + this.selectedItem;\n      itemCollection.forEach(function (item) {\n        if (item.classList.contains(CLS_ACTIVE) && item.id !== content_1) {\n          item.classList.remove(CLS_ACTIVE);\n        }\n\n        if (item.id === content_1) {\n          item.classList.add(CLS_ACTIVE);\n        }\n      });\n      this.prevIndex = this.selectedItem;\n      this.triggerAnimation(CLS_ITEM + this.tabId + '_' + this.selectedItem, false);\n    }\n\n    this.enableAnimation = true;\n  };\n\n  Tab.prototype.headerReady = function () {\n    this.initRender = true;\n    this.hdrEle = this.getTabHeader();\n    this.setOrientation(this.headerPlacement, this.hdrEle);\n\n    if (!isNOU(this.hdrEle)) {\n      this.tbObj = this.hdrEle && this.hdrEle.ej2_instances[0];\n    }\n\n    this.tbObj.clicked = this.clickHandler.bind(this);\n    this.tbObj.on('onItemsChanged', this.serverItemsChanged.bind(this));\n    this.tbItems = select('.' + CLS_HEADER + ' .' + CLS_TB_ITEMS, this.element);\n\n    if (!isNOU(this.tbItems)) {\n      rippleEffect(this.tbItems, {\n        selector: '.e-tab-wrap'\n      });\n    }\n\n    if (selectAll('.' + CLS_TB_ITEM, this.element).length > 0) {\n      this.bdrLine = select('.' + CLS_INDICATOR + '.' + CLS_IGNORE, this.element);\n      var scrollCnt = select('.' + this.scrCntClass, this.tbItems);\n\n      if (!isNOU(scrollCnt)) {\n        scrollCnt.insertBefore(this.bdrLine, scrollCnt.firstElementChild);\n      } else {\n        this.tbItems.insertBefore(this.bdrLine, this.tbItems.firstElementChild);\n      }\n\n      this.select(this.selectedItem);\n    }\n\n    this.cntEle = select('.' + CLS_TAB + ' > .' + CLS_CONTENT, this.element);\n\n    if (!isNOU(this.cntEle)) {\n      this.touchModule = new Touch(this.cntEle, {\n        swipe: this.swipeHandler.bind(this)\n      });\n    }\n\n    if (this.loadOn === 'Demand') {\n      var id = this.setActiveContent();\n      this.triggerAnimation(id, false);\n    }\n\n    this.initRender = false;\n    this.renderComplete();\n  };\n\n  Tab.prototype.setActiveContent = function () {\n    var id = CLS_ITEM + this.tabId + '_' + this.selectedItem;\n    var item = this.getTrgContent(this.cntEle, this.extIndex(id));\n\n    if (!isNOU(item)) {\n      item.classList.add(CLS_ACTIVE);\n    }\n\n    return id;\n  };\n\n  Tab.prototype.renderHeader = function () {\n    var _this = this;\n\n    var hdrPlace = this.headerPlacement;\n    var tabItems = [];\n    this.hdrEle = this.getTabHeader();\n    this.addVerticalClass();\n\n    if (!this.isTemplate) {\n      tabItems = this.parseObject(this.items, 0);\n    } else {\n      if (this.element.children.length > 1 && this.element.children[1].classList.contains(CLS_HEADER)) {\n        this.setProperties({\n          headerPlacement: 'Bottom'\n        }, true);\n      }\n\n      var count = this.hdrEle.children.length;\n      var hdrItems = [];\n\n      for (var i = 0; i < count; i++) {\n        hdrItems.push(this.hdrEle.children.item(i).innerHTML);\n      }\n\n      if (count > 0) {\n        while (this.hdrEle.firstElementChild) {\n          detach(this.hdrEle.firstElementChild);\n        }\n\n        var tabItems_1 = this.createElement('div', {\n          className: CLS_ITEMS\n        });\n        this.hdrEle.appendChild(tabItems_1);\n        hdrItems.forEach(function (item, index) {\n          _this.lastIndex = index;\n          var attr = {\n            className: CLS_ITEM,\n            id: CLS_ITEM + _this.tabId + '_' + index,\n            attrs: {\n              role: 'tab',\n              'aria-controls': CLS_CONTENT + _this.tabId + '_' + index,\n              'aria-selected': 'false'\n            }\n          };\n\n          var txt = _this.createElement('span', {\n            className: CLS_TEXT,\n            innerHTML: item,\n            attrs: {\n              'role': 'presentation'\n            }\n          }).outerHTML;\n\n          var cont = _this.createElement('div', {\n            className: CLS_TEXT_WRAP,\n            innerHTML: txt + _this.btnCls.outerHTML\n          }).outerHTML;\n\n          var wrap = _this.createElement('div', {\n            className: CLS_WRAP,\n            innerHTML: cont,\n            attrs: {\n              tabIndex: '-1'\n            }\n          });\n\n          tabItems_1.appendChild(_this.createElement('div', attr));\n          selectAll('.' + CLS_ITEM, tabItems_1)[index].appendChild(wrap);\n        });\n      }\n    }\n\n    this.tbObj = new Toolbar({\n      width: hdrPlace === 'Left' || hdrPlace === 'Right' ? 'auto' : '100%',\n      height: hdrPlace === 'Left' || hdrPlace === 'Right' ? '100%' : 'auto',\n      overflowMode: this.overflowMode,\n      items: tabItems.length !== 0 ? tabItems : [],\n      clicked: this.clickHandler.bind(this),\n      scrollStep: this.scrollStep,\n      enableHtmlSanitizer: this.enableHtmlSanitizer\n    });\n    this.tbObj.isStringTemplate = true;\n    this.tbObj.createElement = this.createElement;\n    this.tbObj.appendTo(this.hdrEle);\n    attributes(this.hdrEle, {\n      'aria-label': 'tab-header'\n    });\n    this.updateOrientationAttribute();\n    this.setCloseButton(this.showCloseButton);\n  };\n\n  Tab.prototype.renderContent = function () {\n    this.cntEle = select('.' + CLS_CONTENT, this.element);\n    var hdrItem = selectAll('.' + CLS_TB_ITEM, this.element);\n\n    if (this.isTemplate) {\n      this.cnt = this.cntEle.children.length > 0 ? this.cntEle.innerHTML : '';\n      var contents = this.cntEle.children;\n\n      for (var i = 0; i < hdrItem.length; i++) {\n        if (contents.length - 1 >= i) {\n          addClass([contents.item(i)], CLS_ITEM);\n          attributes(contents.item(i), {\n            'role': 'tabpanel',\n            'aria-labelledby': CLS_ITEM + this.tabId + '_' + i\n          });\n          contents.item(i).id = CLS_CONTENT + this.tabId + '_' + i;\n        }\n      }\n    }\n  };\n\n  Tab.prototype.reRenderItems = function () {\n    this.renderContainer();\n\n    if (!isNOU(this.cntEle)) {\n      this.touchModule = new Touch(this.cntEle, {\n        swipe: this.swipeHandler.bind(this)\n      });\n    }\n  };\n\n  Tab.prototype.parseObject = function (items, index) {\n    var _this = this;\n\n    var tbCount = selectAll('.e-tab-header .' + CLS_TB_ITEM, this.element).length;\n    var tItems = [];\n    var txtWrapEle;\n    var spliceArray = [];\n    var i = 0;\n    items.forEach(function (item, i) {\n      var pos = isNOU(item.header) || isNOU(item.header.iconPosition) ? '' : item.header.iconPosition;\n      var css = isNOU(item.header) || isNOU(item.header.iconCss) ? '' : item.header.iconCss;\n\n      if (isNOU(item.headerTemplate) && (isNOU(item.header) || isNOU(item.header.text) || item.header.text.length === 0 && css === '')) {\n        spliceArray.push(i);\n        return;\n      }\n\n      var txt = item.headerTemplate || item.header.text;\n\n      if (typeof txt === 'string' && _this.enableHtmlSanitizer) {\n        txt = SanitizeHtmlHelper.sanitize(txt);\n      }\n\n      var itemIndex;\n\n      if (_this.isReplace && !isNOU(_this.tbId) && _this.tbId !== '') {\n        var num = _this.tbId.indexOf('_');\n\n        itemIndex = parseInt(_this.tbId.substring(num + 1), 10);\n        _this.tbId = '';\n      } else {\n        itemIndex = index + i;\n      }\n\n      var addIndex = _this.isAdd ? tbCount + i : _this.lastIndex + 1;\n      _this.lastIndex = tbCount === 0 ? i : _this.isReplace ? itemIndex : addIndex;\n      var disabled = item.disabled ? ' ' + CLS_DISABLE + ' ' + CLS_OVERLAY : '';\n      var hidden = item.visible === false ? ' ' + CLS_HIDDEN : '';\n      txtWrapEle = _this.createElement('div', {\n        className: CLS_TEXT,\n        attrs: {\n          'role': 'presentation'\n        }\n      });\n      var tHtml = txt instanceof Object ? txt.outerHTML : txt;\n      var txtEmpty = !isNOU(tHtml) && tHtml !== '';\n\n      if (!isNOU(txt.tagName)) {\n        txtWrapEle.appendChild(txt);\n      } else {\n        _this.headerTextCompile(txtWrapEle, txt, i);\n      }\n\n      var tEle;\n\n      var icon = _this.createElement('span', {\n        className: CLS_ICONS + ' ' + CLS_TAB_ICON + ' ' + CLS_ICON + '-' + pos + ' ' + css\n      });\n\n      var tCont = _this.createElement('div', {\n        className: CLS_TEXT_WRAP\n      });\n\n      tCont.appendChild(txtWrapEle);\n\n      if (txt !== '' && txt !== undefined && css !== '') {\n        if (pos === 'left' || pos === 'top') {\n          tCont.insertBefore(icon, tCont.firstElementChild);\n        } else {\n          tCont.appendChild(icon);\n        }\n\n        tEle = txtWrapEle;\n        _this.isIconAlone = false;\n      } else {\n        tEle = css === '' ? txtWrapEle : icon;\n\n        if (tEle === icon) {\n          detach(txtWrapEle);\n          tCont.appendChild(icon);\n          _this.isIconAlone = true;\n        }\n      }\n\n      var wrapAttrs = item.disabled ? {} : {\n        tabIndex: '-1'\n      };\n      tCont.appendChild(_this.btnCls.cloneNode(true));\n\n      var wrap = _this.createElement('div', {\n        className: CLS_WRAP,\n        attrs: wrapAttrs\n      });\n\n      wrap.appendChild(tCont);\n\n      if (_this.itemIndexArray === []) {\n        _this.itemIndexArray.push(CLS_ITEM + _this.tabId + '_' + _this.lastIndex);\n      } else {\n        _this.itemIndexArray.splice(index + i, 0, CLS_ITEM + _this.tabId + '_' + _this.lastIndex);\n      }\n\n      var attrObj = {\n        id: CLS_ITEM + _this.tabId + '_' + _this.lastIndex,\n        role: 'tab',\n        'aria-selected': 'false'\n      };\n      var tItem = {\n        htmlAttributes: attrObj,\n        template: wrap\n      };\n      tItem.cssClass = (item.cssClass !== undefined ? item.cssClass : ' ') + ' ' + disabled + ' ' + hidden + ' ' + (css !== '' ? 'e-i' + pos : '') + ' ' + (!txtEmpty ? CLS_ICON : '');\n\n      if (pos === 'top' || pos === 'bottom') {\n        _this.element.classList.add('e-vertical-icon');\n      }\n\n      tItems.push(tItem);\n      i++;\n    });\n\n    if (!this.isAdd) {\n      spliceArray.forEach(function (spliceItemIndex) {\n        _this.items.splice(spliceItemIndex, 1);\n      });\n    }\n\n    if (this.isIconAlone) {\n      this.element.classList.add(CLS_ICON_TAB);\n    } else {\n      this.element.classList.remove(CLS_ICON_TAB);\n    }\n\n    return tItems;\n  };\n\n  Tab.prototype.removeActiveClass = function () {\n    var tabHeader = this.getTabHeader();\n\n    if (tabHeader) {\n      var tabItems = selectAll('.' + CLS_TB_ITEM + '.' + CLS_ACTIVE, tabHeader);\n      [].slice.call(tabItems).forEach(function (node) {\n        return node.classList.remove(CLS_ACTIVE);\n      });\n    }\n  };\n\n  Tab.prototype.checkPopupOverflow = function (ele) {\n    this.tbPop = select('.' + CLS_TB_POP, this.element);\n    var popIcon = select('.e-hor-nav', this.element);\n    var tbrItems = select('.' + CLS_TB_ITEMS, this.element);\n    var lastChild = tbrItems.lastChild;\n    var isOverflow = false;\n\n    if (!this.isVertical() && (this.enableRtl && popIcon.offsetLeft + popIcon.offsetWidth > tbrItems.offsetLeft || !this.enableRtl && popIcon.offsetLeft < tbrItems.offsetWidth)) {\n      isOverflow = true;\n    } else if (this.isVertical() && popIcon.offsetTop < lastChild.offsetTop + lastChild.offsetHeight) {\n      isOverflow = true;\n    }\n\n    if (isOverflow) {\n      ele.classList.add(CLS_TB_POPUP);\n      this.tbPop.insertBefore(ele, selectAll('.' + CLS_TB_POPUP, this.tbPop)[0]);\n    }\n\n    return true;\n  };\n\n  Tab.prototype.popupHandler = function (target) {\n    var ripEle = target.querySelector('.e-ripple-element');\n\n    if (!isNOU(ripEle)) {\n      ripEle.outerHTML = '';\n      target.querySelector('.' + CLS_WRAP).classList.remove('e-ripple');\n    }\n\n    this.tbItem = selectAll('.' + CLS_TB_ITEMS + ' .' + CLS_TB_ITEM, this.hdrEle);\n    var lastChild = this.tbItem[this.tbItem.length - 1];\n\n    if (this.tbItem.length !== 0) {\n      target.classList.remove(CLS_TB_POPUP);\n      target.removeAttribute('style');\n      this.tbItems.appendChild(target);\n      this.actEleId = target.id;\n\n      if (this.checkPopupOverflow(lastChild)) {\n        var prevEle = this.tbItems.lastChild.previousElementSibling;\n        this.checkPopupOverflow(prevEle);\n      }\n\n      this.isPopup = true;\n    }\n\n    return selectAll('.' + CLS_TB_ITEM, this.tbItems).length - 1;\n  };\n\n  Tab.prototype.updateOrientationAttribute = function () {\n    attributes(this.element, {\n      'aria-orientation': this.isVertical() ? 'vertical' : 'horizontal'\n    });\n  };\n\n  Tab.prototype.setCloseButton = function (val) {\n    var trg = select('.' + CLS_HEADER, this.element);\n\n    if (val === true) {\n      trg.classList.add(CLS_CLOSE_SHOW);\n    } else {\n      trg.classList.remove(CLS_CLOSE_SHOW);\n    }\n\n    this.tbObj.refreshOverflow();\n    this.refreshActElePosition();\n  };\n\n  Tab.prototype.prevCtnAnimation = function (prev, current) {\n    var animation;\n    var checkRTL = this.enableRtl || this.element.classList.contains(CLS_RTL);\n\n    if (this.isPopup || prev <= current) {\n      if (this.animation.previous.effect === 'SlideLeftIn') {\n        animation = {\n          name: 'SlideLeftOut',\n          duration: this.animation.previous.duration,\n          timingFunction: this.animation.previous.easing\n        };\n      } else {\n        animation = null;\n      }\n    } else {\n      if (this.animation.next.effect === 'SlideRightIn') {\n        animation = {\n          name: 'SlideRightOut',\n          duration: this.animation.next.duration,\n          timingFunction: this.animation.next.easing\n        };\n      } else {\n        animation = null;\n      }\n    }\n\n    return animation;\n  };\n\n  Tab.prototype.triggerPrevAnimation = function (oldCnt, prevIndex) {\n    var _this = this;\n\n    var animateObj = this.prevCtnAnimation(prevIndex, this.selectedItem);\n\n    if (!isNOU(animateObj)) {\n      animateObj.begin = function () {\n        setStyle(oldCnt, {\n          'position': 'absolute'\n        });\n        oldCnt.classList.add(CLS_PROGRESS);\n        oldCnt.classList.add('e-view');\n      };\n\n      animateObj.end = function () {\n        oldCnt.style.display = 'none';\n        oldCnt.classList.remove(CLS_ACTIVE);\n        oldCnt.classList.remove(CLS_PROGRESS);\n        oldCnt.classList.remove('e-view');\n        setStyle(oldCnt, {\n          'display': '',\n          'position': ''\n        });\n\n        if (oldCnt.childNodes.length === 0 && !_this.isTemplate) {\n          detach(oldCnt);\n        }\n      };\n\n      new Animation(animateObj).animate(oldCnt);\n    } else {\n      oldCnt.classList.remove(CLS_ACTIVE);\n    }\n  };\n\n  Tab.prototype.triggerAnimation = function (id, value) {\n    var _this = this;\n\n    var prevIndex = this.prevIndex;\n    var oldCnt;\n    var itemCollection = [].slice.call(this.element.querySelector('.' + CLS_CONTENT).children);\n    itemCollection.forEach(function (item) {\n      if (item.id === _this.prevActiveEle) {\n        oldCnt = item;\n      }\n    });\n    var prevEle = this.tbItem[prevIndex];\n    var newCnt = this.getTrgContent(this.cntEle, this.extIndex(id));\n\n    if (isNOU(oldCnt) && !isNOU(prevEle)) {\n      var idNo = this.extIndex(prevEle.id);\n      oldCnt = this.getTrgContent(this.cntEle, idNo);\n    }\n\n    if (!isNOU(newCnt)) {\n      this.prevActiveEle = newCnt.id;\n    }\n\n    if (this.initRender || value === false || this.animation === {} || isNOU(this.animation)) {\n      if (oldCnt && oldCnt !== newCnt) {\n        oldCnt.classList.remove(CLS_ACTIVE);\n      }\n\n      return;\n    }\n\n    var cnt = select('.' + CLS_CONTENT, this.element);\n    var animateObj;\n\n    if (this.prevIndex > this.selectedItem && !this.isPopup) {\n      var openEff = this.animation.previous.effect;\n      animateObj = {\n        name: openEff === 'None' ? '' : openEff !== 'SlideLeftIn' ? openEff : 'SlideLeftIn',\n        duration: this.animation.previous.duration,\n        timingFunction: this.animation.previous.easing\n      };\n    } else if (this.isPopup || this.prevIndex < this.selectedItem || this.prevIndex === this.selectedItem) {\n      var clsEff = this.animation.next.effect;\n      animateObj = {\n        name: clsEff === 'None' ? '' : clsEff !== 'SlideRightIn' ? clsEff : 'SlideRightIn',\n        duration: this.animation.next.duration,\n        timingFunction: this.animation.next.easing\n      };\n    }\n\n    animateObj.progress = function () {\n      cnt.classList.add(CLS_PROGRESS);\n\n      _this.setActiveBorder();\n    };\n\n    animateObj.end = function () {\n      cnt.classList.remove(CLS_PROGRESS);\n      newCnt.classList.add(CLS_ACTIVE);\n    };\n\n    if (!this.initRender && !isNOU(oldCnt)) {\n      this.triggerPrevAnimation(oldCnt, prevIndex);\n    }\n\n    this.isPopup = false;\n\n    if (animateObj.name === '') {\n      newCnt.classList.add(CLS_ACTIVE);\n    } else {\n      new Animation(animateObj).animate(newCnt);\n    }\n  };\n\n  Tab.prototype.keyPressed = function (trg) {\n    var trgParent = closest(trg, '.' + CLS_HEADER + ' .' + CLS_TB_ITEM);\n    var trgIndex = this.getEleIndex(trgParent);\n\n    if (!isNOU(this.popEle) && trg.classList.contains('e-hor-nav')) {\n      this.popEle.classList.contains(CLS_POPUP_OPEN) ? this.popObj.hide(this.hide) : this.popObj.show(this.show);\n    } else if (trg.classList.contains('e-scroll-nav')) {\n      trg.click();\n    } else {\n      if (!isNOU(trgParent) && trgParent.classList.contains(CLS_ACTIVE) === false) {\n        this.selectTab(trgIndex, null, true);\n\n        if (!isNOU(this.popEle)) {\n          this.popObj.hide(this.hide);\n        }\n      }\n    }\n  };\n\n  Tab.prototype.getTabHeader = function () {\n    if (isNOU(this.element)) {\n      return undefined;\n    }\n\n    var headers = [].slice.call(this.element.children).filter(function (e) {\n      return e.classList.contains(CLS_HEADER);\n    });\n\n    if (headers.length > 0) {\n      return headers[0];\n    } else {\n      var wrap = [].slice.call(this.element.children).filter(function (e) {\n        return !e.classList.contains(CLS_BLA_TEM);\n      })[0];\n\n      if (!wrap) {\n        return undefined;\n      }\n\n      return [].slice.call(wrap.children).filter(function (e) {\n        return e.classList.contains(CLS_HEADER);\n      })[0];\n    }\n  };\n\n  Tab.prototype.getEleIndex = function (item) {\n    return Array.prototype.indexOf.call(selectAll('.' + CLS_TB_ITEM, this.getTabHeader()), item);\n  };\n\n  Tab.prototype.extIndex = function (id) {\n    return id.replace(CLS_ITEM + this.tabId + '_', '');\n  };\n\n  Tab.prototype.expTemplateContent = function () {\n    var _this = this;\n\n    this.templateEle.forEach(function (eleStr) {\n      if (!isNOU(_this.element.querySelector(eleStr))) {\n        document.body.appendChild(_this.element.querySelector(eleStr)).style.display = 'none';\n      }\n    });\n  };\n\n  Tab.prototype.templateCompile = function (ele, cnt, index) {\n    var tempEle = this.createElement('div');\n    this.compileElement(tempEle, cnt, 'content', index);\n\n    if (tempEle.childNodes.length !== 0) {\n      ele.appendChild(tempEle);\n    }\n\n    if (this.isReact) {\n      this.renderReactTemplates();\n    }\n  };\n\n  Tab.prototype.compileElement = function (ele, val, prop, index) {\n    var templateFn;\n\n    if (typeof val === 'string') {\n      val = val.trim();\n      ele.innerHTML = SanitizeHtmlHelper.sanitize(val);\n    } else {\n      templateFn = compile(val);\n    }\n\n    var templateFUN;\n\n    if (!isNOU(templateFn)) {\n      templateFUN = templateFn({}, this, prop);\n    }\n\n    if (!isNOU(templateFn) && templateFUN.length > 0) {\n      [].slice.call(templateFUN).forEach(function (el) {\n        ele.appendChild(el);\n      });\n    }\n  };\n\n  Tab.prototype.headerTextCompile = function (element, text, index) {\n    this.compileElement(element, text, 'headerTemplate', index);\n  };\n\n  Tab.prototype.getContent = function (ele, cnt, callType, index) {\n    var eleStr;\n\n    if (typeof cnt === 'string' || isNOU(cnt.innerHTML)) {\n      if (typeof cnt === 'string' && this.enableHtmlSanitizer) {\n        cnt = SanitizeHtmlHelper.sanitize(cnt);\n      }\n\n      if (cnt[0] === '.' || cnt[0] === '#') {\n        if (document.querySelectorAll(cnt).length) {\n          var eleVal = document.querySelector(cnt);\n          eleStr = eleVal.outerHTML.trim();\n\n          if (callType === 'clone') {\n            ele.appendChild(eleVal.cloneNode(true));\n          } else {\n            ele.appendChild(eleVal);\n            eleVal.style.display = '';\n          }\n        } else {\n          this.templateCompile(ele, cnt, index);\n        }\n      } else {\n        this.templateCompile(ele, cnt, index);\n      }\n    } else {\n      ele.appendChild(cnt);\n    }\n\n    if (!isNOU(eleStr)) {\n      if (this.templateEle.indexOf(cnt.toString()) === -1) {\n        this.templateEle.push(cnt.toString());\n      }\n    }\n  };\n\n  Tab.prototype.getTrgContent = function (cntEle, no) {\n    var ele;\n\n    if (this.element.classList.contains(CLS_NEST)) {\n      ele = select('.' + CLS_NEST + '> .' + CLS_CONTENT + ' > #' + CLS_CONTENT + this.tabId + '_' + no, this.element);\n    } else {\n      ele = this.findEle(cntEle.children, CLS_CONTENT + this.tabId + '_' + no);\n    }\n\n    return ele;\n  };\n\n  Tab.prototype.findEle = function (items, key) {\n    var ele;\n\n    for (var i = 0; i < items.length; i++) {\n      if (items[i].id === key) {\n        ele = items[i];\n        break;\n      }\n    }\n\n    return ele;\n  };\n\n  Tab.prototype.isVertical = function () {\n    var isVertical = this.headerPlacement === 'Left' || this.headerPlacement === 'Right' ? true : false;\n    this.scrCntClass = isVertical ? CLS_VSCRCNT : CLS_HSCRCNT;\n    return isVertical;\n  };\n\n  Tab.prototype.addVerticalClass = function () {\n    if (this.isVertical()) {\n      var tbPos = this.headerPlacement === 'Left' ? CLS_VLEFT : CLS_VRIGHT;\n      addClass([this.hdrEle], [CLS_VERTICAL, tbPos]);\n\n      if (!this.element.classList.contains(CLS_NEST)) {\n        addClass([this.element], [CLS_VTAB, tbPos]);\n      } else {\n        addClass([this.hdrEle], [CLS_VTAB, tbPos]);\n      }\n    }\n\n    if (this.headerPlacement === 'Bottom') {\n      addClass([this.hdrEle], [CLS_HBOTTOM]);\n    }\n  };\n\n  Tab.prototype.updatePopAnimationConfig = function () {\n    this.show = {\n      name: this.isVertical() ? 'FadeIn' : 'SlideDown',\n      duration: 100\n    };\n    this.hide = {\n      name: this.isVertical() ? 'FadeOut' : 'SlideUp',\n      duration: 100\n    };\n  };\n\n  Tab.prototype.changeOrientation = function (place) {\n    this.setOrientation(place, this.hdrEle);\n    var activeTab = this.hdrEle.querySelector('.' + CLS_ACTIVE);\n    var isVertical = this.hdrEle.classList.contains(CLS_VERTICAL) ? true : false;\n    removeClass([this.element], [CLS_VTAB]);\n    removeClass([this.hdrEle], [CLS_VERTICAL, CLS_VLEFT, CLS_VRIGHT]);\n\n    if (isVertical !== this.isVertical()) {\n      this.changeToolbarOrientation();\n\n      if (!isNOU(activeTab) && activeTab.classList.contains(CLS_TB_POPUP)) {\n        this.popupHandler(activeTab);\n      }\n    }\n\n    this.addVerticalClass();\n    this.updateOrientationAttribute();\n    this.setActiveBorder();\n    this.focusItem();\n  };\n\n  Tab.prototype.focusItem = function () {\n    var curActItem = select(' #' + CLS_ITEM + this.tabId + '_' + this.selectedItem, this.hdrEle);\n\n    if (!isNOU(curActItem)) {\n      curActItem.firstElementChild.focus();\n    }\n  };\n\n  Tab.prototype.changeToolbarOrientation = function () {\n    this.tbObj.setProperties({\n      height: this.isVertical() ? '100%' : 'auto',\n      width: this.isVertical() ? 'auto' : '100%'\n    }, true);\n    this.tbObj.changeOrientation();\n    this.updatePopAnimationConfig();\n  };\n\n  Tab.prototype.setOrientation = function (place, ele) {\n    var headerPos = Array.prototype.indexOf.call(this.element.children, ele);\n    var contentPos = Array.prototype.indexOf.call(this.element.children, this.element.querySelector('.' + CLS_CONTENT));\n\n    if (place === 'Bottom' && contentPos > headerPos) {\n      this.element.appendChild(ele);\n    } else {\n      removeClass([ele], [CLS_HBOTTOM]);\n      this.element.insertBefore(ele, select('.' + CLS_CONTENT, this.element));\n    }\n  };\n\n  Tab.prototype.setCssClass = function (ele, cls, val) {\n    if (cls === '') {\n      return;\n    }\n\n    var list = cls.split(' ');\n\n    for (var i = 0; i < list.length; i++) {\n      if (val) {\n        ele.classList.add(list[i]);\n      } else {\n        ele.classList.remove(list[i]);\n      }\n    }\n  };\n\n  Tab.prototype.setContentHeight = function (val) {\n    if (this.element.classList.contains(CLS_FILL)) {\n      removeClass([this.element], [CLS_FILL]);\n    }\n\n    if (isNOU(this.cntEle)) {\n      return;\n    }\n\n    var hdrEle = this.getTabHeader();\n\n    if (this.heightAdjustMode === 'None') {\n      if (this.height === 'auto') {\n        return;\n      } else {\n        if (!this.isVertical()) {\n          setStyle(this.cntEle, {\n            'height': this.element.offsetHeight - hdrEle.offsetHeight + 'px'\n          });\n        }\n      }\n    } else if (this.heightAdjustMode === 'Fill') {\n      addClass([this.element], [CLS_FILL]);\n      setStyle(this.element, {\n        'height': '100%'\n      });\n      setStyle(this.cntEle, {\n        'height': this.element.offsetHeight - hdrEle.offsetHeight + 'px'\n      });\n    } else if (this.heightAdjustMode === 'Auto') {\n      if (this.isTemplate === true) {\n        var cnt = selectAll('.' + CLS_CONTENT + ' > .' + CLS_ITEM, this.element);\n\n        for (var i = 0; i < cnt.length; i++) {\n          cnt[i].setAttribute('style', 'display:block; visibility: visible');\n          this.maxHeight = Math.max(this.maxHeight, this.getHeight(cnt[i]));\n          cnt[i].style.removeProperty('display');\n          cnt[i].style.removeProperty('visibility');\n        }\n      } else {\n        this.cntEle = select('.' + CLS_CONTENT, this.element);\n\n        if (val === true) {\n          this.cntEle.appendChild(this.createElement('div', {\n            id: CLS_CONTENT + this.tabId + '_' + 0,\n            className: CLS_ITEM + ' ' + CLS_ACTIVE,\n            attrs: {\n              'role': 'tabpanel',\n              'aria-labelledby': CLS_ITEM + this.tabId + '_' + 0\n            }\n          }));\n        }\n\n        var ele = this.cntEle.children.item(0);\n\n        for (var i = 0; i < this.items.length; i++) {\n          this.getContent(ele, this.items[i].content, 'clone', i);\n          this.maxHeight = Math.max(this.maxHeight, this.getHeight(ele));\n\n          while (ele.firstChild) {\n            ele.removeChild(ele.firstChild);\n          }\n        }\n\n        if (this.isReact) {\n          this.clearTemplate(['content']);\n        }\n\n        this.templateEle = [];\n        this.getContent(ele, this.items[0].content, 'render', 0);\n\n        if (this.prevIndex !== this.selectedItem) {\n          ele.classList.remove(CLS_ACTIVE);\n        }\n      }\n\n      setStyle(this.cntEle, {\n        'height': this.maxHeight + 'px'\n      });\n    } else {\n      setStyle(this.cntEle, {\n        'height': 'auto'\n      });\n    }\n  };\n\n  Tab.prototype.getHeight = function (ele) {\n    var cs = window.getComputedStyle(ele);\n    return ele.offsetHeight + parseFloat(cs.getPropertyValue('padding-top')) + parseFloat(cs.getPropertyValue('padding-bottom')) + parseFloat(cs.getPropertyValue('margin-top')) + parseFloat(cs.getPropertyValue('margin-bottom'));\n  };\n\n  Tab.prototype.setActiveBorder = function () {\n    var trgHdrEle = this.getTabHeader();\n    var trg = select('.' + CLS_TB_ITEM + '.' + CLS_ACTIVE, trgHdrEle);\n\n    if (isNOU(trg)) {\n      return;\n    }\n\n    if (!this.reorderActiveTab) {\n      if (trg.classList.contains(CLS_TB_POPUP) && !this.bdrLine.classList.contains(CLS_HIDDEN)) {\n        this.bdrLine.classList.add(CLS_HIDDEN);\n      }\n\n      if (trgHdrEle && !trgHdrEle.classList.contains(CLS_REORDER_ACTIVE_ITEM)) {\n        trgHdrEle.classList.add(CLS_REORDER_ACTIVE_ITEM);\n      }\n    } else if (trgHdrEle) {\n      trgHdrEle.classList.remove(CLS_REORDER_ACTIVE_ITEM);\n    }\n\n    var root = closest(trg, '.' + CLS_TAB);\n\n    if (this.element !== root) {\n      return;\n    }\n\n    this.tbItems = select('.' + CLS_TB_ITEMS, trgHdrEle);\n    var bar = select('.' + CLS_INDICATOR, trgHdrEle);\n    var scrollCnt = select('.' + CLS_TB_ITEMS + ' .' + this.scrCntClass, trgHdrEle);\n\n    if (this.isVertical()) {\n      setStyle(bar, {\n        'left': '',\n        'right': ''\n      });\n      var tbHeight = isNOU(scrollCnt) ? this.tbItems.offsetHeight : scrollCnt.offsetHeight;\n\n      if (tbHeight !== 0) {\n        setStyle(bar, {\n          'top': trg.offsetTop + 'px',\n          'height': trg.offsetHeight + 'px'\n        });\n      } else {\n        setStyle(bar, {\n          'top': 0,\n          'height': 0\n        });\n      }\n    } else {\n      if (this.overflowMode === 'MultiRow') {\n        var bar_1 = select('.' + CLS_INDICATOR, this.element);\n        setStyle(bar_1, {\n          'top': trg.offsetHeight + trg.offsetTop + 'px',\n          'height': ''\n        });\n      } else {\n        setStyle(bar, {\n          'top': '',\n          'height': ''\n        });\n      }\n\n      var tbWidth = isNOU(scrollCnt) ? this.tbItems.offsetWidth : scrollCnt.offsetWidth;\n\n      if (tbWidth !== 0) {\n        setStyle(bar, {\n          'left': trg.offsetLeft + 'px',\n          'right': tbWidth - (trg.offsetLeft + trg.offsetWidth) + 'px'\n        });\n      } else {\n        setStyle(bar, {\n          'left': 'auto',\n          'right': 'auto'\n        });\n      }\n    }\n\n    if (!isNOU(this.bdrLine) && !trg.classList.contains(CLS_TB_POPUP)) {\n      this.bdrLine.classList.remove(CLS_HIDDEN);\n    }\n  };\n\n  Tab.prototype.setActive = function (value, skipDataBind, isInteracted) {\n    if (skipDataBind === void 0) {\n      skipDataBind = false;\n    }\n\n    if (isInteracted === void 0) {\n      isInteracted = false;\n    }\n\n    this.tbItem = selectAll('.' + CLS_TB_ITEM, this.getTabHeader());\n    var trg = this.tbItem[value];\n\n    if (value < 0 || isNaN(value) || this.tbItem.length === 0) {\n      return;\n    }\n\n    if (value >= 0 && !skipDataBind) {\n      this.allowServerDataBinding = false;\n      this.setProperties({\n        selectedItem: value\n      }, true);\n      this.allowServerDataBinding = true;\n\n      if (!this.initRender) {\n        this.serverDataBind();\n      }\n    }\n\n    if (trg.classList.contains(CLS_ACTIVE)) {\n      this.setActiveBorder();\n      return;\n    }\n\n    if (!this.isTemplate) {\n      var prev = this.tbItem[this.prevIndex];\n\n      if (!isNOU(prev)) {\n        prev.removeAttribute('aria-controls');\n      }\n\n      attributes(trg, {\n        'aria-controls': CLS_CONTENT + this.tabId + '_' + value\n      });\n    }\n\n    var id = trg.id;\n    this.removeActiveClass();\n    trg.classList.add(CLS_ACTIVE);\n    this.tbItem[this.prevIndex].setAttribute('aria-selected', 'false');\n    trg.setAttribute('aria-selected', 'true');\n    var no = Number(this.extIndex(id));\n\n    if (isNOU(this.prevActiveEle)) {\n      this.prevActiveEle = CLS_CONTENT + this.tabId + '_' + no;\n    }\n\n    attributes(this.element, {\n      'aria-activedescendant': id\n    });\n\n    if (this.isTemplate) {\n      if (select('.' + CLS_CONTENT, this.element).children.length > 0) {\n        var trg_1 = this.findEle(select('.' + CLS_CONTENT, this.element).children, CLS_CONTENT + this.tabId + '_' + no);\n\n        if (!isNOU(trg_1)) {\n          trg_1.classList.add(CLS_ACTIVE);\n        }\n\n        this.triggerAnimation(id, this.enableAnimation);\n      }\n    } else {\n      this.cntEle = select('.' + CLS_TAB + ' > .' + CLS_CONTENT, this.element);\n      var item = this.getTrgContent(this.cntEle, this.extIndex(id));\n\n      if (isNOU(item)) {\n        this.cntEle.appendChild(this.createElement('div', {\n          id: CLS_CONTENT + this.tabId + '_' + this.extIndex(id),\n          className: CLS_ITEM + ' ' + CLS_ACTIVE,\n          attrs: {\n            role: 'tabpanel',\n            'aria-labelledby': CLS_ITEM + this.tabId + '_' + this.extIndex(id)\n          }\n        }));\n        var eleTrg = this.getTrgContent(this.cntEle, this.extIndex(id));\n        var itemIndex = Array.prototype.indexOf.call(this.itemIndexArray, id);\n        this.getContent(eleTrg, this.items[itemIndex].content, 'render', itemIndex);\n      } else {\n        item.classList.add(CLS_ACTIVE);\n      }\n\n      this.triggerAnimation(id, this.enableAnimation);\n    }\n\n    this.setActiveBorder();\n    this.refreshItemVisibility(trg);\n\n    if (!this.initRender && !skipDataBind) {\n      trg.firstElementChild.focus();\n      var eventArg = {\n        previousItem: this.prevItem,\n        previousIndex: this.prevIndex,\n        selectedItem: trg,\n        selectedIndex: value,\n        selectedContent: select('#' + CLS_CONTENT + this.tabId + '_' + this.selectingID, this.content),\n        isSwiped: this.isSwipeed,\n        isInteracted: isInteracted\n      };\n      this.trigger('selected', eventArg);\n    }\n  };\n\n  Tab.prototype.contentReady = function () {\n    var id = this.setActiveContent();\n    this.triggerAnimation(id, this.enableAnimation);\n  };\n\n  Tab.prototype.setItems = function (items) {\n    this.isReplace = true;\n    this.tbItems = select('.' + CLS_TB_ITEMS, this.getTabHeader());\n    this.tbObj.items = this.parseObject(items, 0);\n    this.tbObj.dataBind();\n    this.isReplace = false;\n  };\n\n  Tab.prototype.setRTL = function (value) {\n    this.tbObj.enableRtl = value;\n    this.tbObj.dataBind();\n    this.setCssClass(this.element, CLS_RTL, value);\n    this.refreshActiveBorder();\n  };\n\n  Tab.prototype.refreshActiveBorder = function () {\n    if (!isNOU(this.bdrLine)) {\n      this.bdrLine.classList.add(CLS_HIDDEN);\n    }\n\n    this.setActiveBorder();\n  };\n\n  Tab.prototype.showPopup = function (config) {\n    var tbPop = select('.e-popup.e-toolbar-pop', this.hdrEle);\n\n    if (tbPop.classList.contains('e-popup-close')) {\n      var tbPopObj = tbPop && tbPop.ej2_instances[0];\n      tbPopObj.position.X = this.headerPlacement === 'Left' ? 'left' : 'right';\n      tbPopObj.dataBind();\n      tbPopObj.show(config);\n    }\n  };\n\n  Tab.prototype.bindDraggable = function () {\n    var _this = this;\n\n    if (this.allowDragAndDrop) {\n      var tabHeader = this.element.querySelector('.' + CLS_HEADER);\n      var items = tabHeader.querySelectorAll('.' + CLS_TB_ITEM);\n      items.forEach(function (element) {\n        _this.initializeDrag(element);\n      });\n    }\n  };\n\n  Tab.prototype.wireEvents = function () {\n    this.bindDraggable();\n    window.addEventListener('resize', this.resizeContext);\n    EventHandler.add(this.element, 'mouseover', this.hoverHandler, this);\n    EventHandler.add(this.element, 'keydown', this.spaceKeyDown, this);\n\n    if (!isNOU(this.cntEle)) {\n      this.touchModule = new Touch(this.cntEle, {\n        swipe: this.swipeHandler.bind(this)\n      });\n    }\n\n    this.keyModule = new KeyboardEvents(this.element, {\n      keyAction: this.keyHandler.bind(this),\n      keyConfigs: this.keyConfigs\n    });\n    this.tabKeyModule = new KeyboardEvents(this.element, {\n      keyAction: this.keyHandler.bind(this),\n      keyConfigs: {\n        openPopup: 'shift+f10',\n        tab: 'tab',\n        shiftTab: 'shift+tab'\n      },\n      eventName: 'keydown'\n    });\n  };\n\n  Tab.prototype.unWireEvents = function () {\n    if (!isNOU(this.keyModule)) {\n      this.keyModule.destroy();\n    }\n\n    if (!isNOU(this.tabKeyModule)) {\n      this.tabKeyModule.destroy();\n    }\n\n    if (!isNOU(this.cntEle) && !isNOU(this.touchModule)) {\n      this.touchModule.destroy();\n    }\n\n    window.removeEventListener('resize', this.resizeContext);\n    EventHandler.remove(this.element, 'mouseover', this.hoverHandler);\n    EventHandler.remove(this.element, 'keydown', this.spaceKeyDown);\n    this.element.classList.remove(CLS_RTL);\n    this.element.classList.remove(CLS_FOCUS);\n  };\n\n  Tab.prototype.clickHandler = function (args) {\n    this.element.classList.remove(CLS_FOCUS);\n    var trg = args.originalEvent.target;\n    var trgParent = closest(trg, '.' + CLS_TB_ITEM);\n    var trgIndex = this.getEleIndex(trgParent);\n\n    if (trg.classList.contains(CLS_ICON_CLOSE)) {\n      this.removeTab(trgIndex);\n    } else if (this.isVertical() && closest(trg, '.' + CLS_HOR_NAV)) {\n      this.showPopup(this.show);\n    } else {\n      this.isPopup = false;\n\n      if (!isNOU(trgParent) && (trgIndex !== this.selectedItem || trgIndex !== this.prevIndex)) {\n        this.selectTab(trgIndex, args.originalEvent, true);\n      }\n    }\n  };\n\n  Tab.prototype.swipeHandler = function (e) {\n    if (e.velocity < 3 && isNOU(e.originalEvent.changedTouches)) {\n      return;\n    }\n\n    if (e.originalEvent && this.isNested) {\n      e.originalEvent.stopPropagation();\n    }\n\n    this.isSwipeed = true;\n\n    if (e.swipeDirection === 'Right' && this.selectedItem !== 0) {\n      for (var k = this.selectedItem - 1; k >= 0; k--) {\n        if (!this.tbItem[k].classList.contains(CLS_HIDDEN)) {\n          this.selectTab(k, null, true);\n          break;\n        }\n      }\n    } else if (e.swipeDirection === 'Left' && this.selectedItem !== selectAll('.' + CLS_TB_ITEM, this.element).length - 1) {\n      for (var i = this.selectedItem + 1; i < this.tbItem.length; i++) {\n        if (!this.tbItem[i].classList.contains(CLS_HIDDEN)) {\n          this.selectTab(i, null, true);\n          break;\n        }\n      }\n    }\n\n    this.isSwipeed = false;\n  };\n\n  Tab.prototype.spaceKeyDown = function (e) {\n    if (e.keyCode === 32 && e.which === 32 || e.keyCode === 35 && e.which === 35) {\n      var clstHead = closest(e.target, '.' + CLS_HEADER);\n\n      if (!isNOU(clstHead)) {\n        e.preventDefault();\n      }\n    }\n  };\n\n  Tab.prototype.keyHandler = function (e) {\n    if (this.element.classList.contains(CLS_DISABLE)) {\n      return;\n    }\n\n    this.element.classList.add(CLS_FOCUS);\n    var trg = e.target;\n    var tabHeader = this.getTabHeader();\n    var actEle = select('.' + CLS_ACTIVE, tabHeader);\n    this.popEle = select('.' + CLS_TB_POP, tabHeader);\n\n    if (!isNOU(this.popEle)) {\n      this.popObj = this.popEle.ej2_instances[0];\n    }\n\n    var item = closest(document.activeElement, '.' + CLS_TB_ITEM);\n    var trgParent = closest(trg, '.' + CLS_TB_ITEM);\n\n    switch (e.action) {\n      case 'space':\n      case 'enter':\n        if (trg.parentElement.classList.contains(CLS_DISABLE)) {\n          return;\n        }\n\n        if (e.action === 'enter' && trg.classList.contains('e-hor-nav')) {\n          this.showPopup(this.show);\n          break;\n        }\n\n        this.keyPressed(trg);\n        break;\n\n      case 'tab':\n      case 'shiftTab':\n        if (trg.classList.contains(CLS_WRAP) && closest(trg, '.' + CLS_TB_ITEM).classList.contains(CLS_ACTIVE) === false) {\n          trg.setAttribute('tabindex', '-1');\n        }\n\n        if (this.popObj && isVisible(this.popObj.element)) {\n          this.popObj.hide(this.hide);\n        }\n\n        actEle.children.item(0).setAttribute('tabindex', '0');\n        break;\n\n      case 'moveLeft':\n      case 'moveRight':\n        if (!isNOU(item)) {\n          this.refreshItemVisibility(item);\n        }\n\n        break;\n\n      case 'openPopup':\n        e.preventDefault();\n\n        if (!isNOU(this.popEle) && this.popEle.classList.contains(CLS_POPUP_CLOSE)) {\n          this.popObj.show(this.show);\n        }\n\n        break;\n\n      case 'delete':\n        if (this.showCloseButton === true && !isNOU(trgParent)) {\n          var nxtSib = trgParent.nextSibling;\n\n          if (!isNOU(nxtSib) && nxtSib.classList.contains(CLS_TB_ITEM)) {\n            nxtSib.firstElementChild.focus();\n          }\n\n          this.removeTab(this.getEleIndex(trgParent));\n        }\n\n        this.setActiveBorder();\n        break;\n    }\n  };\n\n  Tab.prototype.refreshActElePosition = function () {\n    var activeEle = select('.' + CLS_TB_ITEM + '.' + CLS_TB_POPUP + '.' + CLS_ACTIVE, this.element);\n\n    if (!isNOU(activeEle) && this.reorderActiveTab) {\n      this.select(this.getEleIndex(activeEle));\n    }\n\n    this.refreshActiveBorder();\n  };\n\n  Tab.prototype.refreshItemVisibility = function (target) {\n    var scrCnt = select('.' + this.scrCntClass, this.tbItems);\n\n    if (!this.isVertical() && !isNOU(scrCnt)) {\n      var scrBar = select('.e-hscroll-bar', this.tbItems);\n      var scrStart = scrBar.scrollLeft;\n      var scrEnd = scrStart + scrBar.offsetWidth;\n      var eleStart = target.offsetLeft;\n      var eleWidth = target.offsetWidth;\n      var eleEnd = target.offsetLeft + target.offsetWidth;\n\n      if (scrStart < eleStart && scrEnd < eleEnd) {\n        var eleViewRange = scrEnd - eleStart;\n        scrBar.scrollLeft = scrStart + (eleWidth - eleViewRange);\n      } else {\n        if (scrStart > eleStart && scrEnd > eleEnd) {\n          var eleViewRange = eleEnd - scrStart;\n          scrBar.scrollLeft = scrStart - (eleWidth - eleViewRange);\n        }\n      }\n    } else {\n      return;\n    }\n  };\n\n  Tab.prototype.hoverHandler = function (e) {\n    var trg = e.target;\n\n    if (!isNOU(trg.classList) && trg.classList.contains(CLS_ICON_CLOSE)) {\n      trg.setAttribute('title', new L10n('tab', {\n        closeButtonTitle: this.title\n      }, this.locale).getConstant('closeButtonTitle'));\n    }\n  };\n\n  Tab.prototype.evalOnPropertyChangeItems = function (newProp, oldProp) {\n    if (!(newProp.items instanceof Array && oldProp.items instanceof Array)) {\n      var changedProp = Object.keys(newProp.items);\n\n      for (var i = 0; i < changedProp.length; i++) {\n        var index = parseInt(Object.keys(newProp.items)[i], 10);\n        var properties = Object.keys(newProp.items[index]);\n\n        for (var j = 0; j < properties.length; j++) {\n          var oldVal = Object(oldProp.items[index])[properties[j]];\n          var newVal = Object(newProp.items[index])[properties[j]];\n          var hdr = this.element.querySelectorAll('.' + CLS_TB_ITEM)[index];\n          var itemIndex = void 0;\n\n          if (hdr && !isNOU(hdr.id) && hdr.id !== '') {\n            var num = hdr.id.lastIndexOf('_');\n            itemIndex = parseInt(hdr.id.substring(num + 1), 10);\n          } else {\n            itemIndex = index;\n          }\n\n          var hdrItem = select('.' + CLS_TB_ITEMS + ' #' + CLS_ITEM + this.tabId + '_' + itemIndex, this.element);\n          var cntItem = select('.' + CLS_CONTENT + ' #' + CLS_CONTENT + this.tabId + '_' + itemIndex, this.element);\n\n          if (properties[j] === 'header' || properties[j] === 'headerTemplate') {\n            var icon = isNOU(this.items[index].header) || isNOU(this.items[index].header.iconCss) ? '' : this.items[index].header.iconCss;\n            var textVal = this.items[index].headerTemplate || this.items[index].header.text;\n\n            if (textVal === '' && icon === '') {\n              this.removeTab(index);\n            } else {\n              this.tbId = hdr.id;\n              var arr = [];\n              arr.push(this.items[index]);\n              this.items.splice(index, 1);\n              this.itemIndexArray.splice(index, 1);\n              this.tbObj.items.splice(index, 1);\n              var isHiddenEle = hdrItem.classList.contains(CLS_HIDDEN);\n              detach(hdrItem);\n              this.isReplace = true;\n              this.addTab(arr, index);\n\n              if (isHiddenEle) {\n                this.hideTab(index);\n              }\n\n              this.isReplace = false;\n            }\n          }\n\n          if (properties[j] === 'content' && !isNOU(cntItem)) {\n            var strVal = typeof newVal === 'string' || isNOU(newVal.innerHTML);\n\n            if (strVal && (newVal[0] === '.' || newVal[0] === '#') && newVal.length) {\n              var eleVal = document.querySelector(newVal);\n              cntItem.appendChild(eleVal);\n              eleVal.style.display = '';\n            } else if (newVal === '' && oldVal[0] === '#') {\n              document.body.appendChild(this.element.querySelector(oldVal)).style.display = 'none';\n              cntItem.innerHTML = newVal;\n            } else if (this.isReact) {\n              cntItem.innerHTML = '';\n              this.templateCompile(cntItem, newVal, index);\n            } else if (typeof newVal !== 'function') {\n              cntItem.innerHTML = newVal;\n            }\n          }\n\n          if (properties[j] === 'cssClass') {\n            if (!isNOU(hdrItem)) {\n              hdrItem.classList.remove(oldVal);\n              hdrItem.classList.add(newVal);\n            }\n\n            if (!isNOU(cntItem)) {\n              cntItem.classList.remove(oldVal);\n              cntItem.classList.add(newVal);\n            }\n          }\n\n          if (properties[j] === 'disabled') {\n            this.enableTab(index, newVal === true ? false : true);\n          }\n\n          if (properties[j] === 'visible') {\n            this.hideTab(index, newVal === true ? false : true);\n          }\n        }\n      }\n    } else {\n      this.lastIndex = 0;\n\n      if (isNOU(this.tbObj)) {\n        this.reRenderItems();\n      } else {\n        if (this.isRect) {\n          this.clearTemplate();\n        }\n\n        this.setItems(newProp.items);\n\n        if (this.templateEle.length > 0) {\n          this.expTemplateContent();\n        }\n\n        this.templateEle = [];\n        var selectElement = select('.' + CLS_TAB + ' > .' + CLS_CONTENT, this.element);\n\n        while (selectElement.firstElementChild) {\n          detach(selectElement.firstElementChild);\n        }\n\n        this.select(this.selectedItem);\n      }\n    }\n  };\n\n  Tab.prototype.initializeDrag = function (target) {\n    var _this = this;\n\n    this.dragArea = !isNOU(this.dragArea) ? this.dragArea : '#' + this.element.id + ' ' + ('.' + CLS_HEADER);\n    var dragObj = new Draggable(target, {\n      dragArea: this.dragArea,\n      dragTarget: '.' + CLS_TB_ITEM,\n      clone: true,\n      helper: this.helper.bind(this),\n      dragStart: this.itemDragStart.bind(this),\n      drag: function (e) {\n        var dragIndex = _this.getEleIndex(_this.dragItem);\n\n        var dropIndex;\n        var dropItem;\n        var dragArgs = {\n          draggedItem: _this.dragItem,\n          event: e.event,\n          target: e.target,\n          droppedItem: e.target.closest('.' + CLS_TB_ITEM),\n          clonedElement: _this.cloneElement,\n          index: dragIndex\n        };\n\n        if (!isNOU(e.target.closest('.' + CLS_TAB)) && !e.target.closest('.' + CLS_TAB).isEqualNode(_this.element) && _this.dragArea !== '.' + CLS_HEADER) {\n          _this.trigger('dragging', dragArgs);\n        } else {\n          if (!e.target.closest(_this.dragArea) && _this.overflowMode !== 'Popup') {\n            document.body.style.cursor = 'not-allowed';\n            addClass([_this.cloneElement], CLS_HIDDEN);\n\n            if (_this.dragItem.classList.contains(CLS_HIDDEN)) {\n              removeClass([_this.dragItem], CLS_HIDDEN);\n            }\n\n            _this.dragItem.querySelector('.' + CLS_WRAP).style.visibility = 'visible';\n          } else {\n            document.body.style.cursor = '';\n            _this.dragItem.querySelector('.' + CLS_WRAP).style.visibility = 'hidden';\n\n            if (_this.cloneElement.classList.contains(CLS_HIDDEN)) {\n              removeClass([_this.cloneElement], CLS_HIDDEN);\n            }\n          }\n\n          if (_this.overflowMode === 'Scrollable' && !isNOU(_this.element.querySelector('.e-hscroll'))) {\n            var scrollRightNavEle = _this.element.querySelector('.e-scroll-right-nav');\n\n            var scrollLeftNavEle = _this.element.querySelector('.e-scroll-left-nav');\n\n            var hscrollBar = _this.element.querySelector('.e-hscroll-bar');\n\n            if (!isNOU(scrollRightNavEle) && Math.abs(scrollRightNavEle.offsetWidth / 2 + scrollRightNavEle.offsetLeft) > _this.cloneElement.offsetLeft + _this.cloneElement.offsetWidth) {\n              hscrollBar.scrollLeft -= 10;\n            }\n\n            if (!isNOU(scrollLeftNavEle) && Math.abs(scrollLeftNavEle.offsetLeft + scrollLeftNavEle.offsetWidth - _this.cloneElement.offsetLeft) > scrollLeftNavEle.offsetWidth / 2) {\n              hscrollBar.scrollLeft += 10;\n            }\n          }\n\n          _this.cloneElement.style.pointerEvents = 'none';\n          dropItem = closest(e.target, '.' + CLS_TB_ITEM + '.e-draggable');\n          var scrollContentWidth = 0;\n\n          if (_this.overflowMode === 'Scrollable' && !isNOU(_this.element.querySelector('.e-hscroll'))) {\n            scrollContentWidth = _this.element.querySelector('.e-hscroll-content').offsetWidth;\n          }\n\n          if (dropItem != null && !dropItem.isSameNode(_this.dragItem) && dropItem.closest('.' + CLS_TAB).isSameNode(_this.dragItem.closest('.' + CLS_TAB))) {\n            dropIndex = _this.getEleIndex(dropItem);\n\n            if (dropIndex < dragIndex && Math.abs(dropItem.offsetLeft + dropItem.offsetWidth - _this.cloneElement.offsetLeft) > dropItem.offsetWidth / 2) {\n              _this.dragAction(dropItem, dragIndex, dropIndex);\n            }\n\n            if (dropIndex > dragIndex && Math.abs(dropItem.offsetWidth / 2) + dropItem.offsetLeft - scrollContentWidth < _this.cloneElement.offsetLeft + _this.cloneElement.offsetWidth) {\n              _this.dragAction(dropItem, dragIndex, dropIndex);\n            }\n          }\n\n          _this.droppedIndex = _this.getEleIndex(_this.dragItem);\n\n          _this.trigger('dragging', dragArgs);\n        }\n      },\n      dragStop: this.itemDragStop.bind(this)\n    });\n    this.draggableItems.push(dragObj);\n  };\n\n  Tab.prototype.helper = function (e) {\n    this.cloneElement = this.createElement('div');\n\n    if (e.element) {\n      this.cloneElement = e.element.cloneNode(true);\n      addClass([this.cloneElement], 'e-tab-clone-element');\n\n      if (this.element.querySelector('.' + CLS_HEADER).classList.contains(CLS_CLOSE_SHOW)) {\n        addClass([this.cloneElement], CLS_CLOSE_SHOW);\n      }\n\n      removeClass([this.cloneElement.querySelector('.' + CLS_WRAP)], 'e-ripple');\n\n      if (!isNOU(this.cloneElement.querySelector('.e-ripple-element'))) {\n        remove(this.cloneElement.querySelector('.e-ripple-element'));\n      }\n\n      document.body.appendChild(this.cloneElement);\n    }\n\n    return this.cloneElement;\n  };\n\n  Tab.prototype.itemDragStart = function (e) {\n    var _this = this;\n\n    this.draggingItems = this.items.map(function (x) {\n      return x;\n    });\n    this.dragItem = e.element;\n    var dragArgs = {\n      draggedItem: e.element,\n      event: e.event,\n      target: e.target,\n      droppedItem: null,\n      index: this.getEleIndex(this.dragItem),\n      clonedElement: this.cloneElement,\n      cancel: false\n    };\n    this.trigger('onDragStart', dragArgs, function (tabitemDragArgs) {\n      if (tabitemDragArgs.cancel) {\n        detach(_this.cloneElement);\n      } else {\n        _this.removeActiveClass();\n\n        addClass([_this.tbItems.querySelector('.' + CLS_INDICATOR)], CLS_HIDDEN);\n        _this.dragItem.querySelector('.' + CLS_WRAP).style.visibility = 'hidden';\n      }\n    });\n  };\n\n  Tab.prototype.dragAction = function (dropItem, dragsIndex, dropIndex) {\n    if (this.items.length > 0) {\n      var item = this.draggingItems[dragsIndex];\n      this.draggingItems.splice(dragsIndex, 1);\n      this.draggingItems.splice(dropIndex, 0, item);\n    }\n\n    if (this.overflowMode === 'MultiRow') {\n      dropItem.parentNode.insertBefore(this.dragItem, dropItem.nextElementSibling);\n    }\n\n    if (dragsIndex > dropIndex) {\n      if (!this.dragItem.parentElement.isSameNode(dropItem.parentElement)) {\n        if (this.overflowMode === 'Extended') {\n          if (dropItem.isSameNode(dropItem.parentElement.lastChild)) {\n            var popupContainer = this.dragItem.parentNode;\n            dropItem.parentNode.insertBefore(this.dragItem, dropItem);\n            popupContainer.insertBefore(dropItem.parentElement.lastChild, popupContainer.childNodes[0]);\n          } else {\n            this.dragItem.parentNode.insertBefore(dropItem.parentElement.lastChild, this.dragItem.parentElement.childNodes[0]);\n            dropItem.parentNode.insertBefore(this.dragItem, dropItem);\n          }\n        } else {\n          var lastEle = dropItem.parentElement.lastChild;\n\n          if (dropItem.isSameNode(lastEle)) {\n            var popupContainer = this.dragItem.parentNode;\n            dropItem.parentNode.insertBefore(this.dragItem, dropItem);\n            popupContainer.insertBefore(lastEle, popupContainer.childNodes[0]);\n          } else {\n            this.dragItem.parentNode.insertBefore(dropItem.parentElement.lastChild, this.dragItem.parentElement.childNodes[0]);\n            dropItem.parentNode.insertBefore(this.dragItem, dropItem);\n          }\n        }\n      } else {\n        this.dragItem.parentNode.insertBefore(this.dragItem, dropItem);\n      }\n    }\n\n    if (dragsIndex < dropIndex) {\n      if (!this.dragItem.parentElement.isSameNode(dropItem.parentElement)) {\n        if (this.overflowMode === 'Extended') {\n          this.dragItem.parentElement.appendChild(dropItem.parentElement.firstElementChild);\n          dropItem.parentNode.insertBefore(this.dragItem, dropItem.nextSibling);\n        } else {\n          this.dragItem.parentNode.insertBefore(dropItem.parentElement.lastChild, this.dragItem.parentElement.childNodes[0]);\n          dropItem.parentNode.insertBefore(this.dragItem, dropItem);\n        }\n      } else {\n        this.dragItem.parentNode.insertBefore(dropItem, this.dragItem);\n      }\n    }\n  };\n\n  Tab.prototype.itemDragStop = function (e) {\n    var _this = this;\n\n    detach(this.cloneElement);\n    this.dragItem.querySelector('.' + CLS_WRAP).style.visibility = 'visible';\n    document.body.style.cursor = '';\n    var dragStopArgs = {\n      draggedItem: this.dragItem,\n      event: e.event,\n      target: e.target,\n      droppedItem: this.tbItem[this.droppedIndex],\n      clonedElement: null,\n      index: this.droppedIndex,\n      cancel: false\n    };\n    this.trigger('dragged', dragStopArgs, function (tabItemDropArgs) {\n      if (tabItemDropArgs.cancel) {\n        _this.refresh();\n      } else {\n        if (_this.items.length > 0 && _this.draggingItems.length > 0) {\n          _this.items = _this.draggingItems;\n          _this.selectedItem = _this.droppedIndex;\n\n          _this.refresh();\n        } else {\n          _this.dragItem.querySelector('.' + CLS_WRAP).style.visibility = '';\n          removeClass([_this.tbItems.querySelector('.' + CLS_INDICATOR)], CLS_HIDDEN);\n\n          _this.selectTab(_this.droppedIndex, null, true);\n        }\n      }\n    });\n  };\n  /**\r\n   * Enables or disables the specified Tab item. On passing value as `false`, the item will be disabled.\r\n   *\r\n   * @param {number} index - Index value of target Tab item.\r\n   * @param {boolean} value - Boolean value that determines whether the command should be enabled or disabled.\r\n   * By default, isEnable is true.\r\n   * @returns {void}.\r\n   */\n\n\n  Tab.prototype.enableTab = function (index, value) {\n    var tbItems = selectAll('.' + CLS_TB_ITEM, this.element)[index];\n\n    if (isNOU(tbItems)) {\n      return;\n    }\n\n    if (value === true) {\n      tbItems.classList.remove(CLS_DISABLE, CLS_OVERLAY);\n      tbItems.firstElementChild.setAttribute('tabindex', '-1');\n    } else {\n      tbItems.classList.add(CLS_DISABLE, CLS_OVERLAY);\n      tbItems.firstElementChild.removeAttribute('tabindex');\n\n      if (tbItems.classList.contains(CLS_ACTIVE)) {\n        this.select(index + 1);\n      }\n    }\n\n    if (!isNOU(this.items[index])) {\n      this.items[index].disabled = !value;\n      this.dataBind();\n    }\n\n    tbItems.setAttribute('aria-disabled', value === true ? 'false' : 'true');\n  };\n  /**\r\n   * Adds new items to the Tab that accepts an array as Tab items.\r\n   *\r\n   * @param {TabItemModel[]} items - An array of item that is added to the Tab.\r\n   * @param {number} index - Number value that determines where the items to be added. By default, index is 0.\r\n   * @returns {void}.\r\n   */\n\n\n  Tab.prototype.addTab = function (items, index) {\n    var _this = this;\n\n    var addArgs = {\n      addedItems: items,\n      cancel: false\n    };\n\n    if (!this.isReplace) {\n      this.trigger('adding', addArgs, function (tabAddingArgs) {\n        if (!tabAddingArgs.cancel) {\n          _this.addingTabContent(items, index);\n        }\n      });\n    } else {\n      this.addingTabContent(items, index);\n    }\n\n    if (this.isReact) {\n      this.renderReactTemplates();\n    }\n  };\n\n  Tab.prototype.addingTabContent = function (items, index) {\n    var _this = this;\n\n    var lastEleIndex = 0;\n    this.hdrEle = select('.' + CLS_HEADER, this.element);\n\n    if (isNOU(this.hdrEle)) {\n      this.items = items;\n      this.reRenderItems();\n    } else {\n      var itemsCount = selectAll('.e-tab-header .' + CLS_TB_ITEM, this.element).length;\n\n      if (itemsCount !== 0) {\n        lastEleIndex = this.lastIndex + 1;\n      }\n\n      if (isNOU(index)) {\n        index = itemsCount - 1;\n      }\n\n      if (itemsCount < index || index < 0 || isNaN(index)) {\n        return;\n      }\n\n      if (itemsCount === 0 && !isNOU(this.hdrEle)) {\n        this.hdrEle.style.display = '';\n      }\n\n      if (!isNOU(this.bdrLine)) {\n        this.bdrLine.classList.add(CLS_HIDDEN);\n      }\n\n      this.tbItems = select('.' + CLS_TB_ITEMS, this.getTabHeader());\n      this.isAdd = true;\n      var tabItems = this.parseObject(items, index);\n      this.isAdd = false;\n      var i_1 = 0;\n      var textValue_1;\n      items.forEach(function (item, place) {\n        textValue_1 = item.headerTemplate || item.header.text;\n\n        if (!(isNOU(item.headerTemplate || item.header) || isNOU(textValue_1) || textValue_1.length === 0 && isNOU(item.header.iconCss))) {\n          _this.items.splice(index + i_1, 0, item);\n\n          i_1++;\n        }\n\n        if (_this.isTemplate && !isNOU(item.header) && !isNOU(item.header.text)) {\n          var no = lastEleIndex + place;\n\n          var ele = _this.createElement('div', {\n            id: CLS_CONTENT + _this.tabId + '_' + no,\n            className: CLS_ITEM,\n            attrs: {\n              role: 'tabpanel',\n              'aria-labelledby': CLS_ITEM + '_' + no\n            }\n          });\n\n          _this.cntEle.insertBefore(ele, _this.cntEle.children[index + place]);\n\n          var eleTrg = _this.getTrgContent(_this.cntEle, no.toString());\n\n          _this.getContent(eleTrg, item.content, 'render', index);\n        }\n      });\n      this.tbObj.addItems(tabItems, index);\n\n      if (!this.isReplace) {\n        this.trigger('added', {\n          addedItems: items\n        });\n      }\n\n      if (this.selectedItem === index) {\n        this.select(index);\n      } else {\n        this.setActiveBorder();\n      }\n\n      this.bindDraggable();\n    }\n  };\n  /**\r\n   * Removes the items in the Tab from the specified index.\r\n   *\r\n   * @param {number} index - Index of target item that is going to be removed.\r\n   * @returns {void}.\r\n   */\n\n\n  Tab.prototype.removeTab = function (index) {\n    var _this = this;\n\n    var trg = selectAll('.' + CLS_TB_ITEM, this.element)[index];\n\n    if (isNOU(trg)) {\n      return;\n    }\n\n    var removeArgs = {\n      removedItem: trg,\n      removedIndex: index,\n      cancel: false\n    };\n    this.trigger('removing', removeArgs, function (tabRemovingArgs) {\n      if (!tabRemovingArgs.cancel) {\n        _this.tbObj.removeItems(index);\n\n        if (_this.allowDragAndDrop && index !== Array.prototype.indexOf.call(_this.itemIndexArray, trg.id)) {\n          index = Array.prototype.indexOf.call(_this.itemIndexArray, trg.id);\n        }\n\n        _this.items.splice(index, 1);\n\n        _this.itemIndexArray.splice(index, 1);\n\n        _this.refreshActiveBorder();\n\n        var cntTrg = select('#' + CLS_CONTENT + _this.tabId + '_' + _this.extIndex(trg.id), select('.' + CLS_CONTENT, _this.element));\n\n        if (!isNOU(cntTrg)) {\n          detach(cntTrg);\n        }\n\n        _this.trigger('removed', tabRemovingArgs);\n\n        if (trg.classList.contains(CLS_ACTIVE)) {\n          index = index > selectAll('.' + CLS_TB_ITEM + ':not(.' + CLS_TB_POPUP + ')', _this.element).length - 1 ? index - 1 : index;\n          _this.enableAnimation = false;\n          _this.selectedItem = index;\n\n          _this.select(index);\n        }\n\n        if (selectAll('.' + CLS_TB_ITEM, _this.element).length === 0) {\n          _this.hdrEle.style.display = 'none';\n        }\n\n        _this.enableAnimation = true;\n      }\n    });\n  };\n  /**\r\n   * Shows or hides the Tab that is in the specified index.\r\n   *\r\n   * @param {number} index - Index value of target item.\r\n   * @param {boolean} value - Based on this Boolean value, item will be hide (false) or show (true). By default, value is true.\r\n   * @returns {void}.\r\n   */\n\n\n  Tab.prototype.hideTab = function (index, value) {\n    var items;\n    var item = selectAll('.' + CLS_TB_ITEM, this.element)[index];\n\n    if (isNOU(item)) {\n      return;\n    }\n\n    if (isNOU(value)) {\n      value = true;\n    }\n\n    this.bdrLine.classList.add(CLS_HIDDEN);\n\n    if (value === true) {\n      item.classList.add(CLS_HIDDEN);\n      items = selectAll('.' + CLS_TB_ITEM + ':not(.' + CLS_HIDDEN + ')', this.tbItems);\n\n      if (items.length !== 0 && item.classList.contains(CLS_ACTIVE)) {\n        if (index !== 0) {\n          for (var i = index - 1; i >= 0; i--) {\n            if (!this.tbItem[i].classList.contains(CLS_HIDDEN)) {\n              this.select(i);\n              break;\n            } else if (i === 0) {\n              for (var k = index + 1; k < this.tbItem.length; k++) {\n                if (!this.tbItem[k].classList.contains(CLS_HIDDEN)) {\n                  this.select(k);\n                  break;\n                }\n              }\n            }\n          }\n        } else {\n          for (var k = index + 1; k < this.tbItem.length; k++) {\n            if (!this.tbItem[k].classList.contains(CLS_HIDDEN)) {\n              this.select(k);\n              break;\n            }\n          }\n        }\n      } else if (items.length === 0) {\n        this.element.classList.add(CLS_HIDDEN);\n      }\n    } else {\n      this.element.classList.remove(CLS_HIDDEN);\n      items = selectAll('.' + CLS_TB_ITEM + ':not(.' + CLS_HIDDEN + ')', this.tbItems);\n      item.classList.remove(CLS_HIDDEN);\n\n      if (items.length === 0) {\n        this.select(index);\n      }\n    }\n\n    this.setActiveBorder();\n    item.setAttribute('aria-hidden', '' + value);\n\n    if (this.overflowMode === 'Popup' && this.tbObj) {\n      this.tbObj.refreshOverflow();\n    }\n  };\n\n  Tab.prototype.selectTab = function (args, event, isInteracted) {\n    if (event === void 0) {\n      event = null;\n    }\n\n    if (isInteracted === void 0) {\n      isInteracted = false;\n    }\n\n    this.isInteracted = isInteracted;\n    this.select(args, event);\n  };\n  /**\r\n   * Specifies the index or HTMLElement to select an item from the Tab.\r\n   *\r\n   * @param {number | HTMLElement} args - Index or DOM element is used for selecting an item from the Tab.\r\n   * @param {Event} event - An event which takes place in DOM.\r\n   * @returns {void}\r\n   */\n\n\n  Tab.prototype.select = function (args, event) {\n    var _this = this;\n\n    var tabHeader = this.getTabHeader();\n    this.tbItems = select('.' + CLS_TB_ITEMS, tabHeader);\n    this.tbItem = selectAll('.' + CLS_TB_ITEM, tabHeader);\n    this.content = select('.' + CLS_CONTENT, this.element);\n    this.prevItem = this.tbItem[this.prevIndex];\n\n    if (isNOU(this.selectedItem) || this.selectedItem < 0 || this.tbItem.length <= this.selectedItem || isNaN(this.selectedItem)) {\n      this.selectedItem = 0;\n    } else {\n      this.selectedID = this.extIndex(this.tbItem[this.selectedItem].id);\n    }\n\n    var trg = this.tbItem[args];\n\n    if (isNOU(trg)) {\n      this.selectedID = '0';\n    } else {\n      this.selectingID = this.extIndex(trg.id);\n    }\n\n    if (!isNOU(this.prevItem) && !this.prevItem.classList.contains(CLS_DISABLE)) {\n      this.prevItem.children.item(0).setAttribute('tabindex', '-1');\n    }\n\n    var eventArg = {\n      event: event,\n      previousItem: this.prevItem,\n      previousIndex: this.prevIndex,\n      selectedItem: this.tbItem[this.selectedItem],\n      selectedIndex: this.selectedItem,\n      selectedContent: !isNOU(this.content) ? select('#' + CLS_CONTENT + this.tabId + '_' + this.selectedID, this.content) : null,\n      selectingItem: trg,\n      selectingIndex: args,\n      selectingContent: !isNOU(this.content) ? select('#' + CLS_CONTENT + this.tabId + '_' + this.selectingID, this.content) : null,\n      isSwiped: this.isSwipeed,\n      isInteracted: this.isInteracted,\n      cancel: false\n    };\n\n    if (!this.initRender) {\n      this.trigger('selecting', eventArg, function (selectArgs) {\n        if (!selectArgs.cancel) {\n          _this.selectingContent(args, _this.isInteracted);\n        }\n      });\n    } else {\n      this.selectingContent(args, this.isInteracted);\n    }\n\n    this.isInteracted = false;\n  };\n\n  Tab.prototype.selectingContent = function (args, isInteracted) {\n    if (typeof args === 'number') {\n      if (!isNOU(this.tbItem[args]) && (this.tbItem[args].classList.contains(CLS_DISABLE) || this.tbItem[args].classList.contains(CLS_HIDDEN))) {\n        for (var i = args + 1; i < this.items.length; i++) {\n          if (this.items[i].disabled === false && this.items[i].visible === true) {\n            args = i;\n            break;\n          } else {\n            args = 0;\n          }\n        }\n      }\n\n      if (this.tbItem.length > args && args >= 0 && !isNaN(args)) {\n        this.prevIndex = this.selectedItem;\n\n        if (this.tbItem[args].classList.contains(CLS_TB_POPUP) && this.reorderActiveTab) {\n          this.setActive(this.popupHandler(this.tbItem[args]), null, isInteracted);\n\n          if (!isNOU(this.items) && this.items.length > 0 && this.allowDragAndDrop) {\n            this.tbItem = selectAll('.' + CLS_TB_ITEMS + ' .' + CLS_TB_ITEM, this.hdrEle);\n            var item = this.items[args];\n            this.items.splice(args, 1);\n            this.items.splice(this.tbItem.length - 1, 0, item);\n          }\n        } else {\n          this.setActive(args, null, isInteracted);\n        }\n      } else {\n        this.setActive(0, null, isInteracted);\n      }\n    } else if (args instanceof HTMLElement) {\n      this.setActive(this.getEleIndex(args), null, isInteracted);\n    }\n  };\n  /**\r\n   * Gets the item index from the Tab.\r\n   *\r\n   * @param  {string} tabItemId - Item ID is used for getting index from the Tab.\r\n   * @returns {number} - It returns item index.\r\n   */\n\n\n  Tab.prototype.getItemIndex = function (tabItemId) {\n    var tabIndex;\n\n    for (var i = 0; i < this.tbItem.length; i++) {\n      var value = this.tbItem[i].getAttribute('data-id');\n\n      if (tabItemId === value) {\n        tabIndex = i;\n        break;\n      }\n    }\n\n    return tabIndex;\n  };\n  /**\r\n   * Specifies the value to disable/enable the Tab component.\r\n   * When set to `true`, the component will be disabled.\r\n   *\r\n   * @param  {boolean} value - Based on this Boolean value, Tab will be enabled (false) or disabled (true).\r\n   * @returns {void}.\r\n   */\n\n\n  Tab.prototype.disable = function (value) {\n    this.setCssClass(this.element, CLS_DISABLE, value);\n    this.element.setAttribute('aria-disabled', '' + value);\n  };\n  /**\r\n   * Get the properties to be maintained in the persisted state.\r\n   *\r\n   * @returns {string} - It returns the persisted state.\r\n   */\n\n\n  Tab.prototype.getPersistData = function () {\n    return this.addOnPersist(['selectedItem', 'actEleId']);\n  };\n  /**\r\n   * Returns the current module name.\r\n   *\r\n   * @returns {string} - It returns the current module name.\r\n   * @private\r\n   */\n\n\n  Tab.prototype.getModuleName = function () {\n    return 'tab';\n  };\n  /**\r\n   * Gets called when the model property changes.The data that describes the old and new values of the property that changed.\r\n   *\r\n   * @param  {TabModel} newProp - It contains the new value of data.\r\n   * @param  {TabModel} oldProp - It contains the old value of data.\r\n   * @returns {void}\r\n   * @private\r\n   */\n\n\n  Tab.prototype.onPropertyChanged = function (newProp, oldProp) {\n    var _this = this;\n\n    for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n\n      switch (prop) {\n        case 'width':\n          setStyle(this.element, {\n            width: formatUnit(newProp.width)\n          });\n          break;\n\n        case 'height':\n          setStyle(this.element, {\n            height: formatUnit(newProp.height)\n          });\n          this.setContentHeight(false);\n          break;\n\n        case 'cssClass':\n          if (oldProp.cssClass !== '' && !isNullOrUndefined(oldProp.cssClass)) {\n            this.setCssClass(this.element, oldProp.cssClass, false);\n            this.setCssClass(this.element, newProp.cssClass, true);\n          } else {\n            this.setCssClass(this.element, newProp.cssClass, true);\n          }\n\n          break;\n\n        case 'items':\n          this.evalOnPropertyChangeItems(newProp, oldProp);\n          break;\n\n        case 'showCloseButton':\n          this.setCloseButton(newProp.showCloseButton);\n          break;\n\n        case 'reorderActiveTab':\n          this.refreshActElePosition();\n          break;\n\n        case 'selectedItem':\n          this.selectedItem = oldProp.selectedItem;\n          this.select(newProp.selectedItem);\n          break;\n\n        case 'headerPlacement':\n          this.changeOrientation(newProp.headerPlacement);\n          break;\n\n        case 'enableRtl':\n          this.setRTL(newProp.enableRtl);\n          break;\n\n        case 'overflowMode':\n          this.tbObj.overflowMode = newProp.overflowMode;\n          this.tbObj.dataBind();\n          this.refreshActElePosition();\n          break;\n\n        case 'heightAdjustMode':\n          this.setContentHeight(false);\n          this.select(this.selectedItem);\n          break;\n\n        case 'scrollStep':\n          if (this.tbObj) {\n            this.tbObj.scrollStep = this.scrollStep;\n          }\n\n          break;\n\n        case 'allowDragAndDrop':\n          this.bindDraggable();\n          break;\n\n        case 'dragArea':\n          if (this.allowDragAndDrop) {\n            this.draggableItems.forEach(function (item) {\n              item.dragArea = _this.dragArea;\n            });\n            this.refresh();\n          }\n\n          break;\n      }\n    }\n  };\n\n  Tab.prototype.refreshActiveTab = function () {\n    if (this.isReact) {\n      this.clearTemplate();\n    }\n\n    if (!this.isTemplate) {\n      if (this.element.querySelector('.' + CLS_TB_ITEM + '.' + CLS_ACTIVE)) {\n        detach(this.element.querySelector('.' + CLS_TB_ITEM + '.' + CLS_ACTIVE).children[0]);\n        detach(this.element.querySelector('.' + CLS_CONTENT).querySelector('.' + CLS_ACTIVE).children[0]);\n        var item = this.items[this.selectedItem];\n        var pos = isNOU(item.header) || isNOU(item.header.iconPosition) ? '' : item.header.iconPosition;\n        var css = isNOU(item.header) || isNOU(item.header.iconCss) ? '' : item.header.iconCss;\n        var text = item.headerTemplate || item.header.text;\n        var txtWrap = this.createElement('div', {\n          className: CLS_TEXT,\n          attrs: {\n            'role': 'presentation'\n          }\n        });\n\n        if (!isNOU(text.tagName)) {\n          txtWrap.appendChild(text);\n        } else {\n          this.headerTextCompile(txtWrap, text, this.selectedItem);\n        }\n\n        var tEle = void 0;\n        var icon = this.createElement('span', {\n          className: CLS_ICONS + ' ' + CLS_TAB_ICON + ' ' + CLS_ICON + '-' + pos + ' ' + css\n        });\n        var tConts = this.createElement('div', {\n          className: CLS_TEXT_WRAP\n        });\n        tConts.appendChild(txtWrap);\n\n        if (text !== '' && text !== undefined && css !== '') {\n          if (pos === 'left' || pos === 'top') {\n            tConts.insertBefore(icon, tConts.firstElementChild);\n          } else {\n            tConts.appendChild(icon);\n          }\n\n          tEle = txtWrap;\n          this.isIconAlone = false;\n        } else {\n          tEle = css === '' ? txtWrap : icon;\n\n          if (tEle === icon) {\n            detach(txtWrap);\n            tConts.appendChild(icon);\n            this.isIconAlone = true;\n          }\n        }\n\n        var wrapAtt = item.disabled ? {} : {\n          tabIndex: '-1'\n        };\n        tConts.appendChild(this.btnCls.cloneNode(true));\n        var wraper = this.createElement('div', {\n          className: CLS_WRAP,\n          attrs: wrapAtt\n        });\n        wraper.appendChild(tConts);\n\n        if (pos === 'top' || pos === 'bottom') {\n          this.element.classList.add('e-vertical-icon');\n        }\n\n        this.element.querySelector('.' + CLS_TB_ITEM + '.' + CLS_ACTIVE).appendChild(wraper);\n        var crElem = this.createElement('div');\n        var cnt = item.content;\n        var eleStr = void 0;\n\n        if (typeof cnt === 'string' || isNOU(cnt.innerHTML)) {\n          if (typeof cnt === 'string' && this.enableHtmlSanitizer) {\n            cnt = SanitizeHtmlHelper.sanitize(cnt);\n          }\n\n          if (cnt[0] === '.' || cnt[0] === '#') {\n            if (document.querySelectorAll(cnt).length) {\n              var eleVal = document.querySelector(cnt);\n              eleStr = eleVal.outerHTML.trim();\n              crElem.appendChild(eleVal);\n              eleVal.style.display = '';\n            } else {\n              this.compileElement(crElem, cnt, 'content', this.selectedItem);\n            }\n          } else {\n            this.compileElement(crElem, cnt, 'content', this.selectedItem);\n          }\n        } else {\n          crElem.appendChild(cnt);\n        }\n\n        if (!isNOU(eleStr)) {\n          if (this.templateEle.indexOf(cnt.toString()) === -1) {\n            this.templateEle.push(cnt.toString());\n          }\n        }\n\n        this.element.querySelector('.' + CLS_ITEM + '.' + CLS_ACTIVE).appendChild(crElem);\n      }\n    } else {\n      var tabItems = this.element.querySelector('.' + CLS_TB_ITEMS);\n      var element = this.element.querySelector('.' + CLS_TB_ITEM + '.' + CLS_ACTIVE);\n      var id = element.id;\n      var num = id.indexOf('_');\n      var index = parseInt(id.substring(num + 1), 10);\n      var header = element.innerText;\n      var detachContent = this.element.querySelector('.' + CLS_CONTENT).querySelector('.' + CLS_ACTIVE).children[0];\n      var mainContents = detachContent.innerHTML;\n      detach(element);\n      detach(detachContent);\n      var attr = {\n        className: CLS_TB_ITEM + ' ' + CLS_TEMPLATE + ' ' + CLS_ACTIVE,\n        id: CLS_ITEM + this.tabId + '_' + index,\n        attrs: {\n          role: 'tab',\n          'aria-controls': CLS_CONTENT + this.tabId + '_' + index,\n          'aria-disabled': 'false',\n          'aria-selected': 'true'\n        }\n      };\n      var txtString = this.createElement('span', {\n        className: CLS_TEXT,\n        innerHTML: header,\n        attrs: {\n          'role': 'presentation'\n        }\n      }).outerHTML;\n      var conte = this.createElement('div', {\n        className: CLS_TEXT_WRAP,\n        innerHTML: txtString + this.btnCls.outerHTML\n      }).outerHTML;\n      var wrap = this.createElement('div', {\n        className: CLS_WRAP,\n        innerHTML: conte,\n        attrs: {\n          tabIndex: '-1'\n        }\n      });\n      tabItems.insertBefore(this.createElement('div', attr), tabItems.children[index + 1]);\n      this.element.querySelector('.' + CLS_TB_ITEM + '.' + CLS_ACTIVE).appendChild(wrap);\n      var crElem = this.createElement('div', {\n        innerHTML: mainContents\n      });\n      this.element.querySelector('.' + CLS_CONTENT).querySelector('.' + CLS_ACTIVE).appendChild(crElem);\n    }\n\n    if (this.isReact) {\n      this.renderReactTemplates();\n    }\n  };\n\n  __decorate([Collection([], TabItem)], Tab.prototype, \"items\", void 0);\n\n  __decorate([Property('100%')], Tab.prototype, \"width\", void 0);\n\n  __decorate([Property('auto')], Tab.prototype, \"height\", void 0);\n\n  __decorate([Property('')], Tab.prototype, \"cssClass\", void 0);\n\n  __decorate([Property(0)], Tab.prototype, \"selectedItem\", void 0);\n\n  __decorate([Property('Top')], Tab.prototype, \"headerPlacement\", void 0);\n\n  __decorate([Property('Content')], Tab.prototype, \"heightAdjustMode\", void 0);\n\n  __decorate([Property('Scrollable')], Tab.prototype, \"overflowMode\", void 0);\n\n  __decorate([Property('Dynamic')], Tab.prototype, \"loadOn\", void 0);\n\n  __decorate([Property(false)], Tab.prototype, \"enablePersistence\", void 0);\n\n  __decorate([Property(false)], Tab.prototype, \"enableHtmlSanitizer\", void 0);\n\n  __decorate([Property(false)], Tab.prototype, \"showCloseButton\", void 0);\n\n  __decorate([Property(true)], Tab.prototype, \"reorderActiveTab\", void 0);\n\n  __decorate([Property()], Tab.prototype, \"scrollStep\", void 0);\n\n  __decorate([Property()], Tab.prototype, \"dragArea\", void 0);\n\n  __decorate([Property(false)], Tab.prototype, \"allowDragAndDrop\", void 0);\n\n  __decorate([Complex({}, TabAnimationSettings)], Tab.prototype, \"animation\", void 0);\n\n  __decorate([Event()], Tab.prototype, \"created\", void 0);\n\n  __decorate([Event()], Tab.prototype, \"adding\", void 0);\n\n  __decorate([Event()], Tab.prototype, \"added\", void 0);\n\n  __decorate([Event()], Tab.prototype, \"selecting\", void 0);\n\n  __decorate([Event()], Tab.prototype, \"selected\", void 0);\n\n  __decorate([Event()], Tab.prototype, \"removing\", void 0);\n\n  __decorate([Event()], Tab.prototype, \"removed\", void 0);\n\n  __decorate([Event()], Tab.prototype, \"onDragStart\", void 0);\n\n  __decorate([Event()], Tab.prototype, \"dragging\", void 0);\n\n  __decorate([Event()], Tab.prototype, \"dragged\", void 0);\n\n  __decorate([Event()], Tab.prototype, \"destroyed\", void 0);\n\n  Tab = __decorate([NotifyPropertyChanges], Tab);\n  return Tab;\n}(Component);\n\nexport { Tab };","map":{"version":3,"sources":["D:/4_PROJECTS/RubyGYM/client/node_modules/@syncfusion/ej2-navigations/src/tab/tab.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","Component","Property","Event","closest","Collection","Complex","attributes","detach","isNullOrUndefined","NotifyPropertyChanges","ChildProperty","select","isVisible","KeyboardEvents","Browser","formatUnit","L10n","setStyleAttribute","setStyle","isNOU","selectAll","addClass","removeClass","remove","EventHandler","rippleEffect","Touch","compile","Animation","getRandomId","SanitizeHtmlHelper","Draggable","Toolbar","CLS_TAB","CLS_HEADER","CLS_BLA_TEM","CLS_CONTENT","CLS_NEST","CLS_ITEMS","CLS_ITEM","CLS_TEMPLATE","CLS_RTL","CLS_ACTIVE","CLS_DISABLE","CLS_HIDDEN","CLS_FOCUS","CLS_ICONS","CLS_ICON","CLS_ICON_TAB","CLS_ICON_CLOSE","CLS_CLOSE_SHOW","CLS_TEXT","CLS_INDICATOR","CLS_WRAP","CLS_TEXT_WRAP","CLS_TAB_ICON","CLS_TB_ITEMS","CLS_TB_ITEM","CLS_TB_POP","CLS_TB_POPUP","CLS_HOR_NAV","CLS_POPUP_OPEN","CLS_POPUP_CLOSE","CLS_PROGRESS","CLS_IGNORE","CLS_OVERLAY","CLS_HSCRCNT","CLS_VSCRCNT","CLS_VTAB","CLS_VERTICAL","CLS_VLEFT","CLS_VRIGHT","CLS_HBOTTOM","CLS_FILL","TABITEMPREFIX","CLS_REORDER_ACTIVE_ITEM","TabActionSettings","_super","apply","TabAnimationSettings","effect","duration","easing","Header","TabItem","Tab","options","element","_this","call","show","hide","maxHeight","title","isInteracted","lastIndex","isAdd","isIconAlone","draggableItems","resizeContext","refreshActElePosition","bind","keyConfigs","tab","home","end","enter","space","delete","moveLeft","moveRight","moveUp","moveDown","destroy","isReact","clearTemplate","tbObj","unWireEvents","forEach","val","removeAttribute","expTemplateContent","isTemplate","firstElementChild","cntEle","classList","innerHTML","cnt","trigger","refresh","renderReactTemplates","preRender","nested","prevIndex","isNested","isPopup","initRender","isSwipeed","itemIndexArray","templateEle","parentElement","add","name","info","css","width","height","setCssClass","cssClass","role","updatePopAnimationConfig","render","btnCls","createElement","className","attrs","tabId","id","renderContainer","wireEvents","ele","items","item","index","setProperties","toString","children","appendChild","setOrientation","headerPlacement","header","querySelector","renderHeader","tbItems","selector","renderContent","bdrLine","scrCnt","scrCntClass","insertBefore","firstChild","setContentHeight","selectedItem","tbItem","tabID","setAttribute","setRTL","enableRtl","serverItemsChanged","enableAnimation","setActive","loadOn","itemCollection","slice","content_1","contains","triggerAnimation","headerReady","hdrEle","getTabHeader","ej2_instances","clicked","clickHandler","on","scrollCnt","touchModule","swipe","swipeHandler","setActiveContent","renderComplete","getTrgContent","extIndex","hdrPlace","tabItems","addVerticalClass","parseObject","count","hdrItems","push","tabItems_1","attr","txt","outerHTML","cont","wrap","tabIndex","overflowMode","scrollStep","enableHtmlSanitizer","isStringTemplate","appendTo","updateOrientationAttribute","setCloseButton","showCloseButton","hdrItem","contents","reRenderItems","tbCount","tItems","txtWrapEle","spliceArray","pos","iconPosition","iconCss","headerTemplate","text","sanitize","itemIndex","isReplace","tbId","num","indexOf","parseInt","substring","addIndex","disabled","hidden","visible","tHtml","txtEmpty","tagName","headerTextCompile","tEle","icon","tCont","undefined","wrapAttrs","cloneNode","splice","attrObj","tItem","htmlAttributes","template","spliceItemIndex","removeActiveClass","tabHeader","node","checkPopupOverflow","tbPop","popIcon","tbrItems","lastChild","isOverflow","isVertical","offsetLeft","offsetWidth","offsetTop","offsetHeight","popupHandler","ripEle","actEleId","prevEle","previousElementSibling","trg","refreshOverflow","prevCtnAnimation","prev","current","animation","checkRTL","previous","timingFunction","next","triggerPrevAnimation","oldCnt","animateObj","begin","style","display","childNodes","animate","value","prevActiveEle","newCnt","idNo","openEff","clsEff","progress","setActiveBorder","keyPressed","trgParent","trgIndex","getEleIndex","popEle","popObj","click","selectTab","headers","filter","e","replace","eleStr","document","body","templateCompile","tempEle","compileElement","prop","templateFn","trim","templateFUN","el","getContent","callType","querySelectorAll","eleVal","no","findEle","tbPos","changeOrientation","place","activeTab","changeToolbarOrientation","focusItem","curActItem","focus","headerPos","contentPos","cls","list","split","heightAdjustMode","Math","max","getHeight","removeProperty","content","removeChild","cs","window","getComputedStyle","parseFloat","getPropertyValue","trgHdrEle","reorderActiveTab","root","bar","tbHeight","bar_1","tbWidth","skipDataBind","isNaN","allowServerDataBinding","serverDataBind","Number","trg_1","eleTrg","refreshItemVisibility","eventArg","previousItem","prevItem","previousIndex","selectedIndex","selectedContent","selectingID","isSwiped","contentReady","setItems","dataBind","refreshActiveBorder","showPopup","config","tbPopObj","position","X","bindDraggable","allowDragAndDrop","initializeDrag","addEventListener","hoverHandler","spaceKeyDown","keyModule","keyAction","keyHandler","tabKeyModule","openPopup","shiftTab","eventName","removeEventListener","args","originalEvent","removeTab","velocity","changedTouches","stopPropagation","swipeDirection","k","keyCode","which","clstHead","preventDefault","actEle","activeElement","action","nxtSib","nextSibling","activeEle","scrBar","scrStart","scrollLeft","scrEnd","eleStart","eleWidth","eleEnd","eleViewRange","closeButtonTitle","locale","getConstant","evalOnPropertyChangeItems","newProp","oldProp","changedProp","keys","properties","j","oldVal","newVal","hdr","lastIndexOf","cntItem","textVal","arr","isHiddenEle","addTab","hideTab","strVal","enableTab","isRect","selectElement","dragArea","dragObj","dragTarget","clone","helper","dragStart","itemDragStart","drag","dragIndex","dragItem","dropIndex","dropItem","dragArgs","draggedItem","event","droppedItem","clonedElement","cloneElement","isEqualNode","cursor","visibility","scrollRightNavEle","scrollLeftNavEle","hscrollBar","abs","pointerEvents","scrollContentWidth","isSameNode","dragAction","droppedIndex","dragStop","itemDragStop","draggingItems","map","x","cancel","tabitemDragArgs","dragsIndex","parentNode","nextElementSibling","popupContainer","lastEle","dragStopArgs","tabItemDropArgs","addArgs","addedItems","tabAddingArgs","addingTabContent","lastEleIndex","itemsCount","i_1","textValue_1","addItems","removeArgs","removedItem","removedIndex","tabRemovingArgs","removeItems","cntTrg","selectedID","selectingItem","selectingIndex","selectingContent","selectArgs","HTMLElement","getItemIndex","tabItemId","getAttribute","disable","getPersistData","addOnPersist","getModuleName","onPropertyChanged","_i","_a","refreshActiveTab","txtWrap","tConts","wrapAtt","wraper","crElem","innerText","detachContent","mainContents","txtString","conte"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { Component, Property, Event, closest, Collection, Complex, attributes, detach, isNullOrUndefined } from '@syncfusion/ej2-base';\r\nimport { NotifyPropertyChanges, ChildProperty, select, isVisible } from '@syncfusion/ej2-base';\r\nimport { KeyboardEvents, Browser, formatUnit, L10n } from '@syncfusion/ej2-base';\r\nimport { setStyleAttribute as setStyle, isNullOrUndefined as isNOU, selectAll, addClass, removeClass, remove } from '@syncfusion/ej2-base';\r\nimport { EventHandler, rippleEffect, Touch, compile, Animation } from '@syncfusion/ej2-base';\r\nimport { getRandomId, SanitizeHtmlHelper, Draggable } from '@syncfusion/ej2-base';\r\nimport { Toolbar } from '../toolbar/toolbar';\r\nvar CLS_TAB = 'e-tab';\r\nvar CLS_HEADER = 'e-tab-header';\r\nvar CLS_BLA_TEM = 'blazor-template';\r\nvar CLS_CONTENT = 'e-content';\r\nvar CLS_NEST = 'e-nested';\r\nvar CLS_ITEMS = 'e-items';\r\nvar CLS_ITEM = 'e-item';\r\nvar CLS_TEMPLATE = 'e-template';\r\nvar CLS_RTL = 'e-rtl';\r\nvar CLS_ACTIVE = 'e-active';\r\nvar CLS_DISABLE = 'e-disable';\r\nvar CLS_HIDDEN = 'e-hidden';\r\nvar CLS_FOCUS = 'e-focused';\r\nvar CLS_ICONS = 'e-icons';\r\nvar CLS_ICON = 'e-icon';\r\nvar CLS_ICON_TAB = 'e-icon-tab';\r\nvar CLS_ICON_CLOSE = 'e-close-icon';\r\nvar CLS_CLOSE_SHOW = 'e-close-show';\r\nvar CLS_TEXT = 'e-tab-text';\r\nvar CLS_INDICATOR = 'e-indicator';\r\nvar CLS_WRAP = 'e-tab-wrap';\r\nvar CLS_TEXT_WRAP = 'e-text-wrap';\r\nvar CLS_TAB_ICON = 'e-tab-icon';\r\nvar CLS_TB_ITEMS = 'e-toolbar-items';\r\nvar CLS_TB_ITEM = 'e-toolbar-item';\r\nvar CLS_TB_POP = 'e-toolbar-pop';\r\nvar CLS_TB_POPUP = 'e-toolbar-popup';\r\nvar CLS_HOR_NAV = 'e-hor-nav';\r\nvar CLS_POPUP_OPEN = 'e-popup-open';\r\nvar CLS_POPUP_CLOSE = 'e-popup-close';\r\nvar CLS_PROGRESS = 'e-progress';\r\nvar CLS_IGNORE = 'e-ignore';\r\nvar CLS_OVERLAY = 'e-overlay';\r\nvar CLS_HSCRCNT = 'e-hscroll-content';\r\nvar CLS_VSCRCNT = 'e-vscroll-content';\r\nvar CLS_VTAB = 'e-vertical-tab';\r\nvar CLS_VERTICAL = 'e-vertical';\r\nvar CLS_VLEFT = 'e-vertical-left';\r\nvar CLS_VRIGHT = 'e-vertical-right';\r\nvar CLS_HBOTTOM = 'e-horizontal-bottom';\r\nvar CLS_FILL = 'e-fill-mode';\r\nvar TABITEMPREFIX = 'tabitem_';\r\nvar CLS_REORDER_ACTIVE_ITEM = 'e-reorder-active-item';\r\n/**\r\n * Objects used for configuring the Tab selecting item action properties.\r\n */\r\nvar TabActionSettings = /** @class */ (function (_super) {\r\n    __extends(TabActionSettings, _super);\r\n    function TabActionSettings() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    __decorate([\r\n        Property('SlideLeftIn')\r\n    ], TabActionSettings.prototype, \"effect\", void 0);\r\n    __decorate([\r\n        Property(600)\r\n    ], TabActionSettings.prototype, \"duration\", void 0);\r\n    __decorate([\r\n        Property('ease')\r\n    ], TabActionSettings.prototype, \"easing\", void 0);\r\n    return TabActionSettings;\r\n}(ChildProperty));\r\nexport { TabActionSettings };\r\n/**\r\n * Objects used for configuring the Tab animation properties.\r\n */\r\nvar TabAnimationSettings = /** @class */ (function (_super) {\r\n    __extends(TabAnimationSettings, _super);\r\n    function TabAnimationSettings() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    __decorate([\r\n        Complex({ effect: 'SlideLeftIn', duration: 600, easing: 'ease' }, TabActionSettings)\r\n    ], TabAnimationSettings.prototype, \"previous\", void 0);\r\n    __decorate([\r\n        Complex({ effect: 'SlideRightIn', duration: 600, easing: 'ease' }, TabActionSettings)\r\n    ], TabAnimationSettings.prototype, \"next\", void 0);\r\n    return TabAnimationSettings;\r\n}(ChildProperty));\r\nexport { TabAnimationSettings };\r\n/**\r\n * Objects used for configuring the Tab item header properties.\r\n */\r\nvar Header = /** @class */ (function (_super) {\r\n    __extends(Header, _super);\r\n    function Header() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    __decorate([\r\n        Property('')\r\n    ], Header.prototype, \"text\", void 0);\r\n    __decorate([\r\n        Property('')\r\n    ], Header.prototype, \"iconCss\", void 0);\r\n    __decorate([\r\n        Property('left')\r\n    ], Header.prototype, \"iconPosition\", void 0);\r\n    return Header;\r\n}(ChildProperty));\r\nexport { Header };\r\n/**\r\n * An array of object that is used to configure the Tab.\r\n */\r\nvar TabItem = /** @class */ (function (_super) {\r\n    __extends(TabItem, _super);\r\n    function TabItem() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    __decorate([\r\n        Complex({}, Header)\r\n    ], TabItem.prototype, \"header\", void 0);\r\n    __decorate([\r\n        Property(null)\r\n    ], TabItem.prototype, \"headerTemplate\", void 0);\r\n    __decorate([\r\n        Property('')\r\n    ], TabItem.prototype, \"content\", void 0);\r\n    __decorate([\r\n        Property('')\r\n    ], TabItem.prototype, \"cssClass\", void 0);\r\n    __decorate([\r\n        Property(false)\r\n    ], TabItem.prototype, \"disabled\", void 0);\r\n    __decorate([\r\n        Property(true)\r\n    ], TabItem.prototype, \"visible\", void 0);\r\n    __decorate([\r\n        Property()\r\n    ], TabItem.prototype, \"id\", void 0);\r\n    return TabItem;\r\n}(ChildProperty));\r\nexport { TabItem };\r\n/**\r\n * Tab is a content panel to show multiple contents in a single space, one at a time.\r\n * Each Tab item has an associated content, that will be displayed based on the active Tab header item.\r\n * ```html\r\n * <div id=\"tab\"></div>\r\n * <script>\r\n *   var tabObj = new Tab();\r\n *   tab.appendTo(\"#tab\");\r\n * </script>\r\n * ```\r\n */\r\nvar Tab = /** @class */ (function (_super) {\r\n    __extends(Tab, _super);\r\n    /**\r\n     * Initializes a new instance of the Tab class.\r\n     *\r\n     * @param {TabModel} options  - Specifies Tab model properties as options.\r\n     * @param {string | HTMLElement} element  - Specifies the element that is rendered as a Tab.\r\n     */\r\n    function Tab(options, element) {\r\n        var _this = _super.call(this, options, element) || this;\r\n        _this.show = {};\r\n        _this.hide = {};\r\n        _this.maxHeight = 0;\r\n        _this.title = 'Close';\r\n        _this.isInteracted = false;\r\n        _this.lastIndex = 0;\r\n        _this.isAdd = false;\r\n        _this.isIconAlone = false;\r\n        _this.draggableItems = [];\r\n        _this.resizeContext = _this.refreshActElePosition.bind(_this);\r\n        /**\r\n         * Contains the keyboard configuration of the Tab.\r\n         */\r\n        _this.keyConfigs = {\r\n            tab: 'tab',\r\n            home: 'home',\r\n            end: 'end',\r\n            enter: 'enter',\r\n            space: 'space',\r\n            delete: 'delete',\r\n            moveLeft: 'leftarrow',\r\n            moveRight: 'rightarrow',\r\n            moveUp: 'uparrow',\r\n            moveDown: 'downarrow'\r\n        };\r\n        return _this;\r\n    }\r\n    /**\r\n     * Removes the component from the DOM and detaches all its related event handlers, attributes and classes.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    Tab.prototype.destroy = function () {\r\n        var _this = this;\r\n        if (this.isReact) {\r\n            this.clearTemplate();\r\n        }\r\n        if (!isNOU(this.tbObj)) {\r\n            this.tbObj.destroy();\r\n        }\r\n        this.unWireEvents();\r\n        ['role', 'aria-disabled', 'aria-activedescendant', 'tabindex', 'aria-orientation'].forEach(function (val) {\r\n            _this.element.removeAttribute(val);\r\n        });\r\n        this.expTemplateContent();\r\n        if (!this.isTemplate) {\r\n            while (this.element.firstElementChild) {\r\n                remove(this.element.firstElementChild);\r\n            }\r\n        }\r\n        else {\r\n            var cntEle = select('.' + CLS_TAB + ' > .' + CLS_CONTENT, this.element);\r\n            this.element.classList.remove(CLS_TEMPLATE);\r\n            if (!isNOU(cntEle)) {\r\n                cntEle.innerHTML = this.cnt;\r\n            }\r\n        }\r\n        _super.prototype.destroy.call(this);\r\n        this.trigger('destroyed');\r\n    };\r\n    /**\r\n     * Refresh the tab component\r\n     *\r\n     * @returns {void}\r\n     */\r\n    Tab.prototype.refresh = function () {\r\n        if (this.isReact) {\r\n            this.clearTemplate();\r\n        }\r\n        _super.prototype.refresh.call(this);\r\n        if (this.isReact) {\r\n            this.renderReactTemplates();\r\n        }\r\n    };\r\n    /**\r\n     * Initialize component\r\n     *\r\n     * @private\r\n     * @returns {void}\r\n     */\r\n    Tab.prototype.preRender = function () {\r\n        var nested = closest(this.element, '.' + CLS_CONTENT);\r\n        this.prevIndex = 0;\r\n        this.isNested = false;\r\n        this.isPopup = false;\r\n        this.initRender = true;\r\n        this.isSwipeed = false;\r\n        this.itemIndexArray = [];\r\n        this.templateEle = [];\r\n        if (!isNOU(nested)) {\r\n            nested.parentElement.classList.add(CLS_NEST);\r\n            this.isNested = true;\r\n        }\r\n        var name = Browser.info.name;\r\n        var css = (name === 'msie') ? 'e-ie' : (name === 'edge') ? 'e-edge' : (name === 'safari') ? 'e-safari' : '';\r\n        setStyle(this.element, { 'width': formatUnit(this.width), 'height': formatUnit(this.height) });\r\n        this.setCssClass(this.element, this.cssClass, true);\r\n        attributes(this.element, { role: 'tablist', 'aria-disabled': 'false', 'aria-activedescendant': '' });\r\n        this.setCssClass(this.element, css, true);\r\n        this.updatePopAnimationConfig();\r\n    };\r\n    /**\r\n     * Initialize the component rendering\r\n     *\r\n     * @private\r\n     * @returns {void}\r\n     */\r\n    Tab.prototype.render = function () {\r\n        this.btnCls = this.createElement('span', { className: CLS_ICONS + ' ' + CLS_ICON_CLOSE, attrs: { title: this.title } });\r\n        this.tabId = this.element.id.length > 0 ? ('-' + this.element.id) : getRandomId();\r\n        this.renderContainer();\r\n        this.wireEvents();\r\n        this.initRender = false;\r\n    };\r\n    Tab.prototype.renderContainer = function () {\r\n        var ele = this.element;\r\n        this.items.forEach(function (item, index) {\r\n            if (isNOU(item.id) && !isNOU(item.setProperties)) {\r\n                item.setProperties({ id: TABITEMPREFIX + index.toString() }, true);\r\n            }\r\n        });\r\n        if (this.items.length > 0 && ele.children.length === 0) {\r\n            ele.appendChild(this.createElement('div', { className: CLS_CONTENT }));\r\n            this.setOrientation(this.headerPlacement, this.createElement('div', { className: CLS_HEADER }));\r\n            this.isTemplate = false;\r\n        }\r\n        else if (this.element.children.length > 0) {\r\n            this.isTemplate = true;\r\n            ele.classList.add(CLS_TEMPLATE);\r\n            var header = ele.querySelector('.' + CLS_HEADER);\r\n            if (header && this.headerPlacement === 'Bottom') {\r\n                this.setOrientation(this.headerPlacement, header);\r\n            }\r\n        }\r\n        if (!isNOU(select('.' + CLS_HEADER, this.element)) && !isNOU(select('.' + CLS_CONTENT, this.element))) {\r\n            this.renderHeader();\r\n            this.tbItems = select('.' + CLS_HEADER + ' .' + CLS_TB_ITEMS, this.element);\r\n            if (!isNOU(this.tbItems)) {\r\n                rippleEffect(this.tbItems, { selector: '.e-tab-wrap' });\r\n            }\r\n            this.renderContent();\r\n            if (selectAll('.' + CLS_TB_ITEM, this.element).length > 0) {\r\n                this.tbItems = select('.' + CLS_HEADER + ' .' + CLS_TB_ITEMS, this.element);\r\n                this.bdrLine = this.createElement('div', { className: CLS_INDICATOR + ' ' + CLS_HIDDEN + ' ' + CLS_IGNORE });\r\n                var scrCnt = select('.' + this.scrCntClass, this.tbItems);\r\n                if (!isNOU(scrCnt)) {\r\n                    scrCnt.insertBefore(this.bdrLine, scrCnt.firstChild);\r\n                }\r\n                else {\r\n                    this.tbItems.insertBefore(this.bdrLine, this.tbItems.firstChild);\r\n                }\r\n                this.setContentHeight(true);\r\n                this.select(this.selectedItem);\r\n            }\r\n            if (!isNOU(this.tbItem)) {\r\n                for (var i = 0; i < this.items.length; i++) {\r\n                    var tabID = this.items[i].id;\r\n                    this.tbItem[i].setAttribute('data-id', tabID);\r\n                }\r\n            }\r\n            this.setRTL(this.enableRtl);\r\n        }\r\n    };\r\n    Tab.prototype.serverItemsChanged = function () {\r\n        this.enableAnimation = false;\r\n        this.setActive(this.selectedItem, true);\r\n        if (this.loadOn !== 'Dynamic' && !isNOU(this.cntEle)) {\r\n            var itemCollection = [].slice.call(this.cntEle.children);\r\n            var content_1 = CLS_CONTENT + this.tabId + '_' + this.selectedItem;\r\n            itemCollection.forEach(function (item) {\r\n                if (item.classList.contains(CLS_ACTIVE) && item.id !== content_1) {\r\n                    item.classList.remove(CLS_ACTIVE);\r\n                }\r\n                if (item.id === content_1) {\r\n                    item.classList.add(CLS_ACTIVE);\r\n                }\r\n            });\r\n            this.prevIndex = this.selectedItem;\r\n            this.triggerAnimation(CLS_ITEM + this.tabId + '_' + this.selectedItem, false);\r\n        }\r\n        this.enableAnimation = true;\r\n    };\r\n    Tab.prototype.headerReady = function () {\r\n        this.initRender = true;\r\n        this.hdrEle = this.getTabHeader();\r\n        this.setOrientation(this.headerPlacement, this.hdrEle);\r\n        if (!isNOU(this.hdrEle)) {\r\n            this.tbObj = (this.hdrEle && this.hdrEle.ej2_instances[0]);\r\n        }\r\n        this.tbObj.clicked = this.clickHandler.bind(this);\r\n        this.tbObj.on('onItemsChanged', this.serverItemsChanged.bind(this));\r\n        this.tbItems = select('.' + CLS_HEADER + ' .' + CLS_TB_ITEMS, this.element);\r\n        if (!isNOU(this.tbItems)) {\r\n            rippleEffect(this.tbItems, { selector: '.e-tab-wrap' });\r\n        }\r\n        if (selectAll('.' + CLS_TB_ITEM, this.element).length > 0) {\r\n            this.bdrLine = select('.' + CLS_INDICATOR + '.' + CLS_IGNORE, this.element);\r\n            var scrollCnt = select('.' + this.scrCntClass, this.tbItems);\r\n            if (!isNOU(scrollCnt)) {\r\n                scrollCnt.insertBefore(this.bdrLine, scrollCnt.firstElementChild);\r\n            }\r\n            else {\r\n                this.tbItems.insertBefore(this.bdrLine, this.tbItems.firstElementChild);\r\n            }\r\n            this.select(this.selectedItem);\r\n        }\r\n        this.cntEle = select('.' + CLS_TAB + ' > .' + CLS_CONTENT, this.element);\r\n        if (!isNOU(this.cntEle)) {\r\n            this.touchModule = new Touch(this.cntEle, { swipe: this.swipeHandler.bind(this) });\r\n        }\r\n        if (this.loadOn === 'Demand') {\r\n            var id = this.setActiveContent();\r\n            this.triggerAnimation(id, false);\r\n        }\r\n        this.initRender = false;\r\n        this.renderComplete();\r\n    };\r\n    Tab.prototype.setActiveContent = function () {\r\n        var id = CLS_ITEM + this.tabId + '_' + this.selectedItem;\r\n        var item = this.getTrgContent(this.cntEle, this.extIndex(id));\r\n        if (!isNOU(item)) {\r\n            item.classList.add(CLS_ACTIVE);\r\n        }\r\n        return id;\r\n    };\r\n    Tab.prototype.renderHeader = function () {\r\n        var _this = this;\r\n        var hdrPlace = this.headerPlacement;\r\n        var tabItems = [];\r\n        this.hdrEle = this.getTabHeader();\r\n        this.addVerticalClass();\r\n        if (!this.isTemplate) {\r\n            tabItems = this.parseObject(this.items, 0);\r\n        }\r\n        else {\r\n            if (this.element.children.length > 1 && this.element.children[1].classList.contains(CLS_HEADER)) {\r\n                this.setProperties({ headerPlacement: 'Bottom' }, true);\r\n            }\r\n            var count = this.hdrEle.children.length;\r\n            var hdrItems = [];\r\n            for (var i = 0; i < count; i++) {\r\n                hdrItems.push(this.hdrEle.children.item(i).innerHTML);\r\n            }\r\n            if (count > 0) {\r\n                while (this.hdrEle.firstElementChild) {\r\n                    detach(this.hdrEle.firstElementChild);\r\n                }\r\n                var tabItems_1 = this.createElement('div', { className: CLS_ITEMS });\r\n                this.hdrEle.appendChild(tabItems_1);\r\n                hdrItems.forEach(function (item, index) {\r\n                    _this.lastIndex = index;\r\n                    var attr = {\r\n                        className: CLS_ITEM, id: CLS_ITEM + _this.tabId + '_' + index,\r\n                        attrs: { role: 'tab', 'aria-controls': CLS_CONTENT + _this.tabId + '_' + index, 'aria-selected': 'false' }\r\n                    };\r\n                    var txt = _this.createElement('span', {\r\n                        className: CLS_TEXT, innerHTML: item, attrs: { 'role': 'presentation' }\r\n                    }).outerHTML;\r\n                    var cont = _this.createElement('div', {\r\n                        className: CLS_TEXT_WRAP, innerHTML: txt + _this.btnCls.outerHTML\r\n                    }).outerHTML;\r\n                    var wrap = _this.createElement('div', { className: CLS_WRAP, innerHTML: cont, attrs: { tabIndex: '-1' } });\r\n                    tabItems_1.appendChild(_this.createElement('div', attr));\r\n                    selectAll('.' + CLS_ITEM, tabItems_1)[index].appendChild(wrap);\r\n                });\r\n            }\r\n        }\r\n        this.tbObj = new Toolbar({\r\n            width: (hdrPlace === 'Left' || hdrPlace === 'Right') ? 'auto' : '100%',\r\n            height: (hdrPlace === 'Left' || hdrPlace === 'Right') ? '100%' : 'auto',\r\n            overflowMode: this.overflowMode,\r\n            items: (tabItems.length !== 0) ? tabItems : [],\r\n            clicked: this.clickHandler.bind(this),\r\n            scrollStep: this.scrollStep,\r\n            enableHtmlSanitizer: this.enableHtmlSanitizer\r\n        });\r\n        this.tbObj.isStringTemplate = true;\r\n        this.tbObj.createElement = this.createElement;\r\n        this.tbObj.appendTo(this.hdrEle);\r\n        attributes(this.hdrEle, { 'aria-label': 'tab-header' });\r\n        this.updateOrientationAttribute();\r\n        this.setCloseButton(this.showCloseButton);\r\n    };\r\n    Tab.prototype.renderContent = function () {\r\n        this.cntEle = select('.' + CLS_CONTENT, this.element);\r\n        var hdrItem = selectAll('.' + CLS_TB_ITEM, this.element);\r\n        if (this.isTemplate) {\r\n            this.cnt = (this.cntEle.children.length > 0) ? this.cntEle.innerHTML : '';\r\n            var contents = this.cntEle.children;\r\n            for (var i = 0; i < hdrItem.length; i++) {\r\n                if (contents.length - 1 >= i) {\r\n                    addClass([contents.item(i)], CLS_ITEM);\r\n                    attributes(contents.item(i), { 'role': 'tabpanel', 'aria-labelledby': CLS_ITEM + this.tabId + '_' + i });\r\n                    contents.item(i).id = CLS_CONTENT + this.tabId + '_' + i;\r\n                }\r\n            }\r\n        }\r\n    };\r\n    Tab.prototype.reRenderItems = function () {\r\n        this.renderContainer();\r\n        if (!isNOU(this.cntEle)) {\r\n            this.touchModule = new Touch(this.cntEle, { swipe: this.swipeHandler.bind(this) });\r\n        }\r\n    };\r\n    Tab.prototype.parseObject = function (items, index) {\r\n        var _this = this;\r\n        var tbCount = selectAll('.e-tab-header .' + CLS_TB_ITEM, this.element).length;\r\n        var tItems = [];\r\n        var txtWrapEle;\r\n        var spliceArray = [];\r\n        var i = 0;\r\n        items.forEach(function (item, i) {\r\n            var pos = (isNOU(item.header) || isNOU(item.header.iconPosition)) ? '' : item.header.iconPosition;\r\n            var css = (isNOU(item.header) || isNOU(item.header.iconCss)) ? '' : item.header.iconCss;\r\n            if ((isNOU(item.headerTemplate)) && (isNOU(item.header) || isNOU(item.header.text) ||\r\n                ((item.header.text.length === 0)) && (css === ''))) {\r\n                spliceArray.push(i);\r\n                return;\r\n            }\r\n            var txt = item.headerTemplate || item.header.text;\r\n            if (typeof txt === 'string' && _this.enableHtmlSanitizer) {\r\n                txt = SanitizeHtmlHelper.sanitize(txt);\r\n            }\r\n            var itemIndex;\r\n            if (_this.isReplace && !isNOU(_this.tbId) && _this.tbId !== '') {\r\n                var num = (_this.tbId.indexOf('_'));\r\n                itemIndex = parseInt(_this.tbId.substring(num + 1), 10);\r\n                _this.tbId = '';\r\n            }\r\n            else {\r\n                itemIndex = index + i;\r\n            }\r\n            var addIndex = _this.isAdd ? tbCount + i : _this.lastIndex + 1;\r\n            _this.lastIndex = ((tbCount === 0) ? i : ((_this.isReplace) ? (itemIndex) : (addIndex)));\r\n            var disabled = (item.disabled) ? ' ' + CLS_DISABLE + ' ' + CLS_OVERLAY : '';\r\n            var hidden = (item.visible === false) ? ' ' + CLS_HIDDEN : '';\r\n            txtWrapEle = _this.createElement('div', { className: CLS_TEXT, attrs: { 'role': 'presentation' } });\r\n            var tHtml = ((txt instanceof Object) ? txt.outerHTML : txt);\r\n            var txtEmpty = (!isNOU(tHtml) && tHtml !== '');\r\n            if (!isNOU(txt.tagName)) {\r\n                txtWrapEle.appendChild(txt);\r\n            }\r\n            else {\r\n                _this.headerTextCompile(txtWrapEle, txt, i);\r\n            }\r\n            var tEle;\r\n            var icon = _this.createElement('span', {\r\n                className: CLS_ICONS + ' ' + CLS_TAB_ICON + ' ' + CLS_ICON + '-' + pos + ' ' + css\r\n            });\r\n            var tCont = _this.createElement('div', { className: CLS_TEXT_WRAP });\r\n            tCont.appendChild(txtWrapEle);\r\n            if ((txt !== '' && txt !== undefined) && css !== '') {\r\n                if ((pos === 'left' || pos === 'top')) {\r\n                    tCont.insertBefore(icon, tCont.firstElementChild);\r\n                }\r\n                else {\r\n                    tCont.appendChild(icon);\r\n                }\r\n                tEle = txtWrapEle;\r\n                _this.isIconAlone = false;\r\n            }\r\n            else {\r\n                tEle = ((css === '') ? txtWrapEle : icon);\r\n                if (tEle === icon) {\r\n                    detach(txtWrapEle);\r\n                    tCont.appendChild(icon);\r\n                    _this.isIconAlone = true;\r\n                }\r\n            }\r\n            var wrapAttrs = (item.disabled) ? {} : { tabIndex: '-1' };\r\n            tCont.appendChild(_this.btnCls.cloneNode(true));\r\n            var wrap = _this.createElement('div', { className: CLS_WRAP, attrs: wrapAttrs });\r\n            wrap.appendChild(tCont);\r\n            if (_this.itemIndexArray === []) {\r\n                _this.itemIndexArray.push(CLS_ITEM + _this.tabId + '_' + _this.lastIndex);\r\n            }\r\n            else {\r\n                _this.itemIndexArray.splice((index + i), 0, CLS_ITEM + _this.tabId + '_' + _this.lastIndex);\r\n            }\r\n            var attrObj = {\r\n                id: CLS_ITEM + _this.tabId + '_' + _this.lastIndex, role: 'tab', 'aria-selected': 'false'\r\n            };\r\n            var tItem = { htmlAttributes: attrObj, template: wrap };\r\n            tItem.cssClass = ((item.cssClass !== undefined) ? item.cssClass : ' ') + ' ' + disabled + ' ' + hidden + ' '\r\n                + ((css !== '') ? 'e-i' + pos : '') + ' ' + ((!txtEmpty) ? CLS_ICON : '');\r\n            if (pos === 'top' || pos === 'bottom') {\r\n                _this.element.classList.add('e-vertical-icon');\r\n            }\r\n            tItems.push(tItem);\r\n            i++;\r\n        });\r\n        if (!this.isAdd) {\r\n            spliceArray.forEach(function (spliceItemIndex) {\r\n                _this.items.splice(spliceItemIndex, 1);\r\n            });\r\n        }\r\n        if (this.isIconAlone) {\r\n            this.element.classList.add(CLS_ICON_TAB);\r\n        }\r\n        else {\r\n            this.element.classList.remove(CLS_ICON_TAB);\r\n        }\r\n        return tItems;\r\n    };\r\n    Tab.prototype.removeActiveClass = function () {\r\n        var tabHeader = this.getTabHeader();\r\n        if (tabHeader) {\r\n            var tabItems = selectAll('.' + CLS_TB_ITEM + '.' + CLS_ACTIVE, tabHeader);\r\n            [].slice.call(tabItems).forEach(function (node) { return node.classList.remove(CLS_ACTIVE); });\r\n        }\r\n    };\r\n    Tab.prototype.checkPopupOverflow = function (ele) {\r\n        this.tbPop = select('.' + CLS_TB_POP, this.element);\r\n        var popIcon = select('.e-hor-nav', this.element);\r\n        var tbrItems = select('.' + CLS_TB_ITEMS, this.element);\r\n        var lastChild = tbrItems.lastChild;\r\n        var isOverflow = false;\r\n        if (!this.isVertical() && ((this.enableRtl && ((popIcon.offsetLeft + popIcon.offsetWidth) > tbrItems.offsetLeft))\r\n            || (!this.enableRtl && popIcon.offsetLeft < tbrItems.offsetWidth))) {\r\n            isOverflow = true;\r\n        }\r\n        else if (this.isVertical() && (popIcon.offsetTop < lastChild.offsetTop + lastChild.offsetHeight)) {\r\n            isOverflow = true;\r\n        }\r\n        if (isOverflow) {\r\n            ele.classList.add(CLS_TB_POPUP);\r\n            this.tbPop.insertBefore(ele, selectAll('.' + CLS_TB_POPUP, this.tbPop)[0]);\r\n        }\r\n        return true;\r\n    };\r\n    Tab.prototype.popupHandler = function (target) {\r\n        var ripEle = target.querySelector('.e-ripple-element');\r\n        if (!isNOU(ripEle)) {\r\n            ripEle.outerHTML = '';\r\n            target.querySelector('.' + CLS_WRAP).classList.remove('e-ripple');\r\n        }\r\n        this.tbItem = selectAll('.' + CLS_TB_ITEMS + ' .' + CLS_TB_ITEM, this.hdrEle);\r\n        var lastChild = this.tbItem[this.tbItem.length - 1];\r\n        if (this.tbItem.length !== 0) {\r\n            target.classList.remove(CLS_TB_POPUP);\r\n            target.removeAttribute('style');\r\n            this.tbItems.appendChild(target);\r\n            this.actEleId = target.id;\r\n            if (this.checkPopupOverflow(lastChild)) {\r\n                var prevEle = this.tbItems.lastChild.previousElementSibling;\r\n                this.checkPopupOverflow(prevEle);\r\n            }\r\n            this.isPopup = true;\r\n        }\r\n        return selectAll('.' + CLS_TB_ITEM, this.tbItems).length - 1;\r\n    };\r\n    Tab.prototype.updateOrientationAttribute = function () {\r\n        attributes(this.element, { 'aria-orientation': (this.isVertical() ? 'vertical' : 'horizontal') });\r\n    };\r\n    Tab.prototype.setCloseButton = function (val) {\r\n        var trg = select('.' + CLS_HEADER, this.element);\r\n        if (val === true) {\r\n            trg.classList.add(CLS_CLOSE_SHOW);\r\n        }\r\n        else {\r\n            trg.classList.remove(CLS_CLOSE_SHOW);\r\n        }\r\n        this.tbObj.refreshOverflow();\r\n        this.refreshActElePosition();\r\n    };\r\n    Tab.prototype.prevCtnAnimation = function (prev, current) {\r\n        var animation;\r\n        var checkRTL = this.enableRtl || this.element.classList.contains(CLS_RTL);\r\n        if (this.isPopup || prev <= current) {\r\n            if (this.animation.previous.effect === 'SlideLeftIn') {\r\n                animation = {\r\n                    name: 'SlideLeftOut',\r\n                    duration: this.animation.previous.duration, timingFunction: this.animation.previous.easing\r\n                };\r\n            }\r\n            else {\r\n                animation = null;\r\n            }\r\n        }\r\n        else {\r\n            if (this.animation.next.effect === 'SlideRightIn') {\r\n                animation = {\r\n                    name: 'SlideRightOut',\r\n                    duration: this.animation.next.duration, timingFunction: this.animation.next.easing\r\n                };\r\n            }\r\n            else {\r\n                animation = null;\r\n            }\r\n        }\r\n        return animation;\r\n    };\r\n    Tab.prototype.triggerPrevAnimation = function (oldCnt, prevIndex) {\r\n        var _this = this;\r\n        var animateObj = this.prevCtnAnimation(prevIndex, this.selectedItem);\r\n        if (!isNOU(animateObj)) {\r\n            animateObj.begin = function () {\r\n                setStyle(oldCnt, { 'position': 'absolute' });\r\n                oldCnt.classList.add(CLS_PROGRESS);\r\n                oldCnt.classList.add('e-view');\r\n            };\r\n            animateObj.end = function () {\r\n                oldCnt.style.display = 'none';\r\n                oldCnt.classList.remove(CLS_ACTIVE);\r\n                oldCnt.classList.remove(CLS_PROGRESS);\r\n                oldCnt.classList.remove('e-view');\r\n                setStyle(oldCnt, { 'display': '', 'position': '' });\r\n                if (oldCnt.childNodes.length === 0 && !_this.isTemplate) {\r\n                    detach(oldCnt);\r\n                }\r\n            };\r\n            new Animation(animateObj).animate(oldCnt);\r\n        }\r\n        else {\r\n            oldCnt.classList.remove(CLS_ACTIVE);\r\n        }\r\n    };\r\n    Tab.prototype.triggerAnimation = function (id, value) {\r\n        var _this = this;\r\n        var prevIndex = this.prevIndex;\r\n        var oldCnt;\r\n        var itemCollection = [].slice.call(this.element.querySelector('.' + CLS_CONTENT).children);\r\n        itemCollection.forEach(function (item) {\r\n            if (item.id === _this.prevActiveEle) {\r\n                oldCnt = item;\r\n            }\r\n        });\r\n        var prevEle = this.tbItem[prevIndex];\r\n        var newCnt = this.getTrgContent(this.cntEle, this.extIndex(id));\r\n        if (isNOU(oldCnt) && !isNOU(prevEle)) {\r\n            var idNo = this.extIndex(prevEle.id);\r\n            oldCnt = this.getTrgContent(this.cntEle, idNo);\r\n        }\r\n        if (!isNOU(newCnt)) {\r\n            this.prevActiveEle = newCnt.id;\r\n        }\r\n        if (this.initRender || value === false || this.animation === {} || isNOU(this.animation)) {\r\n            if (oldCnt && oldCnt !== newCnt) {\r\n                oldCnt.classList.remove(CLS_ACTIVE);\r\n            }\r\n            return;\r\n        }\r\n        var cnt = select('.' + CLS_CONTENT, this.element);\r\n        var animateObj;\r\n        if (this.prevIndex > this.selectedItem && !this.isPopup) {\r\n            var openEff = this.animation.previous.effect;\r\n            animateObj = {\r\n                name: ((openEff === 'None') ? '' : ((openEff !== 'SlideLeftIn') ? openEff : 'SlideLeftIn')),\r\n                duration: this.animation.previous.duration,\r\n                timingFunction: this.animation.previous.easing\r\n            };\r\n        }\r\n        else if (this.isPopup || this.prevIndex < this.selectedItem || this.prevIndex === this.selectedItem) {\r\n            var clsEff = this.animation.next.effect;\r\n            animateObj = {\r\n                name: ((clsEff === 'None') ? '' : ((clsEff !== 'SlideRightIn') ? clsEff : 'SlideRightIn')),\r\n                duration: this.animation.next.duration,\r\n                timingFunction: this.animation.next.easing\r\n            };\r\n        }\r\n        animateObj.progress = function () {\r\n            cnt.classList.add(CLS_PROGRESS);\r\n            _this.setActiveBorder();\r\n        };\r\n        animateObj.end = function () {\r\n            cnt.classList.remove(CLS_PROGRESS);\r\n            newCnt.classList.add(CLS_ACTIVE);\r\n        };\r\n        if (!this.initRender && !isNOU(oldCnt)) {\r\n            this.triggerPrevAnimation(oldCnt, prevIndex);\r\n        }\r\n        this.isPopup = false;\r\n        if (animateObj.name === '') {\r\n            newCnt.classList.add(CLS_ACTIVE);\r\n        }\r\n        else {\r\n            new Animation(animateObj).animate(newCnt);\r\n        }\r\n    };\r\n    Tab.prototype.keyPressed = function (trg) {\r\n        var trgParent = closest(trg, '.' + CLS_HEADER + ' .' + CLS_TB_ITEM);\r\n        var trgIndex = this.getEleIndex(trgParent);\r\n        if (!isNOU(this.popEle) && trg.classList.contains('e-hor-nav')) {\r\n            (this.popEle.classList.contains(CLS_POPUP_OPEN)) ? this.popObj.hide(this.hide) : this.popObj.show(this.show);\r\n        }\r\n        else if (trg.classList.contains('e-scroll-nav')) {\r\n            trg.click();\r\n        }\r\n        else {\r\n            if (!isNOU(trgParent) && trgParent.classList.contains(CLS_ACTIVE) === false) {\r\n                this.selectTab(trgIndex, null, true);\r\n                if (!isNOU(this.popEle)) {\r\n                    this.popObj.hide(this.hide);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    Tab.prototype.getTabHeader = function () {\r\n        if (isNOU(this.element)) {\r\n            return undefined;\r\n        }\r\n        var headers = [].slice.call(this.element.children).filter(function (e) { return e.classList.contains(CLS_HEADER); });\r\n        if (headers.length > 0) {\r\n            return headers[0];\r\n        }\r\n        else {\r\n            var wrap = [].slice.call(this.element.children).filter(function (e) { return !e.classList.contains(CLS_BLA_TEM); })[0];\r\n            if (!wrap) {\r\n                return undefined;\r\n            }\r\n            return [].slice.call(wrap.children).filter(function (e) { return e.classList.contains(CLS_HEADER); })[0];\r\n        }\r\n    };\r\n    Tab.prototype.getEleIndex = function (item) {\r\n        return Array.prototype.indexOf.call(selectAll('.' + CLS_TB_ITEM, this.getTabHeader()), item);\r\n    };\r\n    Tab.prototype.extIndex = function (id) {\r\n        return id.replace(CLS_ITEM + this.tabId + '_', '');\r\n    };\r\n    Tab.prototype.expTemplateContent = function () {\r\n        var _this = this;\r\n        this.templateEle.forEach(function (eleStr) {\r\n            if (!isNOU(_this.element.querySelector(eleStr))) {\r\n                document.body.appendChild(_this.element.querySelector(eleStr)).style.display = 'none';\r\n            }\r\n        });\r\n    };\r\n    Tab.prototype.templateCompile = function (ele, cnt, index) {\r\n        var tempEle = this.createElement('div');\r\n        this.compileElement(tempEle, cnt, 'content', index);\r\n        if (tempEle.childNodes.length !== 0) {\r\n            ele.appendChild(tempEle);\r\n        }\r\n        if (this.isReact) {\r\n            this.renderReactTemplates();\r\n        }\r\n    };\r\n    Tab.prototype.compileElement = function (ele, val, prop, index) {\r\n        var templateFn;\r\n        if (typeof val === 'string') {\r\n            val = val.trim();\r\n            ele.innerHTML = SanitizeHtmlHelper.sanitize(val);\r\n        }\r\n        else {\r\n            templateFn = compile(val);\r\n        }\r\n        var templateFUN;\r\n        if (!isNOU(templateFn)) {\r\n            templateFUN = templateFn({}, this, prop);\r\n        }\r\n        if (!isNOU(templateFn) && templateFUN.length > 0) {\r\n            [].slice.call(templateFUN).forEach(function (el) {\r\n                ele.appendChild(el);\r\n            });\r\n        }\r\n    };\r\n    Tab.prototype.headerTextCompile = function (element, text, index) {\r\n        this.compileElement(element, text, 'headerTemplate', index);\r\n    };\r\n    Tab.prototype.getContent = function (ele, cnt, callType, index) {\r\n        var eleStr;\r\n        if (typeof cnt === 'string' || isNOU(cnt.innerHTML)) {\r\n            if (typeof cnt === 'string' && this.enableHtmlSanitizer) {\r\n                cnt = SanitizeHtmlHelper.sanitize(cnt);\r\n            }\r\n            if (cnt[0] === '.' || cnt[0] === '#') {\r\n                if (document.querySelectorAll(cnt).length) {\r\n                    var eleVal = document.querySelector(cnt);\r\n                    eleStr = eleVal.outerHTML.trim();\r\n                    if (callType === 'clone') {\r\n                        ele.appendChild(eleVal.cloneNode(true));\r\n                    }\r\n                    else {\r\n                        ele.appendChild(eleVal);\r\n                        eleVal.style.display = '';\r\n                    }\r\n                }\r\n                else {\r\n                    this.templateCompile(ele, cnt, index);\r\n                }\r\n            }\r\n            else {\r\n                this.templateCompile(ele, cnt, index);\r\n            }\r\n        }\r\n        else {\r\n            ele.appendChild(cnt);\r\n        }\r\n        if (!isNOU(eleStr)) {\r\n            if (this.templateEle.indexOf(cnt.toString()) === -1) {\r\n                this.templateEle.push(cnt.toString());\r\n            }\r\n        }\r\n    };\r\n    Tab.prototype.getTrgContent = function (cntEle, no) {\r\n        var ele;\r\n        if (this.element.classList.contains(CLS_NEST)) {\r\n            ele = select('.' + CLS_NEST + '> .' + CLS_CONTENT + ' > #' + CLS_CONTENT + this.tabId + '_' + no, this.element);\r\n        }\r\n        else {\r\n            ele = this.findEle(cntEle.children, CLS_CONTENT + this.tabId + '_' + no);\r\n        }\r\n        return ele;\r\n    };\r\n    Tab.prototype.findEle = function (items, key) {\r\n        var ele;\r\n        for (var i = 0; i < items.length; i++) {\r\n            if (items[i].id === key) {\r\n                ele = items[i];\r\n                break;\r\n            }\r\n        }\r\n        return ele;\r\n    };\r\n    Tab.prototype.isVertical = function () {\r\n        var isVertical = (this.headerPlacement === 'Left' || this.headerPlacement === 'Right') ? true : false;\r\n        this.scrCntClass = (isVertical) ? CLS_VSCRCNT : CLS_HSCRCNT;\r\n        return isVertical;\r\n    };\r\n    Tab.prototype.addVerticalClass = function () {\r\n        if (this.isVertical()) {\r\n            var tbPos = (this.headerPlacement === 'Left') ? CLS_VLEFT : CLS_VRIGHT;\r\n            addClass([this.hdrEle], [CLS_VERTICAL, tbPos]);\r\n            if (!this.element.classList.contains(CLS_NEST)) {\r\n                addClass([this.element], [CLS_VTAB, tbPos]);\r\n            }\r\n            else {\r\n                addClass([this.hdrEle], [CLS_VTAB, tbPos]);\r\n            }\r\n        }\r\n        if (this.headerPlacement === 'Bottom') {\r\n            addClass([this.hdrEle], [CLS_HBOTTOM]);\r\n        }\r\n    };\r\n    Tab.prototype.updatePopAnimationConfig = function () {\r\n        this.show = { name: (this.isVertical() ? 'FadeIn' : 'SlideDown'), duration: 100 };\r\n        this.hide = { name: (this.isVertical() ? 'FadeOut' : 'SlideUp'), duration: 100 };\r\n    };\r\n    Tab.prototype.changeOrientation = function (place) {\r\n        this.setOrientation(place, this.hdrEle);\r\n        var activeTab = this.hdrEle.querySelector('.' + CLS_ACTIVE);\r\n        var isVertical = this.hdrEle.classList.contains(CLS_VERTICAL) ? true : false;\r\n        removeClass([this.element], [CLS_VTAB]);\r\n        removeClass([this.hdrEle], [CLS_VERTICAL, CLS_VLEFT, CLS_VRIGHT]);\r\n        if (isVertical !== this.isVertical()) {\r\n            this.changeToolbarOrientation();\r\n            if (!isNOU(activeTab) && activeTab.classList.contains(CLS_TB_POPUP)) {\r\n                this.popupHandler(activeTab);\r\n            }\r\n        }\r\n        this.addVerticalClass();\r\n        this.updateOrientationAttribute();\r\n        this.setActiveBorder();\r\n        this.focusItem();\r\n    };\r\n    Tab.prototype.focusItem = function () {\r\n        var curActItem = select(' #' + CLS_ITEM + this.tabId + '_' + this.selectedItem, this.hdrEle);\r\n        if (!isNOU(curActItem)) {\r\n            curActItem.firstElementChild.focus();\r\n        }\r\n    };\r\n    Tab.prototype.changeToolbarOrientation = function () {\r\n        this.tbObj.setProperties({ height: (this.isVertical() ? '100%' : 'auto'), width: (this.isVertical() ? 'auto' : '100%') }, true);\r\n        this.tbObj.changeOrientation();\r\n        this.updatePopAnimationConfig();\r\n    };\r\n    Tab.prototype.setOrientation = function (place, ele) {\r\n        var headerPos = Array.prototype.indexOf.call(this.element.children, ele);\r\n        var contentPos = Array.prototype.indexOf.call(this.element.children, this.element.querySelector('.' + CLS_CONTENT));\r\n        if (place === 'Bottom' && (contentPos > headerPos)) {\r\n            this.element.appendChild(ele);\r\n        }\r\n        else {\r\n            removeClass([ele], [CLS_HBOTTOM]);\r\n            this.element.insertBefore(ele, select('.' + CLS_CONTENT, this.element));\r\n        }\r\n    };\r\n    Tab.prototype.setCssClass = function (ele, cls, val) {\r\n        if (cls === '') {\r\n            return;\r\n        }\r\n        var list = cls.split(' ');\r\n        for (var i = 0; i < list.length; i++) {\r\n            if (val) {\r\n                ele.classList.add(list[i]);\r\n            }\r\n            else {\r\n                ele.classList.remove(list[i]);\r\n            }\r\n        }\r\n    };\r\n    Tab.prototype.setContentHeight = function (val) {\r\n        if (this.element.classList.contains(CLS_FILL)) {\r\n            removeClass([this.element], [CLS_FILL]);\r\n        }\r\n        if (isNOU(this.cntEle)) {\r\n            return;\r\n        }\r\n        var hdrEle = this.getTabHeader();\r\n        if (this.heightAdjustMode === 'None') {\r\n            if (this.height === 'auto') {\r\n                return;\r\n            }\r\n            else {\r\n                if (!this.isVertical()) {\r\n                    setStyle(this.cntEle, { 'height': (this.element.offsetHeight - hdrEle.offsetHeight) + 'px' });\r\n                }\r\n            }\r\n        }\r\n        else if (this.heightAdjustMode === 'Fill') {\r\n            addClass([this.element], [CLS_FILL]);\r\n            setStyle(this.element, { 'height': '100%' });\r\n            setStyle(this.cntEle, { 'height': (this.element.offsetHeight - hdrEle.offsetHeight) + 'px' });\r\n        }\r\n        else if (this.heightAdjustMode === 'Auto') {\r\n            if (this.isTemplate === true) {\r\n                var cnt = selectAll('.' + CLS_CONTENT + ' > .' + CLS_ITEM, this.element);\r\n                for (var i = 0; i < cnt.length; i++) {\r\n                    cnt[i].setAttribute('style', 'display:block; visibility: visible');\r\n                    this.maxHeight = Math.max(this.maxHeight, this.getHeight(cnt[i]));\r\n                    cnt[i].style.removeProperty('display');\r\n                    cnt[i].style.removeProperty('visibility');\r\n                }\r\n            }\r\n            else {\r\n                this.cntEle = select('.' + CLS_CONTENT, this.element);\r\n                if (val === true) {\r\n                    this.cntEle.appendChild(this.createElement('div', {\r\n                        id: (CLS_CONTENT + this.tabId + '_' + 0), className: CLS_ITEM + ' ' + CLS_ACTIVE,\r\n                        attrs: { 'role': 'tabpanel', 'aria-labelledby': CLS_ITEM + this.tabId + '_' + 0 }\r\n                    }));\r\n                }\r\n                var ele = this.cntEle.children.item(0);\r\n                for (var i = 0; i < this.items.length; i++) {\r\n                    this.getContent(ele, this.items[i].content, 'clone', i);\r\n                    this.maxHeight = Math.max(this.maxHeight, this.getHeight(ele));\r\n                    while (ele.firstChild) {\r\n                        ele.removeChild(ele.firstChild);\r\n                    }\r\n                }\r\n                if (this.isReact) {\r\n                    this.clearTemplate(['content']);\r\n                }\r\n                this.templateEle = [];\r\n                this.getContent(ele, this.items[0].content, 'render', 0);\r\n                if (this.prevIndex !== this.selectedItem) {\r\n                    ele.classList.remove(CLS_ACTIVE);\r\n                }\r\n            }\r\n            setStyle(this.cntEle, { 'height': this.maxHeight + 'px' });\r\n        }\r\n        else {\r\n            setStyle(this.cntEle, { 'height': 'auto' });\r\n        }\r\n    };\r\n    Tab.prototype.getHeight = function (ele) {\r\n        var cs = window.getComputedStyle(ele);\r\n        return ele.offsetHeight + parseFloat(cs.getPropertyValue('padding-top')) + parseFloat(cs.getPropertyValue('padding-bottom')) +\r\n            parseFloat(cs.getPropertyValue('margin-top')) + parseFloat(cs.getPropertyValue('margin-bottom'));\r\n    };\r\n    Tab.prototype.setActiveBorder = function () {\r\n        var trgHdrEle = this.getTabHeader();\r\n        var trg = select('.' + CLS_TB_ITEM + '.' + CLS_ACTIVE, trgHdrEle);\r\n        if (isNOU(trg)) {\r\n            return;\r\n        }\r\n        if (!this.reorderActiveTab) {\r\n            if (trg.classList.contains(CLS_TB_POPUP) && !this.bdrLine.classList.contains(CLS_HIDDEN)) {\r\n                this.bdrLine.classList.add(CLS_HIDDEN);\r\n            }\r\n            if (trgHdrEle && !trgHdrEle.classList.contains(CLS_REORDER_ACTIVE_ITEM)) {\r\n                trgHdrEle.classList.add(CLS_REORDER_ACTIVE_ITEM);\r\n            }\r\n        }\r\n        else if (trgHdrEle) {\r\n            trgHdrEle.classList.remove(CLS_REORDER_ACTIVE_ITEM);\r\n        }\r\n        var root = closest(trg, '.' + CLS_TAB);\r\n        if (this.element !== root) {\r\n            return;\r\n        }\r\n        this.tbItems = select('.' + CLS_TB_ITEMS, trgHdrEle);\r\n        var bar = select('.' + CLS_INDICATOR, trgHdrEle);\r\n        var scrollCnt = select('.' + CLS_TB_ITEMS + ' .' + this.scrCntClass, trgHdrEle);\r\n        if (this.isVertical()) {\r\n            setStyle(bar, { 'left': '', 'right': '' });\r\n            var tbHeight = (isNOU(scrollCnt)) ? this.tbItems.offsetHeight : scrollCnt.offsetHeight;\r\n            if (tbHeight !== 0) {\r\n                setStyle(bar, { 'top': trg.offsetTop + 'px', 'height': trg.offsetHeight + 'px' });\r\n            }\r\n            else {\r\n                setStyle(bar, { 'top': 0, 'height': 0 });\r\n            }\r\n        }\r\n        else {\r\n            if (this.overflowMode === 'MultiRow') {\r\n                var bar_1 = select('.' + CLS_INDICATOR, this.element);\r\n                setStyle(bar_1, { 'top': trg.offsetHeight + trg.offsetTop + 'px', 'height': '' });\r\n            }\r\n            else {\r\n                setStyle(bar, { 'top': '', 'height': '' });\r\n            }\r\n            var tbWidth = (isNOU(scrollCnt)) ? this.tbItems.offsetWidth : scrollCnt.offsetWidth;\r\n            if (tbWidth !== 0) {\r\n                setStyle(bar, { 'left': trg.offsetLeft + 'px', 'right': tbWidth - (trg.offsetLeft + trg.offsetWidth) + 'px' });\r\n            }\r\n            else {\r\n                setStyle(bar, { 'left': 'auto', 'right': 'auto' });\r\n            }\r\n        }\r\n        if (!isNOU(this.bdrLine) && !trg.classList.contains(CLS_TB_POPUP)) {\r\n            this.bdrLine.classList.remove(CLS_HIDDEN);\r\n        }\r\n    };\r\n    Tab.prototype.setActive = function (value, skipDataBind, isInteracted) {\r\n        if (skipDataBind === void 0) { skipDataBind = false; }\r\n        if (isInteracted === void 0) { isInteracted = false; }\r\n        this.tbItem = selectAll('.' + CLS_TB_ITEM, this.getTabHeader());\r\n        var trg = this.tbItem[value];\r\n        if (value < 0 || isNaN(value) || this.tbItem.length === 0) {\r\n            return;\r\n        }\r\n        if (value >= 0 && !skipDataBind) {\r\n            this.allowServerDataBinding = false;\r\n            this.setProperties({ selectedItem: value }, true);\r\n            this.allowServerDataBinding = true;\r\n            if (!this.initRender) {\r\n                this.serverDataBind();\r\n            }\r\n        }\r\n        if (trg.classList.contains(CLS_ACTIVE)) {\r\n            this.setActiveBorder();\r\n            return;\r\n        }\r\n        if (!this.isTemplate) {\r\n            var prev = this.tbItem[this.prevIndex];\r\n            if (!isNOU(prev)) {\r\n                prev.removeAttribute('aria-controls');\r\n            }\r\n            attributes(trg, { 'aria-controls': CLS_CONTENT + this.tabId + '_' + value });\r\n        }\r\n        var id = trg.id;\r\n        this.removeActiveClass();\r\n        trg.classList.add(CLS_ACTIVE);\r\n        this.tbItem[this.prevIndex].setAttribute('aria-selected', 'false');\r\n        trg.setAttribute('aria-selected', 'true');\r\n        var no = Number(this.extIndex(id));\r\n        if (isNOU(this.prevActiveEle)) {\r\n            this.prevActiveEle = CLS_CONTENT + this.tabId + '_' + no;\r\n        }\r\n        attributes(this.element, { 'aria-activedescendant': id });\r\n        if (this.isTemplate) {\r\n            if (select('.' + CLS_CONTENT, this.element).children.length > 0) {\r\n                var trg_1 = this.findEle(select('.' + CLS_CONTENT, this.element).children, CLS_CONTENT + this.tabId + '_' + no);\r\n                if (!isNOU(trg_1)) {\r\n                    trg_1.classList.add(CLS_ACTIVE);\r\n                }\r\n                this.triggerAnimation(id, this.enableAnimation);\r\n            }\r\n        }\r\n        else {\r\n            this.cntEle = select('.' + CLS_TAB + ' > .' + CLS_CONTENT, this.element);\r\n            var item = this.getTrgContent(this.cntEle, this.extIndex(id));\r\n            if (isNOU(item)) {\r\n                this.cntEle.appendChild(this.createElement('div', {\r\n                    id: CLS_CONTENT + this.tabId + '_' + this.extIndex(id), className: CLS_ITEM + ' ' + CLS_ACTIVE,\r\n                    attrs: { role: 'tabpanel', 'aria-labelledby': CLS_ITEM + this.tabId + '_' + this.extIndex(id) }\r\n                }));\r\n                var eleTrg = this.getTrgContent(this.cntEle, this.extIndex(id));\r\n                var itemIndex = Array.prototype.indexOf.call(this.itemIndexArray, id);\r\n                this.getContent(eleTrg, this.items[itemIndex].content, 'render', itemIndex);\r\n            }\r\n            else {\r\n                item.classList.add(CLS_ACTIVE);\r\n            }\r\n            this.triggerAnimation(id, this.enableAnimation);\r\n        }\r\n        this.setActiveBorder();\r\n        this.refreshItemVisibility(trg);\r\n        if (!this.initRender && !skipDataBind) {\r\n            trg.firstElementChild.focus();\r\n            var eventArg = {\r\n                previousItem: this.prevItem,\r\n                previousIndex: this.prevIndex,\r\n                selectedItem: trg,\r\n                selectedIndex: value,\r\n                selectedContent: select('#' + CLS_CONTENT + this.tabId + '_' + this.selectingID, this.content),\r\n                isSwiped: this.isSwipeed,\r\n                isInteracted: isInteracted\r\n            };\r\n            this.trigger('selected', eventArg);\r\n        }\r\n    };\r\n    Tab.prototype.contentReady = function () {\r\n        var id = this.setActiveContent();\r\n        this.triggerAnimation(id, this.enableAnimation);\r\n    };\r\n    Tab.prototype.setItems = function (items) {\r\n        this.isReplace = true;\r\n        this.tbItems = select('.' + CLS_TB_ITEMS, this.getTabHeader());\r\n        this.tbObj.items = this.parseObject(items, 0);\r\n        this.tbObj.dataBind();\r\n        this.isReplace = false;\r\n    };\r\n    Tab.prototype.setRTL = function (value) {\r\n        this.tbObj.enableRtl = value;\r\n        this.tbObj.dataBind();\r\n        this.setCssClass(this.element, CLS_RTL, value);\r\n        this.refreshActiveBorder();\r\n    };\r\n    Tab.prototype.refreshActiveBorder = function () {\r\n        if (!isNOU(this.bdrLine)) {\r\n            this.bdrLine.classList.add(CLS_HIDDEN);\r\n        }\r\n        this.setActiveBorder();\r\n    };\r\n    Tab.prototype.showPopup = function (config) {\r\n        var tbPop = select('.e-popup.e-toolbar-pop', this.hdrEle);\r\n        if (tbPop.classList.contains('e-popup-close')) {\r\n            var tbPopObj = (tbPop && tbPop.ej2_instances[0]);\r\n            tbPopObj.position.X = (this.headerPlacement === 'Left') ? 'left' : 'right';\r\n            tbPopObj.dataBind();\r\n            tbPopObj.show(config);\r\n        }\r\n    };\r\n    Tab.prototype.bindDraggable = function () {\r\n        var _this = this;\r\n        if (this.allowDragAndDrop) {\r\n            var tabHeader = this.element.querySelector('.' + CLS_HEADER);\r\n            var items = tabHeader.querySelectorAll('.' + CLS_TB_ITEM);\r\n            items.forEach(function (element) {\r\n                _this.initializeDrag(element);\r\n            });\r\n        }\r\n    };\r\n    Tab.prototype.wireEvents = function () {\r\n        this.bindDraggable();\r\n        window.addEventListener('resize', this.resizeContext);\r\n        EventHandler.add(this.element, 'mouseover', this.hoverHandler, this);\r\n        EventHandler.add(this.element, 'keydown', this.spaceKeyDown, this);\r\n        if (!isNOU(this.cntEle)) {\r\n            this.touchModule = new Touch(this.cntEle, { swipe: this.swipeHandler.bind(this) });\r\n        }\r\n        this.keyModule = new KeyboardEvents(this.element, { keyAction: this.keyHandler.bind(this), keyConfigs: this.keyConfigs });\r\n        this.tabKeyModule = new KeyboardEvents(this.element, {\r\n            keyAction: this.keyHandler.bind(this),\r\n            keyConfigs: { openPopup: 'shift+f10', tab: 'tab', shiftTab: 'shift+tab' },\r\n            eventName: 'keydown'\r\n        });\r\n    };\r\n    Tab.prototype.unWireEvents = function () {\r\n        if (!isNOU(this.keyModule)) {\r\n            this.keyModule.destroy();\r\n        }\r\n        if (!isNOU(this.tabKeyModule)) {\r\n            this.tabKeyModule.destroy();\r\n        }\r\n        if (!isNOU(this.cntEle) && !isNOU(this.touchModule)) {\r\n            this.touchModule.destroy();\r\n        }\r\n        window.removeEventListener('resize', this.resizeContext);\r\n        EventHandler.remove(this.element, 'mouseover', this.hoverHandler);\r\n        EventHandler.remove(this.element, 'keydown', this.spaceKeyDown);\r\n        this.element.classList.remove(CLS_RTL);\r\n        this.element.classList.remove(CLS_FOCUS);\r\n    };\r\n    Tab.prototype.clickHandler = function (args) {\r\n        this.element.classList.remove(CLS_FOCUS);\r\n        var trg = args.originalEvent.target;\r\n        var trgParent = closest(trg, '.' + CLS_TB_ITEM);\r\n        var trgIndex = this.getEleIndex(trgParent);\r\n        if (trg.classList.contains(CLS_ICON_CLOSE)) {\r\n            this.removeTab(trgIndex);\r\n        }\r\n        else if (this.isVertical() && closest(trg, '.' + CLS_HOR_NAV)) {\r\n            this.showPopup(this.show);\r\n        }\r\n        else {\r\n            this.isPopup = false;\r\n            if (!isNOU(trgParent) && (trgIndex !== this.selectedItem || trgIndex !== this.prevIndex)) {\r\n                this.selectTab(trgIndex, args.originalEvent, true);\r\n            }\r\n        }\r\n    };\r\n    Tab.prototype.swipeHandler = function (e) {\r\n        if (e.velocity < 3 && isNOU(e.originalEvent.changedTouches)) {\r\n            return;\r\n        }\r\n        if (e.originalEvent && this.isNested) {\r\n            e.originalEvent.stopPropagation();\r\n        }\r\n        this.isSwipeed = true;\r\n        if (e.swipeDirection === 'Right' && this.selectedItem !== 0) {\r\n            for (var k = this.selectedItem - 1; k >= 0; k--) {\r\n                if (!this.tbItem[k].classList.contains(CLS_HIDDEN)) {\r\n                    this.selectTab(k, null, true);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        else if (e.swipeDirection === 'Left' && (this.selectedItem !== selectAll('.' + CLS_TB_ITEM, this.element).length - 1)) {\r\n            for (var i = this.selectedItem + 1; i < this.tbItem.length; i++) {\r\n                if (!this.tbItem[i].classList.contains(CLS_HIDDEN)) {\r\n                    this.selectTab(i, null, true);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        this.isSwipeed = false;\r\n    };\r\n    Tab.prototype.spaceKeyDown = function (e) {\r\n        if ((e.keyCode === 32 && e.which === 32) || (e.keyCode === 35 && e.which === 35)) {\r\n            var clstHead = closest(e.target, '.' + CLS_HEADER);\r\n            if (!isNOU(clstHead)) {\r\n                e.preventDefault();\r\n            }\r\n        }\r\n    };\r\n    Tab.prototype.keyHandler = function (e) {\r\n        if (this.element.classList.contains(CLS_DISABLE)) {\r\n            return;\r\n        }\r\n        this.element.classList.add(CLS_FOCUS);\r\n        var trg = e.target;\r\n        var tabHeader = this.getTabHeader();\r\n        var actEle = select('.' + CLS_ACTIVE, tabHeader);\r\n        this.popEle = select('.' + CLS_TB_POP, tabHeader);\r\n        if (!isNOU(this.popEle)) {\r\n            this.popObj = this.popEle.ej2_instances[0];\r\n        }\r\n        var item = closest(document.activeElement, '.' + CLS_TB_ITEM);\r\n        var trgParent = closest(trg, '.' + CLS_TB_ITEM);\r\n        switch (e.action) {\r\n            case 'space':\r\n            case 'enter':\r\n                if (trg.parentElement.classList.contains(CLS_DISABLE)) {\r\n                    return;\r\n                }\r\n                if (e.action === 'enter' && trg.classList.contains('e-hor-nav')) {\r\n                    this.showPopup(this.show);\r\n                    break;\r\n                }\r\n                this.keyPressed(trg);\r\n                break;\r\n            case 'tab':\r\n            case 'shiftTab':\r\n                if (trg.classList.contains(CLS_WRAP)\r\n                    && closest(trg, '.' + CLS_TB_ITEM).classList.contains(CLS_ACTIVE) === false) {\r\n                    trg.setAttribute('tabindex', '-1');\r\n                }\r\n                if (this.popObj && isVisible(this.popObj.element)) {\r\n                    this.popObj.hide(this.hide);\r\n                }\r\n                actEle.children.item(0).setAttribute('tabindex', '0');\r\n                break;\r\n            case 'moveLeft':\r\n            case 'moveRight':\r\n                if (!isNOU(item)) {\r\n                    this.refreshItemVisibility(item);\r\n                }\r\n                break;\r\n            case 'openPopup':\r\n                e.preventDefault();\r\n                if (!isNOU(this.popEle) && this.popEle.classList.contains(CLS_POPUP_CLOSE)) {\r\n                    this.popObj.show(this.show);\r\n                }\r\n                break;\r\n            case 'delete':\r\n                if (this.showCloseButton === true && !isNOU(trgParent)) {\r\n                    var nxtSib = trgParent.nextSibling;\r\n                    if (!isNOU(nxtSib) && nxtSib.classList.contains(CLS_TB_ITEM)) {\r\n                        nxtSib.firstElementChild.focus();\r\n                    }\r\n                    this.removeTab(this.getEleIndex(trgParent));\r\n                }\r\n                this.setActiveBorder();\r\n                break;\r\n        }\r\n    };\r\n    Tab.prototype.refreshActElePosition = function () {\r\n        var activeEle = select('.' + CLS_TB_ITEM + '.' + CLS_TB_POPUP + '.' + CLS_ACTIVE, this.element);\r\n        if (!isNOU(activeEle) && this.reorderActiveTab) {\r\n            this.select(this.getEleIndex(activeEle));\r\n        }\r\n        this.refreshActiveBorder();\r\n    };\r\n    Tab.prototype.refreshItemVisibility = function (target) {\r\n        var scrCnt = select('.' + this.scrCntClass, this.tbItems);\r\n        if (!this.isVertical() && !isNOU(scrCnt)) {\r\n            var scrBar = select('.e-hscroll-bar', this.tbItems);\r\n            var scrStart = scrBar.scrollLeft;\r\n            var scrEnd = scrStart + scrBar.offsetWidth;\r\n            var eleStart = target.offsetLeft;\r\n            var eleWidth = target.offsetWidth;\r\n            var eleEnd = target.offsetLeft + target.offsetWidth;\r\n            if ((scrStart < eleStart) && (scrEnd < eleEnd)) {\r\n                var eleViewRange = scrEnd - eleStart;\r\n                scrBar.scrollLeft = scrStart + (eleWidth - eleViewRange);\r\n            }\r\n            else {\r\n                if ((scrStart > eleStart) && (scrEnd > eleEnd)) {\r\n                    var eleViewRange = eleEnd - scrStart;\r\n                    scrBar.scrollLeft = scrStart - (eleWidth - eleViewRange);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            return;\r\n        }\r\n    };\r\n    Tab.prototype.hoverHandler = function (e) {\r\n        var trg = e.target;\r\n        if (!isNOU(trg.classList) && trg.classList.contains(CLS_ICON_CLOSE)) {\r\n            trg.setAttribute('title', new L10n('tab', { closeButtonTitle: this.title }, this.locale).getConstant('closeButtonTitle'));\r\n        }\r\n    };\r\n    Tab.prototype.evalOnPropertyChangeItems = function (newProp, oldProp) {\r\n        if (!(newProp.items instanceof Array && oldProp.items instanceof Array)) {\r\n            var changedProp = Object.keys(newProp.items);\r\n            for (var i = 0; i < changedProp.length; i++) {\r\n                var index = parseInt(Object.keys(newProp.items)[i], 10);\r\n                var properties = Object.keys(newProp.items[index]);\r\n                for (var j = 0; j < properties.length; j++) {\r\n                    var oldVal = Object(oldProp.items[index])[properties[j]];\r\n                    var newVal = Object(newProp.items[index])[properties[j]];\r\n                    var hdr = this.element.querySelectorAll('.' + CLS_TB_ITEM)[index];\r\n                    var itemIndex = void 0;\r\n                    if (hdr && !isNOU(hdr.id) && hdr.id !== '') {\r\n                        var num = (hdr.id.lastIndexOf('_'));\r\n                        itemIndex = parseInt(hdr.id.substring(num + 1), 10);\r\n                    }\r\n                    else {\r\n                        itemIndex = index;\r\n                    }\r\n                    var hdrItem = select('.' + CLS_TB_ITEMS + ' #' + CLS_ITEM + this.tabId + '_' + itemIndex, this.element);\r\n                    var cntItem = select('.' + CLS_CONTENT + ' #' + CLS_CONTENT + this.tabId + '_' + itemIndex, this.element);\r\n                    if (properties[j] === 'header' || properties[j] === 'headerTemplate') {\r\n                        var icon = (isNOU(this.items[index].header) ||\r\n                            isNOU(this.items[index].header.iconCss)) ? '' : this.items[index].header.iconCss;\r\n                        var textVal = this.items[index].headerTemplate || this.items[index].header.text;\r\n                        if ((textVal === '') && (icon === '')) {\r\n                            this.removeTab(index);\r\n                        }\r\n                        else {\r\n                            this.tbId = hdr.id;\r\n                            var arr = [];\r\n                            arr.push(this.items[index]);\r\n                            this.items.splice(index, 1);\r\n                            this.itemIndexArray.splice(index, 1);\r\n                            this.tbObj.items.splice(index, 1);\r\n                            var isHiddenEle = hdrItem.classList.contains(CLS_HIDDEN);\r\n                            detach(hdrItem);\r\n                            this.isReplace = true;\r\n                            this.addTab(arr, index);\r\n                            if (isHiddenEle) {\r\n                                this.hideTab(index);\r\n                            }\r\n                            this.isReplace = false;\r\n                        }\r\n                    }\r\n                    if (properties[j] === 'content' && !isNOU(cntItem)) {\r\n                        var strVal = typeof newVal === 'string' || isNOU(newVal.innerHTML);\r\n                        if (strVal && (newVal[0] === '.' || newVal[0] === '#') && newVal.length) {\r\n                            var eleVal = document.querySelector(newVal);\r\n                            cntItem.appendChild(eleVal);\r\n                            eleVal.style.display = '';\r\n                        }\r\n                        else if (newVal === '' && oldVal[0] === '#') {\r\n                            document.body.appendChild(this.element.querySelector(oldVal)).style.display = 'none';\r\n                            cntItem.innerHTML = newVal;\r\n                        }\r\n                        else if (this.isReact) {\r\n                            cntItem.innerHTML = '';\r\n                            this.templateCompile(cntItem, newVal, index);\r\n                        }\r\n                        else if (typeof newVal !== 'function') {\r\n                            cntItem.innerHTML = newVal;\r\n                        }\r\n                    }\r\n                    if (properties[j] === 'cssClass') {\r\n                        if (!isNOU(hdrItem)) {\r\n                            hdrItem.classList.remove(oldVal);\r\n                            hdrItem.classList.add(newVal);\r\n                        }\r\n                        if (!isNOU(cntItem)) {\r\n                            cntItem.classList.remove(oldVal);\r\n                            cntItem.classList.add(newVal);\r\n                        }\r\n                    }\r\n                    if (properties[j] === 'disabled') {\r\n                        this.enableTab(index, ((newVal === true) ? false : true));\r\n                    }\r\n                    if (properties[j] === 'visible') {\r\n                        this.hideTab(index, ((newVal === true) ? false : true));\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            this.lastIndex = 0;\r\n            if (isNOU(this.tbObj)) {\r\n                this.reRenderItems();\r\n            }\r\n            else {\r\n                if (this.isRect) {\r\n                    this.clearTemplate();\r\n                }\r\n                this.setItems(newProp.items);\r\n                if (this.templateEle.length > 0) {\r\n                    this.expTemplateContent();\r\n                }\r\n                this.templateEle = [];\r\n                var selectElement = select('.' + CLS_TAB + ' > .' + CLS_CONTENT, this.element);\r\n                while (selectElement.firstElementChild) {\r\n                    detach(selectElement.firstElementChild);\r\n                }\r\n                this.select(this.selectedItem);\r\n            }\r\n        }\r\n    };\r\n    Tab.prototype.initializeDrag = function (target) {\r\n        var _this = this;\r\n        this.dragArea = !isNOU(this.dragArea) ? this.dragArea : '#' + this.element.id + ' ' + ('.' + CLS_HEADER);\r\n        var dragObj = new Draggable(target, {\r\n            dragArea: this.dragArea,\r\n            dragTarget: '.' + CLS_TB_ITEM,\r\n            clone: true,\r\n            helper: this.helper.bind(this),\r\n            dragStart: this.itemDragStart.bind(this),\r\n            drag: function (e) {\r\n                var dragIndex = _this.getEleIndex(_this.dragItem);\r\n                var dropIndex;\r\n                var dropItem;\r\n                var dragArgs = {\r\n                    draggedItem: _this.dragItem,\r\n                    event: e.event,\r\n                    target: e.target,\r\n                    droppedItem: e.target.closest('.' + CLS_TB_ITEM),\r\n                    clonedElement: _this.cloneElement,\r\n                    index: dragIndex\r\n                };\r\n                if (!isNOU(e.target.closest('.' + CLS_TAB)) && !e.target.closest('.' + CLS_TAB).isEqualNode(_this.element) &&\r\n                    _this.dragArea !== '.' + CLS_HEADER) {\r\n                    _this.trigger('dragging', dragArgs);\r\n                }\r\n                else {\r\n                    if (!(e.target.closest(_this.dragArea)) && _this.overflowMode !== 'Popup') {\r\n                        document.body.style.cursor = 'not-allowed';\r\n                        addClass([_this.cloneElement], CLS_HIDDEN);\r\n                        if (_this.dragItem.classList.contains(CLS_HIDDEN)) {\r\n                            removeClass([_this.dragItem], CLS_HIDDEN);\r\n                        }\r\n                        _this.dragItem.querySelector('.' + CLS_WRAP).style.visibility = 'visible';\r\n                    }\r\n                    else {\r\n                        document.body.style.cursor = '';\r\n                        _this.dragItem.querySelector('.' + CLS_WRAP).style.visibility = 'hidden';\r\n                        if (_this.cloneElement.classList.contains(CLS_HIDDEN)) {\r\n                            removeClass([_this.cloneElement], CLS_HIDDEN);\r\n                        }\r\n                    }\r\n                    if (_this.overflowMode === 'Scrollable' && !isNOU(_this.element.querySelector('.e-hscroll'))) {\r\n                        var scrollRightNavEle = _this.element.querySelector('.e-scroll-right-nav');\r\n                        var scrollLeftNavEle = _this.element.querySelector('.e-scroll-left-nav');\r\n                        var hscrollBar = _this.element.querySelector('.e-hscroll-bar');\r\n                        if (!isNOU(scrollRightNavEle) && Math.abs((scrollRightNavEle.offsetWidth / 2) +\r\n                            scrollRightNavEle.offsetLeft) > _this.cloneElement.offsetLeft + _this.cloneElement.offsetWidth) {\r\n                            hscrollBar.scrollLeft -= 10;\r\n                        }\r\n                        if (!isNOU(scrollLeftNavEle) && Math.abs((scrollLeftNavEle.offsetLeft + scrollLeftNavEle.offsetWidth) -\r\n                            _this.cloneElement.offsetLeft) > (scrollLeftNavEle.offsetWidth / 2)) {\r\n                            hscrollBar.scrollLeft += 10;\r\n                        }\r\n                    }\r\n                    _this.cloneElement.style.pointerEvents = 'none';\r\n                    dropItem = closest(e.target, '.' + CLS_TB_ITEM + '.e-draggable');\r\n                    var scrollContentWidth = 0;\r\n                    if (_this.overflowMode === 'Scrollable' && !isNOU(_this.element.querySelector('.e-hscroll'))) {\r\n                        scrollContentWidth = _this.element.querySelector('.e-hscroll-content').offsetWidth;\r\n                    }\r\n                    if (dropItem != null && !dropItem.isSameNode(_this.dragItem) &&\r\n                        dropItem.closest('.' + CLS_TAB).isSameNode(_this.dragItem.closest('.' + CLS_TAB))) {\r\n                        dropIndex = _this.getEleIndex(dropItem);\r\n                        if (dropIndex < dragIndex &&\r\n                            (Math.abs((dropItem.offsetLeft + dropItem.offsetWidth) -\r\n                                _this.cloneElement.offsetLeft) > (dropItem.offsetWidth / 2))) {\r\n                            _this.dragAction(dropItem, dragIndex, dropIndex);\r\n                        }\r\n                        if (dropIndex > dragIndex &&\r\n                            (Math.abs(dropItem.offsetWidth / 2) + dropItem.offsetLeft -\r\n                                scrollContentWidth) < _this.cloneElement.offsetLeft + _this.cloneElement.offsetWidth) {\r\n                            _this.dragAction(dropItem, dragIndex, dropIndex);\r\n                        }\r\n                    }\r\n                    _this.droppedIndex = _this.getEleIndex(_this.dragItem);\r\n                    _this.trigger('dragging', dragArgs);\r\n                }\r\n            },\r\n            dragStop: this.itemDragStop.bind(this)\r\n        });\r\n        this.draggableItems.push(dragObj);\r\n    };\r\n    Tab.prototype.helper = function (e) {\r\n        this.cloneElement = this.createElement('div');\r\n        if (e.element) {\r\n            this.cloneElement = (e.element.cloneNode(true));\r\n            addClass([this.cloneElement], 'e-tab-clone-element');\r\n            if (this.element.querySelector('.' + CLS_HEADER).classList.contains(CLS_CLOSE_SHOW)) {\r\n                addClass([this.cloneElement], CLS_CLOSE_SHOW);\r\n            }\r\n            removeClass([this.cloneElement.querySelector('.' + CLS_WRAP)], 'e-ripple');\r\n            if (!isNOU(this.cloneElement.querySelector('.e-ripple-element'))) {\r\n                remove(this.cloneElement.querySelector('.e-ripple-element'));\r\n            }\r\n            document.body.appendChild(this.cloneElement);\r\n        }\r\n        return this.cloneElement;\r\n    };\r\n    Tab.prototype.itemDragStart = function (e) {\r\n        var _this = this;\r\n        this.draggingItems = this.items.map(function (x) { return x; });\r\n        this.dragItem = e.element;\r\n        var dragArgs = {\r\n            draggedItem: e.element,\r\n            event: e.event,\r\n            target: e.target,\r\n            droppedItem: null,\r\n            index: this.getEleIndex(this.dragItem),\r\n            clonedElement: this.cloneElement,\r\n            cancel: false\r\n        };\r\n        this.trigger('onDragStart', dragArgs, function (tabitemDragArgs) {\r\n            if (tabitemDragArgs.cancel) {\r\n                detach(_this.cloneElement);\r\n            }\r\n            else {\r\n                _this.removeActiveClass();\r\n                addClass([_this.tbItems.querySelector('.' + CLS_INDICATOR)], CLS_HIDDEN);\r\n                _this.dragItem.querySelector('.' + CLS_WRAP).style.visibility = 'hidden';\r\n            }\r\n        });\r\n    };\r\n    Tab.prototype.dragAction = function (dropItem, dragsIndex, dropIndex) {\r\n        if (this.items.length > 0) {\r\n            var item = this.draggingItems[dragsIndex];\r\n            this.draggingItems.splice(dragsIndex, 1);\r\n            this.draggingItems.splice(dropIndex, 0, item);\r\n        }\r\n        if (this.overflowMode === 'MultiRow') {\r\n            dropItem.parentNode.insertBefore(this.dragItem, dropItem.nextElementSibling);\r\n        }\r\n        if (dragsIndex > dropIndex) {\r\n            if (!(this.dragItem.parentElement).isSameNode(dropItem.parentElement)) {\r\n                if (this.overflowMode === 'Extended') {\r\n                    if (dropItem.isSameNode(dropItem.parentElement.lastChild)) {\r\n                        var popupContainer = this.dragItem.parentNode;\r\n                        dropItem.parentNode.insertBefore(this.dragItem, dropItem);\r\n                        popupContainer.insertBefore(dropItem.parentElement.lastChild, popupContainer.childNodes[0]);\r\n                    }\r\n                    else {\r\n                        this.dragItem.parentNode.insertBefore((dropItem.parentElement.lastChild), this.dragItem.parentElement.childNodes[0]);\r\n                        dropItem.parentNode.insertBefore(this.dragItem, dropItem);\r\n                    }\r\n                }\r\n                else {\r\n                    var lastEle = (dropItem.parentElement).lastChild;\r\n                    if (dropItem.isSameNode(lastEle)) {\r\n                        var popupContainer = this.dragItem.parentNode;\r\n                        dropItem.parentNode.insertBefore(this.dragItem, dropItem);\r\n                        popupContainer.insertBefore(lastEle, popupContainer.childNodes[0]);\r\n                    }\r\n                    else {\r\n                        this.dragItem.parentNode.insertBefore((dropItem.parentElement).lastChild, this.dragItem.parentElement.childNodes[0]);\r\n                        dropItem.parentNode.insertBefore(this.dragItem, dropItem);\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                this.dragItem.parentNode.insertBefore(this.dragItem, dropItem);\r\n            }\r\n        }\r\n        if (dragsIndex < dropIndex) {\r\n            if (!(this.dragItem.parentElement).isSameNode(dropItem.parentElement)) {\r\n                if (this.overflowMode === 'Extended') {\r\n                    this.dragItem.parentElement.appendChild(dropItem.parentElement.firstElementChild);\r\n                    dropItem.parentNode.insertBefore(this.dragItem, dropItem.nextSibling);\r\n                }\r\n                else {\r\n                    this.dragItem.parentNode.insertBefore((dropItem.parentElement).lastChild, this.dragItem.parentElement.childNodes[0]);\r\n                    dropItem.parentNode.insertBefore(this.dragItem, dropItem);\r\n                }\r\n            }\r\n            else {\r\n                this.dragItem.parentNode.insertBefore(dropItem, this.dragItem);\r\n            }\r\n        }\r\n    };\r\n    Tab.prototype.itemDragStop = function (e) {\r\n        var _this = this;\r\n        detach(this.cloneElement);\r\n        this.dragItem.querySelector('.' + CLS_WRAP).style.visibility = 'visible';\r\n        document.body.style.cursor = '';\r\n        var dragStopArgs = {\r\n            draggedItem: this.dragItem,\r\n            event: e.event,\r\n            target: e.target,\r\n            droppedItem: this.tbItem[this.droppedIndex],\r\n            clonedElement: null,\r\n            index: this.droppedIndex,\r\n            cancel: false\r\n        };\r\n        this.trigger('dragged', dragStopArgs, function (tabItemDropArgs) {\r\n            if (tabItemDropArgs.cancel) {\r\n                _this.refresh();\r\n            }\r\n            else {\r\n                if (_this.items.length > 0 && _this.draggingItems.length > 0) {\r\n                    _this.items = _this.draggingItems;\r\n                    _this.selectedItem = _this.droppedIndex;\r\n                    _this.refresh();\r\n                }\r\n                else {\r\n                    _this.dragItem.querySelector('.' + CLS_WRAP).style.visibility = '';\r\n                    removeClass([_this.tbItems.querySelector('.' + CLS_INDICATOR)], CLS_HIDDEN);\r\n                    _this.selectTab(_this.droppedIndex, null, true);\r\n                }\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * Enables or disables the specified Tab item. On passing value as `false`, the item will be disabled.\r\n     *\r\n     * @param {number} index - Index value of target Tab item.\r\n     * @param {boolean} value - Boolean value that determines whether the command should be enabled or disabled.\r\n     * By default, isEnable is true.\r\n     * @returns {void}.\r\n     */\r\n    Tab.prototype.enableTab = function (index, value) {\r\n        var tbItems = selectAll('.' + CLS_TB_ITEM, this.element)[index];\r\n        if (isNOU(tbItems)) {\r\n            return;\r\n        }\r\n        if (value === true) {\r\n            tbItems.classList.remove(CLS_DISABLE, CLS_OVERLAY);\r\n            tbItems.firstElementChild.setAttribute('tabindex', '-1');\r\n        }\r\n        else {\r\n            tbItems.classList.add(CLS_DISABLE, CLS_OVERLAY);\r\n            tbItems.firstElementChild.removeAttribute('tabindex');\r\n            if (tbItems.classList.contains(CLS_ACTIVE)) {\r\n                this.select(index + 1);\r\n            }\r\n        }\r\n        if (!isNOU(this.items[index])) {\r\n            this.items[index].disabled = !value;\r\n            this.dataBind();\r\n        }\r\n        tbItems.setAttribute('aria-disabled', (value === true) ? 'false' : 'true');\r\n    };\r\n    /**\r\n     * Adds new items to the Tab that accepts an array as Tab items.\r\n     *\r\n     * @param {TabItemModel[]} items - An array of item that is added to the Tab.\r\n     * @param {number} index - Number value that determines where the items to be added. By default, index is 0.\r\n     * @returns {void}.\r\n     */\r\n    Tab.prototype.addTab = function (items, index) {\r\n        var _this = this;\r\n        var addArgs = { addedItems: items, cancel: false };\r\n        if (!this.isReplace) {\r\n            this.trigger('adding', addArgs, function (tabAddingArgs) {\r\n                if (!tabAddingArgs.cancel) {\r\n                    _this.addingTabContent(items, index);\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            this.addingTabContent(items, index);\r\n        }\r\n        if (this.isReact) {\r\n            this.renderReactTemplates();\r\n        }\r\n    };\r\n    Tab.prototype.addingTabContent = function (items, index) {\r\n        var _this = this;\r\n        var lastEleIndex = 0;\r\n        this.hdrEle = select('.' + CLS_HEADER, this.element);\r\n        if (isNOU(this.hdrEle)) {\r\n            this.items = items;\r\n            this.reRenderItems();\r\n        }\r\n        else {\r\n            var itemsCount = selectAll('.e-tab-header .' + CLS_TB_ITEM, this.element).length;\r\n            if (itemsCount !== 0) {\r\n                lastEleIndex = this.lastIndex + 1;\r\n            }\r\n            if (isNOU(index)) {\r\n                index = itemsCount - 1;\r\n            }\r\n            if (itemsCount < index || index < 0 || isNaN(index)) {\r\n                return;\r\n            }\r\n            if (itemsCount === 0 && !isNOU(this.hdrEle)) {\r\n                this.hdrEle.style.display = '';\r\n            }\r\n            if (!isNOU(this.bdrLine)) {\r\n                this.bdrLine.classList.add(CLS_HIDDEN);\r\n            }\r\n            this.tbItems = select('.' + CLS_TB_ITEMS, this.getTabHeader());\r\n            this.isAdd = true;\r\n            var tabItems = this.parseObject(items, index);\r\n            this.isAdd = false;\r\n            var i_1 = 0;\r\n            var textValue_1;\r\n            items.forEach(function (item, place) {\r\n                textValue_1 = item.headerTemplate || item.header.text;\r\n                if (!(isNOU(item.headerTemplate || item.header) ||\r\n                    isNOU(textValue_1) || (textValue_1.length === 0) && isNOU(item.header.iconCss))) {\r\n                    _this.items.splice((index + i_1), 0, item);\r\n                    i_1++;\r\n                }\r\n                if (_this.isTemplate && !isNOU(item.header) && !isNOU(item.header.text)) {\r\n                    var no = lastEleIndex + place;\r\n                    var ele = _this.createElement('div', {\r\n                        id: CLS_CONTENT + _this.tabId + '_' + no, className: CLS_ITEM,\r\n                        attrs: { role: 'tabpanel', 'aria-labelledby': CLS_ITEM + '_' + no }\r\n                    });\r\n                    _this.cntEle.insertBefore(ele, _this.cntEle.children[(index + place)]);\r\n                    var eleTrg = _this.getTrgContent(_this.cntEle, no.toString());\r\n                    _this.getContent(eleTrg, item.content, 'render', index);\r\n                }\r\n            });\r\n            this.tbObj.addItems(tabItems, index);\r\n            if (!this.isReplace) {\r\n                this.trigger('added', { addedItems: items });\r\n            }\r\n            if (this.selectedItem === index) {\r\n                this.select(index);\r\n            }\r\n            else {\r\n                this.setActiveBorder();\r\n            }\r\n            this.bindDraggable();\r\n        }\r\n    };\r\n    /**\r\n     * Removes the items in the Tab from the specified index.\r\n     *\r\n     * @param {number} index - Index of target item that is going to be removed.\r\n     * @returns {void}.\r\n     */\r\n    Tab.prototype.removeTab = function (index) {\r\n        var _this = this;\r\n        var trg = selectAll('.' + CLS_TB_ITEM, this.element)[index];\r\n        if (isNOU(trg)) {\r\n            return;\r\n        }\r\n        var removeArgs = { removedItem: trg, removedIndex: index, cancel: false };\r\n        this.trigger('removing', removeArgs, function (tabRemovingArgs) {\r\n            if (!tabRemovingArgs.cancel) {\r\n                _this.tbObj.removeItems(index);\r\n                if (_this.allowDragAndDrop && (index !== Array.prototype.indexOf.call(_this.itemIndexArray, trg.id))) {\r\n                    index = Array.prototype.indexOf.call(_this.itemIndexArray, trg.id);\r\n                }\r\n                _this.items.splice(index, 1);\r\n                _this.itemIndexArray.splice(index, 1);\r\n                _this.refreshActiveBorder();\r\n                var cntTrg = select('#' + CLS_CONTENT + _this.tabId + '_' + _this.extIndex(trg.id), select('.' + CLS_CONTENT, _this.element));\r\n                if (!isNOU(cntTrg)) {\r\n                    detach(cntTrg);\r\n                }\r\n                _this.trigger('removed', tabRemovingArgs);\r\n                if (trg.classList.contains(CLS_ACTIVE)) {\r\n                    index = (index > selectAll('.' + CLS_TB_ITEM + ':not(.' + CLS_TB_POPUP + ')', _this.element).length - 1) ? index - 1 : index;\r\n                    _this.enableAnimation = false;\r\n                    _this.selectedItem = index;\r\n                    _this.select(index);\r\n                }\r\n                if (selectAll('.' + CLS_TB_ITEM, _this.element).length === 0) {\r\n                    _this.hdrEle.style.display = 'none';\r\n                }\r\n                _this.enableAnimation = true;\r\n            }\r\n        });\r\n    };\r\n    /**\r\n     * Shows or hides the Tab that is in the specified index.\r\n     *\r\n     * @param {number} index - Index value of target item.\r\n     * @param {boolean} value - Based on this Boolean value, item will be hide (false) or show (true). By default, value is true.\r\n     * @returns {void}.\r\n     */\r\n    Tab.prototype.hideTab = function (index, value) {\r\n        var items;\r\n        var item = selectAll('.' + CLS_TB_ITEM, this.element)[index];\r\n        if (isNOU(item)) {\r\n            return;\r\n        }\r\n        if (isNOU(value)) {\r\n            value = true;\r\n        }\r\n        this.bdrLine.classList.add(CLS_HIDDEN);\r\n        if (value === true) {\r\n            item.classList.add(CLS_HIDDEN);\r\n            items = selectAll('.' + CLS_TB_ITEM + ':not(.' + CLS_HIDDEN + ')', this.tbItems);\r\n            if (items.length !== 0 && item.classList.contains(CLS_ACTIVE)) {\r\n                if (index !== 0) {\r\n                    for (var i = index - 1; i >= 0; i--) {\r\n                        if (!this.tbItem[i].classList.contains(CLS_HIDDEN)) {\r\n                            this.select(i);\r\n                            break;\r\n                        }\r\n                        else if (i === 0) {\r\n                            for (var k = index + 1; k < this.tbItem.length; k++) {\r\n                                if (!this.tbItem[k].classList.contains(CLS_HIDDEN)) {\r\n                                    this.select(k);\r\n                                    break;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    for (var k = index + 1; k < this.tbItem.length; k++) {\r\n                        if (!this.tbItem[k].classList.contains(CLS_HIDDEN)) {\r\n                            this.select(k);\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            else if (items.length === 0) {\r\n                this.element.classList.add(CLS_HIDDEN);\r\n            }\r\n        }\r\n        else {\r\n            this.element.classList.remove(CLS_HIDDEN);\r\n            items = selectAll('.' + CLS_TB_ITEM + ':not(.' + CLS_HIDDEN + ')', this.tbItems);\r\n            item.classList.remove(CLS_HIDDEN);\r\n            if (items.length === 0) {\r\n                this.select(index);\r\n            }\r\n        }\r\n        this.setActiveBorder();\r\n        item.setAttribute('aria-hidden', '' + value);\r\n        if (this.overflowMode === 'Popup' && this.tbObj) {\r\n            this.tbObj.refreshOverflow();\r\n        }\r\n    };\r\n    Tab.prototype.selectTab = function (args, event, isInteracted) {\r\n        if (event === void 0) { event = null; }\r\n        if (isInteracted === void 0) { isInteracted = false; }\r\n        this.isInteracted = isInteracted;\r\n        this.select(args, event);\r\n    };\r\n    /**\r\n     * Specifies the index or HTMLElement to select an item from the Tab.\r\n     *\r\n     * @param {number | HTMLElement} args - Index or DOM element is used for selecting an item from the Tab.\r\n     * @param {Event} event - An event which takes place in DOM.\r\n     * @returns {void}\r\n     */\r\n    Tab.prototype.select = function (args, event) {\r\n        var _this = this;\r\n        var tabHeader = this.getTabHeader();\r\n        this.tbItems = select('.' + CLS_TB_ITEMS, tabHeader);\r\n        this.tbItem = selectAll('.' + CLS_TB_ITEM, tabHeader);\r\n        this.content = select('.' + CLS_CONTENT, this.element);\r\n        this.prevItem = this.tbItem[this.prevIndex];\r\n        if (isNOU(this.selectedItem) || (this.selectedItem < 0) || (this.tbItem.length <= this.selectedItem) || isNaN(this.selectedItem)) {\r\n            this.selectedItem = 0;\r\n        }\r\n        else {\r\n            this.selectedID = this.extIndex(this.tbItem[this.selectedItem].id);\r\n        }\r\n        var trg = this.tbItem[args];\r\n        if (isNOU(trg)) {\r\n            this.selectedID = '0';\r\n        }\r\n        else {\r\n            this.selectingID = this.extIndex(trg.id);\r\n        }\r\n        if (!isNOU(this.prevItem) && !this.prevItem.classList.contains(CLS_DISABLE)) {\r\n            this.prevItem.children.item(0).setAttribute('tabindex', '-1');\r\n        }\r\n        var eventArg = {\r\n            event: event,\r\n            previousItem: this.prevItem,\r\n            previousIndex: this.prevIndex,\r\n            selectedItem: this.tbItem[this.selectedItem],\r\n            selectedIndex: this.selectedItem,\r\n            selectedContent: !isNOU(this.content) ?\r\n                select('#' + CLS_CONTENT + this.tabId + '_' + this.selectedID, this.content) : null,\r\n            selectingItem: trg,\r\n            selectingIndex: args,\r\n            selectingContent: !isNOU(this.content) ?\r\n                select('#' + CLS_CONTENT + this.tabId + '_' + this.selectingID, this.content) : null,\r\n            isSwiped: this.isSwipeed,\r\n            isInteracted: this.isInteracted,\r\n            cancel: false\r\n        };\r\n        if (!this.initRender) {\r\n            this.trigger('selecting', eventArg, function (selectArgs) {\r\n                if (!selectArgs.cancel) {\r\n                    _this.selectingContent(args, _this.isInteracted);\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            this.selectingContent(args, this.isInteracted);\r\n        }\r\n        this.isInteracted = false;\r\n    };\r\n    Tab.prototype.selectingContent = function (args, isInteracted) {\r\n        if (typeof args === 'number') {\r\n            if (!isNOU(this.tbItem[args]) && (this.tbItem[args].classList.contains(CLS_DISABLE) ||\r\n                this.tbItem[args].classList.contains(CLS_HIDDEN))) {\r\n                for (var i = args + 1; i < this.items.length; i++) {\r\n                    if (this.items[i].disabled === false && this.items[i].visible === true) {\r\n                        args = i;\r\n                        break;\r\n                    }\r\n                    else {\r\n                        args = 0;\r\n                    }\r\n                }\r\n            }\r\n            if (this.tbItem.length > args && args >= 0 && !isNaN(args)) {\r\n                this.prevIndex = this.selectedItem;\r\n                if (this.tbItem[args].classList.contains(CLS_TB_POPUP) && this.reorderActiveTab) {\r\n                    this.setActive(this.popupHandler(this.tbItem[args]), null, isInteracted);\r\n                    if ((!isNOU(this.items) && this.items.length > 0) && this.allowDragAndDrop) {\r\n                        this.tbItem = selectAll('.' + CLS_TB_ITEMS + ' .' + CLS_TB_ITEM, this.hdrEle);\r\n                        var item = this.items[args];\r\n                        this.items.splice(args, 1);\r\n                        this.items.splice(this.tbItem.length - 1, 0, item);\r\n                    }\r\n                }\r\n                else {\r\n                    this.setActive(args, null, isInteracted);\r\n                }\r\n            }\r\n            else {\r\n                this.setActive(0, null, isInteracted);\r\n            }\r\n        }\r\n        else if (args instanceof (HTMLElement)) {\r\n            this.setActive(this.getEleIndex(args), null, isInteracted);\r\n        }\r\n    };\r\n    /**\r\n     * Gets the item index from the Tab.\r\n     *\r\n     * @param  {string} tabItemId - Item ID is used for getting index from the Tab.\r\n     * @returns {number} - It returns item index.\r\n     */\r\n    Tab.prototype.getItemIndex = function (tabItemId) {\r\n        var tabIndex;\r\n        for (var i = 0; i < this.tbItem.length; i++) {\r\n            var value = this.tbItem[i].getAttribute('data-id');\r\n            if (tabItemId === value) {\r\n                tabIndex = i;\r\n                break;\r\n            }\r\n        }\r\n        return tabIndex;\r\n    };\r\n    /**\r\n     * Specifies the value to disable/enable the Tab component.\r\n     * When set to `true`, the component will be disabled.\r\n     *\r\n     * @param  {boolean} value - Based on this Boolean value, Tab will be enabled (false) or disabled (true).\r\n     * @returns {void}.\r\n     */\r\n    Tab.prototype.disable = function (value) {\r\n        this.setCssClass(this.element, CLS_DISABLE, value);\r\n        this.element.setAttribute('aria-disabled', '' + value);\r\n    };\r\n    /**\r\n     * Get the properties to be maintained in the persisted state.\r\n     *\r\n     * @returns {string} - It returns the persisted state.\r\n     */\r\n    Tab.prototype.getPersistData = function () {\r\n        return this.addOnPersist(['selectedItem', 'actEleId']);\r\n    };\r\n    /**\r\n     * Returns the current module name.\r\n     *\r\n     * @returns {string} - It returns the current module name.\r\n     * @private\r\n     */\r\n    Tab.prototype.getModuleName = function () {\r\n        return 'tab';\r\n    };\r\n    /**\r\n     * Gets called when the model property changes.The data that describes the old and new values of the property that changed.\r\n     *\r\n     * @param  {TabModel} newProp - It contains the new value of data.\r\n     * @param  {TabModel} oldProp - It contains the old value of data.\r\n     * @returns {void}\r\n     * @private\r\n     */\r\n    Tab.prototype.onPropertyChanged = function (newProp, oldProp) {\r\n        var _this = this;\r\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\r\n            var prop = _a[_i];\r\n            switch (prop) {\r\n                case 'width':\r\n                    setStyle(this.element, { width: formatUnit(newProp.width) });\r\n                    break;\r\n                case 'height':\r\n                    setStyle(this.element, { height: formatUnit(newProp.height) });\r\n                    this.setContentHeight(false);\r\n                    break;\r\n                case 'cssClass':\r\n                    if (oldProp.cssClass !== '' && !isNullOrUndefined(oldProp.cssClass)) {\r\n                        this.setCssClass(this.element, oldProp.cssClass, false);\r\n                        this.setCssClass(this.element, newProp.cssClass, true);\r\n                    }\r\n                    else {\r\n                        this.setCssClass(this.element, newProp.cssClass, true);\r\n                    }\r\n                    break;\r\n                case 'items':\r\n                    this.evalOnPropertyChangeItems(newProp, oldProp);\r\n                    break;\r\n                case 'showCloseButton':\r\n                    this.setCloseButton(newProp.showCloseButton);\r\n                    break;\r\n                case 'reorderActiveTab':\r\n                    this.refreshActElePosition();\r\n                    break;\r\n                case 'selectedItem':\r\n                    this.selectedItem = oldProp.selectedItem;\r\n                    this.select(newProp.selectedItem);\r\n                    break;\r\n                case 'headerPlacement':\r\n                    this.changeOrientation(newProp.headerPlacement);\r\n                    break;\r\n                case 'enableRtl':\r\n                    this.setRTL(newProp.enableRtl);\r\n                    break;\r\n                case 'overflowMode':\r\n                    this.tbObj.overflowMode = newProp.overflowMode;\r\n                    this.tbObj.dataBind();\r\n                    this.refreshActElePosition();\r\n                    break;\r\n                case 'heightAdjustMode':\r\n                    this.setContentHeight(false);\r\n                    this.select(this.selectedItem);\r\n                    break;\r\n                case 'scrollStep':\r\n                    if (this.tbObj) {\r\n                        this.tbObj.scrollStep = this.scrollStep;\r\n                    }\r\n                    break;\r\n                case 'allowDragAndDrop':\r\n                    this.bindDraggable();\r\n                    break;\r\n                case 'dragArea':\r\n                    if (this.allowDragAndDrop) {\r\n                        this.draggableItems.forEach(function (item) {\r\n                            item.dragArea = _this.dragArea;\r\n                        });\r\n                        this.refresh();\r\n                    }\r\n                    break;\r\n            }\r\n        }\r\n    };\r\n    Tab.prototype.refreshActiveTab = function () {\r\n        if (this.isReact) {\r\n            this.clearTemplate();\r\n        }\r\n        if (!this.isTemplate) {\r\n            if (this.element.querySelector('.' + CLS_TB_ITEM + '.' + CLS_ACTIVE)) {\r\n                detach(this.element.querySelector('.' + CLS_TB_ITEM + '.' + CLS_ACTIVE).children[0]);\r\n                detach(this.element.querySelector('.' + CLS_CONTENT).querySelector('.' + CLS_ACTIVE).children[0]);\r\n                var item = this.items[this.selectedItem];\r\n                var pos = (isNOU(item.header) || isNOU(item.header.iconPosition)) ? '' : item.header.iconPosition;\r\n                var css = (isNOU(item.header) || isNOU(item.header.iconCss)) ? '' : item.header.iconCss;\r\n                var text = item.headerTemplate || item.header.text;\r\n                var txtWrap = this.createElement('div', { className: CLS_TEXT, attrs: { 'role': 'presentation' } });\r\n                if (!isNOU(text.tagName)) {\r\n                    txtWrap.appendChild(text);\r\n                }\r\n                else {\r\n                    this.headerTextCompile(txtWrap, text, this.selectedItem);\r\n                }\r\n                var tEle = void 0;\r\n                var icon = this.createElement('span', {\r\n                    className: CLS_ICONS + ' ' + CLS_TAB_ICON + ' ' + CLS_ICON + '-' + pos + ' ' + css\r\n                });\r\n                var tConts = this.createElement('div', { className: CLS_TEXT_WRAP });\r\n                tConts.appendChild(txtWrap);\r\n                if ((text !== '' && text !== undefined) && css !== '') {\r\n                    if ((pos === 'left' || pos === 'top')) {\r\n                        tConts.insertBefore(icon, tConts.firstElementChild);\r\n                    }\r\n                    else {\r\n                        tConts.appendChild(icon);\r\n                    }\r\n                    tEle = txtWrap;\r\n                    this.isIconAlone = false;\r\n                }\r\n                else {\r\n                    tEle = ((css === '') ? txtWrap : icon);\r\n                    if (tEle === icon) {\r\n                        detach(txtWrap);\r\n                        tConts.appendChild(icon);\r\n                        this.isIconAlone = true;\r\n                    }\r\n                }\r\n                var wrapAtt = (item.disabled) ? {} : { tabIndex: '-1' };\r\n                tConts.appendChild(this.btnCls.cloneNode(true));\r\n                var wraper = this.createElement('div', { className: CLS_WRAP, attrs: wrapAtt });\r\n                wraper.appendChild(tConts);\r\n                if (pos === 'top' || pos === 'bottom') {\r\n                    this.element.classList.add('e-vertical-icon');\r\n                }\r\n                this.element.querySelector('.' + CLS_TB_ITEM + '.' + CLS_ACTIVE).appendChild(wraper);\r\n                var crElem = this.createElement('div');\r\n                var cnt = item.content;\r\n                var eleStr = void 0;\r\n                if (typeof cnt === 'string' || isNOU(cnt.innerHTML)) {\r\n                    if (typeof cnt === 'string' && this.enableHtmlSanitizer) {\r\n                        cnt = SanitizeHtmlHelper.sanitize(cnt);\r\n                    }\r\n                    if (cnt[0] === '.' || cnt[0] === '#') {\r\n                        if (document.querySelectorAll(cnt).length) {\r\n                            var eleVal = document.querySelector(cnt);\r\n                            eleStr = eleVal.outerHTML.trim();\r\n                            crElem.appendChild(eleVal);\r\n                            eleVal.style.display = '';\r\n                        }\r\n                        else {\r\n                            this.compileElement(crElem, cnt, 'content', this.selectedItem);\r\n                        }\r\n                    }\r\n                    else {\r\n                        this.compileElement(crElem, cnt, 'content', this.selectedItem);\r\n                    }\r\n                }\r\n                else {\r\n                    crElem.appendChild(cnt);\r\n                }\r\n                if (!isNOU(eleStr)) {\r\n                    if (this.templateEle.indexOf(cnt.toString()) === -1) {\r\n                        this.templateEle.push(cnt.toString());\r\n                    }\r\n                }\r\n                this.element.querySelector('.' + CLS_ITEM + '.' + CLS_ACTIVE).appendChild(crElem);\r\n            }\r\n        }\r\n        else {\r\n            var tabItems = this.element.querySelector('.' + CLS_TB_ITEMS);\r\n            var element = this.element.querySelector('.' + CLS_TB_ITEM + '.' + CLS_ACTIVE);\r\n            var id = element.id;\r\n            var num = (id.indexOf('_'));\r\n            var index = parseInt(id.substring(num + 1), 10);\r\n            var header = element.innerText;\r\n            var detachContent = this.element.querySelector('.' + CLS_CONTENT).querySelector('.' + CLS_ACTIVE).children[0];\r\n            var mainContents = detachContent.innerHTML;\r\n            detach(element);\r\n            detach(detachContent);\r\n            var attr = {\r\n                className: CLS_TB_ITEM + ' ' + CLS_TEMPLATE + ' ' + CLS_ACTIVE, id: CLS_ITEM + this.tabId + '_' + index,\r\n                attrs: {\r\n                    role: 'tab', 'aria-controls': CLS_CONTENT + this.tabId + '_' + index,\r\n                    'aria-disabled': 'false', 'aria-selected': 'true'\r\n                }\r\n            };\r\n            var txtString = this.createElement('span', {\r\n                className: CLS_TEXT, innerHTML: header, attrs: { 'role': 'presentation' }\r\n            }).outerHTML;\r\n            var conte = this.createElement('div', {\r\n                className: CLS_TEXT_WRAP, innerHTML: txtString + this.btnCls.outerHTML\r\n            }).outerHTML;\r\n            var wrap = this.createElement('div', { className: CLS_WRAP, innerHTML: conte, attrs: { tabIndex: '-1' } });\r\n            tabItems.insertBefore(this.createElement('div', attr), tabItems.children[index + 1]);\r\n            this.element.querySelector('.' + CLS_TB_ITEM + '.' + CLS_ACTIVE).appendChild(wrap);\r\n            var crElem = this.createElement('div', { innerHTML: mainContents });\r\n            this.element.querySelector('.' + CLS_CONTENT).querySelector('.' + CLS_ACTIVE).appendChild(crElem);\r\n        }\r\n        if (this.isReact) {\r\n            this.renderReactTemplates();\r\n        }\r\n    };\r\n    __decorate([\r\n        Collection([], TabItem)\r\n    ], Tab.prototype, \"items\", void 0);\r\n    __decorate([\r\n        Property('100%')\r\n    ], Tab.prototype, \"width\", void 0);\r\n    __decorate([\r\n        Property('auto')\r\n    ], Tab.prototype, \"height\", void 0);\r\n    __decorate([\r\n        Property('')\r\n    ], Tab.prototype, \"cssClass\", void 0);\r\n    __decorate([\r\n        Property(0)\r\n    ], Tab.prototype, \"selectedItem\", void 0);\r\n    __decorate([\r\n        Property('Top')\r\n    ], Tab.prototype, \"headerPlacement\", void 0);\r\n    __decorate([\r\n        Property('Content')\r\n    ], Tab.prototype, \"heightAdjustMode\", void 0);\r\n    __decorate([\r\n        Property('Scrollable')\r\n    ], Tab.prototype, \"overflowMode\", void 0);\r\n    __decorate([\r\n        Property('Dynamic')\r\n    ], Tab.prototype, \"loadOn\", void 0);\r\n    __decorate([\r\n        Property(false)\r\n    ], Tab.prototype, \"enablePersistence\", void 0);\r\n    __decorate([\r\n        Property(false)\r\n    ], Tab.prototype, \"enableHtmlSanitizer\", void 0);\r\n    __decorate([\r\n        Property(false)\r\n    ], Tab.prototype, \"showCloseButton\", void 0);\r\n    __decorate([\r\n        Property(true)\r\n    ], Tab.prototype, \"reorderActiveTab\", void 0);\r\n    __decorate([\r\n        Property()\r\n    ], Tab.prototype, \"scrollStep\", void 0);\r\n    __decorate([\r\n        Property()\r\n    ], Tab.prototype, \"dragArea\", void 0);\r\n    __decorate([\r\n        Property(false)\r\n    ], Tab.prototype, \"allowDragAndDrop\", void 0);\r\n    __decorate([\r\n        Complex({}, TabAnimationSettings)\r\n    ], Tab.prototype, \"animation\", void 0);\r\n    __decorate([\r\n        Event()\r\n    ], Tab.prototype, \"created\", void 0);\r\n    __decorate([\r\n        Event()\r\n    ], Tab.prototype, \"adding\", void 0);\r\n    __decorate([\r\n        Event()\r\n    ], Tab.prototype, \"added\", void 0);\r\n    __decorate([\r\n        Event()\r\n    ], Tab.prototype, \"selecting\", void 0);\r\n    __decorate([\r\n        Event()\r\n    ], Tab.prototype, \"selected\", void 0);\r\n    __decorate([\r\n        Event()\r\n    ], Tab.prototype, \"removing\", void 0);\r\n    __decorate([\r\n        Event()\r\n    ], Tab.prototype, \"removed\", void 0);\r\n    __decorate([\r\n        Event()\r\n    ], Tab.prototype, \"onDragStart\", void 0);\r\n    __decorate([\r\n        Event()\r\n    ], Tab.prototype, \"dragging\", void 0);\r\n    __decorate([\r\n        Event()\r\n    ], Tab.prototype, \"dragged\", void 0);\r\n    __decorate([\r\n        Event()\r\n    ], Tab.prototype, \"destroyed\", void 0);\r\n    Tab = __decorate([\r\n        NotifyPropertyChanges\r\n    ], Tab);\r\n    return Tab;\r\n}(Component));\r\nexport { Tab };\r\n"]},"metadata":{},"sourceType":"module"}