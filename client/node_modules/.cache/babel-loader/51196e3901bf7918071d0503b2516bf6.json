{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n\nimport { createElement, addClass, formatUnit, remove } from '@syncfusion/ej2-base';\nimport { AgendaBase } from '../event-renderer/agenda-base';\nimport { Month } from './month';\nimport * as util from '../base/util';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\r\n * month agenda view\r\n */\n\nvar MonthAgenda =\n/** @class */\nfunction (_super) {\n  __extends(MonthAgenda, _super);\n\n  function MonthAgenda(parent) {\n    var _this = _super.call(this, parent) || this;\n\n    _this.dayNameFormat = 'narrow';\n    _this.viewClass = 'e-month-agenda-view';\n    _this.monthAgendaDate = new Date('' + parent.selectedDate);\n    return _this;\n  }\n\n  MonthAgenda.prototype.getModuleName = function () {\n    return 'monthAgenda';\n  };\n\n  MonthAgenda.prototype.renderAppointmentContainer = function () {\n    var contentArea = this.getContentAreaElement();\n    var wrapperContainer = createElement('div', {\n      className: cls.WRAPPER_CONTAINER_CLASS\n    });\n    contentArea.appendChild(wrapperContainer);\n    var appWrap = createElement('div', {\n      className: cls.APPOINTMENT_WRAP_CLASS\n    });\n    wrapperContainer.appendChild(appWrap);\n    this.appendAppContainer(appWrap);\n    this.setEventWrapperHeight();\n  };\n\n  MonthAgenda.prototype.getDayNameFormat = function () {\n    if (this.parent.isAdaptive) {\n      return 'narrow';\n    }\n\n    return 'abbreviated';\n  };\n\n  MonthAgenda.prototype.setEventWrapperHeight = function () {\n    var headerHeight = (this.parent.headerModule ? this.parent.headerModule.getHeaderElement().offsetHeight : 0) + 2;\n    var resourceWrapper = this.parent.element.querySelector('.' + cls.RESOURCE_HEADER_TOOLBAR);\n\n    if (resourceWrapper) {\n      headerHeight += resourceWrapper.offsetHeight;\n    }\n\n    var contentArea = this.getContentAreaElement().firstElementChild;\n    var dateHeader = this.element.querySelector('.' + cls.DATE_HEADER_WRAP_CLASS);\n    var availHeight = this.parent.element.offsetHeight - headerHeight - dateHeader.offsetHeight - contentArea.offsetHeight;\n    var wrapperContainer = this.element.querySelector('.' + cls.WRAPPER_CONTAINER_CLASS);\n    var eventWrapper = this.element.querySelector('.' + cls.APPOINTMENT_WRAP_CLASS);\n\n    if (this.parent.height !== 'auto') {\n      wrapperContainer.style.height = eventWrapper.style.height = formatUnit(availHeight);\n    }\n  };\n\n  MonthAgenda.prototype.onDataReady = function (args) {\n    this.setEventWrapperHeight();\n    this.clearElements();\n    var eventCollection = args.processedData;\n\n    if (this.parent.uiStateValues.isGroupAdaptive) {\n      var resource = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n      eventCollection = this.parent.eventBase.filterEventsByResource(resource, eventCollection);\n    }\n\n    this.agendaBase = this.getAgendaBase();\n    this.parent.eventsProcessed = this.agendaBase.processAgendaEvents(eventCollection);\n    var count = 0;\n\n    for (var _i = 0, _a = this.renderDates; _i < _a.length; _i++) {\n      var date = _a[_i];\n      var filterData = this.appointmentFiltering(date);\n      var workCell = this.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS)[count];\n\n      if (filterData.length > 0) {\n        if (!workCell.querySelector('.' + cls.APPOINTMENT_INDICATOR_CLASS)) {\n          workCell.appendChild(createElement('div', {\n            className: cls.APPOINTMENT_INDICATOR_CLASS\n          }));\n        }\n\n        if (date.getTime() === util.resetTime(new Date(this.monthAgendaDate.getTime())).getTime()) {\n          this.onEventRender(filterData, date);\n        }\n      }\n\n      count++;\n    }\n\n    this.parent.notify(events.eventsLoaded, {});\n  };\n\n  MonthAgenda.prototype.onCellClick = function (event) {\n    if (this.parent.quickPopup) {\n      this.parent.quickPopup.quickPopupHide();\n    }\n\n    var filterData = this.appointmentFiltering(event.startTime);\n    this.onEventRender(filterData, event.startTime);\n    this.parent.notify(events.eventsLoaded, {});\n    this.monthAgendaDate = new Date('' + event.startTime);\n  };\n\n  MonthAgenda.prototype.onEventRender = function (events, date) {\n    this.agendaBase = this.getAgendaBase();\n    var appWrap = this.element.querySelector('.' + cls.APPOINTMENT_WRAP_CLASS);\n    util.removeChildren(appWrap);\n\n    if (this.parent.activeViewOptions.group.resources.length === 0 || this.parent.uiStateValues.isGroupAdaptive) {\n      if (events.length > 0) {\n        var appContainer = createElement('div', {\n          className: cls.APPOINTMENT_CONTAINER_CLASS\n        });\n        appWrap.appendChild(this.agendaBase.createAgendaContentElement('data', events, appContainer));\n      } else {\n        this.appendAppContainer(appWrap);\n      }\n    } else {\n      if (events.length > 0) {\n        var table = this.createTableLayout();\n        var tBody = table.querySelector('tbody');\n        this.agendaBase.calculateResourceTableElement(tBody, 1, date);\n        table.appendChild(tBody);\n        appWrap.appendChild(table);\n      } else {\n        this.appendAppContainer(appWrap);\n      }\n    }\n\n    this.agendaBase.wireEventActions();\n  };\n\n  MonthAgenda.prototype.appointmentFiltering = function (date) {\n    var dateStart = util.resetTime(new Date(date.getTime()));\n    var dateEnd = util.setTime(new Date(dateStart.getTime()), util.MS_PER_DAY);\n    return this.parent.eventBase.filterEvents(dateStart, dateEnd);\n  };\n\n  MonthAgenda.prototype.clearElements = function () {\n    var appointmentIndicators = [].slice.call(this.element.querySelectorAll('.' + cls.APPOINTMENT_INDICATOR_CLASS));\n\n    for (var _i = 0, appointmentIndicators_1 = appointmentIndicators; _i < appointmentIndicators_1.length; _i++) {\n      var appointmentIndicator = appointmentIndicators_1[_i];\n      remove(appointmentIndicator);\n    }\n\n    this.appendAppContainer(this.element.querySelector('.' + cls.APPOINTMENT_WRAP_CLASS));\n  };\n\n  MonthAgenda.prototype.appendAppContainer = function (appWrap) {\n    var app = createElement('div', {\n      className: cls.APPOINTMENT_CONTAINER_CLASS\n    });\n    addClass([app], cls.AGENDA_NO_EVENT_CLASS);\n    app.innerHTML = this.parent.localeObj.getConstant('noEvents');\n    util.removeChildren(appWrap);\n    appWrap.appendChild(app);\n  };\n\n  MonthAgenda.prototype.getNextPreviousDate = function (type) {\n    var selectedDate = this.parent.selectedDate;\n    var interval = type === 'next' ? this.parent.activeViewOptions.interval : -this.parent.activeViewOptions.interval;\n    var navigateDate = util.addMonths(this.parent.selectedDate, interval);\n    var month = type === 'next' ? 2 : 0;\n    var lastDate = new Date(selectedDate.getFullYear(), selectedDate.getMonth() + month, 0).getDate();\n    var date = lastDate >= this.monthAgendaDate.getDate() ? this.monthAgendaDate.getDate() : lastDate;\n    this.monthAgendaDate = new Date(navigateDate.getFullYear(), navigateDate.getMonth(), date);\n    return this.monthAgendaDate;\n  };\n\n  MonthAgenda.prototype.getAgendaBase = function () {\n    return this.agendaBase || new AgendaBase(this.parent);\n  };\n\n  MonthAgenda.prototype.destroy = function () {\n    if (this.agendaBase) {\n      this.agendaBase.destroy();\n      this.agendaBase = null;\n    }\n\n    _super.prototype.destroy.call(this);\n  };\n\n  return MonthAgenda;\n}(Month);\n\nexport { MonthAgenda };","map":{"version":3,"sources":["D:/HUST/20211/Introduction to Software Engineering/Project/Sprint 2/RubyGYM/client/node_modules/@syncfusion/ej2-schedule/src/schedule/renderer/month-agenda.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","createElement","addClass","formatUnit","remove","AgendaBase","Month","util","events","cls","MonthAgenda","_super","parent","_this","call","dayNameFormat","viewClass","monthAgendaDate","Date","selectedDate","getModuleName","renderAppointmentContainer","contentArea","getContentAreaElement","wrapperContainer","className","WRAPPER_CONTAINER_CLASS","appendChild","appWrap","APPOINTMENT_WRAP_CLASS","appendAppContainer","setEventWrapperHeight","getDayNameFormat","isAdaptive","headerHeight","headerModule","getHeaderElement","offsetHeight","resourceWrapper","element","querySelector","RESOURCE_HEADER_TOOLBAR","firstElementChild","dateHeader","DATE_HEADER_WRAP_CLASS","availHeight","eventWrapper","height","style","onDataReady","args","clearElements","eventCollection","processedData","uiStateValues","isGroupAdaptive","resource","resourceBase","lastResourceLevel","groupIndex","eventBase","filterEventsByResource","agendaBase","getAgendaBase","eventsProcessed","processAgendaEvents","count","_i","_a","renderDates","length","date","filterData","appointmentFiltering","workCell","querySelectorAll","WORK_CELLS_CLASS","APPOINTMENT_INDICATOR_CLASS","getTime","resetTime","onEventRender","notify","eventsLoaded","onCellClick","event","quickPopup","quickPopupHide","startTime","removeChildren","activeViewOptions","group","resources","appContainer","APPOINTMENT_CONTAINER_CLASS","createAgendaContentElement","table","createTableLayout","tBody","calculateResourceTableElement","wireEventActions","dateStart","dateEnd","setTime","MS_PER_DAY","filterEvents","appointmentIndicators","slice","appointmentIndicators_1","appointmentIndicator","app","AGENDA_NO_EVENT_CLASS","innerHTML","localeObj","getConstant","getNextPreviousDate","type","interval","navigateDate","addMonths","month","lastDate","getFullYear","getMonth","getDate","destroy"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n/* eslint-disable @typescript-eslint/no-explicit-any */\r\nimport { createElement, addClass, formatUnit, remove } from '@syncfusion/ej2-base';\r\nimport { AgendaBase } from '../event-renderer/agenda-base';\r\nimport { Month } from './month';\r\nimport * as util from '../base/util';\r\nimport * as events from '../base/constant';\r\nimport * as cls from '../base/css-constant';\r\n/**\r\n * month agenda view\r\n */\r\nvar MonthAgenda = /** @class */ (function (_super) {\r\n    __extends(MonthAgenda, _super);\r\n    function MonthAgenda(parent) {\r\n        var _this = _super.call(this, parent) || this;\r\n        _this.dayNameFormat = 'narrow';\r\n        _this.viewClass = 'e-month-agenda-view';\r\n        _this.monthAgendaDate = new Date('' + parent.selectedDate);\r\n        return _this;\r\n    }\r\n    MonthAgenda.prototype.getModuleName = function () {\r\n        return 'monthAgenda';\r\n    };\r\n    MonthAgenda.prototype.renderAppointmentContainer = function () {\r\n        var contentArea = this.getContentAreaElement();\r\n        var wrapperContainer = createElement('div', { className: cls.WRAPPER_CONTAINER_CLASS });\r\n        contentArea.appendChild(wrapperContainer);\r\n        var appWrap = createElement('div', { className: cls.APPOINTMENT_WRAP_CLASS });\r\n        wrapperContainer.appendChild(appWrap);\r\n        this.appendAppContainer(appWrap);\r\n        this.setEventWrapperHeight();\r\n    };\r\n    MonthAgenda.prototype.getDayNameFormat = function () {\r\n        if (this.parent.isAdaptive) {\r\n            return 'narrow';\r\n        }\r\n        return 'abbreviated';\r\n    };\r\n    MonthAgenda.prototype.setEventWrapperHeight = function () {\r\n        var headerHeight = (this.parent.headerModule ? this.parent.headerModule.getHeaderElement().offsetHeight : 0) + 2;\r\n        var resourceWrapper = this.parent.element.querySelector('.' + cls.RESOURCE_HEADER_TOOLBAR);\r\n        if (resourceWrapper) {\r\n            headerHeight += resourceWrapper.offsetHeight;\r\n        }\r\n        var contentArea = this.getContentAreaElement().firstElementChild;\r\n        var dateHeader = this.element.querySelector('.' + cls.DATE_HEADER_WRAP_CLASS);\r\n        var availHeight = this.parent.element.offsetHeight - headerHeight - dateHeader.offsetHeight - contentArea.offsetHeight;\r\n        var wrapperContainer = this.element.querySelector('.' + cls.WRAPPER_CONTAINER_CLASS);\r\n        var eventWrapper = this.element.querySelector('.' + cls.APPOINTMENT_WRAP_CLASS);\r\n        if (this.parent.height !== 'auto') {\r\n            wrapperContainer.style.height = eventWrapper.style.height = formatUnit(availHeight);\r\n        }\r\n    };\r\n    MonthAgenda.prototype.onDataReady = function (args) {\r\n        this.setEventWrapperHeight();\r\n        this.clearElements();\r\n        var eventCollection = args.processedData;\r\n        if (this.parent.uiStateValues.isGroupAdaptive) {\r\n            var resource = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\r\n            eventCollection = this.parent.eventBase.filterEventsByResource(resource, eventCollection);\r\n        }\r\n        this.agendaBase = this.getAgendaBase();\r\n        this.parent.eventsProcessed = this.agendaBase.processAgendaEvents(eventCollection);\r\n        var count = 0;\r\n        for (var _i = 0, _a = this.renderDates; _i < _a.length; _i++) {\r\n            var date = _a[_i];\r\n            var filterData = this.appointmentFiltering(date);\r\n            var workCell = this.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS)[count];\r\n            if (filterData.length > 0) {\r\n                if (!workCell.querySelector('.' + cls.APPOINTMENT_INDICATOR_CLASS)) {\r\n                    workCell.appendChild(createElement('div', { className: cls.APPOINTMENT_INDICATOR_CLASS }));\r\n                }\r\n                if (date.getTime() === util.resetTime(new Date(this.monthAgendaDate.getTime())).getTime()) {\r\n                    this.onEventRender(filterData, date);\r\n                }\r\n            }\r\n            count++;\r\n        }\r\n        this.parent.notify(events.eventsLoaded, {});\r\n    };\r\n    MonthAgenda.prototype.onCellClick = function (event) {\r\n        if (this.parent.quickPopup) {\r\n            this.parent.quickPopup.quickPopupHide();\r\n        }\r\n        var filterData = this.appointmentFiltering(event.startTime);\r\n        this.onEventRender(filterData, event.startTime);\r\n        this.parent.notify(events.eventsLoaded, {});\r\n        this.monthAgendaDate = new Date('' + event.startTime);\r\n    };\r\n    MonthAgenda.prototype.onEventRender = function (events, date) {\r\n        this.agendaBase = this.getAgendaBase();\r\n        var appWrap = this.element.querySelector('.' + cls.APPOINTMENT_WRAP_CLASS);\r\n        util.removeChildren(appWrap);\r\n        if (this.parent.activeViewOptions.group.resources.length === 0 || this.parent.uiStateValues.isGroupAdaptive) {\r\n            if (events.length > 0) {\r\n                var appContainer = createElement('div', { className: cls.APPOINTMENT_CONTAINER_CLASS });\r\n                appWrap.appendChild(this.agendaBase.createAgendaContentElement('data', events, appContainer));\r\n            }\r\n            else {\r\n                this.appendAppContainer(appWrap);\r\n            }\r\n        }\r\n        else {\r\n            if (events.length > 0) {\r\n                var table = this.createTableLayout();\r\n                var tBody = table.querySelector('tbody');\r\n                this.agendaBase.calculateResourceTableElement(tBody, 1, date);\r\n                table.appendChild(tBody);\r\n                appWrap.appendChild(table);\r\n            }\r\n            else {\r\n                this.appendAppContainer(appWrap);\r\n            }\r\n        }\r\n        this.agendaBase.wireEventActions();\r\n    };\r\n    MonthAgenda.prototype.appointmentFiltering = function (date) {\r\n        var dateStart = util.resetTime(new Date(date.getTime()));\r\n        var dateEnd = util.setTime(new Date(dateStart.getTime()), util.MS_PER_DAY);\r\n        return this.parent.eventBase.filterEvents(dateStart, dateEnd);\r\n    };\r\n    MonthAgenda.prototype.clearElements = function () {\r\n        var appointmentIndicators = [].slice.call(this.element.querySelectorAll('.' + cls.APPOINTMENT_INDICATOR_CLASS));\r\n        for (var _i = 0, appointmentIndicators_1 = appointmentIndicators; _i < appointmentIndicators_1.length; _i++) {\r\n            var appointmentIndicator = appointmentIndicators_1[_i];\r\n            remove(appointmentIndicator);\r\n        }\r\n        this.appendAppContainer(this.element.querySelector('.' + cls.APPOINTMENT_WRAP_CLASS));\r\n    };\r\n    MonthAgenda.prototype.appendAppContainer = function (appWrap) {\r\n        var app = createElement('div', { className: cls.APPOINTMENT_CONTAINER_CLASS });\r\n        addClass([app], cls.AGENDA_NO_EVENT_CLASS);\r\n        app.innerHTML = this.parent.localeObj.getConstant('noEvents');\r\n        util.removeChildren(appWrap);\r\n        appWrap.appendChild(app);\r\n    };\r\n    MonthAgenda.prototype.getNextPreviousDate = function (type) {\r\n        var selectedDate = this.parent.selectedDate;\r\n        var interval = (type === 'next') ? this.parent.activeViewOptions.interval : -this.parent.activeViewOptions.interval;\r\n        var navigateDate = util.addMonths(this.parent.selectedDate, interval);\r\n        var month = (type === 'next') ? 2 : 0;\r\n        var lastDate = new Date(selectedDate.getFullYear(), selectedDate.getMonth() + month, 0).getDate();\r\n        var date = (lastDate >= this.monthAgendaDate.getDate()) ? this.monthAgendaDate.getDate() : lastDate;\r\n        this.monthAgendaDate = new Date(navigateDate.getFullYear(), navigateDate.getMonth(), date);\r\n        return this.monthAgendaDate;\r\n    };\r\n    MonthAgenda.prototype.getAgendaBase = function () {\r\n        return this.agendaBase || new AgendaBase(this.parent);\r\n    };\r\n    MonthAgenda.prototype.destroy = function () {\r\n        if (this.agendaBase) {\r\n            this.agendaBase.destroy();\r\n            this.agendaBase = null;\r\n        }\r\n        _super.prototype.destroy.call(this);\r\n    };\r\n    return MonthAgenda;\r\n}(Month));\r\nexport { MonthAgenda };\r\n"]},"metadata":{},"sourceType":"module"}