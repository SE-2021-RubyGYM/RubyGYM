{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { setStyleAttribute, addClass, removeClass, ChildProperty, Complex } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, formatUnit } from '@syncfusion/ej2-base';\nimport { Browser } from '@syncfusion/ej2-base';\nimport { calculatePosition, calculateRelativeBasedPosition } from '../common/position';\nimport { Animation, Property, Event, Component } from '@syncfusion/ej2-base';\nimport { NotifyPropertyChanges } from '@syncfusion/ej2-base';\nimport { EventHandler } from '@syncfusion/ej2-base';\nimport { flip, fit, isCollide } from '../common/collision';\n/**\r\n * Specifies the offset position values.\r\n */\n\nvar PositionData =\n/** @class */\nfunction (_super) {\n  __extends(PositionData, _super);\n\n  function PositionData() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  __decorate([Property('left')], PositionData.prototype, \"X\", void 0);\n\n  __decorate([Property('top')], PositionData.prototype, \"Y\", void 0);\n\n  return PositionData;\n}(ChildProperty);\n\nexport { PositionData }; // don't use space in classNames\n\nvar CLASSNAMES = {\n  ROOT: 'e-popup',\n  RTL: 'e-rtl',\n  OPEN: 'e-popup-open',\n  CLOSE: 'e-popup-close'\n};\n/**\r\n * Represents the Popup Component\r\n * ```html\r\n * <div id=\"popup\" style=\"position:absolute;height:100px;width:100px;\">\r\n * <div style=\"margin:35px 25px;\">Popup Content</div></div>\r\n * ```\r\n * ```typescript\r\n * <script>\r\n *   var popupObj = new Popup();\r\n *   popupObj.appendTo(\"#popup\");\r\n * </script>\r\n * ```\r\n */\n\nvar Popup =\n/** @class */\nfunction (_super) {\n  __extends(Popup, _super);\n\n  function Popup(element, options) {\n    return _super.call(this, options, element) || this;\n  }\n  /**\r\n   * Called internally if any of the property value changed.\r\n   *\r\n   * @param {PopupModel} newProp - specifies the new property\r\n   * @param {PopupModel} oldProp - specifies the old property\r\n   * @private\r\n   * @returns {void}\r\n   */\n\n\n  Popup.prototype.onPropertyChanged = function (newProp, oldProp) {\n    for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n\n      switch (prop) {\n        case 'width':\n          setStyleAttribute(this.element, {\n            'width': formatUnit(newProp.width)\n          });\n          break;\n\n        case 'height':\n          setStyleAttribute(this.element, {\n            'height': formatUnit(newProp.height)\n          });\n          break;\n\n        case 'zIndex':\n          setStyleAttribute(this.element, {\n            'zIndex': newProp.zIndex\n          });\n          break;\n\n        case 'enableRtl':\n          this.setEnableRtl();\n          break;\n\n        case 'position':\n        case 'relateTo':\n          this.refreshPosition();\n          break;\n\n        case 'offsetX':\n          // eslint-disable-next-line\n          var x = newProp.offsetX - oldProp.offsetX;\n          this.element.style.left = (parseInt(this.element.style.left, 10) + x).toString() + 'px';\n          break;\n\n        case 'offsetY':\n          // eslint-disable-next-line\n          var y = newProp.offsetY - oldProp.offsetY;\n          this.element.style.top = (parseInt(this.element.style.top, 10) + y).toString() + 'px';\n          break;\n\n        case 'content':\n          this.setContent();\n          break;\n\n        case 'actionOnScroll':\n          if (newProp.actionOnScroll !== 'none') {\n            this.wireScrollEvents();\n          } else {\n            this.unwireScrollEvents();\n          }\n\n          break;\n      }\n    }\n  };\n  /**\r\n   * gets the Component module name.\r\n   *\r\n   * @returns {void}\r\n   * @private\r\n   */\n\n\n  Popup.prototype.getModuleName = function () {\n    return 'popup';\n  };\n  /**\r\n   * To resolve if any collision occurs.\r\n   *\r\n   * @returns {void}\r\n   */\n\n\n  Popup.prototype.resolveCollision = function () {\n    this.checkCollision();\n  };\n  /**\r\n   * gets the persisted state properties of the Component.\r\n   *\r\n   * @returns {void}\r\n   */\n\n\n  Popup.prototype.getPersistData = function () {\n    return this.addOnPersist([]);\n  };\n  /**\r\n   * To destroy the control.\r\n   *\r\n   * @returns {void}\r\n   */\n\n\n  Popup.prototype.destroy = function () {\n    this.element.classList.remove(CLASSNAMES.ROOT, CLASSNAMES.RTL, CLASSNAMES.OPEN, CLASSNAMES.CLOSE);\n    this.unwireEvents();\n\n    _super.prototype.destroy.call(this);\n  };\n  /**\r\n   * To Initialize the control rendering\r\n   *\r\n   * @returns {void}\r\n   * @private\r\n   */\n\n\n  Popup.prototype.render = function () {\n    this.element.classList.add(CLASSNAMES.ROOT);\n    var styles = {};\n\n    if (this.zIndex !== 1000) {\n      styles.zIndex = this.zIndex;\n    }\n\n    if (this.width !== 'auto') {\n      styles.width = formatUnit(this.width);\n    }\n\n    if (this.height !== 'auto') {\n      styles.height = formatUnit(this.height);\n    }\n\n    setStyleAttribute(this.element, styles);\n    this.fixedParent = false;\n    this.setEnableRtl();\n    this.setContent();\n  };\n\n  Popup.prototype.wireEvents = function () {\n    if (Browser.isDevice) {\n      EventHandler.add(window, 'orientationchange', this.orientationOnChange, this);\n    }\n\n    if (this.actionOnScroll !== 'none') {\n      this.wireScrollEvents();\n    }\n  };\n\n  Popup.prototype.wireScrollEvents = function () {\n    if (this.getRelateToElement()) {\n      for (var _i = 0, _a = this.getScrollableParent(this.getRelateToElement()); _i < _a.length; _i++) {\n        var parent_1 = _a[_i];\n        EventHandler.add(parent_1, 'scroll', this.scrollRefresh, this);\n      }\n    }\n  };\n\n  Popup.prototype.unwireEvents = function () {\n    if (Browser.isDevice) {\n      EventHandler.remove(window, 'orientationchange', this.orientationOnChange);\n    }\n\n    if (this.actionOnScroll !== 'none') {\n      this.unwireScrollEvents();\n    }\n  };\n\n  Popup.prototype.unwireScrollEvents = function () {\n    if (this.getRelateToElement()) {\n      for (var _i = 0, _a = this.getScrollableParent(this.getRelateToElement()); _i < _a.length; _i++) {\n        var parent_2 = _a[_i];\n        EventHandler.remove(parent_2, 'scroll', this.scrollRefresh);\n      }\n    }\n  };\n\n  Popup.prototype.getRelateToElement = function () {\n    var relateToElement = this.relateTo === '' || isNullOrUndefined(this.relateTo) ? document.body : this.relateTo;\n    this.setProperties({\n      relateTo: relateToElement\n    }, true);\n    return typeof this.relateTo === 'string' ? document.querySelector(this.relateTo) : this.relateTo;\n  };\n\n  Popup.prototype.scrollRefresh = function (e) {\n    if (this.actionOnScroll === 'reposition') {\n      if (!isNullOrUndefined(this.element) && !(this.element.offsetParent === e.target || this.element.offsetParent && this.element.offsetParent.tagName === 'BODY' && e.target.parentElement == null)) {\n        this.refreshPosition();\n      }\n    } else if (this.actionOnScroll === 'hide') {\n      this.hide();\n    }\n\n    if (this.actionOnScroll !== 'none') {\n      if (this.getRelateToElement()) {\n        var targetVisible = this.isElementOnViewport(this.getRelateToElement(), e.target);\n\n        if (!targetVisible && !this.targetInvisibleStatus) {\n          this.trigger('targetExitViewport');\n          this.targetInvisibleStatus = true;\n        } else if (targetVisible) {\n          this.targetInvisibleStatus = false;\n        }\n      }\n    }\n  };\n  /**\r\n   * This method is to get the element visibility on viewport when scroll\r\n   * the page. This method will returns true even though 1 px of element\r\n   * part is in visible.\r\n   *\r\n   * @param {HTMLElement} relateToElement - specifies the element\r\n   * @param {HTMLElement} scrollElement - specifies the scroll element\r\n   * @returns {boolean} - retruns the boolean\r\n   */\n  // eslint-disable-next-line\n\n\n  Popup.prototype.isElementOnViewport = function (relateToElement, scrollElement) {\n    var scrollParents = this.getScrollableParent(relateToElement);\n\n    for (var parent_3 = 0; parent_3 < scrollParents.length; parent_3++) {\n      if (this.isElementVisible(relateToElement, scrollParents[parent_3])) {\n        continue;\n      } else {\n        return false;\n      }\n    }\n\n    return true;\n  };\n\n  Popup.prototype.isElementVisible = function (relateToElement, scrollElement) {\n    var rect = this.checkGetBoundingClientRect(relateToElement);\n\n    if (!rect.height || !rect.width) {\n      return false;\n    }\n\n    if (!isNullOrUndefined(this.checkGetBoundingClientRect(scrollElement))) {\n      var parent_4 = scrollElement.getBoundingClientRect();\n      return !(rect.bottom < parent_4.top) && !(rect.bottom > parent_4.bottom) && !(rect.right > parent_4.right) && !(rect.left < parent_4.left);\n    } else {\n      var win = window;\n      var windowView = {\n        top: win.scrollY,\n        left: win.scrollX,\n        right: win.scrollX + win.outerWidth,\n        bottom: win.scrollY + win.outerHeight\n      };\n      var off = calculatePosition(relateToElement);\n      var ele = {\n        top: off.top,\n        left: off.left,\n        right: off.left + rect.width,\n        bottom: off.top + rect.height\n      };\n      var elementView = {\n        top: windowView.bottom - ele.top,\n        left: windowView.right - ele.left,\n        bottom: ele.bottom - windowView.top,\n        right: ele.right - windowView.left\n      };\n      return elementView.top > 0 && elementView.left > 0 && elementView.right > 0 && elementView.bottom > 0;\n    }\n  };\n  /**\r\n   * Initialize the event handler\r\n   *\r\n   * @returns {void}\r\n   * @private\r\n   */\n\n\n  Popup.prototype.preRender = function () {//There is no event handler\n  };\n\n  Popup.prototype.setEnableRtl = function () {\n    this.reposition(); // eslint-disable-next-line\n\n    this.enableRtl ? this.element.classList.add(CLASSNAMES.RTL) : this.element.classList.remove(CLASSNAMES.RTL);\n  };\n\n  Popup.prototype.setContent = function () {\n    if (!isNullOrUndefined(this.content)) {\n      this.element.innerHTML = '';\n\n      if (typeof this.content === 'string') {\n        this.element.textContent = this.content;\n      } else {\n        this.element.appendChild(this.content);\n      }\n    }\n  };\n\n  Popup.prototype.orientationOnChange = function () {\n    var _this = this;\n\n    setTimeout(function () {\n      _this.refreshPosition();\n    }, 200);\n  }; // eslint-disable-next-line\n\n  /**\r\n   * Based on the `relative` element and `offset` values, `Popup` element position will refreshed.\r\n   *\r\n   * @returns {void}\r\n   */\n\n\n  Popup.prototype.refreshPosition = function (target, collision) {\n    if (!isNullOrUndefined(target)) {\n      this.checkFixedParent(target);\n    }\n\n    this.reposition();\n\n    if (!collision) {\n      this.checkCollision();\n    }\n  };\n\n  Popup.prototype.reposition = function () {\n    var pos;\n    var position;\n    var relateToElement = this.getRelateToElement();\n\n    if (typeof this.position.X === 'number' && typeof this.position.Y === 'number') {\n      pos = {\n        left: this.position.X,\n        top: this.position.Y\n      };\n    } else if (typeof this.position.X === 'string' && typeof this.position.Y === 'number' || typeof this.position.X === 'number' && typeof this.position.Y === 'string') {\n      var parentDisplay = void 0;\n      var display = this.element.style.display;\n      this.element.style.display = 'block';\n\n      if (this.element.classList.contains('e-dlg-modal')) {\n        parentDisplay = this.element.parentElement.style.display;\n        this.element.parentElement.style.display = 'block';\n      }\n\n      position = this.getAnchorPosition(relateToElement, this.element, this.position, this.offsetX, this.offsetY);\n\n      if (typeof this.position.X === 'string') {\n        pos = {\n          left: position.left,\n          top: this.position.Y\n        };\n      } else {\n        pos = {\n          left: this.position.X,\n          top: position.top\n        };\n      }\n\n      this.element.style.display = display;\n\n      if (this.element.classList.contains('e-dlg-modal')) {\n        this.element.parentElement.style.display = parentDisplay;\n      }\n    } else if (relateToElement) {\n      var display = this.element.style.display;\n      this.element.style.display = 'block';\n      pos = this.getAnchorPosition(relateToElement, this.element, this.position, this.offsetX, this.offsetY);\n      this.element.style.display = display;\n    } else {\n      pos = {\n        left: 0,\n        top: 0\n      };\n    }\n\n    if (!isNullOrUndefined(pos)) {\n      this.element.style.left = pos.left + 'px';\n      this.element.style.top = pos.top + 'px';\n    }\n  };\n\n  Popup.prototype.checkGetBoundingClientRect = function (ele) {\n    var eleRect;\n\n    try {\n      eleRect = ele.getBoundingClientRect();\n      return eleRect;\n    } catch (error) {\n      return null;\n    }\n  };\n\n  Popup.prototype.getAnchorPosition = function (anchorEle, ele, position, offsetX, offsetY) {\n    var eleRect = this.checkGetBoundingClientRect(ele);\n    var anchorRect = this.checkGetBoundingClientRect(anchorEle);\n\n    if (isNullOrUndefined(eleRect) || isNullOrUndefined(anchorRect)) {\n      return null;\n    }\n\n    var anchor = anchorEle;\n    var anchorPos = {\n      left: 0,\n      top: 0\n    };\n\n    if (ele.offsetParent && ele.offsetParent.tagName === 'BODY' && anchorEle.tagName === 'BODY') {\n      anchorPos = calculatePosition(anchorEle);\n    } else {\n      if (ele.classList.contains('e-dlg-modal') && anchor.tagName !== 'BODY') {\n        ele = ele.parentElement;\n      }\n\n      anchorPos = calculateRelativeBasedPosition(anchor, ele);\n    }\n\n    switch (position.X) {\n      default:\n      case 'left':\n        break;\n\n      case 'center':\n        if (ele.classList.contains('e-dlg-modal') && anchor.tagName === 'BODY' && this.targetType === 'container') {\n          anchorPos.left += window.innerWidth / 2 - eleRect.width / 2;\n        } else if (this.targetType === 'container') {\n          anchorPos.left += anchorRect.width / 2 - eleRect.width / 2;\n        } else {\n          anchorPos.left += anchorRect.width / 2;\n        }\n\n        break;\n\n      case 'right':\n        if (ele.classList.contains('e-dlg-modal') && anchor.tagName === 'BODY' && this.targetType === 'container') {\n          anchorPos.left += window.innerWidth - eleRect.width;\n        } else if (this.targetType === 'container') {\n          anchorPos.left += anchorRect.width - eleRect.width;\n        } else {\n          anchorPos.left += anchorRect.width;\n        }\n\n        break;\n    }\n\n    switch (position.Y) {\n      default:\n      case 'top':\n        break;\n\n      case 'center':\n        if (ele.classList.contains('e-dlg-modal') && anchor.tagName === 'BODY' && this.targetType === 'container') {\n          anchorPos.top += window.innerHeight / 2 - eleRect.height / 2;\n        } else if (this.targetType === 'container') {\n          anchorPos.top += anchorRect.height / 2 - eleRect.height / 2;\n        } else {\n          anchorPos.top += anchorRect.height / 2;\n        }\n\n        break;\n\n      case 'bottom':\n        if (ele.classList.contains('e-dlg-modal') && anchor.tagName === 'BODY' && this.targetType === 'container') {\n          anchorPos.top += window.innerHeight - eleRect.height;\n        } else if (this.targetType === 'container') {\n          anchorPos.top += anchorRect.height - eleRect.height;\n        } else {\n          anchorPos.top += anchorRect.height;\n        }\n\n        break;\n    }\n\n    anchorPos.left += offsetX;\n    anchorPos.top += offsetY;\n    return anchorPos;\n  };\n\n  Popup.prototype.callFlip = function (param) {\n    var relateToElement = this.getRelateToElement();\n    flip(this.element, relateToElement, this.offsetX, this.offsetY, this.position.X, this.position.Y, this.viewPortElement, param, this.fixedParent);\n  };\n\n  Popup.prototype.callFit = function (param) {\n    if (isCollide(this.element, this.viewPortElement).length !== 0) {\n      if (isNullOrUndefined(this.viewPortElement)) {\n        var data = fit(this.element, this.viewPortElement, param);\n\n        if (param.X) {\n          this.element.style.left = data.left + 'px';\n        }\n\n        if (param.Y) {\n          this.element.style.top = data.top + 'px';\n        }\n      } else {\n        var elementRect = this.checkGetBoundingClientRect(this.element);\n        var viewPortRect = this.checkGetBoundingClientRect(this.viewPortElement);\n\n        if (isNullOrUndefined(elementRect) || isNullOrUndefined(viewPortRect)) {\n          return null;\n        }\n\n        if (param && param.Y === true) {\n          if (viewPortRect.top > elementRect.top) {\n            this.element.style.top = '0px';\n          } else if (viewPortRect.bottom < elementRect.bottom) {\n            this.element.style.top = parseInt(this.element.style.top, 10) - (elementRect.bottom - viewPortRect.bottom) + 'px';\n          }\n        }\n\n        if (param && param.X === true) {\n          if (viewPortRect.right < elementRect.right) {\n            this.element.style.left = parseInt(this.element.style.left, 10) - (elementRect.right - viewPortRect.right) + 'px';\n          } else if (viewPortRect.left > elementRect.left) {\n            this.element.style.left = parseInt(this.element.style.left, 10) + (viewPortRect.left - elementRect.left) + 'px';\n          }\n        }\n      }\n    }\n  };\n\n  Popup.prototype.checkCollision = function () {\n    var horz = this.collision.X;\n    var vert = this.collision.Y;\n\n    if (horz === 'none' && vert === 'none') {\n      return;\n    }\n\n    if (horz === 'flip' && vert === 'flip') {\n      this.callFlip({\n        X: true,\n        Y: true\n      });\n    } else if (horz === 'fit' && vert === 'fit') {\n      this.callFit({\n        X: true,\n        Y: true\n      });\n    } else {\n      if (horz === 'flip') {\n        this.callFlip({\n          X: true,\n          Y: false\n        });\n      } else if (vert === 'flip') {\n        this.callFlip({\n          Y: true,\n          X: false\n        });\n      }\n\n      if (horz === 'fit') {\n        this.callFit({\n          X: true,\n          Y: false\n        });\n      } else if (vert === 'fit') {\n        this.callFit({\n          X: false,\n          Y: true\n        });\n      }\n    }\n  };\n  /**\r\n   * Shows the popup element from screen.\r\n   *\r\n   * @returns {void}\r\n   * @param {AnimationModel} animationOptions - specifies the model\r\n   * @param { HTMLElement } relativeElement - To calculate the zIndex value dynamically.\r\n   */\n\n\n  Popup.prototype.show = function (animationOptions, relativeElement) {\n    var _this = this;\n\n    this.wireEvents();\n\n    if (this.zIndex === 1000 || !isNullOrUndefined(relativeElement)) {\n      var zIndexElement = isNullOrUndefined(relativeElement) ? this.element : relativeElement;\n      this.zIndex = getZindexPartial(zIndexElement);\n      setStyleAttribute(this.element, {\n        'zIndex': this.zIndex\n      });\n    }\n\n    animationOptions = !isNullOrUndefined(animationOptions) && typeof animationOptions === 'object' ? animationOptions : this.showAnimation;\n\n    if (this.collision.X !== 'none' || this.collision.Y !== 'none') {\n      removeClass([this.element], CLASSNAMES.CLOSE);\n      addClass([this.element], CLASSNAMES.OPEN);\n      this.checkCollision();\n      removeClass([this.element], CLASSNAMES.OPEN);\n      addClass([this.element], CLASSNAMES.CLOSE);\n    }\n\n    if (!isNullOrUndefined(animationOptions)) {\n      animationOptions.begin = function () {\n        if (!_this.isDestroyed) {\n          removeClass([_this.element], CLASSNAMES.CLOSE);\n          addClass([_this.element], CLASSNAMES.OPEN);\n        }\n      };\n\n      animationOptions.end = function () {\n        if (!_this.isDestroyed) {\n          _this.trigger('open');\n        }\n      };\n\n      new Animation(animationOptions).animate(this.element);\n    } else {\n      removeClass([this.element], CLASSNAMES.CLOSE);\n      addClass([this.element], CLASSNAMES.OPEN);\n      this.trigger('open');\n    }\n  };\n  /**\r\n   * Hides the popup element from screen.\r\n   *\r\n   * @param {AnimationModel} animationOptions - To give the animation options.\r\n   * @returns {void}\r\n   */\n\n\n  Popup.prototype.hide = function (animationOptions) {\n    var _this = this;\n\n    animationOptions = !isNullOrUndefined(animationOptions) && typeof animationOptions === 'object' ? animationOptions : this.hideAnimation;\n\n    if (!isNullOrUndefined(animationOptions)) {\n      animationOptions.end = function () {\n        if (!_this.isDestroyed) {\n          removeClass([_this.element], CLASSNAMES.OPEN);\n          addClass([_this.element], CLASSNAMES.CLOSE);\n\n          _this.trigger('close');\n        }\n      };\n\n      new Animation(animationOptions).animate(this.element);\n    } else {\n      removeClass([this.element], CLASSNAMES.OPEN);\n      addClass([this.element], CLASSNAMES.CLOSE);\n      this.trigger('close');\n    }\n\n    this.unwireEvents();\n  };\n  /**\r\n   * Gets scrollable parent elements for the given element.\r\n   *\r\n   * @returns {void}\r\n   * @param { HTMLElement } element - Specify the element to get the scrollable parents of it.\r\n   */\n\n\n  Popup.prototype.getScrollableParent = function (element) {\n    this.checkFixedParent(element);\n    return getScrollableParent(element, this.fixedParent);\n  };\n\n  Popup.prototype.checkFixedParent = function (element) {\n    var parent = element.parentElement;\n\n    while (parent && parent.tagName !== 'HTML') {\n      var parentStyle = getComputedStyle(parent);\n\n      if (parentStyle.position === 'fixed' && !isNullOrUndefined(this.element) && this.element.offsetParent && this.element.offsetParent.tagName === 'BODY') {\n        this.element.style.top = window.scrollY > parseInt(this.element.style.top) ? formatUnit(window.scrollY - parseInt(this.element.style.top)) : formatUnit(parseInt(this.element.style.top) - window.scrollY);\n        this.element.style.position = 'fixed';\n        this.fixedParent = true;\n      }\n\n      parent = parent.parentElement;\n\n      if (!isNullOrUndefined(this.element) && isNullOrUndefined(this.element.offsetParent) && parentStyle.position === 'fixed' && this.element.style.position === 'fixed') {\n        this.fixedParent = true;\n      }\n    }\n  };\n\n  __decorate([Property('auto')], Popup.prototype, \"height\", void 0);\n\n  __decorate([Property('auto')], Popup.prototype, \"width\", void 0);\n\n  __decorate([Property(null)], Popup.prototype, \"content\", void 0);\n\n  __decorate([Property('container')], Popup.prototype, \"targetType\", void 0);\n\n  __decorate([Property(null)], Popup.prototype, \"viewPortElement\", void 0);\n\n  __decorate([Property({\n    X: 'none',\n    Y: 'none'\n  })], Popup.prototype, \"collision\", void 0);\n\n  __decorate([Property('')], Popup.prototype, \"relateTo\", void 0);\n\n  __decorate([Complex({}, PositionData)], Popup.prototype, \"position\", void 0);\n\n  __decorate([Property(0)], Popup.prototype, \"offsetX\", void 0);\n\n  __decorate([Property(0)], Popup.prototype, \"offsetY\", void 0);\n\n  __decorate([Property(1000)], Popup.prototype, \"zIndex\", void 0);\n\n  __decorate([Property(false)], Popup.prototype, \"enableRtl\", void 0);\n\n  __decorate([Property('reposition')], Popup.prototype, \"actionOnScroll\", void 0);\n\n  __decorate([Property(null)], Popup.prototype, \"showAnimation\", void 0);\n\n  __decorate([Property(null)], Popup.prototype, \"hideAnimation\", void 0);\n\n  __decorate([Event()], Popup.prototype, \"open\", void 0);\n\n  __decorate([Event()], Popup.prototype, \"close\", void 0);\n\n  __decorate([Event()], Popup.prototype, \"targetExitViewport\", void 0);\n\n  Popup = __decorate([NotifyPropertyChanges], Popup);\n  return Popup;\n}(Component);\n\nexport { Popup };\n/**\r\n * Gets scrollable parent elements for the given element.\r\n *\r\n * @param { HTMLElement } element - Specify the element to get the scrollable parents of it.\r\n * @param {boolean} fixedParent - specifies the parent element\r\n * @private\r\n * @returns {void}\r\n */\n\nexport function getScrollableParent(element, fixedParent) {\n  var eleStyle = getComputedStyle(element);\n  var scrollParents = [];\n  var overflowRegex = /(auto|scroll)/;\n  var parent = element.parentElement;\n\n  while (parent && parent.tagName !== 'HTML') {\n    var parentStyle = getComputedStyle(parent);\n\n    if (!(eleStyle.position === 'absolute' && parentStyle.position === 'static') && overflowRegex.test(parentStyle.overflow + parentStyle.overflowY + parentStyle.overflowX)) {\n      scrollParents.push(parent);\n    }\n\n    parent = parent.parentElement;\n  }\n\n  if (!fixedParent) {\n    scrollParents.push(document);\n  }\n\n  return scrollParents;\n}\n/**\r\n * Gets the maximum z-index of the given element.\r\n *\r\n * @returns {void}\r\n * @param { HTMLElement } element - Specify the element to get the maximum z-index of it.\r\n * @private\r\n */\n\nexport function getZindexPartial(element) {\n  // upto body traversal\n  var parent = element.parentElement;\n  var parentZindex = [];\n\n  while (parent) {\n    if (parent.tagName !== 'BODY') {\n      var index = document.defaultView.getComputedStyle(parent, null).getPropertyValue('z-index');\n      var position = document.defaultView.getComputedStyle(parent, null).getPropertyValue('position');\n\n      if (index !== 'auto' && position !== 'static') {\n        parentZindex.push(index);\n      }\n\n      parent = parent.parentElement;\n    } else {\n      break;\n    }\n  }\n\n  var childrenZindex = [];\n\n  for (var i = 0; i < document.body.children.length; i++) {\n    if (!element.isEqualNode(document.body.children[i])) {\n      var index = document.defaultView.getComputedStyle(document.body.children[i], null).getPropertyValue('z-index');\n      var position = document.defaultView.getComputedStyle(document.body.children[i], null).getPropertyValue('position');\n\n      if (index !== 'auto' && position !== 'static') {\n        childrenZindex.push(index);\n      }\n    }\n  }\n\n  childrenZindex.push('999');\n  var siblingsZindex = [];\n\n  if (!isNullOrUndefined(element.parentElement) && element.parentElement.tagName !== 'BODY') {\n    var childNodes = [].slice.call(element.parentElement.children);\n\n    for (var i = 0; i < childNodes.length; i++) {\n      if (!element.isEqualNode(childNodes[i])) {\n        var index = document.defaultView.getComputedStyle(childNodes[i], null).getPropertyValue('z-index');\n        var position = document.defaultView.getComputedStyle(childNodes[i], null).getPropertyValue('position');\n\n        if (index !== 'auto' && position !== 'static') {\n          siblingsZindex.push(index);\n        }\n      }\n    }\n  }\n\n  var finalValue = parentZindex.concat(childrenZindex, siblingsZindex); // eslint-disable-next-line\n\n  var currentZindexValue = Math.max.apply(Math, finalValue) + 1;\n  return currentZindexValue > 2147483647 ? 2147483647 : currentZindexValue;\n}\n/**\r\n * Gets the maximum z-index of the page.\r\n *\r\n * @returns {void}\r\n * @param { HTMLElement } tagName - Specify the tagName to get the maximum z-index of it.\r\n * @private\r\n */\n\nexport function getMaxZindex(tagName) {\n  if (tagName === void 0) {\n    tagName = ['*'];\n  }\n\n  var maxZindex = [];\n\n  for (var i = 0; i < tagName.length; i++) {\n    var elements = document.getElementsByTagName(tagName[i]);\n\n    for (var i_1 = 0; i_1 < elements.length; i_1++) {\n      var index = document.defaultView.getComputedStyle(elements[i_1], null).getPropertyValue('z-index');\n      var position = document.defaultView.getComputedStyle(elements[i_1], null).getPropertyValue('position');\n\n      if (index !== 'auto' && position !== 'static') {\n        maxZindex.push(index);\n      }\n    }\n  } // eslint-disable-next-line\n\n\n  var currentZindexValue = Math.max.apply(Math, maxZindex) + 1;\n  return currentZindexValue > 2147483647 ? 2147483647 : currentZindexValue;\n}","map":{"version":3,"sources":["D:/HUST/20211/Introduction to Software Engineering/Project/Sprint 2/RubyGYM/client/node_modules/@syncfusion/ej2-popups/src/popup/popup.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","setStyleAttribute","addClass","removeClass","ChildProperty","Complex","isNullOrUndefined","formatUnit","Browser","calculatePosition","calculateRelativeBasedPosition","Animation","Property","Event","Component","NotifyPropertyChanges","EventHandler","flip","fit","isCollide","PositionData","_super","apply","CLASSNAMES","ROOT","RTL","OPEN","CLOSE","Popup","element","options","call","onPropertyChanged","newProp","oldProp","_i","_a","keys","prop","width","height","zIndex","setEnableRtl","refreshPosition","x","offsetX","style","left","parseInt","toString","y","offsetY","top","setContent","actionOnScroll","wireScrollEvents","unwireScrollEvents","getModuleName","resolveCollision","checkCollision","getPersistData","addOnPersist","destroy","classList","remove","unwireEvents","render","add","styles","fixedParent","wireEvents","isDevice","window","orientationOnChange","getRelateToElement","getScrollableParent","parent_1","scrollRefresh","parent_2","relateToElement","relateTo","document","body","setProperties","querySelector","e","offsetParent","tagName","parentElement","hide","targetVisible","isElementOnViewport","targetInvisibleStatus","trigger","scrollElement","scrollParents","parent_3","isElementVisible","rect","checkGetBoundingClientRect","parent_4","getBoundingClientRect","bottom","right","win","windowView","scrollY","scrollX","outerWidth","outerHeight","off","ele","elementView","preRender","reposition","enableRtl","content","innerHTML","textContent","appendChild","_this","setTimeout","collision","checkFixedParent","pos","position","X","Y","parentDisplay","display","contains","getAnchorPosition","eleRect","error","anchorEle","anchorRect","anchor","anchorPos","targetType","innerWidth","innerHeight","callFlip","param","viewPortElement","callFit","data","elementRect","viewPortRect","horz","vert","show","animationOptions","relativeElement","zIndexElement","getZindexPartial","showAnimation","begin","isDestroyed","end","animate","hideAnimation","parent","parentStyle","getComputedStyle","eleStyle","overflowRegex","test","overflow","overflowY","overflowX","push","parentZindex","index","defaultView","getPropertyValue","childrenZindex","children","isEqualNode","siblingsZindex","childNodes","slice","finalValue","concat","currentZindexValue","Math","max","getMaxZindex","maxZindex","elements","getElementsByTagName","i_1"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { setStyleAttribute, addClass, removeClass, ChildProperty, Complex } from '@syncfusion/ej2-base';\r\nimport { isNullOrUndefined, formatUnit } from '@syncfusion/ej2-base';\r\nimport { Browser } from '@syncfusion/ej2-base';\r\nimport { calculatePosition, calculateRelativeBasedPosition } from '../common/position';\r\nimport { Animation, Property, Event, Component } from '@syncfusion/ej2-base';\r\nimport { NotifyPropertyChanges } from '@syncfusion/ej2-base';\r\nimport { EventHandler } from '@syncfusion/ej2-base';\r\nimport { flip, fit, isCollide } from '../common/collision';\r\n/**\r\n * Specifies the offset position values.\r\n */\r\nvar PositionData = /** @class */ (function (_super) {\r\n    __extends(PositionData, _super);\r\n    function PositionData() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    __decorate([\r\n        Property('left')\r\n    ], PositionData.prototype, \"X\", void 0);\r\n    __decorate([\r\n        Property('top')\r\n    ], PositionData.prototype, \"Y\", void 0);\r\n    return PositionData;\r\n}(ChildProperty));\r\nexport { PositionData };\r\n// don't use space in classNames\r\nvar CLASSNAMES = {\r\n    ROOT: 'e-popup',\r\n    RTL: 'e-rtl',\r\n    OPEN: 'e-popup-open',\r\n    CLOSE: 'e-popup-close'\r\n};\r\n/**\r\n * Represents the Popup Component\r\n * ```html\r\n * <div id=\"popup\" style=\"position:absolute;height:100px;width:100px;\">\r\n * <div style=\"margin:35px 25px;\">Popup Content</div></div>\r\n * ```\r\n * ```typescript\r\n * <script>\r\n *   var popupObj = new Popup();\r\n *   popupObj.appendTo(\"#popup\");\r\n * </script>\r\n * ```\r\n */\r\nvar Popup = /** @class */ (function (_super) {\r\n    __extends(Popup, _super);\r\n    function Popup(element, options) {\r\n        return _super.call(this, options, element) || this;\r\n    }\r\n    /**\r\n     * Called internally if any of the property value changed.\r\n     *\r\n     * @param {PopupModel} newProp - specifies the new property\r\n     * @param {PopupModel} oldProp - specifies the old property\r\n     * @private\r\n     * @returns {void}\r\n     */\r\n    Popup.prototype.onPropertyChanged = function (newProp, oldProp) {\r\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\r\n            var prop = _a[_i];\r\n            switch (prop) {\r\n                case 'width':\r\n                    setStyleAttribute(this.element, { 'width': formatUnit(newProp.width) });\r\n                    break;\r\n                case 'height':\r\n                    setStyleAttribute(this.element, { 'height': formatUnit(newProp.height) });\r\n                    break;\r\n                case 'zIndex':\r\n                    setStyleAttribute(this.element, { 'zIndex': newProp.zIndex });\r\n                    break;\r\n                case 'enableRtl':\r\n                    this.setEnableRtl();\r\n                    break;\r\n                case 'position':\r\n                case 'relateTo':\r\n                    this.refreshPosition();\r\n                    break;\r\n                case 'offsetX':\r\n                    // eslint-disable-next-line\r\n                    var x = newProp.offsetX - oldProp.offsetX;\r\n                    this.element.style.left = (parseInt(this.element.style.left, 10) + (x)).toString() + 'px';\r\n                    break;\r\n                case 'offsetY':\r\n                    // eslint-disable-next-line\r\n                    var y = newProp.offsetY - oldProp.offsetY;\r\n                    this.element.style.top = (parseInt(this.element.style.top, 10) + (y)).toString() + 'px';\r\n                    break;\r\n                case 'content':\r\n                    this.setContent();\r\n                    break;\r\n                case 'actionOnScroll':\r\n                    if (newProp.actionOnScroll !== 'none') {\r\n                        this.wireScrollEvents();\r\n                    }\r\n                    else {\r\n                        this.unwireScrollEvents();\r\n                    }\r\n                    break;\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * gets the Component module name.\r\n     *\r\n     * @returns {void}\r\n     * @private\r\n     */\r\n    Popup.prototype.getModuleName = function () {\r\n        return 'popup';\r\n    };\r\n    /**\r\n     * To resolve if any collision occurs.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    Popup.prototype.resolveCollision = function () {\r\n        this.checkCollision();\r\n    };\r\n    /**\r\n     * gets the persisted state properties of the Component.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    Popup.prototype.getPersistData = function () {\r\n        return this.addOnPersist([]);\r\n    };\r\n    /**\r\n     * To destroy the control.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    Popup.prototype.destroy = function () {\r\n        this.element.classList.remove(CLASSNAMES.ROOT, CLASSNAMES.RTL, CLASSNAMES.OPEN, CLASSNAMES.CLOSE);\r\n        this.unwireEvents();\r\n        _super.prototype.destroy.call(this);\r\n    };\r\n    /**\r\n     * To Initialize the control rendering\r\n     *\r\n     * @returns {void}\r\n     * @private\r\n     */\r\n    Popup.prototype.render = function () {\r\n        this.element.classList.add(CLASSNAMES.ROOT);\r\n        var styles = {};\r\n        if (this.zIndex !== 1000) {\r\n            styles.zIndex = this.zIndex;\r\n        }\r\n        if (this.width !== 'auto') {\r\n            styles.width = formatUnit(this.width);\r\n        }\r\n        if (this.height !== 'auto') {\r\n            styles.height = formatUnit(this.height);\r\n        }\r\n        setStyleAttribute(this.element, styles);\r\n        this.fixedParent = false;\r\n        this.setEnableRtl();\r\n        this.setContent();\r\n    };\r\n    Popup.prototype.wireEvents = function () {\r\n        if (Browser.isDevice) {\r\n            EventHandler.add(window, 'orientationchange', this.orientationOnChange, this);\r\n        }\r\n        if (this.actionOnScroll !== 'none') {\r\n            this.wireScrollEvents();\r\n        }\r\n    };\r\n    Popup.prototype.wireScrollEvents = function () {\r\n        if (this.getRelateToElement()) {\r\n            for (var _i = 0, _a = this.getScrollableParent(this.getRelateToElement()); _i < _a.length; _i++) {\r\n                var parent_1 = _a[_i];\r\n                EventHandler.add(parent_1, 'scroll', this.scrollRefresh, this);\r\n            }\r\n        }\r\n    };\r\n    Popup.prototype.unwireEvents = function () {\r\n        if (Browser.isDevice) {\r\n            EventHandler.remove(window, 'orientationchange', this.orientationOnChange);\r\n        }\r\n        if (this.actionOnScroll !== 'none') {\r\n            this.unwireScrollEvents();\r\n        }\r\n    };\r\n    Popup.prototype.unwireScrollEvents = function () {\r\n        if (this.getRelateToElement()) {\r\n            for (var _i = 0, _a = this.getScrollableParent(this.getRelateToElement()); _i < _a.length; _i++) {\r\n                var parent_2 = _a[_i];\r\n                EventHandler.remove(parent_2, 'scroll', this.scrollRefresh);\r\n            }\r\n        }\r\n    };\r\n    Popup.prototype.getRelateToElement = function () {\r\n        var relateToElement = this.relateTo === '' || isNullOrUndefined(this.relateTo) ?\r\n            document.body : this.relateTo;\r\n        this.setProperties({ relateTo: relateToElement }, true);\r\n        return ((typeof this.relateTo) === 'string') ?\r\n            document.querySelector(this.relateTo) : this.relateTo;\r\n    };\r\n    Popup.prototype.scrollRefresh = function (e) {\r\n        if (this.actionOnScroll === 'reposition') {\r\n            if (!isNullOrUndefined(this.element) && !(this.element.offsetParent === e.target ||\r\n                (this.element.offsetParent && this.element.offsetParent.tagName === 'BODY' &&\r\n                    e.target.parentElement == null))) {\r\n                this.refreshPosition();\r\n            }\r\n        }\r\n        else if (this.actionOnScroll === 'hide') {\r\n            this.hide();\r\n        }\r\n        if (this.actionOnScroll !== 'none') {\r\n            if (this.getRelateToElement()) {\r\n                var targetVisible = this.isElementOnViewport(this.getRelateToElement(), e.target);\r\n                if (!targetVisible && !this.targetInvisibleStatus) {\r\n                    this.trigger('targetExitViewport');\r\n                    this.targetInvisibleStatus = true;\r\n                }\r\n                else if (targetVisible) {\r\n                    this.targetInvisibleStatus = false;\r\n                }\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * This method is to get the element visibility on viewport when scroll\r\n     * the page. This method will returns true even though 1 px of element\r\n     * part is in visible.\r\n     *\r\n     * @param {HTMLElement} relateToElement - specifies the element\r\n     * @param {HTMLElement} scrollElement - specifies the scroll element\r\n     * @returns {boolean} - retruns the boolean\r\n     */\r\n    // eslint-disable-next-line\r\n    Popup.prototype.isElementOnViewport = function (relateToElement, scrollElement) {\r\n        var scrollParents = this.getScrollableParent(relateToElement);\r\n        for (var parent_3 = 0; parent_3 < scrollParents.length; parent_3++) {\r\n            if (this.isElementVisible(relateToElement, scrollParents[parent_3])) {\r\n                continue;\r\n            }\r\n            else {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    };\r\n    Popup.prototype.isElementVisible = function (relateToElement, scrollElement) {\r\n        var rect = this.checkGetBoundingClientRect(relateToElement);\r\n        if (!rect.height || !rect.width) {\r\n            return false;\r\n        }\r\n        if (!isNullOrUndefined(this.checkGetBoundingClientRect(scrollElement))) {\r\n            var parent_4 = scrollElement.getBoundingClientRect();\r\n            return !(rect.bottom < parent_4.top) &&\r\n                (!(rect.bottom > parent_4.bottom) &&\r\n                    (!(rect.right > parent_4.right) &&\r\n                        !(rect.left < parent_4.left)));\r\n        }\r\n        else {\r\n            var win = window;\r\n            var windowView = {\r\n                top: win.scrollY,\r\n                left: win.scrollX,\r\n                right: win.scrollX + win.outerWidth,\r\n                bottom: win.scrollY + win.outerHeight\r\n            };\r\n            var off = calculatePosition(relateToElement);\r\n            var ele = {\r\n                top: off.top,\r\n                left: off.left,\r\n                right: off.left + rect.width,\r\n                bottom: off.top + rect.height\r\n            };\r\n            var elementView = {\r\n                top: windowView.bottom - ele.top,\r\n                left: windowView.right - ele.left,\r\n                bottom: ele.bottom - windowView.top,\r\n                right: ele.right - windowView.left\r\n            };\r\n            return elementView.top > 0\r\n                && elementView.left > 0\r\n                && elementView.right > 0\r\n                && elementView.bottom > 0;\r\n        }\r\n    };\r\n    /**\r\n     * Initialize the event handler\r\n     *\r\n     * @returns {void}\r\n     * @private\r\n     */\r\n    Popup.prototype.preRender = function () {\r\n        //There is no event handler\r\n    };\r\n    Popup.prototype.setEnableRtl = function () {\r\n        this.reposition();\r\n        // eslint-disable-next-line\r\n        this.enableRtl ? this.element.classList.add(CLASSNAMES.RTL) : this.element.classList.remove(CLASSNAMES.RTL);\r\n    };\r\n    Popup.prototype.setContent = function () {\r\n        if (!isNullOrUndefined(this.content)) {\r\n            this.element.innerHTML = '';\r\n            if (typeof (this.content) === 'string') {\r\n                this.element.textContent = this.content;\r\n            }\r\n            else {\r\n                this.element.appendChild(this.content);\r\n            }\r\n        }\r\n    };\r\n    Popup.prototype.orientationOnChange = function () {\r\n        var _this = this;\r\n        setTimeout(function () {\r\n            _this.refreshPosition();\r\n        }, 200);\r\n    };\r\n    // eslint-disable-next-line\r\n    /**\r\n     * Based on the `relative` element and `offset` values, `Popup` element position will refreshed.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    Popup.prototype.refreshPosition = function (target, collision) {\r\n        if (!isNullOrUndefined(target)) {\r\n            this.checkFixedParent(target);\r\n        }\r\n        this.reposition();\r\n        if (!collision) {\r\n            this.checkCollision();\r\n        }\r\n    };\r\n    Popup.prototype.reposition = function () {\r\n        var pos;\r\n        var position;\r\n        var relateToElement = this.getRelateToElement();\r\n        if (typeof this.position.X === 'number' && typeof this.position.Y === 'number') {\r\n            pos = { left: this.position.X, top: this.position.Y };\r\n        }\r\n        else if ((typeof this.position.X === 'string' && typeof this.position.Y === 'number') ||\r\n            (typeof this.position.X === 'number' && typeof this.position.Y === 'string')) {\r\n            var parentDisplay = void 0;\r\n            var display = this.element.style.display;\r\n            this.element.style.display = 'block';\r\n            if (this.element.classList.contains('e-dlg-modal')) {\r\n                parentDisplay = this.element.parentElement.style.display;\r\n                this.element.parentElement.style.display = 'block';\r\n            }\r\n            position = this.getAnchorPosition(relateToElement, this.element, this.position, this.offsetX, this.offsetY);\r\n            if (typeof this.position.X === 'string') {\r\n                pos = { left: position.left, top: this.position.Y };\r\n            }\r\n            else {\r\n                pos = { left: this.position.X, top: position.top };\r\n            }\r\n            this.element.style.display = display;\r\n            if (this.element.classList.contains('e-dlg-modal')) {\r\n                this.element.parentElement.style.display = parentDisplay;\r\n            }\r\n        }\r\n        else if (relateToElement) {\r\n            var display = this.element.style.display;\r\n            this.element.style.display = 'block';\r\n            pos = this.getAnchorPosition(relateToElement, this.element, this.position, this.offsetX, this.offsetY);\r\n            this.element.style.display = display;\r\n        }\r\n        else {\r\n            pos = { left: 0, top: 0 };\r\n        }\r\n        if (!isNullOrUndefined(pos)) {\r\n            this.element.style.left = pos.left + 'px';\r\n            this.element.style.top = pos.top + 'px';\r\n        }\r\n    };\r\n    Popup.prototype.checkGetBoundingClientRect = function (ele) {\r\n        var eleRect;\r\n        try {\r\n            eleRect = ele.getBoundingClientRect();\r\n            return eleRect;\r\n        }\r\n        catch (error) {\r\n            return null;\r\n        }\r\n    };\r\n    Popup.prototype.getAnchorPosition = function (anchorEle, ele, position, offsetX, offsetY) {\r\n        var eleRect = this.checkGetBoundingClientRect(ele);\r\n        var anchorRect = this.checkGetBoundingClientRect(anchorEle);\r\n        if (isNullOrUndefined(eleRect) || isNullOrUndefined(anchorRect)) {\r\n            return null;\r\n        }\r\n        var anchor = anchorEle;\r\n        var anchorPos = { left: 0, top: 0 };\r\n        if (ele.offsetParent && ele.offsetParent.tagName === 'BODY' && anchorEle.tagName === 'BODY') {\r\n            anchorPos = calculatePosition(anchorEle);\r\n        }\r\n        else {\r\n            if ((ele.classList.contains('e-dlg-modal') && anchor.tagName !== 'BODY')) {\r\n                ele = ele.parentElement;\r\n            }\r\n            anchorPos = calculateRelativeBasedPosition(anchor, ele);\r\n        }\r\n        switch (position.X) {\r\n            default:\r\n            case 'left':\r\n                break;\r\n            case 'center':\r\n                if ((ele.classList.contains('e-dlg-modal') && anchor.tagName === 'BODY' && this.targetType === 'container')) {\r\n                    anchorPos.left += (window.innerWidth / 2 - eleRect.width / 2);\r\n                }\r\n                else if (this.targetType === 'container') {\r\n                    anchorPos.left += (anchorRect.width / 2 - eleRect.width / 2);\r\n                }\r\n                else {\r\n                    anchorPos.left += (anchorRect.width / 2);\r\n                }\r\n                break;\r\n            case 'right':\r\n                if ((ele.classList.contains('e-dlg-modal') && anchor.tagName === 'BODY' && this.targetType === 'container')) {\r\n                    anchorPos.left += (window.innerWidth - eleRect.width);\r\n                }\r\n                else if (this.targetType === 'container') {\r\n                    anchorPos.left += (anchorRect.width - eleRect.width);\r\n                }\r\n                else {\r\n                    anchorPos.left += (anchorRect.width);\r\n                }\r\n                break;\r\n        }\r\n        switch (position.Y) {\r\n            default:\r\n            case 'top':\r\n                break;\r\n            case 'center':\r\n                if ((ele.classList.contains('e-dlg-modal') && anchor.tagName === 'BODY' && this.targetType === 'container')) {\r\n                    anchorPos.top += (window.innerHeight / 2 - eleRect.height / 2);\r\n                }\r\n                else if (this.targetType === 'container') {\r\n                    anchorPos.top += (anchorRect.height / 2 - eleRect.height / 2);\r\n                }\r\n                else {\r\n                    anchorPos.top += (anchorRect.height / 2);\r\n                }\r\n                break;\r\n            case 'bottom':\r\n                if ((ele.classList.contains('e-dlg-modal') && anchor.tagName === 'BODY' && this.targetType === 'container')) {\r\n                    anchorPos.top += (window.innerHeight - eleRect.height);\r\n                }\r\n                else if (this.targetType === 'container') {\r\n                    anchorPos.top += (anchorRect.height - eleRect.height);\r\n                }\r\n                else {\r\n                    anchorPos.top += (anchorRect.height);\r\n                }\r\n                break;\r\n        }\r\n        anchorPos.left += offsetX;\r\n        anchorPos.top += offsetY;\r\n        return anchorPos;\r\n    };\r\n    Popup.prototype.callFlip = function (param) {\r\n        var relateToElement = this.getRelateToElement();\r\n        flip(this.element, relateToElement, this.offsetX, this.offsetY, this.position.X, this.position.Y, this.viewPortElement, param, this.fixedParent);\r\n    };\r\n    Popup.prototype.callFit = function (param) {\r\n        if (isCollide(this.element, this.viewPortElement).length !== 0) {\r\n            if (isNullOrUndefined(this.viewPortElement)) {\r\n                var data = fit(this.element, this.viewPortElement, param);\r\n                if (param.X) {\r\n                    this.element.style.left = data.left + 'px';\r\n                }\r\n                if (param.Y) {\r\n                    this.element.style.top = data.top + 'px';\r\n                }\r\n            }\r\n            else {\r\n                var elementRect = this.checkGetBoundingClientRect(this.element);\r\n                var viewPortRect = this.checkGetBoundingClientRect(this.viewPortElement);\r\n                if (isNullOrUndefined(elementRect) || isNullOrUndefined(viewPortRect)) {\r\n                    return null;\r\n                }\r\n                if (param && param.Y === true) {\r\n                    if (viewPortRect.top > elementRect.top) {\r\n                        this.element.style.top = '0px';\r\n                    }\r\n                    else if (viewPortRect.bottom < elementRect.bottom) {\r\n                        this.element.style.top = parseInt(this.element.style.top, 10) - (elementRect.bottom - viewPortRect.bottom) + 'px';\r\n                    }\r\n                }\r\n                if (param && param.X === true) {\r\n                    if (viewPortRect.right < elementRect.right) {\r\n                        this.element.style.left = parseInt(this.element.style.left, 10) - (elementRect.right - viewPortRect.right) + 'px';\r\n                    }\r\n                    else if (viewPortRect.left > elementRect.left) {\r\n                        this.element.style.left = parseInt(this.element.style.left, 10) + (viewPortRect.left - elementRect.left) + 'px';\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n    Popup.prototype.checkCollision = function () {\r\n        var horz = this.collision.X;\r\n        var vert = this.collision.Y;\r\n        if (horz === 'none' && vert === 'none') {\r\n            return;\r\n        }\r\n        if (horz === 'flip' && vert === 'flip') {\r\n            this.callFlip({ X: true, Y: true });\r\n        }\r\n        else if (horz === 'fit' && vert === 'fit') {\r\n            this.callFit({ X: true, Y: true });\r\n        }\r\n        else {\r\n            if (horz === 'flip') {\r\n                this.callFlip({ X: true, Y: false });\r\n            }\r\n            else if (vert === 'flip') {\r\n                this.callFlip({ Y: true, X: false });\r\n            }\r\n            if (horz === 'fit') {\r\n                this.callFit({ X: true, Y: false });\r\n            }\r\n            else if (vert === 'fit') {\r\n                this.callFit({ X: false, Y: true });\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Shows the popup element from screen.\r\n     *\r\n     * @returns {void}\r\n     * @param {AnimationModel} animationOptions - specifies the model\r\n     * @param { HTMLElement } relativeElement - To calculate the zIndex value dynamically.\r\n     */\r\n    Popup.prototype.show = function (animationOptions, relativeElement) {\r\n        var _this = this;\r\n        this.wireEvents();\r\n        if (this.zIndex === 1000 || !isNullOrUndefined(relativeElement)) {\r\n            var zIndexElement = (isNullOrUndefined(relativeElement)) ? this.element : relativeElement;\r\n            this.zIndex = getZindexPartial(zIndexElement);\r\n            setStyleAttribute(this.element, { 'zIndex': this.zIndex });\r\n        }\r\n        animationOptions = (!isNullOrUndefined(animationOptions) && typeof animationOptions === 'object') ?\r\n            animationOptions : this.showAnimation;\r\n        if (this.collision.X !== 'none' || this.collision.Y !== 'none') {\r\n            removeClass([this.element], CLASSNAMES.CLOSE);\r\n            addClass([this.element], CLASSNAMES.OPEN);\r\n            this.checkCollision();\r\n            removeClass([this.element], CLASSNAMES.OPEN);\r\n            addClass([this.element], CLASSNAMES.CLOSE);\r\n        }\r\n        if (!isNullOrUndefined(animationOptions)) {\r\n            animationOptions.begin = function () {\r\n                if (!_this.isDestroyed) {\r\n                    removeClass([_this.element], CLASSNAMES.CLOSE);\r\n                    addClass([_this.element], CLASSNAMES.OPEN);\r\n                }\r\n            };\r\n            animationOptions.end = function () {\r\n                if (!_this.isDestroyed) {\r\n                    _this.trigger('open');\r\n                }\r\n            };\r\n            new Animation(animationOptions).animate(this.element);\r\n        }\r\n        else {\r\n            removeClass([this.element], CLASSNAMES.CLOSE);\r\n            addClass([this.element], CLASSNAMES.OPEN);\r\n            this.trigger('open');\r\n        }\r\n    };\r\n    /**\r\n     * Hides the popup element from screen.\r\n     *\r\n     * @param {AnimationModel} animationOptions - To give the animation options.\r\n     * @returns {void}\r\n     */\r\n    Popup.prototype.hide = function (animationOptions) {\r\n        var _this = this;\r\n        animationOptions = (!isNullOrUndefined(animationOptions) && typeof animationOptions === 'object') ?\r\n            animationOptions : this.hideAnimation;\r\n        if (!isNullOrUndefined(animationOptions)) {\r\n            animationOptions.end = function () {\r\n                if (!_this.isDestroyed) {\r\n                    removeClass([_this.element], CLASSNAMES.OPEN);\r\n                    addClass([_this.element], CLASSNAMES.CLOSE);\r\n                    _this.trigger('close');\r\n                }\r\n            };\r\n            new Animation(animationOptions).animate(this.element);\r\n        }\r\n        else {\r\n            removeClass([this.element], CLASSNAMES.OPEN);\r\n            addClass([this.element], CLASSNAMES.CLOSE);\r\n            this.trigger('close');\r\n        }\r\n        this.unwireEvents();\r\n    };\r\n    /**\r\n     * Gets scrollable parent elements for the given element.\r\n     *\r\n     * @returns {void}\r\n     * @param { HTMLElement } element - Specify the element to get the scrollable parents of it.\r\n     */\r\n    Popup.prototype.getScrollableParent = function (element) {\r\n        this.checkFixedParent(element);\r\n        return getScrollableParent(element, this.fixedParent);\r\n    };\r\n    Popup.prototype.checkFixedParent = function (element) {\r\n        var parent = element.parentElement;\r\n        while (parent && parent.tagName !== 'HTML') {\r\n            var parentStyle = getComputedStyle(parent);\r\n            if (parentStyle.position === 'fixed' && !isNullOrUndefined(this.element) && this.element.offsetParent && this.element.offsetParent.tagName === 'BODY') {\r\n                this.element.style.top = window.scrollY > parseInt(this.element.style.top) ? formatUnit(window.scrollY - parseInt(this.element.style.top))\r\n                    : formatUnit(parseInt(this.element.style.top) - window.scrollY);\r\n                this.element.style.position = 'fixed';\r\n                this.fixedParent = true;\r\n            }\r\n            parent = parent.parentElement;\r\n            if (!isNullOrUndefined(this.element) && isNullOrUndefined(this.element.offsetParent) && parentStyle.position === 'fixed'\r\n                && this.element.style.position === 'fixed') {\r\n                this.fixedParent = true;\r\n            }\r\n        }\r\n    };\r\n    __decorate([\r\n        Property('auto')\r\n    ], Popup.prototype, \"height\", void 0);\r\n    __decorate([\r\n        Property('auto')\r\n    ], Popup.prototype, \"width\", void 0);\r\n    __decorate([\r\n        Property(null)\r\n    ], Popup.prototype, \"content\", void 0);\r\n    __decorate([\r\n        Property('container')\r\n    ], Popup.prototype, \"targetType\", void 0);\r\n    __decorate([\r\n        Property(null)\r\n    ], Popup.prototype, \"viewPortElement\", void 0);\r\n    __decorate([\r\n        Property({ X: 'none', Y: 'none' })\r\n    ], Popup.prototype, \"collision\", void 0);\r\n    __decorate([\r\n        Property('')\r\n    ], Popup.prototype, \"relateTo\", void 0);\r\n    __decorate([\r\n        Complex({}, PositionData)\r\n    ], Popup.prototype, \"position\", void 0);\r\n    __decorate([\r\n        Property(0)\r\n    ], Popup.prototype, \"offsetX\", void 0);\r\n    __decorate([\r\n        Property(0)\r\n    ], Popup.prototype, \"offsetY\", void 0);\r\n    __decorate([\r\n        Property(1000)\r\n    ], Popup.prototype, \"zIndex\", void 0);\r\n    __decorate([\r\n        Property(false)\r\n    ], Popup.prototype, \"enableRtl\", void 0);\r\n    __decorate([\r\n        Property('reposition')\r\n    ], Popup.prototype, \"actionOnScroll\", void 0);\r\n    __decorate([\r\n        Property(null)\r\n    ], Popup.prototype, \"showAnimation\", void 0);\r\n    __decorate([\r\n        Property(null)\r\n    ], Popup.prototype, \"hideAnimation\", void 0);\r\n    __decorate([\r\n        Event()\r\n    ], Popup.prototype, \"open\", void 0);\r\n    __decorate([\r\n        Event()\r\n    ], Popup.prototype, \"close\", void 0);\r\n    __decorate([\r\n        Event()\r\n    ], Popup.prototype, \"targetExitViewport\", void 0);\r\n    Popup = __decorate([\r\n        NotifyPropertyChanges\r\n    ], Popup);\r\n    return Popup;\r\n}(Component));\r\nexport { Popup };\r\n/**\r\n * Gets scrollable parent elements for the given element.\r\n *\r\n * @param { HTMLElement } element - Specify the element to get the scrollable parents of it.\r\n * @param {boolean} fixedParent - specifies the parent element\r\n * @private\r\n * @returns {void}\r\n */\r\nexport function getScrollableParent(element, fixedParent) {\r\n    var eleStyle = getComputedStyle(element);\r\n    var scrollParents = [];\r\n    var overflowRegex = /(auto|scroll)/;\r\n    var parent = element.parentElement;\r\n    while (parent && parent.tagName !== 'HTML') {\r\n        var parentStyle = getComputedStyle(parent);\r\n        if (!(eleStyle.position === 'absolute' && parentStyle.position === 'static')\r\n            && overflowRegex.test(parentStyle.overflow + parentStyle.overflowY + parentStyle.overflowX)) {\r\n            scrollParents.push(parent);\r\n        }\r\n        parent = parent.parentElement;\r\n    }\r\n    if (!fixedParent) {\r\n        scrollParents.push(document);\r\n    }\r\n    return scrollParents;\r\n}\r\n/**\r\n * Gets the maximum z-index of the given element.\r\n *\r\n * @returns {void}\r\n * @param { HTMLElement } element - Specify the element to get the maximum z-index of it.\r\n * @private\r\n */\r\nexport function getZindexPartial(element) {\r\n    // upto body traversal\r\n    var parent = element.parentElement;\r\n    var parentZindex = [];\r\n    while (parent) {\r\n        if (parent.tagName !== 'BODY') {\r\n            var index = document.defaultView.getComputedStyle(parent, null).getPropertyValue('z-index');\r\n            var position = document.defaultView.getComputedStyle(parent, null).getPropertyValue('position');\r\n            if (index !== 'auto' && position !== 'static') {\r\n                parentZindex.push(index);\r\n            }\r\n            parent = parent.parentElement;\r\n        }\r\n        else {\r\n            break;\r\n        }\r\n    }\r\n    var childrenZindex = [];\r\n    for (var i = 0; i < document.body.children.length; i++) {\r\n        if (!element.isEqualNode(document.body.children[i])) {\r\n            var index = document.defaultView.getComputedStyle(document.body.children[i], null).getPropertyValue('z-index');\r\n            var position = document.defaultView.getComputedStyle(document.body.children[i], null).getPropertyValue('position');\r\n            if (index !== 'auto' && position !== 'static') {\r\n                childrenZindex.push(index);\r\n            }\r\n        }\r\n    }\r\n    childrenZindex.push('999');\r\n    var siblingsZindex = [];\r\n    if (!isNullOrUndefined(element.parentElement) && element.parentElement.tagName !== 'BODY') {\r\n        var childNodes = [].slice.call(element.parentElement.children);\r\n        for (var i = 0; i < childNodes.length; i++) {\r\n            if (!element.isEqualNode(childNodes[i])) {\r\n                var index = document.defaultView.getComputedStyle(childNodes[i], null).getPropertyValue('z-index');\r\n                var position = document.defaultView.getComputedStyle(childNodes[i], null).getPropertyValue('position');\r\n                if (index !== 'auto' && position !== 'static') {\r\n                    siblingsZindex.push(index);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    var finalValue = parentZindex.concat(childrenZindex, siblingsZindex);\r\n    // eslint-disable-next-line\r\n    var currentZindexValue = Math.max.apply(Math, finalValue) + 1;\r\n    return currentZindexValue > 2147483647 ? 2147483647 : currentZindexValue;\r\n}\r\n/**\r\n * Gets the maximum z-index of the page.\r\n *\r\n * @returns {void}\r\n * @param { HTMLElement } tagName - Specify the tagName to get the maximum z-index of it.\r\n * @private\r\n */\r\nexport function getMaxZindex(tagName) {\r\n    if (tagName === void 0) { tagName = ['*']; }\r\n    var maxZindex = [];\r\n    for (var i = 0; i < tagName.length; i++) {\r\n        var elements = document.getElementsByTagName(tagName[i]);\r\n        for (var i_1 = 0; i_1 < elements.length; i_1++) {\r\n            var index = document.defaultView.getComputedStyle(elements[i_1], null).getPropertyValue('z-index');\r\n            var position = document.defaultView.getComputedStyle(elements[i_1], null).getPropertyValue('position');\r\n            if (index !== 'auto' && position !== 'static') {\r\n                maxZindex.push(index);\r\n            }\r\n        }\r\n    }\r\n    // eslint-disable-next-line\r\n    var currentZindexValue = Math.max.apply(Math, maxZindex) + 1;\r\n    return currentZindexValue > 2147483647 ? 2147483647 : currentZindexValue;\r\n}\r\n"]},"metadata":{},"sourceType":"module"}