{"ast":null,"code":"/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/styles/border\n */\nimport { getShorthandValues, getBoxSidesValueReducer, getBoxSidesValues, isLength, isLineStyle } from './utils';\n/**\n * Adds a border CSS styles processing rules.\n *\n *\t\teditor.data.addStyleProcessorRules( addBorderRules );\n *\n * This rules merges all [border](https://developer.mozilla.org/en-US/docs/Web/CSS/border) styles notation shorthands:\n *\n * - border\n * - border-top\n * - border-right\n * - border-bottom\n * - border-left\n * - border-color\n * - border-style\n * - border-width\n *\n * and all corresponding longhand forms (like `border-top-color`, `border-top-style`, etc).\n *\n * It does not handle other shorthands (like `border-radius` or `border-image`).\n *\n * The normalized model stores border values as:\n *\n *\t\tconst styles = {\n *\t\t\tborder: {\n *\t\t\t\tcolor: { top, right, bottom, left },\n *\t\t\t\tstyle: { top, right, bottom, left },\n *\t\t\t\twidth: { top, right, bottom, left },\n *\t\t\t}\n *\t\t};\n *\n * @param {module:engine/view/stylesmap~StylesProcessor} stylesProcessor\n */\n\nexport function addBorderRules(stylesProcessor) {\n  stylesProcessor.setNormalizer('border', borderNormalizer); // Border-position shorthands.\n\n  stylesProcessor.setNormalizer('border-top', getBorderPositionNormalizer('top'));\n  stylesProcessor.setNormalizer('border-right', getBorderPositionNormalizer('right'));\n  stylesProcessor.setNormalizer('border-bottom', getBorderPositionNormalizer('bottom'));\n  stylesProcessor.setNormalizer('border-left', getBorderPositionNormalizer('left')); // Border-property shorthands.\n\n  stylesProcessor.setNormalizer('border-color', getBorderPropertyNormalizer('color'));\n  stylesProcessor.setNormalizer('border-width', getBorderPropertyNormalizer('width'));\n  stylesProcessor.setNormalizer('border-style', getBorderPropertyNormalizer('style')); // Border longhands.\n\n  stylesProcessor.setNormalizer('border-top-color', getBorderPropertyPositionNormalizer('color', 'top'));\n  stylesProcessor.setNormalizer('border-top-style', getBorderPropertyPositionNormalizer('style', 'top'));\n  stylesProcessor.setNormalizer('border-top-width', getBorderPropertyPositionNormalizer('width', 'top'));\n  stylesProcessor.setNormalizer('border-right-color', getBorderPropertyPositionNormalizer('color', 'right'));\n  stylesProcessor.setNormalizer('border-right-style', getBorderPropertyPositionNormalizer('style', 'right'));\n  stylesProcessor.setNormalizer('border-right-width', getBorderPropertyPositionNormalizer('width', 'right'));\n  stylesProcessor.setNormalizer('border-bottom-color', getBorderPropertyPositionNormalizer('color', 'bottom'));\n  stylesProcessor.setNormalizer('border-bottom-style', getBorderPropertyPositionNormalizer('style', 'bottom'));\n  stylesProcessor.setNormalizer('border-bottom-width', getBorderPropertyPositionNormalizer('width', 'bottom'));\n  stylesProcessor.setNormalizer('border-left-color', getBorderPropertyPositionNormalizer('color', 'left'));\n  stylesProcessor.setNormalizer('border-left-style', getBorderPropertyPositionNormalizer('style', 'left'));\n  stylesProcessor.setNormalizer('border-left-width', getBorderPropertyPositionNormalizer('width', 'left'));\n  stylesProcessor.setExtractor('border-top', getBorderPositionExtractor('top'));\n  stylesProcessor.setExtractor('border-right', getBorderPositionExtractor('right'));\n  stylesProcessor.setExtractor('border-bottom', getBorderPositionExtractor('bottom'));\n  stylesProcessor.setExtractor('border-left', getBorderPositionExtractor('left'));\n  stylesProcessor.setExtractor('border-top-color', 'border.color.top');\n  stylesProcessor.setExtractor('border-right-color', 'border.color.right');\n  stylesProcessor.setExtractor('border-bottom-color', 'border.color.bottom');\n  stylesProcessor.setExtractor('border-left-color', 'border.color.left');\n  stylesProcessor.setExtractor('border-top-width', 'border.width.top');\n  stylesProcessor.setExtractor('border-right-width', 'border.width.right');\n  stylesProcessor.setExtractor('border-bottom-width', 'border.width.bottom');\n  stylesProcessor.setExtractor('border-left-width', 'border.width.left');\n  stylesProcessor.setExtractor('border-top-style', 'border.style.top');\n  stylesProcessor.setExtractor('border-right-style', 'border.style.right');\n  stylesProcessor.setExtractor('border-bottom-style', 'border.style.bottom');\n  stylesProcessor.setExtractor('border-left-style', 'border.style.left');\n  stylesProcessor.setReducer('border-color', getBoxSidesValueReducer('border-color'));\n  stylesProcessor.setReducer('border-style', getBoxSidesValueReducer('border-style'));\n  stylesProcessor.setReducer('border-width', getBoxSidesValueReducer('border-width'));\n  stylesProcessor.setReducer('border-top', getBorderPositionReducer('top'));\n  stylesProcessor.setReducer('border-right', getBorderPositionReducer('right'));\n  stylesProcessor.setReducer('border-bottom', getBorderPositionReducer('bottom'));\n  stylesProcessor.setReducer('border-left', getBorderPositionReducer('left'));\n  stylesProcessor.setReducer('border', getBorderReducer());\n  stylesProcessor.setStyleRelation('border', ['border-color', 'border-style', 'border-width', 'border-top', 'border-right', 'border-bottom', 'border-left', 'border-top-color', 'border-right-color', 'border-bottom-color', 'border-left-color', 'border-top-style', 'border-right-style', 'border-bottom-style', 'border-left-style', 'border-top-width', 'border-right-width', 'border-bottom-width', 'border-left-width']);\n  stylesProcessor.setStyleRelation('border-color', ['border-top-color', 'border-right-color', 'border-bottom-color', 'border-left-color']);\n  stylesProcessor.setStyleRelation('border-style', ['border-top-style', 'border-right-style', 'border-bottom-style', 'border-left-style']);\n  stylesProcessor.setStyleRelation('border-width', ['border-top-width', 'border-right-width', 'border-bottom-width', 'border-left-width']);\n  stylesProcessor.setStyleRelation('border-top', ['border-top-color', 'border-top-style', 'border-top-width']);\n  stylesProcessor.setStyleRelation('border-right', ['border-right-color', 'border-right-style', 'border-right-width']);\n  stylesProcessor.setStyleRelation('border-bottom', ['border-bottom-color', 'border-bottom-style', 'border-bottom-width']);\n  stylesProcessor.setStyleRelation('border-left', ['border-left-color', 'border-left-style', 'border-left-width']);\n}\n\nfunction borderNormalizer(value) {\n  const {\n    color,\n    style,\n    width\n  } = normalizeBorderShorthand(value);\n  return {\n    path: 'border',\n    value: {\n      color: getBoxSidesValues(color),\n      style: getBoxSidesValues(style),\n      width: getBoxSidesValues(width)\n    }\n  };\n}\n\nfunction getBorderPositionNormalizer(side) {\n  return value => {\n    const {\n      color,\n      style,\n      width\n    } = normalizeBorderShorthand(value);\n    const border = {};\n\n    if (color !== undefined) {\n      border.color = {\n        [side]: color\n      };\n    }\n\n    if (style !== undefined) {\n      border.style = {\n        [side]: style\n      };\n    }\n\n    if (width !== undefined) {\n      border.width = {\n        [side]: width\n      };\n    }\n\n    return {\n      path: 'border',\n      value: border\n    };\n  };\n}\n\nfunction getBorderPropertyNormalizer(propertyName) {\n  return value => {\n    return {\n      path: 'border',\n      value: toBorderPropertyShorthand(value, propertyName)\n    };\n  };\n}\n\nfunction toBorderPropertyShorthand(value, property) {\n  return {\n    [property]: getBoxSidesValues(value)\n  };\n}\n\nfunction getBorderPropertyPositionNormalizer(property, side) {\n  return value => {\n    return {\n      path: 'border',\n      value: {\n        [property]: {\n          [side]: value\n        }\n      }\n    };\n  };\n}\n\nfunction getBorderPositionExtractor(which) {\n  return (name, styles) => {\n    if (styles.border) {\n      return extractBorderPosition(styles.border, which);\n    }\n  };\n}\n\nfunction extractBorderPosition(border, which) {\n  const value = {};\n\n  if (border.width && border.width[which]) {\n    value.width = border.width[which];\n  }\n\n  if (border.style && border.style[which]) {\n    value.style = border.style[which];\n  }\n\n  if (border.color && border.color[which]) {\n    value.color = border.color[which];\n  }\n\n  return value;\n}\n\nfunction normalizeBorderShorthand(string) {\n  const result = {};\n  const parts = getShorthandValues(string);\n\n  for (const part of parts) {\n    if (isLength(part) || /thin|medium|thick/.test(part)) {\n      result.width = part;\n    } else if (isLineStyle(part)) {\n      result.style = part;\n    } else {\n      result.color = part;\n    }\n  }\n\n  return result;\n} // The border reducer factory.\n//\n// It tries to produce the most optimal output for the specified styles.\n//\n// For a border style:\n//\n//      style: {top: \"solid\", bottom: \"solid\", right: \"solid\", left: \"solid\"}\n//\n// It will produce: `border-style: solid`.\n// For a border style and color:\n//\n//      color: {top: \"#ff0\", bottom: \"#ff0\", right: \"#ff0\", left: \"#ff0\"}\n//      style: {top: \"solid\", bottom: \"solid\", right: \"solid\", left: \"solid\"}\n//\n// It will produce: `border-color: #ff0; border-style: solid`.\n// If all border parameters are specified:\n//\n//      color: {top: \"#ff0\", bottom: \"#ff0\", right: \"#ff0\", left: \"#ff0\"}\n//      style: {top: \"solid\", bottom: \"solid\", right: \"solid\", left: \"solid\"}\n//      width: {top: \"2px\", bottom: \"2px\", right: \"2px\", left: \"2px\"}\n//\n// It will combine everything into a single property: `border: 2px solid #ff0`.\n//\n// The definitions are merged only if all border selectors have the same values.\n//\n// @returns {Function}\n\n\nfunction getBorderReducer() {\n  return value => {\n    const topStyles = extractBorderPosition(value, 'top');\n    const rightStyles = extractBorderPosition(value, 'right');\n    const bottomStyles = extractBorderPosition(value, 'bottom');\n    const leftStyles = extractBorderPosition(value, 'left');\n    const borderStyles = [topStyles, rightStyles, bottomStyles, leftStyles];\n    const borderStylesByType = {\n      width: getReducedStyleValueForType(borderStyles, 'width'),\n      style: getReducedStyleValueForType(borderStyles, 'style'),\n      color: getReducedStyleValueForType(borderStyles, 'color')\n    }; // Try reducing to a single `border:` property.\n\n    const reducedBorderStyle = reduceBorderPosition(borderStylesByType, 'all');\n\n    if (reducedBorderStyle.length) {\n      return reducedBorderStyle;\n    } // Try reducing to `border-style:`, `border-width:`, `border-color:` properties.\n\n\n    const reducedStyleTypes = Object.entries(borderStylesByType).reduce((reducedStyleTypes, _ref) => {\n      let [type, value] = _ref;\n\n      if (value) {\n        reducedStyleTypes.push([`border-${type}`, value]); // Remove it from the full set to not include it in the most specific properties later.\n\n        borderStyles.forEach(style => style[type] = null);\n      }\n\n      return reducedStyleTypes;\n    }, []); // The reduced properties (by type) and all that remains that could not be reduced.\n\n    return [...reducedStyleTypes, ...reduceBorderPosition(topStyles, 'top'), ...reduceBorderPosition(rightStyles, 'right'), ...reduceBorderPosition(bottomStyles, 'bottom'), ...reduceBorderPosition(leftStyles, 'left')];\n  }; // @param {Array.<Object>} styles The array of objects with `style`, `color`, `width` properties.\n  // @param {'width'|'style'|'color'} type\n\n  function getReducedStyleValueForType(styles, type) {\n    return styles.map(style => style[type]).reduce((result, style) => result == style ? result : null);\n  }\n}\n\nfunction getBorderPositionReducer(which) {\n  return value => reduceBorderPosition(value, which);\n} // Returns an array with reduced border styles depending on the specified values.\n//\n// If all border properties (width, style, color) are specified, the returned selector will be\n// merged into a group: `border-*: [width] [style] [color]`.\n//\n// Otherwise, the specific definitions will be returned: `border-(width|style|color)-*: [value]`.\n//\n// @param {Object|null} value Styles if defined.\n// @param {'top'|'right'|'bottom'|'left'|'all'} which The border position.\n// @returns {Array}\n\n\nfunction reduceBorderPosition(value, which) {\n  const borderTypes = [];\n\n  if (value && value.width) {\n    borderTypes.push('width');\n  }\n\n  if (value && value.style) {\n    borderTypes.push('style');\n  }\n\n  if (value && value.color) {\n    borderTypes.push('color');\n  }\n\n  if (borderTypes.length == 3) {\n    const borderValue = borderTypes.map(item => value[item]).join(' ');\n    return [which == 'all' ? ['border', borderValue] : [`border-${which}`, borderValue]];\n  } // We are unable to reduce to a single `border:` property.\n\n\n  if (which == 'all') {\n    return [];\n  }\n\n  return borderTypes.map(type => {\n    return [`border-${which}-${type}`, value[type]];\n  });\n}","map":{"version":3,"sources":["D:/Project/nhap_mon_cnpm/my-app/node_modules/@ckeditor/ckeditor5-engine/src/view/styles/border.js"],"names":["getShorthandValues","getBoxSidesValueReducer","getBoxSidesValues","isLength","isLineStyle","addBorderRules","stylesProcessor","setNormalizer","borderNormalizer","getBorderPositionNormalizer","getBorderPropertyNormalizer","getBorderPropertyPositionNormalizer","setExtractor","getBorderPositionExtractor","setReducer","getBorderPositionReducer","getBorderReducer","setStyleRelation","value","color","style","width","normalizeBorderShorthand","path","side","border","undefined","propertyName","toBorderPropertyShorthand","property","which","name","styles","extractBorderPosition","string","result","parts","part","test","topStyles","rightStyles","bottomStyles","leftStyles","borderStyles","borderStylesByType","getReducedStyleValueForType","reducedBorderStyle","reduceBorderPosition","length","reducedStyleTypes","Object","entries","reduce","type","push","forEach","map","borderTypes","borderValue","item","join"],"mappings":"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","sourcesContent":["/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module engine/view/styles/border\n */\n\nimport { getShorthandValues, getBoxSidesValueReducer, getBoxSidesValues, isLength, isLineStyle } from './utils';\n\n/**\n * Adds a border CSS styles processing rules.\n *\n *\t\teditor.data.addStyleProcessorRules( addBorderRules );\n *\n * This rules merges all [border](https://developer.mozilla.org/en-US/docs/Web/CSS/border) styles notation shorthands:\n *\n * - border\n * - border-top\n * - border-right\n * - border-bottom\n * - border-left\n * - border-color\n * - border-style\n * - border-width\n *\n * and all corresponding longhand forms (like `border-top-color`, `border-top-style`, etc).\n *\n * It does not handle other shorthands (like `border-radius` or `border-image`).\n *\n * The normalized model stores border values as:\n *\n *\t\tconst styles = {\n *\t\t\tborder: {\n *\t\t\t\tcolor: { top, right, bottom, left },\n *\t\t\t\tstyle: { top, right, bottom, left },\n *\t\t\t\twidth: { top, right, bottom, left },\n *\t\t\t}\n *\t\t};\n *\n * @param {module:engine/view/stylesmap~StylesProcessor} stylesProcessor\n */\nexport function addBorderRules( stylesProcessor ) {\n\tstylesProcessor.setNormalizer( 'border', borderNormalizer );\n\n\t// Border-position shorthands.\n\tstylesProcessor.setNormalizer( 'border-top', getBorderPositionNormalizer( 'top' ) );\n\tstylesProcessor.setNormalizer( 'border-right', getBorderPositionNormalizer( 'right' ) );\n\tstylesProcessor.setNormalizer( 'border-bottom', getBorderPositionNormalizer( 'bottom' ) );\n\tstylesProcessor.setNormalizer( 'border-left', getBorderPositionNormalizer( 'left' ) );\n\n\t// Border-property shorthands.\n\tstylesProcessor.setNormalizer( 'border-color', getBorderPropertyNormalizer( 'color' ) );\n\tstylesProcessor.setNormalizer( 'border-width', getBorderPropertyNormalizer( 'width' ) );\n\tstylesProcessor.setNormalizer( 'border-style', getBorderPropertyNormalizer( 'style' ) );\n\n\t// Border longhands.\n\tstylesProcessor.setNormalizer( 'border-top-color', getBorderPropertyPositionNormalizer( 'color', 'top' ) );\n\tstylesProcessor.setNormalizer( 'border-top-style', getBorderPropertyPositionNormalizer( 'style', 'top' ) );\n\tstylesProcessor.setNormalizer( 'border-top-width', getBorderPropertyPositionNormalizer( 'width', 'top' ) );\n\n\tstylesProcessor.setNormalizer( 'border-right-color', getBorderPropertyPositionNormalizer( 'color', 'right' ) );\n\tstylesProcessor.setNormalizer( 'border-right-style', getBorderPropertyPositionNormalizer( 'style', 'right' ) );\n\tstylesProcessor.setNormalizer( 'border-right-width', getBorderPropertyPositionNormalizer( 'width', 'right' ) );\n\n\tstylesProcessor.setNormalizer( 'border-bottom-color', getBorderPropertyPositionNormalizer( 'color', 'bottom' ) );\n\tstylesProcessor.setNormalizer( 'border-bottom-style', getBorderPropertyPositionNormalizer( 'style', 'bottom' ) );\n\tstylesProcessor.setNormalizer( 'border-bottom-width', getBorderPropertyPositionNormalizer( 'width', 'bottom' ) );\n\n\tstylesProcessor.setNormalizer( 'border-left-color', getBorderPropertyPositionNormalizer( 'color', 'left' ) );\n\tstylesProcessor.setNormalizer( 'border-left-style', getBorderPropertyPositionNormalizer( 'style', 'left' ) );\n\tstylesProcessor.setNormalizer( 'border-left-width', getBorderPropertyPositionNormalizer( 'width', 'left' ) );\n\n\tstylesProcessor.setExtractor( 'border-top', getBorderPositionExtractor( 'top' ) );\n\tstylesProcessor.setExtractor( 'border-right', getBorderPositionExtractor( 'right' ) );\n\tstylesProcessor.setExtractor( 'border-bottom', getBorderPositionExtractor( 'bottom' ) );\n\tstylesProcessor.setExtractor( 'border-left', getBorderPositionExtractor( 'left' ) );\n\n\tstylesProcessor.setExtractor( 'border-top-color', 'border.color.top' );\n\tstylesProcessor.setExtractor( 'border-right-color', 'border.color.right' );\n\tstylesProcessor.setExtractor( 'border-bottom-color', 'border.color.bottom' );\n\tstylesProcessor.setExtractor( 'border-left-color', 'border.color.left' );\n\n\tstylesProcessor.setExtractor( 'border-top-width', 'border.width.top' );\n\tstylesProcessor.setExtractor( 'border-right-width', 'border.width.right' );\n\tstylesProcessor.setExtractor( 'border-bottom-width', 'border.width.bottom' );\n\tstylesProcessor.setExtractor( 'border-left-width', 'border.width.left' );\n\n\tstylesProcessor.setExtractor( 'border-top-style', 'border.style.top' );\n\tstylesProcessor.setExtractor( 'border-right-style', 'border.style.right' );\n\tstylesProcessor.setExtractor( 'border-bottom-style', 'border.style.bottom' );\n\tstylesProcessor.setExtractor( 'border-left-style', 'border.style.left' );\n\n\tstylesProcessor.setReducer( 'border-color', getBoxSidesValueReducer( 'border-color' ) );\n\tstylesProcessor.setReducer( 'border-style', getBoxSidesValueReducer( 'border-style' ) );\n\tstylesProcessor.setReducer( 'border-width', getBoxSidesValueReducer( 'border-width' ) );\n\tstylesProcessor.setReducer( 'border-top', getBorderPositionReducer( 'top' ) );\n\tstylesProcessor.setReducer( 'border-right', getBorderPositionReducer( 'right' ) );\n\tstylesProcessor.setReducer( 'border-bottom', getBorderPositionReducer( 'bottom' ) );\n\tstylesProcessor.setReducer( 'border-left', getBorderPositionReducer( 'left' ) );\n\tstylesProcessor.setReducer( 'border', getBorderReducer() );\n\n\tstylesProcessor.setStyleRelation( 'border', [\n\t\t'border-color', 'border-style', 'border-width',\n\t\t'border-top', 'border-right', 'border-bottom', 'border-left',\n\t\t'border-top-color', 'border-right-color', 'border-bottom-color', 'border-left-color',\n\t\t'border-top-style', 'border-right-style', 'border-bottom-style', 'border-left-style',\n\t\t'border-top-width', 'border-right-width', 'border-bottom-width', 'border-left-width'\n\t] );\n\n\tstylesProcessor.setStyleRelation( 'border-color', [\n\t\t'border-top-color', 'border-right-color', 'border-bottom-color', 'border-left-color'\n\t] );\n\tstylesProcessor.setStyleRelation( 'border-style', [\n\t\t'border-top-style', 'border-right-style', 'border-bottom-style', 'border-left-style'\n\t] );\n\tstylesProcessor.setStyleRelation( 'border-width', [\n\t\t'border-top-width', 'border-right-width', 'border-bottom-width', 'border-left-width'\n\t] );\n\n\tstylesProcessor.setStyleRelation( 'border-top', [ 'border-top-color', 'border-top-style', 'border-top-width' ] );\n\tstylesProcessor.setStyleRelation( 'border-right', [ 'border-right-color', 'border-right-style', 'border-right-width' ] );\n\tstylesProcessor.setStyleRelation( 'border-bottom', [ 'border-bottom-color', 'border-bottom-style', 'border-bottom-width' ] );\n\tstylesProcessor.setStyleRelation( 'border-left', [ 'border-left-color', 'border-left-style', 'border-left-width' ] );\n}\n\nfunction borderNormalizer( value ) {\n\tconst { color, style, width } = normalizeBorderShorthand( value );\n\n\treturn {\n\t\tpath: 'border',\n\t\tvalue: {\n\t\t\tcolor: getBoxSidesValues( color ),\n\t\t\tstyle: getBoxSidesValues( style ),\n\t\t\twidth: getBoxSidesValues( width )\n\t\t}\n\t};\n}\n\nfunction getBorderPositionNormalizer( side ) {\n\treturn value => {\n\t\tconst { color, style, width } = normalizeBorderShorthand( value );\n\n\t\tconst border = {};\n\n\t\tif ( color !== undefined ) {\n\t\t\tborder.color = { [ side ]: color };\n\t\t}\n\n\t\tif ( style !== undefined ) {\n\t\t\tborder.style = { [ side ]: style };\n\t\t}\n\n\t\tif ( width !== undefined ) {\n\t\t\tborder.width = { [ side ]: width };\n\t\t}\n\n\t\treturn {\n\t\t\tpath: 'border',\n\t\t\tvalue: border\n\t\t};\n\t};\n}\n\nfunction getBorderPropertyNormalizer( propertyName ) {\n\treturn value => {\n\t\treturn {\n\t\t\tpath: 'border',\n\t\t\tvalue: toBorderPropertyShorthand( value, propertyName )\n\t\t};\n\t};\n}\n\nfunction toBorderPropertyShorthand( value, property ) {\n\treturn {\n\t\t[ property ]: getBoxSidesValues( value )\n\t};\n}\n\nfunction getBorderPropertyPositionNormalizer( property, side ) {\n\treturn value => {\n\t\treturn {\n\t\t\tpath: 'border',\n\t\t\tvalue: {\n\t\t\t\t[ property ]: {\n\t\t\t\t\t[ side ]: value\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t};\n}\n\nfunction getBorderPositionExtractor( which ) {\n\treturn ( name, styles ) => {\n\t\tif ( styles.border ) {\n\t\t\treturn extractBorderPosition( styles.border, which );\n\t\t}\n\t};\n}\n\nfunction extractBorderPosition( border, which ) {\n\tconst value = {};\n\n\tif ( border.width && border.width[ which ] ) {\n\t\tvalue.width = border.width[ which ];\n\t}\n\n\tif ( border.style && border.style[ which ] ) {\n\t\tvalue.style = border.style[ which ];\n\t}\n\n\tif ( border.color && border.color[ which ] ) {\n\t\tvalue.color = border.color[ which ];\n\t}\n\n\treturn value;\n}\n\nfunction normalizeBorderShorthand( string ) {\n\tconst result = {};\n\n\tconst parts = getShorthandValues( string );\n\n\tfor ( const part of parts ) {\n\t\tif ( isLength( part ) || /thin|medium|thick/.test( part ) ) {\n\t\t\tresult.width = part;\n\t\t} else if ( isLineStyle( part ) ) {\n\t\t\tresult.style = part;\n\t\t} else {\n\t\t\tresult.color = part;\n\t\t}\n\t}\n\n\treturn result;\n}\n\n// The border reducer factory.\n//\n// It tries to produce the most optimal output for the specified styles.\n//\n// For a border style:\n//\n//      style: {top: \"solid\", bottom: \"solid\", right: \"solid\", left: \"solid\"}\n//\n// It will produce: `border-style: solid`.\n// For a border style and color:\n//\n//      color: {top: \"#ff0\", bottom: \"#ff0\", right: \"#ff0\", left: \"#ff0\"}\n//      style: {top: \"solid\", bottom: \"solid\", right: \"solid\", left: \"solid\"}\n//\n// It will produce: `border-color: #ff0; border-style: solid`.\n// If all border parameters are specified:\n//\n//      color: {top: \"#ff0\", bottom: \"#ff0\", right: \"#ff0\", left: \"#ff0\"}\n//      style: {top: \"solid\", bottom: \"solid\", right: \"solid\", left: \"solid\"}\n//      width: {top: \"2px\", bottom: \"2px\", right: \"2px\", left: \"2px\"}\n//\n// It will combine everything into a single property: `border: 2px solid #ff0`.\n//\n// The definitions are merged only if all border selectors have the same values.\n//\n// @returns {Function}\nfunction getBorderReducer() {\n\treturn value => {\n\t\tconst topStyles = extractBorderPosition( value, 'top' );\n\t\tconst rightStyles = extractBorderPosition( value, 'right' );\n\t\tconst bottomStyles = extractBorderPosition( value, 'bottom' );\n\t\tconst leftStyles = extractBorderPosition( value, 'left' );\n\n\t\tconst borderStyles = [ topStyles, rightStyles, bottomStyles, leftStyles ];\n\n\t\tconst borderStylesByType = {\n\t\t\twidth: getReducedStyleValueForType( borderStyles, 'width' ),\n\t\t\tstyle: getReducedStyleValueForType( borderStyles, 'style' ),\n\t\t\tcolor: getReducedStyleValueForType( borderStyles, 'color' )\n\t\t};\n\n\t\t// Try reducing to a single `border:` property.\n\t\tconst reducedBorderStyle = reduceBorderPosition( borderStylesByType, 'all' );\n\n\t\tif ( reducedBorderStyle.length ) {\n\t\t\treturn reducedBorderStyle;\n\t\t}\n\n\t\t// Try reducing to `border-style:`, `border-width:`, `border-color:` properties.\n\t\tconst reducedStyleTypes = Object.entries( borderStylesByType ).reduce( ( reducedStyleTypes, [ type, value ] ) => {\n\t\t\tif ( value ) {\n\t\t\t\treducedStyleTypes.push( [ `border-${ type }`, value ] );\n\n\t\t\t\t// Remove it from the full set to not include it in the most specific properties later.\n\t\t\t\tborderStyles.forEach( style => ( style[ type ] = null ) );\n\t\t\t}\n\n\t\t\treturn reducedStyleTypes;\n\t\t}, [] );\n\n\t\t// The reduced properties (by type) and all that remains that could not be reduced.\n\t\treturn [\n\t\t\t...reducedStyleTypes,\n\t\t\t...reduceBorderPosition( topStyles, 'top' ),\n\t\t\t...reduceBorderPosition( rightStyles, 'right' ),\n\t\t\t...reduceBorderPosition( bottomStyles, 'bottom' ),\n\t\t\t...reduceBorderPosition( leftStyles, 'left' )\n\t\t];\n\t};\n\n\t// @param {Array.<Object>} styles The array of objects with `style`, `color`, `width` properties.\n\t// @param {'width'|'style'|'color'} type\n\tfunction getReducedStyleValueForType( styles, type ) {\n\t\treturn styles\n\t\t\t.map( style => style[ type ] )\n\t\t\t.reduce( ( result, style ) => result == style ? result : null );\n\t}\n}\n\nfunction getBorderPositionReducer( which ) {\n\treturn value => reduceBorderPosition( value, which );\n}\n\n// Returns an array with reduced border styles depending on the specified values.\n//\n// If all border properties (width, style, color) are specified, the returned selector will be\n// merged into a group: `border-*: [width] [style] [color]`.\n//\n// Otherwise, the specific definitions will be returned: `border-(width|style|color)-*: [value]`.\n//\n// @param {Object|null} value Styles if defined.\n// @param {'top'|'right'|'bottom'|'left'|'all'} which The border position.\n// @returns {Array}\nfunction reduceBorderPosition( value, which ) {\n\tconst borderTypes = [];\n\n\tif ( value && value.width ) {\n\t\tborderTypes.push( 'width' );\n\t}\n\n\tif ( value && value.style ) {\n\t\tborderTypes.push( 'style' );\n\t}\n\n\tif ( value && value.color ) {\n\t\tborderTypes.push( 'color' );\n\t}\n\n\tif ( borderTypes.length == 3 ) {\n\t\tconst borderValue = borderTypes.map( item => value[ item ] ).join( ' ' );\n\n\t\treturn [\n\t\t\twhich == 'all' ? [ 'border', borderValue ] : [ `border-${ which }`, borderValue ]\n\t\t];\n\t}\n\n\t// We are unable to reduce to a single `border:` property.\n\tif ( which == 'all' ) {\n\t\treturn [];\n\t}\n\n\treturn borderTypes.map( type => {\n\t\treturn [ `border-${ which }-${ type }`, value[ type ] ];\n\t} );\n}\n"]},"metadata":{},"sourceType":"module"}