{"ast":null,"code":"/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module image/imageupload/imageuploadui\n */\nimport { Plugin, icons } from 'ckeditor5/src/core';\nimport { FileDialogButtonView } from 'ckeditor5/src/upload';\nimport { createImageTypeRegExp } from './utils';\n/**\n * The image upload button plugin.\n *\n * For a detailed overview, check the {@glink features/images/image-upload/image-upload Image upload feature} documentation.\n *\n * Adds the `'uploadImage'` button to the {@link module:ui/componentfactory~ComponentFactory UI component factory}\n * and also the `imageUpload` button as an alias for backward compatibility.\n *\n * @extends module:core/plugin~Plugin\n */\n\nexport default class ImageUploadUI extends Plugin {\n  /**\n   * @inheritDoc\n   */\n  static get pluginName() {\n    return 'ImageUploadUI';\n  }\n  /**\n   * @inheritDoc\n   */\n\n\n  init() {\n    const editor = this.editor;\n    const t = editor.t;\n\n    const componentCreator = locale => {\n      const view = new FileDialogButtonView(locale);\n      const command = editor.commands.get('uploadImage');\n      const imageTypes = editor.config.get('image.upload.types');\n      const imageTypesRegExp = createImageTypeRegExp(imageTypes);\n      view.set({\n        acceptedType: imageTypes.map(type => `image/${type}`).join(','),\n        allowMultipleFiles: true\n      });\n      view.buttonView.set({\n        label: t('Insert image'),\n        icon: icons.image,\n        tooltip: true\n      });\n      view.buttonView.bind('isEnabled').to(command);\n      view.on('done', (evt, files) => {\n        const imagesToUpload = Array.from(files).filter(file => imageTypesRegExp.test(file.type));\n\n        if (imagesToUpload.length) {\n          editor.execute('uploadImage', {\n            file: imagesToUpload\n          });\n        }\n      });\n      return view;\n    }; // Setup `uploadImage` button and add `imageUpload` button as an alias for backward compatibility.\n\n\n    editor.ui.componentFactory.add('uploadImage', componentCreator);\n    editor.ui.componentFactory.add('imageUpload', componentCreator);\n  }\n\n}","map":{"version":3,"sources":["D:/Project/nhap_mon_cnpm/my-app/node_modules/@ckeditor/ckeditor5-image/src/imageupload/imageuploadui.js"],"names":["Plugin","icons","FileDialogButtonView","createImageTypeRegExp","ImageUploadUI","pluginName","init","editor","t","componentCreator","locale","view","command","commands","get","imageTypes","config","imageTypesRegExp","set","acceptedType","map","type","join","allowMultipleFiles","buttonView","label","icon","image","tooltip","bind","to","on","evt","files","imagesToUpload","Array","from","filter","file","test","length","execute","ui","componentFactory","add"],"mappings":"AAAA;AACA;AACA;AACA;;AAEA;AACA;AACA;AAEA,SAASA,MAAT,EAAiBC,KAAjB,QAA8B,oBAA9B;AACA,SAASC,oBAAT,QAAqC,sBAArC;AACA,SAASC,qBAAT,QAAsC,SAAtC;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,eAAe,MAAMC,aAAN,SAA4BJ,MAA5B,CAAmC;AACjD;AACD;AACA;AACsB,aAAVK,UAAU,GAAG;AACvB,WAAO,eAAP;AACA;AAED;AACD;AACA;;;AACCC,EAAAA,IAAI,GAAG;AACN,UAAMC,MAAM,GAAG,KAAKA,MAApB;AACA,UAAMC,CAAC,GAAGD,MAAM,CAACC,CAAjB;;AACA,UAAMC,gBAAgB,GAAGC,MAAM,IAAI;AAClC,YAAMC,IAAI,GAAG,IAAIT,oBAAJ,CAA0BQ,MAA1B,CAAb;AACA,YAAME,OAAO,GAAGL,MAAM,CAACM,QAAP,CAAgBC,GAAhB,CAAqB,aAArB,CAAhB;AACA,YAAMC,UAAU,GAAGR,MAAM,CAACS,MAAP,CAAcF,GAAd,CAAmB,oBAAnB,CAAnB;AACA,YAAMG,gBAAgB,GAAGd,qBAAqB,CAAEY,UAAF,CAA9C;AAEAJ,MAAAA,IAAI,CAACO,GAAL,CAAU;AACTC,QAAAA,YAAY,EAAEJ,UAAU,CAACK,GAAX,CAAgBC,IAAI,IAAK,SAASA,IAAM,EAAxC,EAA4CC,IAA5C,CAAkD,GAAlD,CADL;AAETC,QAAAA,kBAAkB,EAAE;AAFX,OAAV;AAKAZ,MAAAA,IAAI,CAACa,UAAL,CAAgBN,GAAhB,CAAqB;AACpBO,QAAAA,KAAK,EAAEjB,CAAC,CAAE,cAAF,CADY;AAEpBkB,QAAAA,IAAI,EAAEzB,KAAK,CAAC0B,KAFQ;AAGpBC,QAAAA,OAAO,EAAE;AAHW,OAArB;AAMAjB,MAAAA,IAAI,CAACa,UAAL,CAAgBK,IAAhB,CAAsB,WAAtB,EAAoCC,EAApC,CAAwClB,OAAxC;AAEAD,MAAAA,IAAI,CAACoB,EAAL,CAAS,MAAT,EAAiB,CAAEC,GAAF,EAAOC,KAAP,KAAkB;AAClC,cAAMC,cAAc,GAAGC,KAAK,CAACC,IAAN,CAAYH,KAAZ,EAAoBI,MAApB,CAA4BC,IAAI,IAAIrB,gBAAgB,CAACsB,IAAjB,CAAuBD,IAAI,CAACjB,IAA5B,CAApC,CAAvB;;AAEA,YAAKa,cAAc,CAACM,MAApB,EAA6B;AAC5BjC,UAAAA,MAAM,CAACkC,OAAP,CAAgB,aAAhB,EAA+B;AAAEH,YAAAA,IAAI,EAAEJ;AAAR,WAA/B;AACA;AACD,OAND;AAQA,aAAOvB,IAAP;AACA,KA5BD,CAHM,CAiCN;;;AACAJ,IAAAA,MAAM,CAACmC,EAAP,CAAUC,gBAAV,CAA2BC,GAA3B,CAAgC,aAAhC,EAA+CnC,gBAA/C;AACAF,IAAAA,MAAM,CAACmC,EAAP,CAAUC,gBAAV,CAA2BC,GAA3B,CAAgC,aAAhC,EAA+CnC,gBAA/C;AACA;;AA/CgD","sourcesContent":["/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module image/imageupload/imageuploadui\n */\n\nimport { Plugin, icons } from 'ckeditor5/src/core';\nimport { FileDialogButtonView } from 'ckeditor5/src/upload';\nimport { createImageTypeRegExp } from './utils';\n\n/**\n * The image upload button plugin.\n *\n * For a detailed overview, check the {@glink features/images/image-upload/image-upload Image upload feature} documentation.\n *\n * Adds the `'uploadImage'` button to the {@link module:ui/componentfactory~ComponentFactory UI component factory}\n * and also the `imageUpload` button as an alias for backward compatibility.\n *\n * @extends module:core/plugin~Plugin\n */\nexport default class ImageUploadUI extends Plugin {\n\t/**\n\t * @inheritDoc\n\t */\n\tstatic get pluginName() {\n\t\treturn 'ImageUploadUI';\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tinit() {\n\t\tconst editor = this.editor;\n\t\tconst t = editor.t;\n\t\tconst componentCreator = locale => {\n\t\t\tconst view = new FileDialogButtonView( locale );\n\t\t\tconst command = editor.commands.get( 'uploadImage' );\n\t\t\tconst imageTypes = editor.config.get( 'image.upload.types' );\n\t\t\tconst imageTypesRegExp = createImageTypeRegExp( imageTypes );\n\n\t\t\tview.set( {\n\t\t\t\tacceptedType: imageTypes.map( type => `image/${ type }` ).join( ',' ),\n\t\t\t\tallowMultipleFiles: true\n\t\t\t} );\n\n\t\t\tview.buttonView.set( {\n\t\t\t\tlabel: t( 'Insert image' ),\n\t\t\t\ticon: icons.image,\n\t\t\t\ttooltip: true\n\t\t\t} );\n\n\t\t\tview.buttonView.bind( 'isEnabled' ).to( command );\n\n\t\t\tview.on( 'done', ( evt, files ) => {\n\t\t\t\tconst imagesToUpload = Array.from( files ).filter( file => imageTypesRegExp.test( file.type ) );\n\n\t\t\t\tif ( imagesToUpload.length ) {\n\t\t\t\t\teditor.execute( 'uploadImage', { file: imagesToUpload } );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\treturn view;\n\t\t};\n\n\t\t// Setup `uploadImage` button and add `imageUpload` button as an alias for backward compatibility.\n\t\teditor.ui.componentFactory.add( 'uploadImage', componentCreator );\n\t\teditor.ui.componentFactory.add( 'imageUpload', componentCreator );\n\t}\n}\n"]},"metadata":{},"sourceType":"module"}