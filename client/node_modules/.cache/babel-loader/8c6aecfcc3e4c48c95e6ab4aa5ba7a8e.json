{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _typeof = require(\"@babel/runtime/helpers/typeof\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _reactDom = require(\"react-dom\");\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _toArray = _interopRequireDefault(require(\"rc-util/lib/Children/toArray\"));\n\nfunction _getRequireWildcardCache(nodeInterop) {\n  if (typeof WeakMap !== \"function\") return null;\n  var cacheBabelInterop = new WeakMap();\n  var cacheNodeInterop = new WeakMap();\n  return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) {\n    return nodeInterop ? cacheNodeInterop : cacheBabelInterop;\n  })(nodeInterop);\n}\n\nfunction _interopRequireWildcard(obj, nodeInterop) {\n  if (!nodeInterop && obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") {\n    return {\n      \"default\": obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache(nodeInterop);\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj[\"default\"] = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n} // We only handle element & text node.\n\n\nvar ELEMENT_NODE = 1;\nvar TEXT_NODE = 3;\nvar COMMENT_NODE = 8;\nvar ellipsisContainer;\nvar wrapperStyle = {\n  padding: 0,\n  margin: 0,\n  display: 'inline',\n  lineHeight: 'inherit'\n};\n\nfunction styleToString(style) {\n  // There are some different behavior between Firefox & Chrome.\n  // We have to handle this ourself.\n  var styleNames = Array.prototype.slice.apply(style);\n  return styleNames.map(function (name) {\n    return \"\".concat(name, \": \").concat(style.getPropertyValue(name), \";\");\n  }).join('');\n}\n\nfunction mergeChildren(children) {\n  var childList = [];\n  children.forEach(function (child) {\n    var prevChild = childList[childList.length - 1];\n\n    if (typeof child === 'string' && typeof prevChild === 'string') {\n      childList[childList.length - 1] += child;\n    } else {\n      childList.push(child);\n    }\n  });\n  return childList;\n}\n\nfunction resetDomStyles(target, origin) {\n  target.setAttribute('aria-hidden', 'true');\n  var originStyle = window.getComputedStyle(origin);\n  var originCSS = styleToString(originStyle); // Set shadow\n\n  target.setAttribute('style', originCSS);\n  target.style.position = 'fixed';\n  target.style.left = '0';\n  target.style.height = 'auto';\n  target.style.minHeight = 'auto';\n  target.style.maxHeight = 'auto';\n  target.style.paddingTop = '0';\n  target.style.paddingBottom = '0';\n  target.style.borderTopWidth = '0';\n  target.style.borderBottomWidth = '0';\n  target.style.top = '-999999px';\n  target.style.zIndex = '-1000'; // clean up css overflow\n\n  target.style.textOverflow = 'clip';\n  target.style.whiteSpace = 'normal';\n  target.style.webkitLineClamp = 'none';\n}\n\nfunction getRealLineHeight(originElement) {\n  var heightContainer = document.createElement('div');\n  resetDomStyles(heightContainer, originElement);\n  heightContainer.appendChild(document.createTextNode('text'));\n  document.body.appendChild(heightContainer); // The element real height is always less than multiple of line-height\n  // Use getBoundingClientRect to get actual single row height of the element\n\n  var realHeight = heightContainer.getBoundingClientRect().height;\n  document.body.removeChild(heightContainer);\n  return realHeight;\n}\n\nvar _default = function _default(originElement, option, content, fixedContent, ellipsisStr) {\n  if (!ellipsisContainer) {\n    ellipsisContainer = document.createElement('div');\n    ellipsisContainer.setAttribute('aria-hidden', 'true');\n  } // HMR will remove this from body which should patch back\n\n\n  if (!ellipsisContainer.parentNode) {\n    document.body.appendChild(ellipsisContainer);\n  }\n\n  var rows = option.rows,\n      _option$suffix = option.suffix,\n      suffix = _option$suffix === void 0 ? '' : _option$suffix;\n  var lineHeight = getRealLineHeight(originElement);\n  var maxHeight = Math.round(lineHeight * rows * 100) / 100;\n  resetDomStyles(ellipsisContainer, originElement); // Render in the fake container\n\n  var contentList = mergeChildren((0, _toArray[\"default\"])(content));\n  (0, _reactDom.render)( /*#__PURE__*/React.createElement(\"div\", {\n    style: wrapperStyle\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    style: wrapperStyle\n  }, contentList, suffix), /*#__PURE__*/React.createElement(\"span\", {\n    style: wrapperStyle\n  }, fixedContent)), ellipsisContainer); // wrap in an div for old version react\n  // Check if ellipsis in measure div is height enough for content\n\n  function inRange() {\n    var currentHeight = Math.round(ellipsisContainer.getBoundingClientRect().height * 100) / 100;\n    return currentHeight - .1 <= maxHeight; // -.1 for firefox\n  } // Skip ellipsis if already match\n\n\n  if (inRange()) {\n    (0, _reactDom.unmountComponentAtNode)(ellipsisContainer);\n    return {\n      content: content,\n      text: ellipsisContainer.innerHTML,\n      ellipsis: false\n    };\n  } // We should clone the childNode since they're controlled by React and we can't reuse it without warning\n\n\n  var childNodes = Array.prototype.slice.apply(ellipsisContainer.childNodes[0].childNodes[0].cloneNode(true).childNodes).filter(function (_ref) {\n    var nodeType = _ref.nodeType;\n    return nodeType !== COMMENT_NODE;\n  });\n  var fixedNodes = Array.prototype.slice.apply(ellipsisContainer.childNodes[0].childNodes[1].cloneNode(true).childNodes);\n  (0, _reactDom.unmountComponentAtNode)(ellipsisContainer); // ========================= Find match ellipsis content =========================\n\n  var ellipsisChildren = [];\n  ellipsisContainer.innerHTML = ''; // Create origin content holder\n\n  var ellipsisContentHolder = document.createElement('span');\n  ellipsisContainer.appendChild(ellipsisContentHolder);\n  var ellipsisTextNode = document.createTextNode(ellipsisStr + suffix);\n  ellipsisContentHolder.appendChild(ellipsisTextNode);\n  fixedNodes.forEach(function (childNode) {\n    ellipsisContainer.appendChild(childNode);\n  }); // Append before fixed nodes\n\n  function appendChildNode(node) {\n    ellipsisContentHolder.insertBefore(node, ellipsisTextNode);\n  } // Get maximum text\n\n\n  function measureText(textNode, fullText) {\n    var startLoc = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n    var endLoc = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : fullText.length;\n    var lastSuccessLoc = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;\n    var midLoc = Math.floor((startLoc + endLoc) / 2);\n    var currentText = fullText.slice(0, midLoc);\n    textNode.textContent = currentText;\n\n    if (startLoc >= endLoc - 1) {\n      // Loop when step is small\n      for (var step = endLoc; step >= startLoc; step -= 1) {\n        var currentStepText = fullText.slice(0, step);\n        textNode.textContent = currentStepText;\n\n        if (inRange() || !currentStepText) {\n          return step === fullText.length ? {\n            finished: false,\n            reactNode: fullText\n          } : {\n            finished: true,\n            reactNode: currentStepText\n          };\n        }\n      }\n    }\n\n    if (inRange()) {\n      return measureText(textNode, fullText, midLoc, endLoc, midLoc);\n    }\n\n    return measureText(textNode, fullText, startLoc, midLoc, lastSuccessLoc);\n  }\n\n  function measureNode(childNode, index) {\n    var type = childNode.nodeType;\n\n    if (type === ELEMENT_NODE) {\n      // We don't split element, it will keep if whole element can be displayed.\n      appendChildNode(childNode);\n\n      if (inRange()) {\n        return {\n          finished: false,\n          reactNode: contentList[index]\n        };\n      } // Clean up if can not pull in\n\n\n      ellipsisContentHolder.removeChild(childNode);\n      return {\n        finished: true,\n        reactNode: null\n      };\n    }\n\n    if (type === TEXT_NODE) {\n      var fullText = childNode.textContent || '';\n      var textNode = document.createTextNode(fullText);\n      appendChildNode(textNode);\n      return measureText(textNode, fullText);\n    } // Not handle other type of content\n    // PS: This code should not be attached after react 16\n\n    /* istanbul ignore next */\n\n\n    return {\n      finished: false,\n      reactNode: null\n    };\n  }\n\n  childNodes.some(function (childNode, index) {\n    var _measureNode = measureNode(childNode, index),\n        finished = _measureNode.finished,\n        reactNode = _measureNode.reactNode;\n\n    if (reactNode) {\n      ellipsisChildren.push(reactNode);\n    }\n\n    return finished;\n  });\n  return {\n    content: ellipsisChildren,\n    text: ellipsisContainer.innerHTML,\n    ellipsis: true\n  };\n};\n\nexports[\"default\"] = _default;","map":{"version":3,"sources":["C:/Users/nvtung/Các project thực hiện/RubyGYM/client/node_modules/antd/lib/typography/util.js"],"names":["_interopRequireDefault","require","_typeof","Object","defineProperty","exports","value","_reactDom","React","_interopRequireWildcard","_toArray","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","cache","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","ELEMENT_NODE","TEXT_NODE","COMMENT_NODE","ellipsisContainer","wrapperStyle","padding","margin","display","lineHeight","styleToString","style","styleNames","Array","slice","apply","map","name","concat","getPropertyValue","join","mergeChildren","children","childList","forEach","child","prevChild","length","push","resetDomStyles","target","origin","setAttribute","originStyle","window","getComputedStyle","originCSS","position","left","height","minHeight","maxHeight","paddingTop","paddingBottom","borderTopWidth","borderBottomWidth","top","zIndex","textOverflow","whiteSpace","webkitLineClamp","getRealLineHeight","originElement","heightContainer","document","createElement","appendChild","createTextNode","body","realHeight","getBoundingClientRect","removeChild","_default","option","content","fixedContent","ellipsisStr","parentNode","rows","_option$suffix","suffix","Math","round","contentList","render","inRange","currentHeight","unmountComponentAtNode","text","innerHTML","ellipsis","childNodes","cloneNode","filter","_ref","nodeType","fixedNodes","ellipsisChildren","ellipsisContentHolder","ellipsisTextNode","childNode","appendChildNode","node","insertBefore","measureText","textNode","fullText","startLoc","arguments","undefined","endLoc","lastSuccessLoc","midLoc","floor","currentText","textContent","step","currentStepText","finished","reactNode","measureNode","index","type","some","_measureNode"],"mappings":"AAAA;;AAEA,IAAIA,sBAAsB,GAAGC,OAAO,CAAC,8CAAD,CAApC;;AAEA,IAAIC,OAAO,GAAGD,OAAO,CAAC,+BAAD,CAArB;;AAEAE,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CC,EAAAA,KAAK,EAAE;AADoC,CAA7C;AAGAD,OAAO,CAAC,SAAD,CAAP,GAAqB,KAAK,CAA1B;;AAEA,IAAIE,SAAS,GAAGN,OAAO,CAAC,WAAD,CAAvB;;AAEA,IAAIO,KAAK,GAAGC,uBAAuB,CAACR,OAAO,CAAC,OAAD,CAAR,CAAnC;;AAEA,IAAIS,QAAQ,GAAGV,sBAAsB,CAACC,OAAO,CAAC,8BAAD,CAAR,CAArC;;AAEA,SAASU,wBAAT,CAAkCC,WAAlC,EAA+C;AAAE,MAAI,OAAOC,OAAP,KAAmB,UAAvB,EAAmC,OAAO,IAAP;AAAa,MAAIC,iBAAiB,GAAG,IAAID,OAAJ,EAAxB;AAAuC,MAAIE,gBAAgB,GAAG,IAAIF,OAAJ,EAAvB;AAAsC,SAAO,CAACF,wBAAwB,GAAG,SAASA,wBAAT,CAAkCC,WAAlC,EAA+C;AAAE,WAAOA,WAAW,GAAGG,gBAAH,GAAsBD,iBAAxC;AAA4D,GAAzI,EAA2IF,WAA3I,CAAP;AAAiK;;AAE/U,SAASH,uBAAT,CAAiCO,GAAjC,EAAsCJ,WAAtC,EAAmD;AAAE,MAAI,CAACA,WAAD,IAAgBI,GAAhB,IAAuBA,GAAG,CAACC,UAA/B,EAA2C;AAAE,WAAOD,GAAP;AAAa;;AAAC,MAAIA,GAAG,KAAK,IAAR,IAAgBd,OAAO,CAACc,GAAD,CAAP,KAAiB,QAAjB,IAA6B,OAAOA,GAAP,KAAe,UAAhE,EAA4E;AAAE,WAAO;AAAE,iBAAWA;AAAb,KAAP;AAA4B;;AAAC,MAAIE,KAAK,GAAGP,wBAAwB,CAACC,WAAD,CAApC;;AAAmD,MAAIM,KAAK,IAAIA,KAAK,CAACC,GAAN,CAAUH,GAAV,CAAb,EAA6B;AAAE,WAAOE,KAAK,CAACE,GAAN,CAAUJ,GAAV,CAAP;AAAwB;;AAAC,MAAIK,MAAM,GAAG,EAAb;AAAiB,MAAIC,qBAAqB,GAAGnB,MAAM,CAACC,cAAP,IAAyBD,MAAM,CAACoB,wBAA5D;;AAAsF,OAAK,IAAIC,GAAT,IAAgBR,GAAhB,EAAqB;AAAE,QAAIQ,GAAG,KAAK,SAAR,IAAqBrB,MAAM,CAACsB,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCX,GAArC,EAA0CQ,GAA1C,CAAzB,EAAyE;AAAE,UAAII,IAAI,GAAGN,qBAAqB,GAAGnB,MAAM,CAACoB,wBAAP,CAAgCP,GAAhC,EAAqCQ,GAArC,CAAH,GAA+C,IAA/E;;AAAqF,UAAII,IAAI,KAAKA,IAAI,CAACR,GAAL,IAAYQ,IAAI,CAACC,GAAtB,CAAR,EAAoC;AAAE1B,QAAAA,MAAM,CAACC,cAAP,CAAsBiB,MAAtB,EAA8BG,GAA9B,EAAmCI,IAAnC;AAA2C,OAAjF,MAAuF;AAAEP,QAAAA,MAAM,CAACG,GAAD,CAAN,GAAcR,GAAG,CAACQ,GAAD,CAAjB;AAAyB;AAAE;AAAE;;AAACH,EAAAA,MAAM,CAAC,SAAD,CAAN,GAAoBL,GAApB;;AAAyB,MAAIE,KAAJ,EAAW;AAAEA,IAAAA,KAAK,CAACW,GAAN,CAAUb,GAAV,EAAeK,MAAf;AAAyB;;AAAC,SAAOA,MAAP;AAAgB,C,CAE3yB;;;AACA,IAAIS,YAAY,GAAG,CAAnB;AACA,IAAIC,SAAS,GAAG,CAAhB;AACA,IAAIC,YAAY,GAAG,CAAnB;AACA,IAAIC,iBAAJ;AACA,IAAIC,YAAY,GAAG;AACjBC,EAAAA,OAAO,EAAE,CADQ;AAEjBC,EAAAA,MAAM,EAAE,CAFS;AAGjBC,EAAAA,OAAO,EAAE,QAHQ;AAIjBC,EAAAA,UAAU,EAAE;AAJK,CAAnB;;AAOA,SAASC,aAAT,CAAuBC,KAAvB,EAA8B;AAC5B;AACA;AACA,MAAIC,UAAU,GAAGC,KAAK,CAACjB,SAAN,CAAgBkB,KAAhB,CAAsBC,KAAtB,CAA4BJ,KAA5B,CAAjB;AACA,SAAOC,UAAU,CAACI,GAAX,CAAe,UAAUC,IAAV,EAAgB;AACpC,WAAO,GAAGC,MAAH,CAAUD,IAAV,EAAgB,IAAhB,EAAsBC,MAAtB,CAA6BP,KAAK,CAACQ,gBAAN,CAAuBF,IAAvB,CAA7B,EAA2D,GAA3D,CAAP;AACD,GAFM,EAEJG,IAFI,CAEC,EAFD,CAAP;AAGD;;AAED,SAASC,aAAT,CAAuBC,QAAvB,EAAiC;AAC/B,MAAIC,SAAS,GAAG,EAAhB;AACAD,EAAAA,QAAQ,CAACE,OAAT,CAAiB,UAAUC,KAAV,EAAiB;AAChC,QAAIC,SAAS,GAAGH,SAAS,CAACA,SAAS,CAACI,MAAV,GAAmB,CAApB,CAAzB;;AAEA,QAAI,OAAOF,KAAP,KAAiB,QAAjB,IAA6B,OAAOC,SAAP,KAAqB,QAAtD,EAAgE;AAC9DH,MAAAA,SAAS,CAACA,SAAS,CAACI,MAAV,GAAmB,CAApB,CAAT,IAAmCF,KAAnC;AACD,KAFD,MAEO;AACLF,MAAAA,SAAS,CAACK,IAAV,CAAeH,KAAf;AACD;AACF,GARD;AASA,SAAOF,SAAP;AACD;;AAED,SAASM,cAAT,CAAwBC,MAAxB,EAAgCC,MAAhC,EAAwC;AACtCD,EAAAA,MAAM,CAACE,YAAP,CAAoB,aAApB,EAAmC,MAAnC;AACA,MAAIC,WAAW,GAAGC,MAAM,CAACC,gBAAP,CAAwBJ,MAAxB,CAAlB;AACA,MAAIK,SAAS,GAAG1B,aAAa,CAACuB,WAAD,CAA7B,CAHsC,CAGM;;AAE5CH,EAAAA,MAAM,CAACE,YAAP,CAAoB,OAApB,EAA6BI,SAA7B;AACAN,EAAAA,MAAM,CAACnB,KAAP,CAAa0B,QAAb,GAAwB,OAAxB;AACAP,EAAAA,MAAM,CAACnB,KAAP,CAAa2B,IAAb,GAAoB,GAApB;AACAR,EAAAA,MAAM,CAACnB,KAAP,CAAa4B,MAAb,GAAsB,MAAtB;AACAT,EAAAA,MAAM,CAACnB,KAAP,CAAa6B,SAAb,GAAyB,MAAzB;AACAV,EAAAA,MAAM,CAACnB,KAAP,CAAa8B,SAAb,GAAyB,MAAzB;AACAX,EAAAA,MAAM,CAACnB,KAAP,CAAa+B,UAAb,GAA0B,GAA1B;AACAZ,EAAAA,MAAM,CAACnB,KAAP,CAAagC,aAAb,GAA6B,GAA7B;AACAb,EAAAA,MAAM,CAACnB,KAAP,CAAaiC,cAAb,GAA8B,GAA9B;AACAd,EAAAA,MAAM,CAACnB,KAAP,CAAakC,iBAAb,GAAiC,GAAjC;AACAf,EAAAA,MAAM,CAACnB,KAAP,CAAamC,GAAb,GAAmB,WAAnB;AACAhB,EAAAA,MAAM,CAACnB,KAAP,CAAaoC,MAAb,GAAsB,OAAtB,CAhBsC,CAgBP;;AAE/BjB,EAAAA,MAAM,CAACnB,KAAP,CAAaqC,YAAb,GAA4B,MAA5B;AACAlB,EAAAA,MAAM,CAACnB,KAAP,CAAasC,UAAb,GAA0B,QAA1B;AACAnB,EAAAA,MAAM,CAACnB,KAAP,CAAauC,eAAb,GAA+B,MAA/B;AACD;;AAED,SAASC,iBAAT,CAA2BC,aAA3B,EAA0C;AACxC,MAAIC,eAAe,GAAGC,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAtB;AACA1B,EAAAA,cAAc,CAACwB,eAAD,EAAkBD,aAAlB,CAAd;AACAC,EAAAA,eAAe,CAACG,WAAhB,CAA4BF,QAAQ,CAACG,cAAT,CAAwB,MAAxB,CAA5B;AACAH,EAAAA,QAAQ,CAACI,IAAT,CAAcF,WAAd,CAA0BH,eAA1B,EAJwC,CAII;AAC5C;;AAEA,MAAIM,UAAU,GAAGN,eAAe,CAACO,qBAAhB,GAAwCrB,MAAzD;AACAe,EAAAA,QAAQ,CAACI,IAAT,CAAcG,WAAd,CAA0BR,eAA1B;AACA,SAAOM,UAAP;AACD;;AAED,IAAIG,QAAQ,GAAG,SAASA,QAAT,CAAkBV,aAAlB,EAAiCW,MAAjC,EAAyCC,OAAzC,EAAkDC,YAAlD,EAAgEC,WAAhE,EAA6E;AAC1F,MAAI,CAAC9D,iBAAL,EAAwB;AACtBA,IAAAA,iBAAiB,GAAGkD,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAApB;AACAnD,IAAAA,iBAAiB,CAAC4B,YAAlB,CAA+B,aAA/B,EAA8C,MAA9C;AACD,GAJyF,CAIxF;;;AAGF,MAAI,CAAC5B,iBAAiB,CAAC+D,UAAvB,EAAmC;AACjCb,IAAAA,QAAQ,CAACI,IAAT,CAAcF,WAAd,CAA0BpD,iBAA1B;AACD;;AAED,MAAIgE,IAAI,GAAGL,MAAM,CAACK,IAAlB;AAAA,MACIC,cAAc,GAAGN,MAAM,CAACO,MAD5B;AAAA,MAEIA,MAAM,GAAGD,cAAc,KAAK,KAAK,CAAxB,GAA4B,EAA5B,GAAiCA,cAF9C;AAGA,MAAI5D,UAAU,GAAG0C,iBAAiB,CAACC,aAAD,CAAlC;AACA,MAAIX,SAAS,GAAG8B,IAAI,CAACC,KAAL,CAAW/D,UAAU,GAAG2D,IAAb,GAAoB,GAA/B,IAAsC,GAAtD;AACAvC,EAAAA,cAAc,CAACzB,iBAAD,EAAoBgD,aAApB,CAAd,CAhB0F,CAgBxC;;AAElD,MAAIqB,WAAW,GAAGpD,aAAa,CAAC,CAAC,GAAGxC,QAAQ,CAAC,SAAD,CAAZ,EAAyBmF,OAAzB,CAAD,CAA/B;AACA,GAAC,GAAGtF,SAAS,CAACgG,MAAd,GAAuB,aAAa/F,KAAK,CAAC4E,aAAN,CAAoB,KAApB,EAA2B;AAC7D5C,IAAAA,KAAK,EAAEN;AADsD,GAA3B,EAEjC,aAAa1B,KAAK,CAAC4E,aAAN,CAAoB,MAApB,EAA4B;AAC1C5C,IAAAA,KAAK,EAAEN;AADmC,GAA5B,EAEboE,WAFa,EAEAH,MAFA,CAFoB,EAIX,aAAa3F,KAAK,CAAC4E,aAAN,CAAoB,MAApB,EAA4B;AAChE5C,IAAAA,KAAK,EAAEN;AADyD,GAA5B,EAEnC4D,YAFmC,CAJF,CAApC,EAMmB7D,iBANnB,EAnB0F,CAyBnD;AACvC;;AAEA,WAASuE,OAAT,GAAmB;AACjB,QAAIC,aAAa,GAAGL,IAAI,CAACC,KAAL,CAAWpE,iBAAiB,CAACwD,qBAAlB,GAA0CrB,MAA1C,GAAmD,GAA9D,IAAqE,GAAzF;AACA,WAAOqC,aAAa,GAAG,EAAhB,IAAsBnC,SAA7B,CAFiB,CAEuB;AACzC,GA/ByF,CA+BxF;;;AAGF,MAAIkC,OAAO,EAAX,EAAe;AACb,KAAC,GAAGjG,SAAS,CAACmG,sBAAd,EAAsCzE,iBAAtC;AACA,WAAO;AACL4D,MAAAA,OAAO,EAAEA,OADJ;AAELc,MAAAA,IAAI,EAAE1E,iBAAiB,CAAC2E,SAFnB;AAGLC,MAAAA,QAAQ,EAAE;AAHL,KAAP;AAKD,GAzCyF,CAyCxF;;;AAGF,MAAIC,UAAU,GAAGpE,KAAK,CAACjB,SAAN,CAAgBkB,KAAhB,CAAsBC,KAAtB,CAA4BX,iBAAiB,CAAC6E,UAAlB,CAA6B,CAA7B,EAAgCA,UAAhC,CAA2C,CAA3C,EAA8CC,SAA9C,CAAwD,IAAxD,EAA8DD,UAA1F,EAAsGE,MAAtG,CAA6G,UAAUC,IAAV,EAAgB;AAC5I,QAAIC,QAAQ,GAAGD,IAAI,CAACC,QAApB;AACA,WAAOA,QAAQ,KAAKlF,YAApB;AACD,GAHgB,CAAjB;AAIA,MAAImF,UAAU,GAAGzE,KAAK,CAACjB,SAAN,CAAgBkB,KAAhB,CAAsBC,KAAtB,CAA4BX,iBAAiB,CAAC6E,UAAlB,CAA6B,CAA7B,EAAgCA,UAAhC,CAA2C,CAA3C,EAA8CC,SAA9C,CAAwD,IAAxD,EAA8DD,UAA1F,CAAjB;AACA,GAAC,GAAGvG,SAAS,CAACmG,sBAAd,EAAsCzE,iBAAtC,EAjD0F,CAiDhC;;AAE1D,MAAImF,gBAAgB,GAAG,EAAvB;AACAnF,EAAAA,iBAAiB,CAAC2E,SAAlB,GAA8B,EAA9B,CApD0F,CAoDxD;;AAElC,MAAIS,qBAAqB,GAAGlC,QAAQ,CAACC,aAAT,CAAuB,MAAvB,CAA5B;AACAnD,EAAAA,iBAAiB,CAACoD,WAAlB,CAA8BgC,qBAA9B;AACA,MAAIC,gBAAgB,GAAGnC,QAAQ,CAACG,cAAT,CAAwBS,WAAW,GAAGI,MAAtC,CAAvB;AACAkB,EAAAA,qBAAqB,CAAChC,WAAtB,CAAkCiC,gBAAlC;AACAH,EAAAA,UAAU,CAAC9D,OAAX,CAAmB,UAAUkE,SAAV,EAAqB;AACtCtF,IAAAA,iBAAiB,CAACoD,WAAlB,CAA8BkC,SAA9B;AACD,GAFD,EA1D0F,CA4DtF;;AAEJ,WAASC,eAAT,CAAyBC,IAAzB,EAA+B;AAC7BJ,IAAAA,qBAAqB,CAACK,YAAtB,CAAmCD,IAAnC,EAAyCH,gBAAzC;AACD,GAhEyF,CAgExF;;;AAGF,WAASK,WAAT,CAAqBC,QAArB,EAA+BC,QAA/B,EAAyC;AACvC,QAAIC,QAAQ,GAAGC,SAAS,CAACvE,MAAV,GAAmB,CAAnB,IAAwBuE,SAAS,CAAC,CAAD,CAAT,KAAiBC,SAAzC,GAAqDD,SAAS,CAAC,CAAD,CAA9D,GAAoE,CAAnF;AACA,QAAIE,MAAM,GAAGF,SAAS,CAACvE,MAAV,GAAmB,CAAnB,IAAwBuE,SAAS,CAAC,CAAD,CAAT,KAAiBC,SAAzC,GAAqDD,SAAS,CAAC,CAAD,CAA9D,GAAoEF,QAAQ,CAACrE,MAA1F;AACA,QAAI0E,cAAc,GAAGH,SAAS,CAACvE,MAAV,GAAmB,CAAnB,IAAwBuE,SAAS,CAAC,CAAD,CAAT,KAAiBC,SAAzC,GAAqDD,SAAS,CAAC,CAAD,CAA9D,GAAoE,CAAzF;AACA,QAAII,MAAM,GAAG/B,IAAI,CAACgC,KAAL,CAAW,CAACN,QAAQ,GAAGG,MAAZ,IAAsB,CAAjC,CAAb;AACA,QAAII,WAAW,GAAGR,QAAQ,CAAClF,KAAT,CAAe,CAAf,EAAkBwF,MAAlB,CAAlB;AACAP,IAAAA,QAAQ,CAACU,WAAT,GAAuBD,WAAvB;;AAEA,QAAIP,QAAQ,IAAIG,MAAM,GAAG,CAAzB,EAA4B;AAC1B;AACA,WAAK,IAAIM,IAAI,GAAGN,MAAhB,EAAwBM,IAAI,IAAIT,QAAhC,EAA0CS,IAAI,IAAI,CAAlD,EAAqD;AACnD,YAAIC,eAAe,GAAGX,QAAQ,CAAClF,KAAT,CAAe,CAAf,EAAkB4F,IAAlB,CAAtB;AACAX,QAAAA,QAAQ,CAACU,WAAT,GAAuBE,eAAvB;;AAEA,YAAIhC,OAAO,MAAM,CAACgC,eAAlB,EAAmC;AACjC,iBAAOD,IAAI,KAAKV,QAAQ,CAACrE,MAAlB,GAA2B;AAChCiF,YAAAA,QAAQ,EAAE,KADsB;AAEhCC,YAAAA,SAAS,EAAEb;AAFqB,WAA3B,GAGH;AACFY,YAAAA,QAAQ,EAAE,IADR;AAEFC,YAAAA,SAAS,EAAEF;AAFT,WAHJ;AAOD;AACF;AACF;;AAED,QAAIhC,OAAO,EAAX,EAAe;AACb,aAAOmB,WAAW,CAACC,QAAD,EAAWC,QAAX,EAAqBM,MAArB,EAA6BF,MAA7B,EAAqCE,MAArC,CAAlB;AACD;;AAED,WAAOR,WAAW,CAACC,QAAD,EAAWC,QAAX,EAAqBC,QAArB,EAA+BK,MAA/B,EAAuCD,cAAvC,CAAlB;AACD;;AAED,WAASS,WAAT,CAAqBpB,SAArB,EAAgCqB,KAAhC,EAAuC;AACrC,QAAIC,IAAI,GAAGtB,SAAS,CAACL,QAArB;;AAEA,QAAI2B,IAAI,KAAK/G,YAAb,EAA2B;AACzB;AACA0F,MAAAA,eAAe,CAACD,SAAD,CAAf;;AAEA,UAAIf,OAAO,EAAX,EAAe;AACb,eAAO;AACLiC,UAAAA,QAAQ,EAAE,KADL;AAELC,UAAAA,SAAS,EAAEpC,WAAW,CAACsC,KAAD;AAFjB,SAAP;AAID,OATwB,CASvB;;;AAGFvB,MAAAA,qBAAqB,CAAC3B,WAAtB,CAAkC6B,SAAlC;AACA,aAAO;AACLkB,QAAAA,QAAQ,EAAE,IADL;AAELC,QAAAA,SAAS,EAAE;AAFN,OAAP;AAID;;AAED,QAAIG,IAAI,KAAK9G,SAAb,EAAwB;AACtB,UAAI8F,QAAQ,GAAGN,SAAS,CAACe,WAAV,IAAyB,EAAxC;AACA,UAAIV,QAAQ,GAAGzC,QAAQ,CAACG,cAAT,CAAwBuC,QAAxB,CAAf;AACAL,MAAAA,eAAe,CAACI,QAAD,CAAf;AACA,aAAOD,WAAW,CAACC,QAAD,EAAWC,QAAX,CAAlB;AACD,KA3BoC,CA2BnC;AACF;;AAEA;;;AAGA,WAAO;AACLY,MAAAA,QAAQ,EAAE,KADL;AAELC,MAAAA,SAAS,EAAE;AAFN,KAAP;AAID;;AAED5B,EAAAA,UAAU,CAACgC,IAAX,CAAgB,UAAUvB,SAAV,EAAqBqB,KAArB,EAA4B;AAC1C,QAAIG,YAAY,GAAGJ,WAAW,CAACpB,SAAD,EAAYqB,KAAZ,CAA9B;AAAA,QACIH,QAAQ,GAAGM,YAAY,CAACN,QAD5B;AAAA,QAEIC,SAAS,GAAGK,YAAY,CAACL,SAF7B;;AAIA,QAAIA,SAAJ,EAAe;AACbtB,MAAAA,gBAAgB,CAAC3D,IAAjB,CAAsBiF,SAAtB;AACD;;AAED,WAAOD,QAAP;AACD,GAVD;AAWA,SAAO;AACL5C,IAAAA,OAAO,EAAEuB,gBADJ;AAELT,IAAAA,IAAI,EAAE1E,iBAAiB,CAAC2E,SAFnB;AAGLC,IAAAA,QAAQ,EAAE;AAHL,GAAP;AAKD,CA3JD;;AA6JAxG,OAAO,CAAC,SAAD,CAAP,GAAqBsF,QAArB","sourcesContent":["\"use strict\";\r\n\r\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\r\n\r\nvar _typeof = require(\"@babel/runtime/helpers/typeof\");\r\n\r\nObject.defineProperty(exports, \"__esModule\", {\r\n  value: true\r\n});\r\nexports[\"default\"] = void 0;\r\n\r\nvar _reactDom = require(\"react-dom\");\r\n\r\nvar React = _interopRequireWildcard(require(\"react\"));\r\n\r\nvar _toArray = _interopRequireDefault(require(\"rc-util/lib/Children/toArray\"));\r\n\r\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\r\n\r\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\r\n\r\n// We only handle element & text node.\r\nvar ELEMENT_NODE = 1;\r\nvar TEXT_NODE = 3;\r\nvar COMMENT_NODE = 8;\r\nvar ellipsisContainer;\r\nvar wrapperStyle = {\r\n  padding: 0,\r\n  margin: 0,\r\n  display: 'inline',\r\n  lineHeight: 'inherit'\r\n};\r\n\r\nfunction styleToString(style) {\r\n  // There are some different behavior between Firefox & Chrome.\r\n  // We have to handle this ourself.\r\n  var styleNames = Array.prototype.slice.apply(style);\r\n  return styleNames.map(function (name) {\r\n    return \"\".concat(name, \": \").concat(style.getPropertyValue(name), \";\");\r\n  }).join('');\r\n}\r\n\r\nfunction mergeChildren(children) {\r\n  var childList = [];\r\n  children.forEach(function (child) {\r\n    var prevChild = childList[childList.length - 1];\r\n\r\n    if (typeof child === 'string' && typeof prevChild === 'string') {\r\n      childList[childList.length - 1] += child;\r\n    } else {\r\n      childList.push(child);\r\n    }\r\n  });\r\n  return childList;\r\n}\r\n\r\nfunction resetDomStyles(target, origin) {\r\n  target.setAttribute('aria-hidden', 'true');\r\n  var originStyle = window.getComputedStyle(origin);\r\n  var originCSS = styleToString(originStyle); // Set shadow\r\n\r\n  target.setAttribute('style', originCSS);\r\n  target.style.position = 'fixed';\r\n  target.style.left = '0';\r\n  target.style.height = 'auto';\r\n  target.style.minHeight = 'auto';\r\n  target.style.maxHeight = 'auto';\r\n  target.style.paddingTop = '0';\r\n  target.style.paddingBottom = '0';\r\n  target.style.borderTopWidth = '0';\r\n  target.style.borderBottomWidth = '0';\r\n  target.style.top = '-999999px';\r\n  target.style.zIndex = '-1000'; // clean up css overflow\r\n\r\n  target.style.textOverflow = 'clip';\r\n  target.style.whiteSpace = 'normal';\r\n  target.style.webkitLineClamp = 'none';\r\n}\r\n\r\nfunction getRealLineHeight(originElement) {\r\n  var heightContainer = document.createElement('div');\r\n  resetDomStyles(heightContainer, originElement);\r\n  heightContainer.appendChild(document.createTextNode('text'));\r\n  document.body.appendChild(heightContainer); // The element real height is always less than multiple of line-height\r\n  // Use getBoundingClientRect to get actual single row height of the element\r\n\r\n  var realHeight = heightContainer.getBoundingClientRect().height;\r\n  document.body.removeChild(heightContainer);\r\n  return realHeight;\r\n}\r\n\r\nvar _default = function _default(originElement, option, content, fixedContent, ellipsisStr) {\r\n  if (!ellipsisContainer) {\r\n    ellipsisContainer = document.createElement('div');\r\n    ellipsisContainer.setAttribute('aria-hidden', 'true');\r\n  } // HMR will remove this from body which should patch back\r\n\r\n\r\n  if (!ellipsisContainer.parentNode) {\r\n    document.body.appendChild(ellipsisContainer);\r\n  }\r\n\r\n  var rows = option.rows,\r\n      _option$suffix = option.suffix,\r\n      suffix = _option$suffix === void 0 ? '' : _option$suffix;\r\n  var lineHeight = getRealLineHeight(originElement);\r\n  var maxHeight = Math.round(lineHeight * rows * 100) / 100;\r\n  resetDomStyles(ellipsisContainer, originElement); // Render in the fake container\r\n\r\n  var contentList = mergeChildren((0, _toArray[\"default\"])(content));\r\n  (0, _reactDom.render)( /*#__PURE__*/React.createElement(\"div\", {\r\n    style: wrapperStyle\r\n  }, /*#__PURE__*/React.createElement(\"span\", {\r\n    style: wrapperStyle\r\n  }, contentList, suffix), /*#__PURE__*/React.createElement(\"span\", {\r\n    style: wrapperStyle\r\n  }, fixedContent)), ellipsisContainer); // wrap in an div for old version react\r\n  // Check if ellipsis in measure div is height enough for content\r\n\r\n  function inRange() {\r\n    var currentHeight = Math.round(ellipsisContainer.getBoundingClientRect().height * 100) / 100;\r\n    return currentHeight - .1 <= maxHeight; // -.1 for firefox\r\n  } // Skip ellipsis if already match\r\n\r\n\r\n  if (inRange()) {\r\n    (0, _reactDom.unmountComponentAtNode)(ellipsisContainer);\r\n    return {\r\n      content: content,\r\n      text: ellipsisContainer.innerHTML,\r\n      ellipsis: false\r\n    };\r\n  } // We should clone the childNode since they're controlled by React and we can't reuse it without warning\r\n\r\n\r\n  var childNodes = Array.prototype.slice.apply(ellipsisContainer.childNodes[0].childNodes[0].cloneNode(true).childNodes).filter(function (_ref) {\r\n    var nodeType = _ref.nodeType;\r\n    return nodeType !== COMMENT_NODE;\r\n  });\r\n  var fixedNodes = Array.prototype.slice.apply(ellipsisContainer.childNodes[0].childNodes[1].cloneNode(true).childNodes);\r\n  (0, _reactDom.unmountComponentAtNode)(ellipsisContainer); // ========================= Find match ellipsis content =========================\r\n\r\n  var ellipsisChildren = [];\r\n  ellipsisContainer.innerHTML = ''; // Create origin content holder\r\n\r\n  var ellipsisContentHolder = document.createElement('span');\r\n  ellipsisContainer.appendChild(ellipsisContentHolder);\r\n  var ellipsisTextNode = document.createTextNode(ellipsisStr + suffix);\r\n  ellipsisContentHolder.appendChild(ellipsisTextNode);\r\n  fixedNodes.forEach(function (childNode) {\r\n    ellipsisContainer.appendChild(childNode);\r\n  }); // Append before fixed nodes\r\n\r\n  function appendChildNode(node) {\r\n    ellipsisContentHolder.insertBefore(node, ellipsisTextNode);\r\n  } // Get maximum text\r\n\r\n\r\n  function measureText(textNode, fullText) {\r\n    var startLoc = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\r\n    var endLoc = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : fullText.length;\r\n    var lastSuccessLoc = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;\r\n    var midLoc = Math.floor((startLoc + endLoc) / 2);\r\n    var currentText = fullText.slice(0, midLoc);\r\n    textNode.textContent = currentText;\r\n\r\n    if (startLoc >= endLoc - 1) {\r\n      // Loop when step is small\r\n      for (var step = endLoc; step >= startLoc; step -= 1) {\r\n        var currentStepText = fullText.slice(0, step);\r\n        textNode.textContent = currentStepText;\r\n\r\n        if (inRange() || !currentStepText) {\r\n          return step === fullText.length ? {\r\n            finished: false,\r\n            reactNode: fullText\r\n          } : {\r\n            finished: true,\r\n            reactNode: currentStepText\r\n          };\r\n        }\r\n      }\r\n    }\r\n\r\n    if (inRange()) {\r\n      return measureText(textNode, fullText, midLoc, endLoc, midLoc);\r\n    }\r\n\r\n    return measureText(textNode, fullText, startLoc, midLoc, lastSuccessLoc);\r\n  }\r\n\r\n  function measureNode(childNode, index) {\r\n    var type = childNode.nodeType;\r\n\r\n    if (type === ELEMENT_NODE) {\r\n      // We don't split element, it will keep if whole element can be displayed.\r\n      appendChildNode(childNode);\r\n\r\n      if (inRange()) {\r\n        return {\r\n          finished: false,\r\n          reactNode: contentList[index]\r\n        };\r\n      } // Clean up if can not pull in\r\n\r\n\r\n      ellipsisContentHolder.removeChild(childNode);\r\n      return {\r\n        finished: true,\r\n        reactNode: null\r\n      };\r\n    }\r\n\r\n    if (type === TEXT_NODE) {\r\n      var fullText = childNode.textContent || '';\r\n      var textNode = document.createTextNode(fullText);\r\n      appendChildNode(textNode);\r\n      return measureText(textNode, fullText);\r\n    } // Not handle other type of content\r\n    // PS: This code should not be attached after react 16\r\n\r\n    /* istanbul ignore next */\r\n\r\n\r\n    return {\r\n      finished: false,\r\n      reactNode: null\r\n    };\r\n  }\r\n\r\n  childNodes.some(function (childNode, index) {\r\n    var _measureNode = measureNode(childNode, index),\r\n        finished = _measureNode.finished,\r\n        reactNode = _measureNode.reactNode;\r\n\r\n    if (reactNode) {\r\n      ellipsisChildren.push(reactNode);\r\n    }\r\n\r\n    return finished;\r\n  });\r\n  return {\r\n    content: ellipsisChildren,\r\n    text: ellipsisContainer.innerHTML,\r\n    ellipsis: true\r\n  };\r\n};\r\n\r\nexports[\"default\"] = _default;"]},"metadata":{},"sourceType":"script"}