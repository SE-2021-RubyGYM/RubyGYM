{"ast":null,"code":"/* eslint-disable valid-jsdoc, jsdoc/require-jsdoc, jsdoc/require-returns, jsdoc/require-param */\n\n/**\r\n * MaskedTextBox base module\r\n */\nimport { EventHandler, isNullOrUndefined, merge, attributes, addClass, removeClass, Browser, extend } from '@syncfusion/ej2-base';\nimport { Input } from '../../input/input';\nvar ERROR = 'e-error';\nvar INPUTGROUP = 'e-input-group';\nvar FLOATINPUT = 'e-float-input';\nvar UTILMASK = 'e-utility-mask';\nvar TOPLABEL = 'e-label-top';\nvar BOTTOMLABEL = 'e-label-bottom';\n/**\r\n * @hidden\r\n * Built-in masking elements collection.\r\n */\n\nexport var regularExpressions = {\n  '0': '[0-9]',\n  '9': '[0-9 ]',\n  '#': '[0-9 +-]',\n  'L': '[A-Za-z]',\n  '?': '[A-Za-z ]',\n  '&': '[^\\x7f ]+',\n  'C': '[^\\x7f]+',\n  'A': '[A-Za-z0-9]',\n  'a': '[A-Za-z0-9 ]'\n};\n/**\r\n * Generate required masking elements to the MaskedTextBox from user mask input.\r\n *\r\n * @hidden\r\n */\n\nexport function createMask() {\n  attributes(this.element, {\n    'role': 'textbox',\n    'autocomplete': 'off',\n    'autocorrect': 'off',\n    'autocapitalize': 'off',\n    'spellcheck': 'false',\n    'aria-live': 'assertive',\n    'aria-valuenow': ''\n  });\n\n  if (this.mask) {\n    var splitMask = this.mask.split(']');\n\n    for (var i = 0; i < splitMask.length; i++) {\n      if (splitMask[i][splitMask[i].length - 1] === '\\\\') {\n        splitMask[i] = splitMask[i] + ']';\n        var splitInnerMask = splitMask[i].split('[');\n\n        for (var j = 0; j < splitInnerMask.length; j++) {\n          if (splitInnerMask[j][splitInnerMask[j].length - 1] === '\\\\') {\n            splitInnerMask[j] = splitInnerMask[j] + '[';\n          }\n\n          pushIntoRegExpCollec.call(this, splitInnerMask[j]);\n        }\n      } else {\n        var splitInnerMask = splitMask[i].split('[');\n\n        if (splitInnerMask.length > 1) {\n          var chkSpace = false;\n\n          for (var j = 0; j < splitInnerMask.length; j++) {\n            if (splitInnerMask[j] === '\\\\') {\n              this.customRegExpCollec.push('[');\n              this.hiddenMask += splitInnerMask[j] + '[';\n            } else if (splitInnerMask[j] === '') {\n              chkSpace = true;\n            } else if (splitInnerMask[j] !== '' && chkSpace || j === splitInnerMask.length - 1) {\n              this.customRegExpCollec.push('[' + splitInnerMask[j] + ']');\n              this.hiddenMask += this.promptChar;\n              chkSpace = false;\n            } else {\n              pushIntoRegExpCollec.call(this, splitInnerMask[j]);\n            }\n          }\n        } else {\n          pushIntoRegExpCollec.call(this, splitInnerMask[0]);\n        }\n      }\n    }\n\n    this.escapeMaskValue = this.hiddenMask;\n    this.promptMask = this.hiddenMask.replace(/[09?LCAa#&]/g, this.promptChar);\n\n    if (!isNullOrUndefined(this.customCharacters)) {\n      for (var i = 0; i < this.promptMask.length; i++) {\n        if (!isNullOrUndefined(this.customCharacters[this.promptMask[i]])) {\n          this.promptMask = this.promptMask.replace(new RegExp(this.promptMask[i], 'g'), this.promptChar);\n        }\n      }\n    }\n\n    var escapeNumber = 0;\n\n    if (this.hiddenMask.match(new RegExp(/\\\\/))) {\n      for (var i = 0; i < this.hiddenMask.length; i++) {\n        var j = 0;\n\n        if (i >= 1) {\n          j = i;\n        }\n\n        escapeNumber = this.hiddenMask.length - this.promptMask.length;\n        j = j - escapeNumber;\n\n        if (i > 0 && this.hiddenMask[i - 1] !== '\\\\' && (this.hiddenMask[i] === '>' || this.hiddenMask[i] === '<' || this.hiddenMask[i] === '|')) {\n          this.promptMask = this.promptMask.substring(0, j) + this.promptMask.substring(i + 1 - escapeNumber, this.promptMask.length);\n          this.escapeMaskValue = this.escapeMaskValue.substring(0, j) + this.escapeMaskValue.substring(i + 1 - escapeNumber, this.escapeMaskValue.length);\n        }\n\n        if (this.hiddenMask[i] === '\\\\') {\n          this.promptMask = this.promptMask.substring(0, j) + this.hiddenMask[i + 1] + this.promptMask.substring(i + 2 - escapeNumber, this.promptMask.length);\n          this.escapeMaskValue = this.escapeMaskValue.substring(0, j) + this.escapeMaskValue[i + 1] + this.escapeMaskValue.substring(i + 2 - escapeNumber, this.escapeMaskValue.length);\n        }\n      }\n    } else {\n      this.promptMask = this.promptMask.replace(/[>|<]/g, '');\n      this.escapeMaskValue = this.hiddenMask.replace(/[>|<]/g, '');\n    }\n\n    attributes(this.element, {\n      'aria-invalid': 'false'\n    });\n  }\n}\n/**\r\n * Apply mask ability with masking elements to the MaskedTextBox.\r\n *\r\n * @hidden\r\n */\n\nexport function applyMask() {\n  setElementValue.call(this, this.promptMask);\n  setMaskValue.call(this, this.value);\n}\n/**\r\n * To wire required events to the MaskedTextBox.\r\n *\r\n * @hidden\r\n */\n\nexport function wireEvents() {\n  EventHandler.add(this.element, 'keydown', maskInputKeyDownHandler, this);\n  EventHandler.add(this.element, 'keypress', maskInputKeyPressHandler, this);\n  EventHandler.add(this.element, 'keyup', maskInputKeyUpHandler, this);\n  EventHandler.add(this.element, 'input', maskInputHandler, this);\n  EventHandler.add(this.element, 'focus', maskInputFocusHandler, this);\n  EventHandler.add(this.element, 'blur', maskInputBlurHandler, this);\n  EventHandler.add(this.element, 'paste', maskInputPasteHandler, this);\n  EventHandler.add(this.element, 'cut', maskInputCutHandler, this);\n  EventHandler.add(this.element, 'drop', maskInputDropHandler, this);\n  EventHandler.add(this.element, 'mousedown', maskInputMouseDownHandler, this);\n  EventHandler.add(this.element, 'mouseup', maskInputMouseUpHandler, this);\n\n  if (this.enabled) {\n    bindClearEvent.call(this);\n\n    if (this.formElement) {\n      EventHandler.add(this.formElement, 'reset', resetFormHandler, this);\n    }\n  }\n}\n/**\r\n * To unwire events attached to the MaskedTextBox.\r\n *\r\n * @hidden\r\n */\n\nexport function unwireEvents() {\n  EventHandler.remove(this.element, 'keydown', maskInputKeyDownHandler);\n  EventHandler.remove(this.element, 'keypress', maskInputKeyPressHandler);\n  EventHandler.remove(this.element, 'keyup', maskInputKeyUpHandler);\n  EventHandler.remove(this.element, 'input', maskInputHandler);\n  EventHandler.remove(this.element, 'focus', maskInputFocusHandler);\n  EventHandler.remove(this.element, 'blur', maskInputBlurHandler);\n  EventHandler.remove(this.element, 'paste', maskInputPasteHandler);\n  EventHandler.remove(this.element, 'cut', maskInputCutHandler);\n  EventHandler.remove(this.element, 'mousedown', maskInputMouseDownHandler);\n  EventHandler.remove(this.element, 'mouseup', maskInputMouseUpHandler);\n\n  if (this.formElement) {\n    EventHandler.remove(this.formElement, 'reset', resetFormHandler);\n  }\n}\n/**\r\n * To bind required events to the MaskedTextBox clearButton.\r\n *\r\n * @hidden\r\n */\n\nexport function bindClearEvent() {\n  if (this.showClearButton) {\n    EventHandler.add(this.inputObj.clearButton, 'mousedown touchstart', resetHandler, this);\n  }\n}\n\nfunction resetHandler(e) {\n  e.preventDefault();\n\n  if (!this.inputObj.clearButton.classList.contains('e-clear-icon-hide') || this.inputObj.container.classList.contains('e-static-clear')) {\n    clear.call(this, e);\n    this.value = '';\n  }\n}\n\nfunction clear(event) {\n  var value = this.element.value;\n  setElementValue.call(this, this.promptMask);\n  this.redoCollec.unshift({\n    value: this.promptMask,\n    startIndex: this.element.selectionStart,\n    endIndex: this.element.selectionEnd\n  });\n  triggerMaskChangeEvent.call(this, event, value);\n  this.element.setSelectionRange(0, 0);\n}\n\nfunction resetFormHandler() {\n  if (this.element.tagName === 'EJS-MASKEDTEXTBOX') {\n    setElementValue.call(this, this.promptMask);\n  } else {\n    this.value = this.initInputValue;\n  }\n}\n/**\r\n * To get masked value from the MaskedTextBox.\r\n *\r\n * @hidden\r\n */\n\n\nexport function unstrippedValue(element) {\n  return element.value;\n}\n/**\r\n * To extract raw value from the MaskedTextBox.\r\n *\r\n * @hidden\r\n */\n\nexport function strippedValue(element, maskValues) {\n  var value = '';\n  var k = 0;\n  var checkMask = false;\n  var maskValue = !isNullOrUndefined(maskValues) ? maskValues : !isNullOrUndefined(element) && !isNullOrUndefined(this) ? element.value : maskValues;\n\n  if (maskValue !== this.promptMask) {\n    for (var i = 0; i < this.customRegExpCollec.length; i++) {\n      if (checkMask) {\n        checkMask = false;\n      }\n\n      if (this.customRegExpCollec[k] === '>' || this.customRegExpCollec[k] === '<' || this.customRegExpCollec[k] === '|' || this.customRegExpCollec[k] === '\\\\') {\n        --i;\n        checkMask = true;\n      }\n\n      if (!checkMask) {\n        if (maskValue[i] !== this.promptChar && !isNullOrUndefined(this.customRegExpCollec[k]) && (this._callPasteHandler || !isNullOrUndefined(this.regExpCollec[this.customRegExpCollec[k]]) || this.customRegExpCollec[k].length > 2 && this.customRegExpCollec[k][0] === '[' && this.customRegExpCollec[k][this.customRegExpCollec[k].length - 1] === ']' || !isNullOrUndefined(this.customCharacters) && !isNullOrUndefined(this.customCharacters[this.customRegExpCollec[k]])) && maskValue !== '') {\n          value += maskValue[i];\n        }\n      }\n\n      ++k;\n    }\n  }\n\n  if (this.mask === null || this.mask === '' && this.value !== undefined) {\n    value = maskValue;\n  }\n\n  return value;\n}\n\nfunction pushIntoRegExpCollec(value) {\n  for (var k = 0; k < value.length; k++) {\n    this.hiddenMask += value[k];\n\n    if (value[k] !== '\\\\') {\n      this.customRegExpCollec.push(value[k]);\n    }\n  }\n}\n\nexport function maskInputMouseDownHandler() {\n  this.isClicked = true;\n}\nexport function maskInputMouseUpHandler() {\n  this.isClicked = false;\n}\nexport function maskInputFocusHandler(event) {\n  var _this = this;\n\n  var inputElement = this.element;\n  var startIndex = 0;\n  var modelValue = strippedValue.call(this, inputElement);\n  var toAllowForward = false;\n  var toAllowBackward = false;\n  var eventArgs = {\n    selectionStart: inputElement.selectionStart,\n    event: event,\n    value: this.value,\n    maskedValue: inputElement.value,\n    container: this.inputObj.container,\n    selectionEnd: inputElement.selectionEnd\n  };\n\n  if (!this.isClicked) {\n    triggerFocus.call(this, eventArgs, inputElement);\n  }\n\n  if (this.mask) {\n    if (!(!(modelValue === null || modelValue === '') || this.floatLabelType === 'Always' || this.placeholder === null || this.placeholder === '')) {\n      inputElement.value = this.promptMask;\n    }\n\n    setTimeout(function () {\n      if (inputElement.selectionStart === _this.promptMask.length || inputElement.value[inputElement.selectionStart] === _this.promptChar) {\n        toAllowForward = true;\n      } else {\n        for (var i = inputElement.selectionStart; i < _this.promptMask.length; i++) {\n          if (inputElement.value[i] !== _this.promptChar) {\n            if (inputElement.value[i] !== _this.promptMask[i]) {\n              toAllowForward = false;\n              break;\n            }\n          } else {\n            toAllowForward = true;\n            break;\n          }\n        }\n      }\n    });\n    setTimeout(function () {\n      var backSelectionStart = inputElement.selectionStart - 1;\n\n      if (backSelectionStart === _this.promptMask.length - 1 || inputElement.value[backSelectionStart] === _this.promptChar) {\n        toAllowBackward = true;\n      } else {\n        for (var i = backSelectionStart; i >= 0; i--) {\n          if (inputElement.value[i] !== _this.promptChar) {\n            if (inputElement.value[i] !== _this.promptMask[i]) {\n              toAllowBackward = false;\n              break;\n            }\n          } else {\n            toAllowBackward = true;\n            break;\n          }\n        }\n      }\n    });\n\n    if (this.isClicked || this.floatLabelType !== 'Always' && (modelValue === null || modelValue === '') && this.placeholder !== null && this.placeholder !== '') {\n      for (startIndex = 0; startIndex < this.promptMask.length; startIndex++) {\n        if (inputElement.value[startIndex] === this.promptChar) {\n          setTimeout(function () {\n            if (toAllowForward || toAllowBackward) {\n              inputElement.selectionEnd = startIndex;\n              inputElement.selectionStart = startIndex;\n            }\n\n            eventArgs = {\n              selectionStart: inputElement.selectionStart,\n              event: event,\n              value: _this.value,\n              maskedValue: inputElement.value,\n              container: _this.inputObj.container,\n              selectionEnd: inputElement.selectionEnd\n            };\n            triggerFocus.call(_this, eventArgs, inputElement);\n          });\n          break;\n        }\n      }\n\n      if (isNullOrUndefined(inputElement.value.match(this.promptChar))) {\n        eventArgs = {\n          selectionStart: inputElement.selectionStart,\n          event: event,\n          value: this.value,\n          maskedValue: inputElement.value,\n          container: this.inputObj.container,\n          selectionEnd: inputElement.selectionEnd\n        };\n        triggerFocus.call(this, eventArgs, inputElement);\n      }\n\n      this.isClicked = false;\n    }\n  }\n}\nexport function triggerFocus(eventArgs, inputElement) {\n  this.trigger('focus', eventArgs, function (eventArgs) {\n    inputElement.selectionStart = eventArgs.selectionStart;\n    inputElement.selectionEnd = eventArgs.selectionEnd;\n  });\n}\nexport function maskInputBlurHandler(event) {\n  this.blurEventArgs = {\n    event: event,\n    value: this.value,\n    maskedValue: this.element.value,\n    container: this.inputObj.container\n  };\n  this.trigger('blur', this.blurEventArgs);\n\n  if (this.mask) {\n    this.isFocus = false;\n\n    if (this.placeholder && this.element.value === this.promptMask && this.floatLabelType !== 'Always') {\n      setElementValue.call(this, '');\n      var labelElement = this.element.parentNode.querySelector('.e-float-text');\n\n      if (this.floatLabelType === 'Auto' && !isNullOrUndefined(labelElement) && labelElement.classList.contains(TOPLABEL)) {\n        removeClass([labelElement], TOPLABEL);\n      }\n    }\n  }\n}\n\nfunction maskInputPasteHandler(event) {\n  var _this = this;\n\n  if (this.mask && !this.readonly) {\n    var sIndex_1 = this.element.selectionStart;\n    var eIndex_1 = this.element.selectionEnd;\n    var oldValue_1 = this.element.value;\n    setElementValue.call(this, '');\n    this._callPasteHandler = true;\n    setTimeout(function () {\n      var value = _this.element.value.replace(/ /g, '');\n\n      if (_this.redoCollec.length > 0 && _this.redoCollec[0].value === _this.element.value) {\n        value = strippedValue.call(_this, _this.element);\n      }\n\n      setElementValue.call(_this, oldValue_1);\n      _this.element.selectionStart = sIndex_1;\n      _this.element.selectionEnd = eIndex_1;\n      var i = 0;\n      _this.maskKeyPress = true;\n\n      do {\n        validateValue.call(_this, value[i], false, null);\n        ++i;\n      } while (i < value.length);\n\n      _this.maskKeyPress = false;\n      _this._callPasteHandler = false;\n\n      if (_this.element.value === oldValue_1) {\n        var i_1 = 0;\n        _this.maskKeyPress = true;\n\n        do {\n          validateValue.call(_this, value[i_1], false, null);\n          ++i_1;\n        } while (i_1 < value.length);\n\n        _this.maskKeyPress = false;\n      } else {\n        triggerMaskChangeEvent.call(_this, event, oldValue_1);\n      }\n    }, 1);\n  }\n}\n\nfunction maskInputCutHandler(event) {\n  var _this = this;\n\n  if (this.mask && !this.readonly) {\n    var preValue_1 = this.element.value;\n    var sIndex_2 = this.element.selectionStart;\n    var eIndex = this.element.selectionEnd;\n    this.undoCollec.push({\n      value: this.element.value,\n      startIndex: this.element.selectionStart,\n      endIndex: this.element.selectionEnd\n    });\n    var value_1 = this.element.value.substring(0, sIndex_2) + this.promptMask.substring(sIndex_2, eIndex) + this.element.value.substring(eIndex);\n    setTimeout(function () {\n      setElementValue.call(_this, value_1);\n      _this.element.selectionStart = _this.element.selectionEnd = sIndex_2;\n\n      if (_this.element.value !== preValue_1) {\n        triggerMaskChangeEvent.call(_this, event, null);\n      }\n    }, 0);\n  }\n}\n\nexport function maskInputDropHandler(event) {\n  event.preventDefault();\n}\n\nfunction maskInputHandler(event) {\n  if (Browser.isIE === true && this.element.value === '' && this.floatLabelType === 'Never') {\n    return;\n  }\n\n  var eventArgs = {\n    ctrlKey: false,\n    keyCode: 229\n  };\n  extend(event, eventArgs);\n\n  if (this.mask) {\n    if (this.element.value === '') {\n      this.redoCollec.unshift({\n        value: this.promptMask,\n        startIndex: this.element.selectionStart,\n        endIndex: this.element.selectionEnd\n      });\n    }\n\n    if (this.element.value.length === 1) {\n      this.element.value = this.element.value + this.promptMask;\n      this.element.setSelectionRange(1, 1);\n    }\n\n    if (!this._callPasteHandler) {\n      removeMaskInputValues.call(this, event);\n    }\n\n    if (this.element.value.length > this.promptMask.length) {\n      var startIndex = this.element.selectionStart;\n      var addedValues = this.element.value.length - this.promptMask.length;\n      var value = this.element.value.substring(startIndex - addedValues, startIndex);\n      this.maskKeyPress = false;\n      var i = 0;\n\n      do {\n        validateValue.call(this, value[i], event.ctrlKey, event);\n        ++i;\n      } while (i < value.length);\n\n      if (this.element.value !== this.preEleVal) {\n        triggerMaskChangeEvent.call(this, event, null);\n      }\n    }\n\n    var val = strippedValue.call(this, this.element);\n    this.prevValue = val;\n    this.value = val;\n\n    if (val === '') {\n      setElementValue.call(this, this.promptMask);\n      this.element.setSelectionRange(0, 0);\n    }\n  }\n}\n\nfunction maskInputKeyDownHandler(event) {\n  if (this.mask && !this.readonly) {\n    if (event.keyCode !== 229) {\n      if (event.ctrlKey && (event.keyCode === 89 || event.keyCode === 90)) {\n        event.preventDefault();\n      }\n\n      removeMaskInputValues.call(this, event);\n    }\n\n    var startValue = this.element.value;\n\n    if (event.ctrlKey && (event.keyCode === 89 || event.keyCode === 90)) {\n      var collec = void 0;\n\n      if (event.keyCode === 90 && this.undoCollec.length > 0 && startValue !== this.undoCollec[this.undoCollec.length - 1].value) {\n        collec = this.undoCollec[this.undoCollec.length - 1];\n        this.redoCollec.unshift({\n          value: this.element.value,\n          startIndex: this.element.selectionStart,\n          endIndex: this.element.selectionEnd\n        });\n        setElementValue.call(this, collec.value);\n        this.element.selectionStart = collec.startIndex;\n        this.element.selectionEnd = collec.endIndex;\n        this.undoCollec.splice(this.undoCollec.length - 1, 1);\n      } else if (event.keyCode === 89 && this.redoCollec.length > 0 && startValue !== this.redoCollec[0].value) {\n        collec = this.redoCollec[0];\n        this.undoCollec.push({\n          value: this.element.value,\n          startIndex: this.element.selectionStart,\n          endIndex: this.element.selectionEnd\n        });\n        setElementValue.call(this, collec.value);\n        this.element.selectionStart = collec.startIndex;\n        this.element.selectionEnd = collec.endIndex;\n        this.redoCollec.splice(0, 1);\n      }\n    }\n  }\n}\n\nexport function mobileRemoveFunction() {\n  var collec;\n  var sIndex = this.element.selectionStart;\n  var eIndex = this.element.selectionEnd;\n\n  if (this.redoCollec.length > 0) {\n    collec = this.redoCollec[0];\n    setElementValue.call(this, collec.value);\n\n    if (collec.startIndex - sIndex === 1) {\n      this.element.selectionStart = collec.startIndex;\n      this.element.selectionEnd = collec.endIndex;\n    } else {\n      this.element.selectionStart = sIndex + 1;\n      this.element.selectionEnd = eIndex + 1;\n    }\n  } else {\n    setElementValue.call(this, this.promptMask);\n    this.element.selectionStart = this.element.selectionEnd = sIndex;\n  }\n}\n\nfunction autoFillMaskInputValues(isRemove, oldEventVal, event) {\n  if (event.type === 'input') {\n    isRemove = false;\n    oldEventVal = this.element.value;\n    setElementValue.call(this, this.promptMask);\n    setMaskValue.call(this, oldEventVal);\n  }\n\n  return isRemove;\n}\n\nfunction removeMaskInputValues(event) {\n  var isRemove = false;\n  var oldEventVal;\n  var isDeleted = false;\n\n  if (this.element.value.length < this.promptMask.length) {\n    isRemove = true;\n    oldEventVal = this.element.value;\n    isRemove = autoFillMaskInputValues.call(this, isRemove, oldEventVal, event);\n    mobileRemoveFunction.call(this);\n  }\n\n  if (this.element.value.length >= this.promptMask.length && event.type === 'input') {\n    isRemove = autoFillMaskInputValues.call(this, isRemove, oldEventVal, event);\n  }\n\n  var initStartIndex = this.element.selectionStart;\n  var initEndIndex = this.element.selectionEnd;\n  var startIndex = this.element.selectionStart;\n  var endIndex = this.element.selectionEnd;\n  var maskValue = this.hiddenMask.replace(/[>|\\\\<]/g, '');\n  var curMask = maskValue[startIndex - 1];\n  var deleteEndIndex = this.element.selectionEnd;\n\n  if (isRemove || event.keyCode === 8 || event.keyCode === 46) {\n    this.undoCollec.push({\n      value: this.element.value,\n      startIndex: this.element.selectionStart,\n      endIndex: endIndex\n    });\n    var multipleDel = false;\n    var preValue = this.element.value;\n\n    if (startIndex > 0 || (event.keyCode === 8 || event.keyCode === 46) && startIndex < this.element.value.length && this.element.selectionEnd - startIndex !== this.element.value.length) {\n      var index = startIndex;\n\n      if (startIndex !== endIndex) {\n        startIndex = endIndex;\n\n        if (event.keyCode === 46) {\n          multipleDel = true;\n        }\n      } else if (event.keyCode === 46) {\n        ++index;\n      } else {\n        --index;\n      }\n\n      for (var k = startIndex; event.keyCode === 8 || isRemove || multipleDel ? k > index : k < index; event.keyCode === 8 || isRemove || multipleDel ? k-- : k++) {\n        for (var i = startIndex; event.keyCode === 8 || isRemove || multipleDel ? i > 0 : i < this.element.value.length; event.keyCode === 8 || isRemove || multipleDel ? i-- : i++) {\n          var sIndex = void 0;\n\n          if ((event.keyCode === 8 || multipleDel) && (initStartIndex !== initEndIndex && initStartIndex !== startIndex || initStartIndex === initEndIndex) || isRemove) {\n            curMask = maskValue[i - 1];\n            sIndex = startIndex - 1;\n          } else {\n            curMask = maskValue[i];\n            sIndex = startIndex;\n            ++startIndex;\n          }\n\n          var oldValue = this.element.value[sIndex];\n\n          if (isNullOrUndefined(this.regExpCollec[curMask]) && !isNullOrUndefined(this.customCharacters) && isNullOrUndefined(this.customCharacters[curMask]) && this.hiddenMask[sIndex] !== this.promptChar && this.customRegExpCollec[sIndex][0] !== '[' && this.customRegExpCollec[sIndex][this.customRegExpCollec[sIndex].length - 1] !== ']' || this.promptMask[sIndex] !== this.promptChar && isNullOrUndefined(this.customCharacters)) {\n            this.element.selectionStart = this.element.selectionEnd = sIndex;\n            event.preventDefault();\n\n            if (event.keyCode === 46 && !multipleDel) {\n              ++this.element.selectionStart;\n            }\n          } else {\n            var value = this.element.value;\n            var prompt_1 = this.promptChar;\n            var elementValue = value.substring(0, sIndex) + prompt_1 + value.substring(startIndex, value.length);\n            setElementValue.call(this, elementValue);\n            event.preventDefault();\n\n            if (event.keyCode === 46 && !multipleDel) {\n              sIndex++;\n            }\n\n            this.element.selectionStart = this.element.selectionEnd = sIndex;\n            isDeleted = true;\n          }\n\n          startIndex = this.element.selectionStart;\n\n          if (!isDeleted && event.keyCode === 8 || multipleDel || !isDeleted && !(event.keyCode === 46)) {\n            sIndex = startIndex - 1;\n          } else {\n            sIndex = startIndex;\n            isDeleted = false;\n          }\n\n          oldValue = this.element.value[sIndex];\n\n          if (initStartIndex !== initEndIndex && this.element.selectionStart === initStartIndex || this.promptMask[sIndex] === this.promptChar || oldValue !== this.promptMask[sIndex] && this.promptMask[sIndex] !== this.promptChar && !isNullOrUndefined(this.customCharacters)) {\n            break;\n          }\n        }\n      }\n    }\n\n    if (event.keyCode === 46 && multipleDel && isDeleted) {\n      this.element.selectionStart = this.element.selectionEnd = deleteEndIndex;\n    }\n\n    if (this.element.selectionStart === 0 && this.element.selectionEnd === this.element.value.length) {\n      setElementValue.call(this, this.promptMask);\n      event.preventDefault();\n      this.element.selectionStart = this.element.selectionEnd = startIndex;\n    }\n\n    this.redoCollec.unshift({\n      value: this.element.value,\n      startIndex: this.element.selectionStart,\n      endIndex: this.element.selectionEnd\n    });\n\n    if (this.element.value !== preValue) {\n      triggerMaskChangeEvent.call(this, event, oldEventVal);\n    }\n  }\n}\n\nfunction maskInputKeyPressHandler(event) {\n  if (this.mask && !this.readonly) {\n    var oldValue = this.element.value;\n\n    if (!event.ctrlKey || event.ctrlKey && event.code !== 'KeyA' && event.code !== 'KeyY' && event.code !== 'KeyZ' && event.code !== 'KeyX' && event.code !== 'KeyC' && event.code !== 'KeyV') {\n      this.maskKeyPress = true;\n      var key = event.key;\n\n      if (key === 'Spacebar') {\n        key = String.fromCharCode(event.keyCode);\n      }\n\n      if (!key) {\n        this.isIosInvalid = true;\n        validateValue.call(this, String.fromCharCode(event.keyCode), event.ctrlKey, event);\n        event.preventDefault();\n        this.isIosInvalid = false;\n      } else if (key && key.length === 1) {\n        validateValue.call(this, key, event.ctrlKey, event);\n        event.preventDefault();\n      }\n\n      if (event.keyCode === 32 && key === ' ' && this.promptChar === ' ') {\n        this.element.selectionStart = this.element.selectionEnd = this.element.selectionStart - key.length;\n      }\n    }\n\n    if (this.element.value !== oldValue) {\n      triggerMaskChangeEvent.call(this, event, oldValue);\n    }\n  }\n} // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\nfunction triggerMaskChangeEvent(event, oldValue) {\n  var prevOnChange = this.isProtectedOnChange;\n\n  if (!isNullOrUndefined(this.changeEventArgs) && !this.isInitial) {\n    var eventArgs = {};\n    this.changeEventArgs = {\n      value: this.element.value,\n      maskedValue: this.element.value,\n      isInteraction: false,\n      isInteracted: false\n    };\n\n    if (this.mask) {\n      this.changeEventArgs.value = strippedValue.call(this, this.element);\n    }\n\n    if (!isNullOrUndefined(event)) {\n      this.changeEventArgs.isInteracted = true;\n      this.changeEventArgs.isInteraction = true;\n      this.changeEventArgs.event = event;\n    }\n\n    this.isProtectedOnChange = true;\n    this.value = this.changeEventArgs.value;\n    this.isProtectedOnChange = prevOnChange;\n    merge(eventArgs, this.changeEventArgs);\n    /* istanbul ignore next */\n\n    if (this.isAngular && this.preventChange) {\n      this.preventChange = false;\n    } else {\n      this.trigger('change', eventArgs);\n    }\n  }\n\n  this.preEleVal = this.element.value;\n  this.prevValue = strippedValue.call(this, this.element);\n  attributes(this.element, {\n    'aria-valuenow': this.element.value\n  });\n}\n\nfunction maskInputKeyUpHandler(event) {\n  if (this.mask && !this.readonly) {\n    var collec = void 0;\n\n    if (!this.maskKeyPress && event.keyCode === 229) {\n      var oldEventVal = void 0;\n\n      if (this.element.value.length === 1) {\n        this.element.value = this.element.value + this.promptMask;\n        this.element.setSelectionRange(1, 1);\n      }\n\n      if (this.element.value.length > this.promptMask.length) {\n        var startIndex = this.element.selectionStart;\n        var addedValues = this.element.value.length - this.promptMask.length;\n        var val_1 = this.element.value.substring(startIndex - addedValues, startIndex);\n\n        if (this.undoCollec.length > 0) {\n          collec = this.undoCollec[this.undoCollec.length - 1];\n          var startIndex_1 = this.element.selectionStart;\n          oldEventVal = collec.value;\n          var oldVal = collec.value.substring(startIndex_1 - addedValues, startIndex_1);\n          collec = this.redoCollec[0];\n          val_1 = val_1.trim();\n          var isSpace = Browser.isAndroid && val_1 === '';\n\n          if (!isSpace && oldVal !== val_1 && collec.value.substring(startIndex_1 - addedValues, startIndex_1) !== val_1) {\n            validateValue.call(this, val_1, event.ctrlKey, event);\n          } else if (isSpace) {\n            preventUnsupportedValues.call(this, event, startIndex_1 - 1, this.element.selectionEnd - 1, val_1, event.ctrlKey, false);\n          }\n        } else {\n          oldEventVal = this.promptMask;\n          validateValue.call(this, val_1, event.ctrlKey, event);\n        }\n\n        this.maskKeyPress = false;\n        triggerMaskChangeEvent.call(this, event, oldEventVal);\n      }\n    } else {\n      removeMaskError.call(this);\n    }\n\n    var val = strippedValue.call(this, this.element);\n\n    if (!(this.element.selectionStart === 0 && this.promptMask === this.element.value && val === '') || val === '' && this.value !== val) {\n      this.prevValue = val;\n      this.value = val;\n    }\n  } else {\n    triggerMaskChangeEvent.call(this, event);\n  }\n\n  if (this.element.selectionStart === 0 && this.element.selectionEnd === 0) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    var temp_1 = this.element;\n    setTimeout(function () {\n      temp_1.setSelectionRange(0, 0);\n    }, 0);\n  }\n}\n\nfunction mobileSwipeCheck(key) {\n  if (key.length > 1 && this.promptMask.length + key.length < this.element.value.length) {\n    var elementValue = this.redoCollec[0].value.substring(0, this.redoCollec[0].startIndex) + key + this.redoCollec[0].value.substring(this.redoCollec[0].startIndex, this.redoCollec[0].value.length);\n    setElementValue.call(this, elementValue);\n    this.element.selectionStart = this.element.selectionEnd = this.redoCollec[0].startIndex + key.length;\n  }\n\n  this.element.selectionStart = this.element.selectionStart - key.length;\n  this.element.selectionEnd = this.element.selectionEnd - key.length;\n}\n\nfunction mobileValidation(key) {\n  if (!this.maskKeyPress) {\n    mobileSwipeCheck.call(this, key);\n  }\n}\n\nfunction validateValue(key, isCtrlKey, event) {\n  mobileValidation.call(this, key);\n\n  if (isNullOrUndefined(this) || isNullOrUndefined(key)) {\n    return;\n  }\n\n  var startIndex = this.element.selectionStart;\n  var initStartIndex = startIndex;\n  var curMask;\n  var allowText = false;\n  var value = this.element.value;\n  var eventOldVal;\n  var prevSupport = false;\n  var isEqualVal = false;\n\n  for (var k = 0; k < key.length; k++) {\n    var keyValue = key[k];\n    startIndex = this.element.selectionStart;\n\n    if (!this.maskKeyPress && initStartIndex === startIndex) {\n      startIndex = startIndex + k;\n    }\n\n    if (!this.maskKeyPress || startIndex < this.promptMask.length) {\n      for (var i = startIndex; i < this.promptMask.length; i++) {\n        var maskValue = this.escapeMaskValue;\n        curMask = maskValue[startIndex];\n\n        if (this.hiddenMask[startIndex] === '\\\\' && this.hiddenMask[startIndex + 1] === key) {\n          isEqualVal = true;\n        }\n\n        if (isNullOrUndefined(this.regExpCollec[curMask]) && (isNullOrUndefined(this.customCharacters) || !isNullOrUndefined(this.customCharacters) && isNullOrUndefined(this.customCharacters[curMask])) && this.hiddenMask[startIndex] !== this.promptChar && this.customRegExpCollec[startIndex][0] !== '[' && this.customRegExpCollec[startIndex][this.customRegExpCollec[startIndex].length - 1] !== ']' || this.promptMask[startIndex] !== this.promptChar && isNullOrUndefined(this.customCharacters) || this.promptChar === curMask && this.escapeMaskValue === this.mask) {\n          this.element.selectionStart = this.element.selectionEnd = startIndex + 1;\n          startIndex = this.element.selectionStart;\n          curMask = this.hiddenMask[startIndex];\n        }\n      }\n\n      if (!isNullOrUndefined(this.customCharacters) && !isNullOrUndefined(this.customCharacters[curMask])) {\n        var customValStr = this.customCharacters[curMask];\n        var customValArr = customValStr.split(',');\n\n        for (var i = 0; i < customValArr.length; i++) {\n          if (keyValue.match(new RegExp('[' + customValArr[i] + ']'))) {\n            allowText = true;\n            break;\n          }\n        }\n      } else if (!isNullOrUndefined(this.regExpCollec[curMask]) && keyValue.match(new RegExp(this.regExpCollec[curMask])) && this.promptMask[startIndex] === this.promptChar) {\n        allowText = true;\n      } else if (this.promptMask[startIndex] === this.promptChar && this.customRegExpCollec[startIndex][0] === '[' && this.customRegExpCollec[startIndex][this.customRegExpCollec[startIndex].length - 1] === ']' && keyValue.match(new RegExp(this.customRegExpCollec[startIndex]))) {\n        allowText = true;\n      }\n\n      if ((!this.maskKeyPress || startIndex < this.hiddenMask.length) && allowText) {\n        if (k === 0) {\n          if (this.maskKeyPress) {\n            this.undoCollec.push({\n              value: value,\n              startIndex: startIndex,\n              endIndex: startIndex\n            });\n          } else {\n            var sIndex = this.element.selectionStart;\n            var eIndex = this.element.selectionEnd;\n\n            if (this.redoCollec.length > 0) {\n              eventOldVal = this.redoCollec[0].value;\n              setElementValue.call(this, eventOldVal);\n              this.undoCollec.push(this.redoCollec[0]);\n            } else {\n              this.undoCollec.push({\n                value: this.promptMask,\n                startIndex: startIndex,\n                endIndex: startIndex\n              });\n              eventOldVal = this.promptMask;\n              setElementValue.call(this, eventOldVal);\n            }\n\n            this.element.selectionStart = sIndex;\n            this.element.selectionEnd = eIndex;\n          }\n        }\n\n        startIndex = this.element.selectionStart;\n        applySupportedValues.call(this, event, startIndex, keyValue, eventOldVal, isEqualVal);\n        prevSupport = true;\n\n        if (k === key.length - 1) {\n          this.redoCollec.unshift({\n            value: this.element.value,\n            startIndex: this.element.selectionStart,\n            endIndex: this.element.selectionEnd\n          });\n        }\n\n        allowText = false;\n      } else {\n        startIndex = this.element.selectionStart;\n        preventUnsupportedValues.call(this, event, startIndex, initStartIndex, key, isCtrlKey, prevSupport);\n      }\n\n      if (k === key.length - 1 && !allowText) {\n        if (!Browser.isAndroid || Browser.isAndroid && startIndex < this.promptMask.length) {\n          this.redoCollec.unshift({\n            value: this.element.value,\n            startIndex: this.element.selectionStart,\n            endIndex: this.element.selectionEnd\n          });\n        }\n      }\n    } else {\n      if (key.length === 1 && !isCtrlKey && !isNullOrUndefined(event)) {\n        addMaskErrorClass.call(this);\n      }\n    }\n  }\n}\n\nfunction applySupportedValues(event, startIndex, keyValue, eventOldVal, isEqualVal) {\n  if (this.hiddenMask.length > this.promptMask.length) {\n    keyValue = changeToLowerUpperCase.call(this, keyValue, this.element.value);\n  }\n\n  if (!isEqualVal) {\n    var value = this.element.value;\n    var elementValue = value.substring(0, startIndex) + keyValue + value.substring(startIndex + 1, value.length);\n    setElementValue.call(this, elementValue);\n    this.element.selectionStart = this.element.selectionEnd = startIndex + 1;\n  }\n}\n\nfunction preventUnsupportedValues(event, sIdx, idx, key, ctrl, chkSupport) {\n  if (!this.maskKeyPress) {\n    var value = this.element.value;\n\n    if (sIdx >= this.promptMask.length) {\n      setElementValue.call(this, value.substring(0, sIdx));\n    } else {\n      if (idx === sIdx) {\n        setElementValue.call(this, value.substring(0, sIdx) + value.substring(sIdx + 1, value.length));\n      } else {\n        if (this.promptMask.length === this.element.value.length) {\n          setElementValue.call(this, value.substring(0, sIdx) + value.substring(sIdx, value.length));\n        } else {\n          setElementValue.call(this, value.substring(0, idx) + value.substring(idx + 1, value.length));\n        }\n      }\n\n      this.element.selectionStart = this.element.selectionEnd = chkSupport || this.element.value[idx] !== this.promptChar ? sIdx : idx;\n    }\n\n    addMaskErrorClass.call(this);\n  }\n\n  if (key.length === 1 && !ctrl && !isNullOrUndefined(event)) {\n    addMaskErrorClass.call(this);\n  }\n}\n\nfunction addMaskErrorClass() {\n  var _this = this;\n\n  var parentElement = this.element.parentNode;\n  var timer = 200;\n\n  if (parentElement.classList.contains(INPUTGROUP) || parentElement.classList.contains(FLOATINPUT)) {\n    addClass([parentElement], ERROR);\n  } else {\n    addClass([this.element], ERROR);\n  }\n\n  if (this.isIosInvalid === true) {\n    timer = 400;\n  }\n\n  attributes(this.element, {\n    'aria-invalid': 'true'\n  });\n  setTimeout(function () {\n    if (!_this.maskKeyPress) {\n      removeMaskError.call(_this);\n    }\n  }, timer);\n}\n\nfunction removeMaskError() {\n  var parentElement = this.element.parentNode;\n\n  if (!isNullOrUndefined(parentElement)) {\n    removeClass([parentElement], ERROR);\n  }\n\n  removeClass([this.element], ERROR);\n  attributes(this.element, {\n    'aria-invalid': 'false'\n  });\n}\n/**\r\n * Validates user input using masking elements '<' , '>' and '|'.\r\n *\r\n * @hidden\r\n */\n\n\nfunction changeToLowerUpperCase(key, value) {\n  var promptMask;\n  var i;\n  var curVal = value;\n  var caseCount = 0;\n\n  for (i = 0; i < this.hiddenMask.length; i++) {\n    if (this.hiddenMask[i] === '\\\\') {\n      promptMask = curVal.substring(0, i) + '\\\\' + curVal.substring(i, curVal.length);\n    }\n\n    if (this.hiddenMask[i] === '>' || this.hiddenMask[i] === '<' || this.hiddenMask[i] === '|') {\n      if (this.hiddenMask[i] !== curVal[i]) {\n        promptMask = curVal.substring(0, i) + this.hiddenMask[i] + curVal.substring(i, curVal.length);\n      }\n\n      ++caseCount;\n    }\n\n    if (promptMask) {\n      if (promptMask[i] === this.promptChar && i > this.element.selectionStart || this.element.value.indexOf(this.promptChar) < 0 && this.element.selectionStart + caseCount === i) {\n        caseCount = 0;\n        break;\n      }\n\n      curVal = promptMask;\n    }\n  }\n\n  while (i >= 0 && promptMask) {\n    if (i === 0 || promptMask[i - 1] !== '\\\\') {\n      if (promptMask[i] === '>') {\n        key = key.toUpperCase();\n        break;\n      } else if (promptMask[i] === '<') {\n        key = key.toLowerCase();\n        break;\n      } else if (promptMask[i] === '|') {\n        break;\n      }\n    }\n\n    --i;\n  }\n\n  return key;\n}\n/**\r\n * To set updated values in the MaskedTextBox.\r\n *\r\n * @hidden\r\n */\n\n\nexport function setMaskValue(val) {\n  if (this.mask && val !== undefined && (this.prevValue === undefined || this.prevValue !== val)) {\n    this.maskKeyPress = true;\n    setElementValue.call(this, this.promptMask);\n\n    if (val !== '' && !(val === null && this.floatLabelType === 'Never' && this.placeholder)) {\n      this.element.selectionStart = 0;\n      this.element.selectionEnd = 0;\n    }\n\n    if (val !== null) {\n      for (var i = 0; i < val.length; i++) {\n        validateValue.call(this, val[i], false, null);\n      }\n    }\n\n    var newVal = strippedValue.call(this, this.element);\n    this.prevValue = newVal;\n    this.value = newVal;\n    triggerMaskChangeEvent.call(this, null, null);\n    this.maskKeyPress = false;\n    var labelElement = this.element.parentNode.querySelector('.e-float-text');\n\n    if (this.element.value === this.promptMask && this.floatLabelType === 'Auto' && this.placeholder && !isNullOrUndefined(labelElement) && labelElement.classList.contains(TOPLABEL) && !this.isFocus) {\n      removeClass([labelElement], TOPLABEL);\n      addClass([labelElement], BOTTOMLABEL);\n      setElementValue.call(this, '');\n    }\n  }\n\n  if (this.mask === null || this.mask === '' && this.value !== undefined) {\n    setElementValue.call(this, this.value);\n  }\n}\n/**\r\n * To set updated values in the input element.\r\n *\r\n * @hidden\r\n */\n\nexport function setElementValue(val, element) {\n  if (!this.isFocus && this.floatLabelType === 'Auto' && this.placeholder && isNullOrUndefined(this.value)) {\n    val = '';\n  }\n\n  var value = strippedValue.call(this, element ? element : this.element, val);\n\n  if (value === null || value === '') {\n    Input.setValue(val, element ? element : this.element, this.floatLabelType, false);\n\n    if (this.showClearButton) {\n      this.inputObj.clearButton.classList.add('e-clear-icon-hide');\n    }\n  } else {\n    Input.setValue(val, element ? element : this.element, this.floatLabelType, this.showClearButton);\n  }\n}\n/**\r\n * Provide mask support to input textbox through utility method.\r\n *\r\n * @hidden\r\n */\n\nexport function maskInput(args) {\n  var inputEle = getMaskInput(args);\n  applyMask.call(inputEle);\n  var val = strippedValue.call(this, this.element);\n  this.prevValue = val;\n  this.value = val;\n\n  if (args.mask) {\n    unwireEvents.call(inputEle);\n    wireEvents.call(inputEle);\n  }\n}\n\nfunction getMaskInput(args) {\n  addClass([args.element], UTILMASK);\n  var inputEle = {\n    element: args.element,\n    mask: args.mask,\n    promptMask: '',\n    hiddenMask: '',\n    escapeMaskValue: '',\n    promptChar: args.promptChar ? args.promptChar.length > 1 ? args.promptChar = args.promptChar[0] : args.promptChar : '_',\n    value: args.value ? args.value : null,\n    regExpCollec: regularExpressions,\n    customRegExpCollec: [],\n    customCharacters: args.customCharacters,\n    undoCollec: [],\n    redoCollec: [],\n    maskKeyPress: false,\n    prevValue: ''\n  };\n  createMask.call(inputEle);\n  return inputEle;\n}\n/**\r\n * Gets raw value of the textbox which has been masked through utility method.\r\n *\r\n * @hidden\r\n */\n\n\nexport function getVal(args) {\n  return strippedValue.call(getUtilMaskEle(args), args.element);\n}\n/**\r\n * Gets masked value of the textbox which has been masked through utility method.\r\n *\r\n * @hidden\r\n */\n\nexport function getMaskedVal(args) {\n  return unstrippedValue.call(getUtilMaskEle(args), args.element);\n}\n\nfunction getUtilMaskEle(args) {\n  var inputEle;\n\n  if (!isNullOrUndefined(args) && args.element.classList.contains(UTILMASK)) {\n    inputEle = getMaskInput(args);\n  }\n\n  return inputEle;\n}\n/**\r\n * Arguments to perform undo and redo functionalities.\r\n *\r\n * @hidden\r\n */\n\n\nvar MaskUndo =\n/** @class */\nfunction () {\n  function MaskUndo() {}\n\n  return MaskUndo;\n}();\n\nexport { MaskUndo }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\nvar maskUndo = new MaskUndo();\n/* eslint-enable valid-jsdoc, jsdoc/require-jsdoc, jsdoc/require-returns, jsdoc/require-param */","map":{"version":3,"sources":["D:/HUST/20211/Introduction to Software Engineering/Project/Sprint 2/RubyGYM/client/node_modules/@syncfusion/ej2-inputs/src/maskedtextbox/base/mask-base.js"],"names":["EventHandler","isNullOrUndefined","merge","attributes","addClass","removeClass","Browser","extend","Input","ERROR","INPUTGROUP","FLOATINPUT","UTILMASK","TOPLABEL","BOTTOMLABEL","regularExpressions","createMask","element","mask","splitMask","split","i","length","splitInnerMask","j","pushIntoRegExpCollec","call","chkSpace","customRegExpCollec","push","hiddenMask","promptChar","escapeMaskValue","promptMask","replace","customCharacters","RegExp","escapeNumber","match","substring","applyMask","setElementValue","setMaskValue","value","wireEvents","add","maskInputKeyDownHandler","maskInputKeyPressHandler","maskInputKeyUpHandler","maskInputHandler","maskInputFocusHandler","maskInputBlurHandler","maskInputPasteHandler","maskInputCutHandler","maskInputDropHandler","maskInputMouseDownHandler","maskInputMouseUpHandler","enabled","bindClearEvent","formElement","resetFormHandler","unwireEvents","remove","showClearButton","inputObj","clearButton","resetHandler","e","preventDefault","classList","contains","container","clear","event","redoCollec","unshift","startIndex","selectionStart","endIndex","selectionEnd","triggerMaskChangeEvent","setSelectionRange","tagName","initInputValue","unstrippedValue","strippedValue","maskValues","k","checkMask","maskValue","_callPasteHandler","regExpCollec","undefined","isClicked","_this","inputElement","modelValue","toAllowForward","toAllowBackward","eventArgs","maskedValue","triggerFocus","floatLabelType","placeholder","setTimeout","backSelectionStart","trigger","blurEventArgs","isFocus","labelElement","parentNode","querySelector","readonly","sIndex_1","eIndex_1","oldValue_1","maskKeyPress","validateValue","i_1","preValue_1","sIndex_2","eIndex","undoCollec","value_1","isIE","ctrlKey","keyCode","removeMaskInputValues","addedValues","preEleVal","val","prevValue","startValue","collec","splice","mobileRemoveFunction","sIndex","autoFillMaskInputValues","isRemove","oldEventVal","type","isDeleted","initStartIndex","initEndIndex","curMask","deleteEndIndex","multipleDel","preValue","index","oldValue","prompt_1","elementValue","code","key","String","fromCharCode","isIosInvalid","prevOnChange","isProtectedOnChange","changeEventArgs","isInitial","isInteraction","isInteracted","isAngular","preventChange","val_1","startIndex_1","oldVal","trim","isSpace","isAndroid","preventUnsupportedValues","removeMaskError","temp_1","mobileSwipeCheck","mobileValidation","isCtrlKey","allowText","eventOldVal","prevSupport","isEqualVal","keyValue","customValStr","customValArr","applySupportedValues","addMaskErrorClass","changeToLowerUpperCase","sIdx","idx","ctrl","chkSupport","parentElement","timer","curVal","caseCount","indexOf","toUpperCase","toLowerCase","newVal","setValue","maskInput","args","inputEle","getMaskInput","getVal","getUtilMaskEle","getMaskedVal","MaskUndo","maskUndo"],"mappings":"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","sourcesContent":["/* eslint-disable valid-jsdoc, jsdoc/require-jsdoc, jsdoc/require-returns, jsdoc/require-param */\r\n/**\r\n * MaskedTextBox base module\r\n */\r\nimport { EventHandler, isNullOrUndefined, merge, attributes, addClass, removeClass, Browser, extend } from '@syncfusion/ej2-base';\r\nimport { Input } from '../../input/input';\r\nvar ERROR = 'e-error';\r\nvar INPUTGROUP = 'e-input-group';\r\nvar FLOATINPUT = 'e-float-input';\r\nvar UTILMASK = 'e-utility-mask';\r\nvar TOPLABEL = 'e-label-top';\r\nvar BOTTOMLABEL = 'e-label-bottom';\r\n/**\r\n * @hidden\r\n * Built-in masking elements collection.\r\n */\r\nexport var regularExpressions = {\r\n    '0': '[0-9]',\r\n    '9': '[0-9 ]',\r\n    '#': '[0-9 +-]',\r\n    'L': '[A-Za-z]',\r\n    '?': '[A-Za-z ]',\r\n    '&': '[^\\x7f ]+',\r\n    'C': '[^\\x7f]+',\r\n    'A': '[A-Za-z0-9]',\r\n    'a': '[A-Za-z0-9 ]'\r\n};\r\n/**\r\n * Generate required masking elements to the MaskedTextBox from user mask input.\r\n *\r\n * @hidden\r\n */\r\nexport function createMask() {\r\n    attributes(this.element, {\r\n        'role': 'textbox', 'autocomplete': 'off', 'autocorrect': 'off', 'autocapitalize': 'off',\r\n        'spellcheck': 'false', 'aria-live': 'assertive', 'aria-valuenow': ''\r\n    });\r\n    if (this.mask) {\r\n        var splitMask = this.mask.split(']');\r\n        for (var i = 0; i < splitMask.length; i++) {\r\n            if (splitMask[i][splitMask[i].length - 1] === '\\\\') {\r\n                splitMask[i] = splitMask[i] + ']';\r\n                var splitInnerMask = splitMask[i].split('[');\r\n                for (var j = 0; j < splitInnerMask.length; j++) {\r\n                    if (splitInnerMask[j][splitInnerMask[j].length - 1] === '\\\\') {\r\n                        splitInnerMask[j] = splitInnerMask[j] + '[';\r\n                    }\r\n                    pushIntoRegExpCollec.call(this, splitInnerMask[j]);\r\n                }\r\n            }\r\n            else {\r\n                var splitInnerMask = splitMask[i].split('[');\r\n                if (splitInnerMask.length > 1) {\r\n                    var chkSpace = false;\r\n                    for (var j = 0; j < splitInnerMask.length; j++) {\r\n                        if (splitInnerMask[j] === '\\\\') {\r\n                            this.customRegExpCollec.push('[');\r\n                            this.hiddenMask += splitInnerMask[j] + '[';\r\n                        }\r\n                        else if (splitInnerMask[j] === '') {\r\n                            chkSpace = true;\r\n                        }\r\n                        else if ((splitInnerMask[j] !== '' && chkSpace) || j === splitInnerMask.length - 1) {\r\n                            this.customRegExpCollec.push('[' + splitInnerMask[j] + ']');\r\n                            this.hiddenMask += this.promptChar;\r\n                            chkSpace = false;\r\n                        }\r\n                        else {\r\n                            pushIntoRegExpCollec.call(this, splitInnerMask[j]);\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    pushIntoRegExpCollec.call(this, splitInnerMask[0]);\r\n                }\r\n            }\r\n        }\r\n        this.escapeMaskValue = this.hiddenMask;\r\n        this.promptMask = this.hiddenMask.replace(/[09?LCAa#&]/g, this.promptChar);\r\n        if (!isNullOrUndefined(this.customCharacters)) {\r\n            for (var i = 0; i < this.promptMask.length; i++) {\r\n                if (!isNullOrUndefined(this.customCharacters[this.promptMask[i]])) {\r\n                    this.promptMask = this.promptMask.replace(new RegExp(this.promptMask[i], 'g'), this.promptChar);\r\n                }\r\n            }\r\n        }\r\n        var escapeNumber = 0;\r\n        if (this.hiddenMask.match(new RegExp(/\\\\/))) {\r\n            for (var i = 0; i < this.hiddenMask.length; i++) {\r\n                var j = 0;\r\n                if (i >= 1) {\r\n                    j = i;\r\n                }\r\n                escapeNumber = this.hiddenMask.length - this.promptMask.length;\r\n                j = j - escapeNumber;\r\n                if ((i > 0 && this.hiddenMask[i - 1] !== '\\\\') && (this.hiddenMask[i] === '>' ||\r\n                    this.hiddenMask[i] === '<' || this.hiddenMask[i] === '|')) {\r\n                    this.promptMask = this.promptMask.substring(0, j) +\r\n                        this.promptMask.substring((i + 1) - escapeNumber, this.promptMask.length);\r\n                    this.escapeMaskValue = this.escapeMaskValue.substring(0, j) +\r\n                        this.escapeMaskValue.substring((i + 1) - escapeNumber, this.escapeMaskValue.length);\r\n                }\r\n                if (this.hiddenMask[i] === '\\\\') {\r\n                    this.promptMask = this.promptMask.substring(0, j) + this.hiddenMask[i + 1] +\r\n                        this.promptMask.substring((i + 2) - escapeNumber, this.promptMask.length);\r\n                    this.escapeMaskValue = this.escapeMaskValue.substring(0, j) + this.escapeMaskValue[i + 1] +\r\n                        this.escapeMaskValue.substring((i + 2) - escapeNumber, this.escapeMaskValue.length);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            this.promptMask = this.promptMask.replace(/[>|<]/g, '');\r\n            this.escapeMaskValue = this.hiddenMask.replace(/[>|<]/g, '');\r\n        }\r\n        attributes(this.element, { 'aria-invalid': 'false' });\r\n    }\r\n}\r\n/**\r\n * Apply mask ability with masking elements to the MaskedTextBox.\r\n *\r\n * @hidden\r\n */\r\nexport function applyMask() {\r\n    setElementValue.call(this, this.promptMask);\r\n    setMaskValue.call(this, this.value);\r\n}\r\n/**\r\n * To wire required events to the MaskedTextBox.\r\n *\r\n * @hidden\r\n */\r\nexport function wireEvents() {\r\n    EventHandler.add(this.element, 'keydown', maskInputKeyDownHandler, this);\r\n    EventHandler.add(this.element, 'keypress', maskInputKeyPressHandler, this);\r\n    EventHandler.add(this.element, 'keyup', maskInputKeyUpHandler, this);\r\n    EventHandler.add(this.element, 'input', maskInputHandler, this);\r\n    EventHandler.add(this.element, 'focus', maskInputFocusHandler, this);\r\n    EventHandler.add(this.element, 'blur', maskInputBlurHandler, this);\r\n    EventHandler.add(this.element, 'paste', maskInputPasteHandler, this);\r\n    EventHandler.add(this.element, 'cut', maskInputCutHandler, this);\r\n    EventHandler.add(this.element, 'drop', maskInputDropHandler, this);\r\n    EventHandler.add(this.element, 'mousedown', maskInputMouseDownHandler, this);\r\n    EventHandler.add(this.element, 'mouseup', maskInputMouseUpHandler, this);\r\n    if (this.enabled) {\r\n        bindClearEvent.call(this);\r\n        if (this.formElement) {\r\n            EventHandler.add(this.formElement, 'reset', resetFormHandler, this);\r\n        }\r\n    }\r\n}\r\n/**\r\n * To unwire events attached to the MaskedTextBox.\r\n *\r\n * @hidden\r\n */\r\nexport function unwireEvents() {\r\n    EventHandler.remove(this.element, 'keydown', maskInputKeyDownHandler);\r\n    EventHandler.remove(this.element, 'keypress', maskInputKeyPressHandler);\r\n    EventHandler.remove(this.element, 'keyup', maskInputKeyUpHandler);\r\n    EventHandler.remove(this.element, 'input', maskInputHandler);\r\n    EventHandler.remove(this.element, 'focus', maskInputFocusHandler);\r\n    EventHandler.remove(this.element, 'blur', maskInputBlurHandler);\r\n    EventHandler.remove(this.element, 'paste', maskInputPasteHandler);\r\n    EventHandler.remove(this.element, 'cut', maskInputCutHandler);\r\n    EventHandler.remove(this.element, 'mousedown', maskInputMouseDownHandler);\r\n    EventHandler.remove(this.element, 'mouseup', maskInputMouseUpHandler);\r\n    if (this.formElement) {\r\n        EventHandler.remove(this.formElement, 'reset', resetFormHandler);\r\n    }\r\n}\r\n/**\r\n * To bind required events to the MaskedTextBox clearButton.\r\n *\r\n * @hidden\r\n */\r\nexport function bindClearEvent() {\r\n    if (this.showClearButton) {\r\n        EventHandler.add(this.inputObj.clearButton, 'mousedown touchstart', resetHandler, this);\r\n    }\r\n}\r\nfunction resetHandler(e) {\r\n    e.preventDefault();\r\n    if (!this.inputObj.clearButton.classList.contains('e-clear-icon-hide') || (this.inputObj.container.classList.contains('e-static-clear'))) {\r\n        clear.call(this, e);\r\n        this.value = '';\r\n    }\r\n}\r\nfunction clear(event) {\r\n    var value = this.element.value;\r\n    setElementValue.call(this, this.promptMask);\r\n    this.redoCollec.unshift({\r\n        value: this.promptMask, startIndex: this.element.selectionStart, endIndex: this.element.selectionEnd\r\n    });\r\n    triggerMaskChangeEvent.call(this, event, value);\r\n    this.element.setSelectionRange(0, 0);\r\n}\r\nfunction resetFormHandler() {\r\n    if (this.element.tagName === 'EJS-MASKEDTEXTBOX') {\r\n        setElementValue.call(this, this.promptMask);\r\n    }\r\n    else {\r\n        this.value = this.initInputValue;\r\n    }\r\n}\r\n/**\r\n * To get masked value from the MaskedTextBox.\r\n *\r\n * @hidden\r\n */\r\nexport function unstrippedValue(element) {\r\n    return element.value;\r\n}\r\n/**\r\n * To extract raw value from the MaskedTextBox.\r\n *\r\n * @hidden\r\n */\r\nexport function strippedValue(element, maskValues) {\r\n    var value = '';\r\n    var k = 0;\r\n    var checkMask = false;\r\n    var maskValue = (!isNullOrUndefined(maskValues)) ? maskValues : (!isNullOrUndefined(element) &&\r\n        !isNullOrUndefined(this)) ? element.value : maskValues;\r\n    if (maskValue !== this.promptMask) {\r\n        for (var i = 0; i < this.customRegExpCollec.length; i++) {\r\n            if (checkMask) {\r\n                checkMask = false;\r\n            }\r\n            if (this.customRegExpCollec[k] === '>' || this.customRegExpCollec[k] === '<' ||\r\n                this.customRegExpCollec[k] === '|' || this.customRegExpCollec[k] === '\\\\') {\r\n                --i;\r\n                checkMask = true;\r\n            }\r\n            if (!checkMask) {\r\n                if ((maskValue[i] !== this.promptChar) && (!isNullOrUndefined(this.customRegExpCollec[k]) &&\r\n                    ((this._callPasteHandler || !isNullOrUndefined(this.regExpCollec[this.customRegExpCollec[k]])) ||\r\n                        (this.customRegExpCollec[k].length > 2 && this.customRegExpCollec[k][0] === '[' &&\r\n                            this.customRegExpCollec[k][this.customRegExpCollec[k].length - 1] === ']') ||\r\n                        (!isNullOrUndefined(this.customCharacters) &&\r\n                            (!isNullOrUndefined(this.customCharacters[this.customRegExpCollec[k]]))))) && (maskValue !== '')) {\r\n                    value += maskValue[i];\r\n                }\r\n            }\r\n            ++k;\r\n        }\r\n    }\r\n    if (this.mask === null || this.mask === '' && this.value !== undefined) {\r\n        value = maskValue;\r\n    }\r\n    return value;\r\n}\r\nfunction pushIntoRegExpCollec(value) {\r\n    for (var k = 0; k < value.length; k++) {\r\n        this.hiddenMask += value[k];\r\n        if (value[k] !== '\\\\') {\r\n            this.customRegExpCollec.push(value[k]);\r\n        }\r\n    }\r\n}\r\nexport function maskInputMouseDownHandler() {\r\n    this.isClicked = true;\r\n}\r\nexport function maskInputMouseUpHandler() {\r\n    this.isClicked = false;\r\n}\r\nexport function maskInputFocusHandler(event) {\r\n    var _this = this;\r\n    var inputElement = this.element;\r\n    var startIndex = 0;\r\n    var modelValue = strippedValue.call(this, inputElement);\r\n    var toAllowForward = false;\r\n    var toAllowBackward = false;\r\n    var eventArgs = {\r\n        selectionStart: inputElement.selectionStart,\r\n        event: event,\r\n        value: this.value,\r\n        maskedValue: inputElement.value,\r\n        container: this.inputObj.container,\r\n        selectionEnd: inputElement.selectionEnd\r\n    };\r\n    if (!this.isClicked) {\r\n        triggerFocus.call(this, eventArgs, inputElement);\r\n    }\r\n    if (this.mask) {\r\n        if (!(!(modelValue === null || modelValue === '') || this.floatLabelType === 'Always' ||\r\n            this.placeholder === null || this.placeholder === '')) {\r\n            inputElement.value = this.promptMask;\r\n        }\r\n        setTimeout(function () {\r\n            if (inputElement.selectionStart === _this.promptMask.length ||\r\n                inputElement.value[inputElement.selectionStart] === _this.promptChar) {\r\n                toAllowForward = true;\r\n            }\r\n            else {\r\n                for (var i = inputElement.selectionStart; i < _this.promptMask.length; i++) {\r\n                    if (inputElement.value[i] !== _this.promptChar) {\r\n                        if ((inputElement.value[i] !== _this.promptMask[i])) {\r\n                            toAllowForward = false;\r\n                            break;\r\n                        }\r\n                    }\r\n                    else {\r\n                        toAllowForward = true;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        setTimeout(function () {\r\n            var backSelectionStart = inputElement.selectionStart - 1;\r\n            if (backSelectionStart === _this.promptMask.length - 1 ||\r\n                inputElement.value[backSelectionStart] === _this.promptChar) {\r\n                toAllowBackward = true;\r\n            }\r\n            else {\r\n                for (var i = backSelectionStart; i >= 0; i--) {\r\n                    if (inputElement.value[i] !== _this.promptChar) {\r\n                        if ((inputElement.value[i] !== _this.promptMask[i])) {\r\n                            toAllowBackward = false;\r\n                            break;\r\n                        }\r\n                    }\r\n                    else {\r\n                        toAllowBackward = true;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        if ((this.isClicked || (this.floatLabelType !== 'Always' &&\r\n            ((modelValue === null || modelValue === '') &&\r\n                (this.placeholder !== null && this.placeholder !== ''))))) {\r\n            for (startIndex = 0; startIndex < this.promptMask.length; startIndex++) {\r\n                if (inputElement.value[startIndex] === this.promptChar) {\r\n                    setTimeout(function () {\r\n                        if (toAllowForward || toAllowBackward) {\r\n                            inputElement.selectionEnd = startIndex;\r\n                            inputElement.selectionStart = startIndex;\r\n                        }\r\n                        eventArgs = {\r\n                            selectionStart: inputElement.selectionStart,\r\n                            event: event,\r\n                            value: _this.value,\r\n                            maskedValue: inputElement.value,\r\n                            container: _this.inputObj.container,\r\n                            selectionEnd: inputElement.selectionEnd\r\n                        };\r\n                        triggerFocus.call(_this, eventArgs, inputElement);\r\n                    });\r\n                    break;\r\n                }\r\n            }\r\n            if (isNullOrUndefined(inputElement.value.match(this.promptChar))) {\r\n                eventArgs = {\r\n                    selectionStart: inputElement.selectionStart,\r\n                    event: event,\r\n                    value: this.value,\r\n                    maskedValue: inputElement.value,\r\n                    container: this.inputObj.container,\r\n                    selectionEnd: inputElement.selectionEnd\r\n                };\r\n                triggerFocus.call(this, eventArgs, inputElement);\r\n            }\r\n            this.isClicked = false;\r\n        }\r\n    }\r\n}\r\nexport function triggerFocus(eventArgs, inputElement) {\r\n    this.trigger('focus', eventArgs, function (eventArgs) {\r\n        inputElement.selectionStart = eventArgs.selectionStart;\r\n        inputElement.selectionEnd = eventArgs.selectionEnd;\r\n    });\r\n}\r\nexport function maskInputBlurHandler(event) {\r\n    this.blurEventArgs = {\r\n        event: event,\r\n        value: this.value,\r\n        maskedValue: this.element.value,\r\n        container: this.inputObj.container\r\n    };\r\n    this.trigger('blur', this.blurEventArgs);\r\n    if (this.mask) {\r\n        this.isFocus = false;\r\n        if (this.placeholder && this.element.value === this.promptMask && this.floatLabelType !== 'Always') {\r\n            setElementValue.call(this, '');\r\n            var labelElement = this.element.parentNode.querySelector('.e-float-text');\r\n            if (this.floatLabelType === 'Auto' && !isNullOrUndefined(labelElement) && labelElement.classList.contains(TOPLABEL)) {\r\n                removeClass([labelElement], TOPLABEL);\r\n            }\r\n        }\r\n    }\r\n}\r\nfunction maskInputPasteHandler(event) {\r\n    var _this = this;\r\n    if (this.mask && !this.readonly) {\r\n        var sIndex_1 = this.element.selectionStart;\r\n        var eIndex_1 = this.element.selectionEnd;\r\n        var oldValue_1 = this.element.value;\r\n        setElementValue.call(this, '');\r\n        this._callPasteHandler = true;\r\n        setTimeout(function () {\r\n            var value = _this.element.value.replace(/ /g, '');\r\n            if (_this.redoCollec.length > 0 && _this.redoCollec[0].value === _this.element.value) {\r\n                value = strippedValue.call(_this, _this.element);\r\n            }\r\n            setElementValue.call(_this, oldValue_1);\r\n            _this.element.selectionStart = sIndex_1;\r\n            _this.element.selectionEnd = eIndex_1;\r\n            var i = 0;\r\n            _this.maskKeyPress = true;\r\n            do {\r\n                validateValue.call(_this, value[i], false, null);\r\n                ++i;\r\n            } while (i < value.length);\r\n            _this.maskKeyPress = false;\r\n            _this._callPasteHandler = false;\r\n            if (_this.element.value === oldValue_1) {\r\n                var i_1 = 0;\r\n                _this.maskKeyPress = true;\r\n                do {\r\n                    validateValue.call(_this, value[i_1], false, null);\r\n                    ++i_1;\r\n                } while (i_1 < value.length);\r\n                _this.maskKeyPress = false;\r\n            }\r\n            else {\r\n                triggerMaskChangeEvent.call(_this, event, oldValue_1);\r\n            }\r\n        }, 1);\r\n    }\r\n}\r\nfunction maskInputCutHandler(event) {\r\n    var _this = this;\r\n    if (this.mask && !this.readonly) {\r\n        var preValue_1 = this.element.value;\r\n        var sIndex_2 = this.element.selectionStart;\r\n        var eIndex = this.element.selectionEnd;\r\n        this.undoCollec.push({ value: this.element.value, startIndex: this.element.selectionStart, endIndex: this.element.selectionEnd });\r\n        var value_1 = this.element.value.substring(0, sIndex_2) + this.promptMask.substring(sIndex_2, eIndex) +\r\n            this.element.value.substring(eIndex);\r\n        setTimeout(function () {\r\n            setElementValue.call(_this, value_1);\r\n            _this.element.selectionStart = _this.element.selectionEnd = sIndex_2;\r\n            if (_this.element.value !== preValue_1) {\r\n                triggerMaskChangeEvent.call(_this, event, null);\r\n            }\r\n        }, 0);\r\n    }\r\n}\r\nexport function maskInputDropHandler(event) {\r\n    event.preventDefault();\r\n}\r\nfunction maskInputHandler(event) {\r\n    if (Browser.isIE === true && this.element.value === '' && this.floatLabelType === 'Never') {\r\n        return;\r\n    }\r\n    var eventArgs = { ctrlKey: false, keyCode: 229 };\r\n    extend(event, eventArgs);\r\n    if (this.mask) {\r\n        if (this.element.value === '') {\r\n            this.redoCollec.unshift({\r\n                value: this.promptMask, startIndex: this.element.selectionStart, endIndex: this.element.selectionEnd\r\n            });\r\n        }\r\n        if (this.element.value.length === 1) {\r\n            this.element.value = this.element.value + this.promptMask;\r\n            this.element.setSelectionRange(1, 1);\r\n        }\r\n        if (!this._callPasteHandler) {\r\n            removeMaskInputValues.call(this, event);\r\n        }\r\n        if (this.element.value.length > this.promptMask.length) {\r\n            var startIndex = this.element.selectionStart;\r\n            var addedValues = this.element.value.length - this.promptMask.length;\r\n            var value = this.element.value.substring(startIndex - addedValues, startIndex);\r\n            this.maskKeyPress = false;\r\n            var i = 0;\r\n            do {\r\n                validateValue.call(this, value[i], event.ctrlKey, event);\r\n                ++i;\r\n            } while (i < value.length);\r\n            if (this.element.value !== this.preEleVal) {\r\n                triggerMaskChangeEvent.call(this, event, null);\r\n            }\r\n        }\r\n        var val = strippedValue.call(this, this.element);\r\n        this.prevValue = val;\r\n        this.value = val;\r\n        if (val === '') {\r\n            setElementValue.call(this, this.promptMask);\r\n            this.element.setSelectionRange(0, 0);\r\n        }\r\n    }\r\n}\r\nfunction maskInputKeyDownHandler(event) {\r\n    if (this.mask && !this.readonly) {\r\n        if (event.keyCode !== 229) {\r\n            if (event.ctrlKey && (event.keyCode === 89 || event.keyCode === 90)) {\r\n                event.preventDefault();\r\n            }\r\n            removeMaskInputValues.call(this, event);\r\n        }\r\n        var startValue = this.element.value;\r\n        if (event.ctrlKey && (event.keyCode === 89 || event.keyCode === 90)) {\r\n            var collec = void 0;\r\n            if (event.keyCode === 90 && this.undoCollec.length > 0 && startValue !== this.undoCollec[this.undoCollec.length - 1].value) {\r\n                collec = this.undoCollec[this.undoCollec.length - 1];\r\n                this.redoCollec.unshift({\r\n                    value: this.element.value, startIndex: this.element.selectionStart,\r\n                    endIndex: this.element.selectionEnd\r\n                });\r\n                setElementValue.call(this, collec.value);\r\n                this.element.selectionStart = collec.startIndex;\r\n                this.element.selectionEnd = collec.endIndex;\r\n                this.undoCollec.splice(this.undoCollec.length - 1, 1);\r\n            }\r\n            else if (event.keyCode === 89 && this.redoCollec.length > 0 && startValue !== this.redoCollec[0].value) {\r\n                collec = this.redoCollec[0];\r\n                this.undoCollec.push({\r\n                    value: this.element.value, startIndex: this.element.selectionStart,\r\n                    endIndex: this.element.selectionEnd\r\n                });\r\n                setElementValue.call(this, collec.value);\r\n                this.element.selectionStart = collec.startIndex;\r\n                this.element.selectionEnd = collec.endIndex;\r\n                this.redoCollec.splice(0, 1);\r\n            }\r\n        }\r\n    }\r\n}\r\nexport function mobileRemoveFunction() {\r\n    var collec;\r\n    var sIndex = this.element.selectionStart;\r\n    var eIndex = this.element.selectionEnd;\r\n    if (this.redoCollec.length > 0) {\r\n        collec = this.redoCollec[0];\r\n        setElementValue.call(this, collec.value);\r\n        if ((collec.startIndex - sIndex) === 1) {\r\n            this.element.selectionStart = collec.startIndex;\r\n            this.element.selectionEnd = collec.endIndex;\r\n        }\r\n        else {\r\n            this.element.selectionStart = sIndex + 1;\r\n            this.element.selectionEnd = eIndex + 1;\r\n        }\r\n    }\r\n    else {\r\n        setElementValue.call(this, this.promptMask);\r\n        this.element.selectionStart = this.element.selectionEnd = sIndex;\r\n    }\r\n}\r\nfunction autoFillMaskInputValues(isRemove, oldEventVal, event) {\r\n    if (event.type === 'input') {\r\n        isRemove = false;\r\n        oldEventVal = this.element.value;\r\n        setElementValue.call(this, this.promptMask);\r\n        setMaskValue.call(this, oldEventVal);\r\n    }\r\n    return isRemove;\r\n}\r\nfunction removeMaskInputValues(event) {\r\n    var isRemove = false;\r\n    var oldEventVal;\r\n    var isDeleted = false;\r\n    if (this.element.value.length < this.promptMask.length) {\r\n        isRemove = true;\r\n        oldEventVal = this.element.value;\r\n        isRemove = autoFillMaskInputValues.call(this, isRemove, oldEventVal, event);\r\n        mobileRemoveFunction.call(this);\r\n    }\r\n    if (this.element.value.length >= this.promptMask.length && event.type === 'input') {\r\n        isRemove = autoFillMaskInputValues.call(this, isRemove, oldEventVal, event);\r\n    }\r\n    var initStartIndex = this.element.selectionStart;\r\n    var initEndIndex = this.element.selectionEnd;\r\n    var startIndex = this.element.selectionStart;\r\n    var endIndex = this.element.selectionEnd;\r\n    var maskValue = this.hiddenMask.replace(/[>|\\\\<]/g, '');\r\n    var curMask = maskValue[startIndex - 1];\r\n    var deleteEndIndex = this.element.selectionEnd;\r\n    if (isRemove || event.keyCode === 8 || event.keyCode === 46) {\r\n        this.undoCollec.push({ value: this.element.value, startIndex: this.element.selectionStart, endIndex: endIndex });\r\n        var multipleDel = false;\r\n        var preValue = this.element.value;\r\n        if (startIndex > 0 || ((event.keyCode === 8 || event.keyCode === 46) && startIndex < this.element.value.length\r\n            && ((this.element.selectionEnd - startIndex) !== this.element.value.length))) {\r\n            var index = startIndex;\r\n            if (startIndex !== endIndex) {\r\n                startIndex = endIndex;\r\n                if (event.keyCode === 46) {\r\n                    multipleDel = true;\r\n                }\r\n            }\r\n            else if (event.keyCode === 46) {\r\n                ++index;\r\n            }\r\n            else {\r\n                --index;\r\n            }\r\n            for (var k = startIndex; (event.keyCode === 8 || isRemove || multipleDel) ? k > index : k < index; (event.keyCode === 8 || isRemove || multipleDel) ? k-- : k++) {\r\n                for (var i = startIndex; (event.keyCode === 8 || isRemove || multipleDel) ? i > 0 : i < this.element.value.length; (event.keyCode === 8 || isRemove || multipleDel) ? i-- : i++) {\r\n                    var sIndex = void 0;\r\n                    if (((event.keyCode === 8 || multipleDel) && ((initStartIndex !== initEndIndex && initStartIndex !== startIndex) ||\r\n                        (initStartIndex === initEndIndex))) || isRemove) {\r\n                        curMask = maskValue[i - 1];\r\n                        sIndex = startIndex - 1;\r\n                    }\r\n                    else {\r\n                        curMask = maskValue[i];\r\n                        sIndex = startIndex;\r\n                        ++startIndex;\r\n                    }\r\n                    var oldValue = this.element.value[sIndex];\r\n                    if ((isNullOrUndefined(this.regExpCollec[curMask]) && (!isNullOrUndefined(this.customCharacters)\r\n                        && isNullOrUndefined(this.customCharacters[curMask]))\r\n                        && ((this.hiddenMask[sIndex] !== this.promptChar && this.customRegExpCollec[sIndex][0] !== '['\r\n                            && this.customRegExpCollec[sIndex][this.customRegExpCollec[sIndex].length - 1] !== ']')))\r\n                        || (this.promptMask[sIndex] !== this.promptChar && isNullOrUndefined(this.customCharacters))) {\r\n                        this.element.selectionStart = this.element.selectionEnd = sIndex;\r\n                        event.preventDefault();\r\n                        if (event.keyCode === 46 && !multipleDel) {\r\n                            ++this.element.selectionStart;\r\n                        }\r\n                    }\r\n                    else {\r\n                        var value = this.element.value;\r\n                        var prompt_1 = this.promptChar;\r\n                        var elementValue = value.substring(0, sIndex) + prompt_1 + value.substring(startIndex, value.length);\r\n                        setElementValue.call(this, elementValue);\r\n                        event.preventDefault();\r\n                        if (event.keyCode === 46 && !multipleDel) {\r\n                            sIndex++;\r\n                        }\r\n                        this.element.selectionStart = this.element.selectionEnd = sIndex;\r\n                        isDeleted = true;\r\n                    }\r\n                    startIndex = this.element.selectionStart;\r\n                    if ((!isDeleted && event.keyCode === 8) || multipleDel || (!isDeleted && !(event.keyCode === 46))) {\r\n                        sIndex = startIndex - 1;\r\n                    }\r\n                    else {\r\n                        sIndex = startIndex;\r\n                        isDeleted = false;\r\n                    }\r\n                    oldValue = this.element.value[sIndex];\r\n                    if (((initStartIndex !== initEndIndex) && (this.element.selectionStart === initStartIndex))\r\n                        || (this.promptMask[sIndex] === this.promptChar) || ((oldValue !== this.promptMask[sIndex]) &&\r\n                        (this.promptMask[sIndex] !== this.promptChar) && !isNullOrUndefined(this.customCharacters))) {\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (event.keyCode === 46 && multipleDel && isDeleted) {\r\n            this.element.selectionStart = this.element.selectionEnd = deleteEndIndex;\r\n        }\r\n        if (this.element.selectionStart === 0 && (this.element.selectionEnd === this.element.value.length)) {\r\n            setElementValue.call(this, this.promptMask);\r\n            event.preventDefault();\r\n            this.element.selectionStart = this.element.selectionEnd = startIndex;\r\n        }\r\n        this.redoCollec.unshift({\r\n            value: this.element.value, startIndex: this.element.selectionStart,\r\n            endIndex: this.element.selectionEnd\r\n        });\r\n        if (this.element.value !== preValue) {\r\n            triggerMaskChangeEvent.call(this, event, oldEventVal);\r\n        }\r\n    }\r\n}\r\nfunction maskInputKeyPressHandler(event) {\r\n    if (this.mask && !this.readonly) {\r\n        var oldValue = this.element.value;\r\n        if ((!event.ctrlKey) || (event.ctrlKey && event.code !== 'KeyA' && event.code !== 'KeyY'\r\n            && event.code !== 'KeyZ' && event.code !== 'KeyX' && event.code !== 'KeyC' && event.code !== 'KeyV')) {\r\n            this.maskKeyPress = true;\r\n            var key = event.key;\r\n            if (key === 'Spacebar') {\r\n                key = String.fromCharCode(event.keyCode);\r\n            }\r\n            if (!key) {\r\n                this.isIosInvalid = true;\r\n                validateValue.call(this, String.fromCharCode(event.keyCode), event.ctrlKey, event);\r\n                event.preventDefault();\r\n                this.isIosInvalid = false;\r\n            }\r\n            else if (key && key.length === 1) {\r\n                validateValue.call(this, key, event.ctrlKey, event);\r\n                event.preventDefault();\r\n            }\r\n            if (event.keyCode === 32 && key === ' ' && this.promptChar === ' ') {\r\n                this.element.selectionStart = this.element.selectionEnd = this.element.selectionStart - key.length;\r\n            }\r\n        }\r\n        if (this.element.value !== oldValue) {\r\n            triggerMaskChangeEvent.call(this, event, oldValue);\r\n        }\r\n    }\r\n}\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nfunction triggerMaskChangeEvent(event, oldValue) {\r\n    var prevOnChange = this.isProtectedOnChange;\r\n    if (!isNullOrUndefined(this.changeEventArgs) && !this.isInitial) {\r\n        var eventArgs = {};\r\n        this.changeEventArgs = { value: this.element.value, maskedValue: this.element.value, isInteraction: false, isInteracted: false };\r\n        if (this.mask) {\r\n            this.changeEventArgs.value = strippedValue.call(this, this.element);\r\n        }\r\n        if (!isNullOrUndefined(event)) {\r\n            this.changeEventArgs.isInteracted = true;\r\n            this.changeEventArgs.isInteraction = true;\r\n            this.changeEventArgs.event = event;\r\n        }\r\n        this.isProtectedOnChange = true;\r\n        this.value = this.changeEventArgs.value;\r\n        this.isProtectedOnChange = prevOnChange;\r\n        merge(eventArgs, this.changeEventArgs);\r\n        /* istanbul ignore next */\r\n        if (this.isAngular && this.preventChange) {\r\n            this.preventChange = false;\r\n        }\r\n        else {\r\n            this.trigger('change', eventArgs);\r\n        }\r\n    }\r\n    this.preEleVal = this.element.value;\r\n    this.prevValue = strippedValue.call(this, this.element);\r\n    attributes(this.element, { 'aria-valuenow': this.element.value });\r\n}\r\nfunction maskInputKeyUpHandler(event) {\r\n    if (this.mask && !this.readonly) {\r\n        var collec = void 0;\r\n        if (!this.maskKeyPress && event.keyCode === 229) {\r\n            var oldEventVal = void 0;\r\n            if (this.element.value.length === 1) {\r\n                this.element.value = this.element.value + this.promptMask;\r\n                this.element.setSelectionRange(1, 1);\r\n            }\r\n            if (this.element.value.length > this.promptMask.length) {\r\n                var startIndex = this.element.selectionStart;\r\n                var addedValues = this.element.value.length - this.promptMask.length;\r\n                var val_1 = this.element.value.substring(startIndex - addedValues, startIndex);\r\n                if (this.undoCollec.length > 0) {\r\n                    collec = this.undoCollec[this.undoCollec.length - 1];\r\n                    var startIndex_1 = this.element.selectionStart;\r\n                    oldEventVal = collec.value;\r\n                    var oldVal = collec.value.substring(startIndex_1 - addedValues, startIndex_1);\r\n                    collec = this.redoCollec[0];\r\n                    val_1 = val_1.trim();\r\n                    var isSpace = Browser.isAndroid && val_1 === '';\r\n                    if (!isSpace && oldVal !== val_1 && collec.value.substring(startIndex_1 - addedValues, startIndex_1) !== val_1) {\r\n                        validateValue.call(this, val_1, event.ctrlKey, event);\r\n                    }\r\n                    else if (isSpace) {\r\n                        preventUnsupportedValues.call(this, event, startIndex_1 - 1, this.element.selectionEnd - 1, val_1, event.ctrlKey, false);\r\n                    }\r\n                }\r\n                else {\r\n                    oldEventVal = this.promptMask;\r\n                    validateValue.call(this, val_1, event.ctrlKey, event);\r\n                }\r\n                this.maskKeyPress = false;\r\n                triggerMaskChangeEvent.call(this, event, oldEventVal);\r\n            }\r\n        }\r\n        else {\r\n            removeMaskError.call(this);\r\n        }\r\n        var val = strippedValue.call(this, this.element);\r\n        if (!((this.element.selectionStart === 0) && (this.promptMask === this.element.value) && val === '')\r\n            || (val === '' && this.value !== val)) {\r\n            this.prevValue = val;\r\n            this.value = val;\r\n        }\r\n    }\r\n    else {\r\n        triggerMaskChangeEvent.call(this, event);\r\n    }\r\n    if (this.element.selectionStart === 0 && this.element.selectionEnd === 0) {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        var temp_1 = this.element;\r\n        setTimeout(function () {\r\n            temp_1.setSelectionRange(0, 0);\r\n        }, 0);\r\n    }\r\n}\r\nfunction mobileSwipeCheck(key) {\r\n    if (key.length > 1 && ((this.promptMask.length + key.length) < this.element.value.length)) {\r\n        var elementValue = this.redoCollec[0].value.substring(0, this.redoCollec[0].startIndex) + key +\r\n            this.redoCollec[0].value.substring(this.redoCollec[0].startIndex, this.redoCollec[0].value.length);\r\n        setElementValue.call(this, elementValue);\r\n        this.element.selectionStart = this.element.selectionEnd = this.redoCollec[0].startIndex + key.length;\r\n    }\r\n    this.element.selectionStart = this.element.selectionStart - key.length;\r\n    this.element.selectionEnd = this.element.selectionEnd - key.length;\r\n}\r\nfunction mobileValidation(key) {\r\n    if (!this.maskKeyPress) {\r\n        mobileSwipeCheck.call(this, key);\r\n    }\r\n}\r\nfunction validateValue(key, isCtrlKey, event) {\r\n    mobileValidation.call(this, key);\r\n    if (isNullOrUndefined(this) || isNullOrUndefined(key)) {\r\n        return;\r\n    }\r\n    var startIndex = this.element.selectionStart;\r\n    var initStartIndex = startIndex;\r\n    var curMask;\r\n    var allowText = false;\r\n    var value = this.element.value;\r\n    var eventOldVal;\r\n    var prevSupport = false;\r\n    var isEqualVal = false;\r\n    for (var k = 0; k < key.length; k++) {\r\n        var keyValue = key[k];\r\n        startIndex = this.element.selectionStart;\r\n        if (!this.maskKeyPress && initStartIndex === startIndex) {\r\n            startIndex = startIndex + k;\r\n        }\r\n        if ((!this.maskKeyPress || startIndex < this.promptMask.length)) {\r\n            for (var i = startIndex; i < this.promptMask.length; i++) {\r\n                var maskValue = this.escapeMaskValue;\r\n                curMask = maskValue[startIndex];\r\n                if (this.hiddenMask[startIndex] === '\\\\' && this.hiddenMask[startIndex + 1] === key) {\r\n                    isEqualVal = true;\r\n                }\r\n                if ((isNullOrUndefined(this.regExpCollec[curMask]) && (isNullOrUndefined(this.customCharacters)\r\n                    || (!isNullOrUndefined(this.customCharacters) && isNullOrUndefined(this.customCharacters[curMask])))\r\n                    && ((this.hiddenMask[startIndex] !== this.promptChar && this.customRegExpCollec[startIndex][0] !== '['\r\n                        && this.customRegExpCollec[startIndex][this.customRegExpCollec[startIndex].length - 1] !== ']')))\r\n                    || ((this.promptMask[startIndex] !== this.promptChar) && isNullOrUndefined(this.customCharacters))\r\n                    || (this.promptChar === curMask && this.escapeMaskValue === this.mask)) {\r\n                    this.element.selectionStart = this.element.selectionEnd = startIndex + 1;\r\n                    startIndex = this.element.selectionStart;\r\n                    curMask = this.hiddenMask[startIndex];\r\n                }\r\n            }\r\n            if (!isNullOrUndefined(this.customCharacters) && !isNullOrUndefined(this.customCharacters[curMask])) {\r\n                var customValStr = this.customCharacters[curMask];\r\n                var customValArr = customValStr.split(',');\r\n                for (var i = 0; i < customValArr.length; i++) {\r\n                    if (keyValue.match(new RegExp('[' + customValArr[i] + ']'))) {\r\n                        allowText = true;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            else if (!isNullOrUndefined(this.regExpCollec[curMask]) && keyValue.match(new RegExp(this.regExpCollec[curMask]))\r\n                && this.promptMask[startIndex] === this.promptChar) {\r\n                allowText = true;\r\n            }\r\n            else if (this.promptMask[startIndex] === this.promptChar && this.customRegExpCollec[startIndex][0] === '['\r\n                && this.customRegExpCollec[startIndex][this.customRegExpCollec[startIndex].length - 1] === ']'\r\n                && keyValue.match(new RegExp(this.customRegExpCollec[startIndex]))) {\r\n                allowText = true;\r\n            }\r\n            if ((!this.maskKeyPress || startIndex < this.hiddenMask.length) && allowText) {\r\n                if (k === 0) {\r\n                    if (this.maskKeyPress) {\r\n                        this.undoCollec.push({ value: value, startIndex: startIndex, endIndex: startIndex });\r\n                    }\r\n                    else {\r\n                        var sIndex = this.element.selectionStart;\r\n                        var eIndex = this.element.selectionEnd;\r\n                        if (this.redoCollec.length > 0) {\r\n                            eventOldVal = this.redoCollec[0].value;\r\n                            setElementValue.call(this, eventOldVal);\r\n                            this.undoCollec.push(this.redoCollec[0]);\r\n                        }\r\n                        else {\r\n                            this.undoCollec.push({ value: this.promptMask, startIndex: startIndex, endIndex: startIndex });\r\n                            eventOldVal = this.promptMask;\r\n                            setElementValue.call(this, eventOldVal);\r\n                        }\r\n                        this.element.selectionStart = sIndex;\r\n                        this.element.selectionEnd = eIndex;\r\n                    }\r\n                }\r\n                startIndex = this.element.selectionStart;\r\n                applySupportedValues.call(this, event, startIndex, keyValue, eventOldVal, isEqualVal);\r\n                prevSupport = true;\r\n                if (k === key.length - 1) {\r\n                    this.redoCollec.unshift({\r\n                        value: this.element.value, startIndex: this.element.selectionStart, endIndex: this.element.selectionEnd\r\n                    });\r\n                }\r\n                allowText = false;\r\n            }\r\n            else {\r\n                startIndex = this.element.selectionStart;\r\n                preventUnsupportedValues.call(this, event, startIndex, initStartIndex, key, isCtrlKey, prevSupport);\r\n            }\r\n            if (k === key.length - 1 && !allowText) {\r\n                if (!Browser.isAndroid || (Browser.isAndroid && startIndex < this.promptMask.length)) {\r\n                    this.redoCollec.unshift({\r\n                        value: this.element.value, startIndex: this.element.selectionStart, endIndex: this.element.selectionEnd\r\n                    });\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            if (key.length === 1 && !isCtrlKey && !isNullOrUndefined(event)) {\r\n                addMaskErrorClass.call(this);\r\n            }\r\n        }\r\n    }\r\n}\r\nfunction applySupportedValues(event, startIndex, keyValue, eventOldVal, isEqualVal) {\r\n    if (this.hiddenMask.length > this.promptMask.length) {\r\n        keyValue = changeToLowerUpperCase.call(this, keyValue, this.element.value);\r\n    }\r\n    if (!isEqualVal) {\r\n        var value = this.element.value;\r\n        var elementValue = value.substring(0, startIndex) + keyValue + value.substring(startIndex + 1, value.length);\r\n        setElementValue.call(this, elementValue);\r\n        this.element.selectionStart = this.element.selectionEnd = startIndex + 1;\r\n    }\r\n}\r\nfunction preventUnsupportedValues(event, sIdx, idx, key, ctrl, chkSupport) {\r\n    if (!this.maskKeyPress) {\r\n        var value = this.element.value;\r\n        if (sIdx >= this.promptMask.length) {\r\n            setElementValue.call(this, value.substring(0, sIdx));\r\n        }\r\n        else {\r\n            if (idx === sIdx) {\r\n                setElementValue.call(this, value.substring(0, sIdx) + value.substring(sIdx + 1, value.length));\r\n            }\r\n            else {\r\n                if (this.promptMask.length === this.element.value.length) {\r\n                    setElementValue.call(this, value.substring(0, sIdx) + value.substring(sIdx, value.length));\r\n                }\r\n                else {\r\n                    setElementValue.call(this, value.substring(0, idx) + value.substring(idx + 1, value.length));\r\n                }\r\n            }\r\n            this.element.selectionStart = this.element.selectionEnd = (chkSupport ||\r\n                this.element.value[idx] !== this.promptChar) ? sIdx : idx;\r\n        }\r\n        addMaskErrorClass.call(this);\r\n    }\r\n    if (key.length === 1 && !ctrl && !isNullOrUndefined(event)) {\r\n        addMaskErrorClass.call(this);\r\n    }\r\n}\r\nfunction addMaskErrorClass() {\r\n    var _this = this;\r\n    var parentElement = this.element.parentNode;\r\n    var timer = 200;\r\n    if (parentElement.classList.contains(INPUTGROUP) || parentElement.classList.contains(FLOATINPUT)) {\r\n        addClass([parentElement], ERROR);\r\n    }\r\n    else {\r\n        addClass([this.element], ERROR);\r\n    }\r\n    if (this.isIosInvalid === true) {\r\n        timer = 400;\r\n    }\r\n    attributes(this.element, { 'aria-invalid': 'true' });\r\n    setTimeout(function () {\r\n        if (!_this.maskKeyPress) {\r\n            removeMaskError.call(_this);\r\n        }\r\n    }, timer);\r\n}\r\nfunction removeMaskError() {\r\n    var parentElement = this.element.parentNode;\r\n    if (!isNullOrUndefined(parentElement)) {\r\n        removeClass([parentElement], ERROR);\r\n    }\r\n    removeClass([this.element], ERROR);\r\n    attributes(this.element, { 'aria-invalid': 'false' });\r\n}\r\n/**\r\n * Validates user input using masking elements '<' , '>' and '|'.\r\n *\r\n * @hidden\r\n */\r\nfunction changeToLowerUpperCase(key, value) {\r\n    var promptMask;\r\n    var i;\r\n    var curVal = value;\r\n    var caseCount = 0;\r\n    for (i = 0; i < this.hiddenMask.length; i++) {\r\n        if (this.hiddenMask[i] === '\\\\') {\r\n            promptMask = curVal.substring(0, i) + '\\\\' + curVal.substring(i, curVal.length);\r\n        }\r\n        if (this.hiddenMask[i] === '>' || this.hiddenMask[i] === '<' || this.hiddenMask[i] === '|') {\r\n            if (this.hiddenMask[i] !== curVal[i]) {\r\n                promptMask = curVal.substring(0, i) + this.hiddenMask[i] + curVal.substring(i, curVal.length);\r\n            }\r\n            ++caseCount;\r\n        }\r\n        if (promptMask) {\r\n            if (((promptMask[i] === this.promptChar) && (i > this.element.selectionStart)) ||\r\n                (this.element.value.indexOf(this.promptChar) < 0 && (this.element.selectionStart + caseCount) === i)) {\r\n                caseCount = 0;\r\n                break;\r\n            }\r\n            curVal = promptMask;\r\n        }\r\n    }\r\n    while (i >= 0 && promptMask) {\r\n        if (i === 0 || promptMask[i - 1] !== '\\\\') {\r\n            if (promptMask[i] === '>') {\r\n                key = key.toUpperCase();\r\n                break;\r\n            }\r\n            else if (promptMask[i] === '<') {\r\n                key = key.toLowerCase();\r\n                break;\r\n            }\r\n            else if (promptMask[i] === '|') {\r\n                break;\r\n            }\r\n        }\r\n        --i;\r\n    }\r\n    return key;\r\n}\r\n/**\r\n * To set updated values in the MaskedTextBox.\r\n *\r\n * @hidden\r\n */\r\nexport function setMaskValue(val) {\r\n    if (this.mask && val !== undefined && (this.prevValue === undefined || this.prevValue !== val)) {\r\n        this.maskKeyPress = true;\r\n        setElementValue.call(this, this.promptMask);\r\n        if (val !== '' && !(val === null && this.floatLabelType === 'Never' && this.placeholder)) {\r\n            this.element.selectionStart = 0;\r\n            this.element.selectionEnd = 0;\r\n        }\r\n        if (val !== null) {\r\n            for (var i = 0; i < val.length; i++) {\r\n                validateValue.call(this, val[i], false, null);\r\n            }\r\n        }\r\n        var newVal = strippedValue.call(this, this.element);\r\n        this.prevValue = newVal;\r\n        this.value = newVal;\r\n        triggerMaskChangeEvent.call(this, null, null);\r\n        this.maskKeyPress = false;\r\n        var labelElement = this.element.parentNode.querySelector('.e-float-text');\r\n        if (this.element.value === this.promptMask && this.floatLabelType === 'Auto' && this.placeholder &&\r\n            !isNullOrUndefined(labelElement) && labelElement.classList.contains(TOPLABEL) && !this.isFocus) {\r\n            removeClass([labelElement], TOPLABEL);\r\n            addClass([labelElement], BOTTOMLABEL);\r\n            setElementValue.call(this, '');\r\n        }\r\n    }\r\n    if (this.mask === null || this.mask === '' && this.value !== undefined) {\r\n        setElementValue.call(this, this.value);\r\n    }\r\n}\r\n/**\r\n * To set updated values in the input element.\r\n *\r\n * @hidden\r\n */\r\nexport function setElementValue(val, element) {\r\n    if (!this.isFocus && this.floatLabelType === 'Auto' && this.placeholder && isNullOrUndefined(this.value)) {\r\n        val = '';\r\n    }\r\n    var value = strippedValue.call(this, (element ? element : this.element), val);\r\n    if (value === null || value === '') {\r\n        Input.setValue(val, (element ? element : this.element), this.floatLabelType, false);\r\n        if (this.showClearButton) {\r\n            this.inputObj.clearButton.classList.add('e-clear-icon-hide');\r\n        }\r\n    }\r\n    else {\r\n        Input.setValue(val, (element ? element : this.element), this.floatLabelType, this.showClearButton);\r\n    }\r\n}\r\n/**\r\n * Provide mask support to input textbox through utility method.\r\n *\r\n * @hidden\r\n */\r\nexport function maskInput(args) {\r\n    var inputEle = getMaskInput(args);\r\n    applyMask.call(inputEle);\r\n    var val = strippedValue.call(this, this.element);\r\n    this.prevValue = val;\r\n    this.value = val;\r\n    if (args.mask) {\r\n        unwireEvents.call(inputEle);\r\n        wireEvents.call(inputEle);\r\n    }\r\n}\r\nfunction getMaskInput(args) {\r\n    addClass([args.element], UTILMASK);\r\n    var inputEle = {\r\n        element: args.element,\r\n        mask: args.mask,\r\n        promptMask: '',\r\n        hiddenMask: '',\r\n        escapeMaskValue: '',\r\n        promptChar: args.promptChar ? (args.promptChar.length > 1) ? args.promptChar = args.promptChar[0]\r\n            : args.promptChar : '_',\r\n        value: args.value ? args.value : null,\r\n        regExpCollec: regularExpressions,\r\n        customRegExpCollec: [],\r\n        customCharacters: args.customCharacters,\r\n        undoCollec: [],\r\n        redoCollec: [],\r\n        maskKeyPress: false,\r\n        prevValue: ''\r\n    };\r\n    createMask.call(inputEle);\r\n    return inputEle;\r\n}\r\n/**\r\n * Gets raw value of the textbox which has been masked through utility method.\r\n *\r\n * @hidden\r\n */\r\nexport function getVal(args) {\r\n    return strippedValue.call(getUtilMaskEle(args), args.element);\r\n}\r\n/**\r\n * Gets masked value of the textbox which has been masked through utility method.\r\n *\r\n * @hidden\r\n */\r\nexport function getMaskedVal(args) {\r\n    return unstrippedValue.call(getUtilMaskEle(args), args.element);\r\n}\r\nfunction getUtilMaskEle(args) {\r\n    var inputEle;\r\n    if (!isNullOrUndefined(args) && args.element.classList.contains(UTILMASK)) {\r\n        inputEle = getMaskInput(args);\r\n    }\r\n    return inputEle;\r\n}\r\n/**\r\n * Arguments to perform undo and redo functionalities.\r\n *\r\n * @hidden\r\n */\r\nvar MaskUndo = /** @class */ (function () {\r\n    function MaskUndo() {\r\n    }\r\n    return MaskUndo;\r\n}());\r\nexport { MaskUndo };\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nvar maskUndo = new MaskUndo();\r\n/* eslint-enable valid-jsdoc, jsdoc/require-jsdoc, jsdoc/require-returns, jsdoc/require-param */\r\n"]},"metadata":{},"sourceType":"module"}