{"ast":null,"code":"/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { isNullOrUndefined, createElement, remove, closest, addClass, removeClass, extend } from '@syncfusion/ej2-base';\nimport { Toolbar } from '@syncfusion/ej2-navigations';\nimport { Calendar } from '@syncfusion/ej2-calendars';\nimport { Popup } from '@syncfusion/ej2-popups';\nimport * as events from '../base/constant';\nimport * as util from '../base/util';\nimport * as cls from '../base/css-constant';\n/**\r\n * Header module\r\n */\n\nvar HeaderRenderer =\n/** @class */\nfunction () {\n  function HeaderRenderer(parent) {\n    this.parent = parent;\n    this.l10n = this.parent.localeObj;\n    this.renderHeader();\n    this.addEventListener();\n  }\n\n  HeaderRenderer.prototype.addEventListener = function () {\n    this.parent.on(events.documentClick, this.closeHeaderPopup, this);\n  };\n\n  HeaderRenderer.prototype.removeEventListener = function () {\n    this.parent.off(events.documentClick, this.closeHeaderPopup);\n  };\n\n  HeaderRenderer.prototype.closeHeaderPopup = function (e) {\n    var closestEle = closest(e.event.target, '.e-date-range,.e-header-popup,.e-day,.e-selected');\n    var closestPop = closest(e.event.target, '.e-hor-nav,.e-toolbar-pop');\n    var contentWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n\n    if (this.parent.isAdaptive) {\n      if (!isNullOrUndefined(closestPop) && (closestPop.classList.contains('e-toolbar-pop') || closestPop.classList.contains('e-hor-nav')) && !(closestPop.classList.contains('e-hor-nav') && this.element.querySelector('.e-toolbar-pop').classList.contains(cls.POPUP_OPEN))) {\n        addClass([contentWrap], cls.SCROLL_HIDDEN);\n      } else {\n        removeClass([contentWrap], cls.SCROLL_HIDDEN);\n        var popupEle = this.element.querySelector('.e-toolbar-pop');\n\n        if (!isNullOrUndefined(popupEle)) {\n          var popupObj = popupEle.ej2_instances[0];\n\n          if (popupObj && !(!isNullOrUndefined(closestPop) && closestPop.classList.contains('e-hor-nav') && popupEle.classList.contains(cls.POPUP_OPEN))) {\n            popupObj.hide();\n          }\n        }\n      }\n    }\n\n    if (!isNullOrUndefined(closestEle)) {\n      return;\n    }\n\n    this.hideHeaderPopup();\n  };\n\n  HeaderRenderer.prototype.hideHeaderPopup = function () {\n    if (this.headerPopup) {\n      this.headerPopup.hide();\n    }\n  };\n\n  HeaderRenderer.prototype.renderHeader = function () {\n    this.element = createElement('div', {\n      className: cls.TOOLBAR_CONTAINER\n    });\n    var toolbarEle = createElement('div', {\n      className: cls.HEADER_TOOLBAR\n    });\n    this.element.appendChild(toolbarEle);\n    this.parent.element.insertBefore(this.element, this.parent.element.firstElementChild);\n    this.renderToolbar();\n  };\n\n  HeaderRenderer.prototype.renderToolbar = function () {\n    var _this = this;\n\n    var items = this.getItems();\n    this.parent.trigger(events.actionBegin, {\n      requestType: 'toolbarItemRendering',\n      items: items\n    }, function (args) {\n      _this.toolbarObj = new Toolbar({\n        items: args.items,\n        overflowMode: 'Popup',\n        clicked: _this.toolbarClickHandler.bind(_this),\n        enableRtl: _this.parent.enableRtl,\n        locale: _this.parent.locale\n      });\n\n      _this.toolbarObj.appendTo(_this.parent.element.querySelector('.' + cls.HEADER_TOOLBAR));\n\n      var prevNavEle = _this.toolbarObj.element.querySelector('.e-prev');\n\n      if (prevNavEle) {\n        prevNavEle.firstElementChild.setAttribute('title', _this.l10n.getConstant('previous'));\n      }\n\n      var nextNavEle = _this.toolbarObj.element.querySelector('.e-next');\n\n      if (nextNavEle) {\n        nextNavEle.firstElementChild.setAttribute('title', _this.l10n.getConstant('next'));\n      }\n\n      _this.updateAddIcon();\n\n      _this.updateActiveView();\n\n      _this.parent.trigger(events.actionComplete, {\n        requestType: 'toolBarItemRendered',\n        items: _this.toolbarObj.items\n      });\n    });\n  };\n\n  HeaderRenderer.prototype.updateItems = function () {\n    var _this = this;\n\n    if (this.toolbarObj) {\n      var items = this.getItems();\n      this.parent.trigger(events.actionBegin, {\n        requestType: 'toolbarItemRendering',\n        items: items\n      }, function (args) {\n        _this.toolbarObj.items = args.items;\n\n        _this.toolbarObj.dataBind();\n\n        _this.parent.trigger(events.actionComplete, {\n          requestType: 'toolBarItemRendered',\n          items: _this.toolbarObj.items\n        });\n      });\n    }\n  };\n\n  HeaderRenderer.prototype.getPopUpRelativeElement = function () {\n    if (this.parent.isAdaptive) {\n      return this.toolbarObj.element;\n    }\n\n    return this.element.querySelector('.e-date-range');\n  };\n\n  HeaderRenderer.prototype.setDayOfWeek = function (index) {\n    if (this.headerCalendar) {\n      this.headerCalendar.firstDayOfWeek = index;\n      this.headerCalendar.dataBind();\n    }\n  };\n\n  HeaderRenderer.prototype.setCalendarDate = function (date) {\n    if (this.headerCalendar) {\n      this.headerCalendar.value = date;\n      this.headerCalendar.dataBind();\n    }\n  };\n\n  HeaderRenderer.prototype.setCalendarMinMaxDate = function () {\n    if (this.headerCalendar) {\n      this.headerCalendar.min = this.parent.minDate;\n      this.headerCalendar.max = this.parent.maxDate;\n      this.headerCalendar.dataBind();\n    }\n  };\n\n  HeaderRenderer.prototype.getCalendarView = function () {\n    if (['Month', 'MonthAgenda', 'TimelineMonth'].indexOf(this.parent.currentView) > -1) {\n      return 'Year';\n    } else if (['Year', 'TimelineYear'].indexOf(this.parent.currentView) > -1) {\n      return 'Decade';\n    } else {\n      return 'Month';\n    }\n  };\n\n  HeaderRenderer.prototype.setCalendarView = function () {\n    if (this.headerCalendar) {\n      var calendarView = this.getCalendarView();\n      this.headerCalendar.depth = calendarView;\n      this.headerCalendar.start = calendarView;\n      this.headerCalendar.refresh();\n    }\n  };\n\n  HeaderRenderer.prototype.updateActiveView = function () {\n    var selEle = [].slice.call(this.toolbarObj.element.querySelectorAll('.e-views'));\n    removeClass(selEle, ['e-active-view']);\n\n    if (selEle.length > 0 && selEle[this.parent.viewIndex]) {\n      addClass([selEle[this.parent.viewIndex]], ['e-active-view']);\n    }\n  };\n\n  HeaderRenderer.prototype.updateDateRange = function (text) {\n    var selEle = this.toolbarObj.element.querySelector('.e-date-range');\n\n    if (selEle) {\n      selEle.setAttribute('aria-label', text);\n      selEle.querySelector('.e-tbar-btn-text').innerHTML = text;\n      this.refresh();\n    }\n  };\n\n  HeaderRenderer.prototype.refresh = function () {\n    if (this.toolbarObj) {\n      this.toolbarObj.refreshOverflow();\n    }\n  };\n\n  HeaderRenderer.prototype.updateAddIcon = function () {\n    var addEle = this.toolbarObj.element.querySelector('.e-add');\n\n    if (addEle) {\n      if (!this.parent.eventSettings.allowAdding) {\n        addClass([addEle], cls.HIDDEN_CLASS);\n      } else {\n        removeClass([addEle], cls.HIDDEN_CLASS);\n      }\n    }\n  };\n\n  HeaderRenderer.prototype.getDateRangeText = function () {\n    var dateString = this.parent.globalize.formatDate(this.parent.selectedDate, {\n      format: 'MMMM y',\n      calendar: this.parent.getCalendarMode()\n    });\n    return util.capitalizeFirstWord(dateString, 'single');\n  };\n\n  HeaderRenderer.prototype.getItems = function () {\n    var items = [];\n    items.push({\n      align: 'Left',\n      prefixIcon: 'e-icon-prev',\n      tooltipText: 'Previous',\n      overflow: 'Show',\n      cssClass: 'e-prev',\n      htmlAttributes: {\n        'aria-label': 'previous period',\n        'role': 'navigation'\n      }\n    });\n    items.push({\n      align: 'Left',\n      prefixIcon: 'e-icon-next',\n      tooltipText: 'Next',\n      overflow: 'Show',\n      cssClass: 'e-next',\n      htmlAttributes: {\n        'aria-label': 'next period',\n        'role': 'navigation'\n      }\n    });\n    items.push({\n      align: 'Left',\n      text: this.getDateRangeText(),\n      suffixIcon: 'e-icon-down-arrow',\n      cssClass: 'e-date-range',\n      overflow: 'Show',\n      htmlAttributes: {\n        'aria-atomic': 'true',\n        'aria-live': 'assertive',\n        'aria-label': 'title',\n        'role': 'navigation'\n      }\n    });\n\n    if (this.parent.isAdaptive || this.parent.enableAdaptiveUI) {\n      items.push({\n        align: 'Right',\n        showAlwaysInPopup: this.parent.isAdaptive || this.parent.enableAdaptiveUI,\n        prefixIcon: 'e-icon-add',\n        text: this.l10n.getConstant('newEvent'),\n        cssClass: 'e-add',\n        overflow: 'Show'\n      });\n      items.push({\n        align: 'Right',\n        showAlwaysInPopup: this.parent.isAdaptive || this.parent.enableAdaptiveUI,\n        prefixIcon: 'e-icon-today',\n        text: this.l10n.getConstant('today'),\n        cssClass: 'e-today',\n        overflow: 'Show'\n      });\n    } else {\n      items.push({\n        align: 'Right',\n        showAlwaysInPopup: this.parent.isAdaptive || this.parent.enableAdaptiveUI,\n        prefixIcon: 'e-icon-day',\n        text: this.l10n.getConstant('today'),\n        cssClass: 'e-today',\n        overflow: 'Show'\n      });\n\n      if (this.parent.views.length > 1) {\n        items.push({\n          align: 'Right',\n          type: 'Separator',\n          cssClass: 'e-schedule-seperator'\n        });\n      }\n    }\n\n    if (this.parent.views.length > 1) {\n      for (var _i = 0, _a = this.parent.views; _i < _a.length; _i++) {\n        var item = _a[_i];\n        items.push(this.getItemObject(item));\n      }\n    }\n\n    return items;\n  };\n\n  HeaderRenderer.prototype.getItemObject = function (item) {\n    var viewName;\n    var displayName;\n\n    if (typeof item === 'string') {\n      viewName = item.toLowerCase();\n      displayName = null;\n    } else {\n      viewName = item.option.toLowerCase();\n      displayName = item.displayName;\n    }\n\n    var view;\n    var orientationClass;\n    var isItemInsidePopup = this.parent.isAdaptive || this.parent.enableAdaptiveUI;\n\n    switch (viewName) {\n      case 'day':\n        view = {\n          align: 'Right',\n          showAlwaysInPopup: isItemInsidePopup,\n          prefixIcon: 'e-icon-day',\n          text: displayName || this.l10n.getConstant('day'),\n          cssClass: 'e-views e-day'\n        };\n        break;\n\n      case 'week':\n        view = {\n          align: 'Right',\n          showAlwaysInPopup: isItemInsidePopup,\n          prefixIcon: 'e-icon-week',\n          text: displayName || this.l10n.getConstant('week'),\n          cssClass: 'e-views e-week'\n        };\n        break;\n\n      case 'workweek':\n        view = {\n          align: 'Right',\n          showAlwaysInPopup: isItemInsidePopup,\n          prefixIcon: 'e-icon-workweek',\n          text: displayName || this.l10n.getConstant('workWeek'),\n          cssClass: 'e-views e-work-week'\n        };\n        break;\n\n      case 'month':\n        view = {\n          align: 'Right',\n          showAlwaysInPopup: isItemInsidePopup,\n          prefixIcon: 'e-icon-month',\n          text: displayName || this.l10n.getConstant('month'),\n          cssClass: 'e-views e-month'\n        };\n        break;\n\n      case 'year':\n        view = {\n          align: 'Right',\n          showAlwaysInPopup: isItemInsidePopup,\n          prefixIcon: 'e-icon-year',\n          text: displayName || this.l10n.getConstant('year'),\n          cssClass: 'e-views e-year'\n        };\n        break;\n\n      case 'agenda':\n        view = {\n          align: 'Right',\n          showAlwaysInPopup: isItemInsidePopup,\n          prefixIcon: 'e-icon-agenda',\n          text: displayName || this.l10n.getConstant('agenda'),\n          cssClass: 'e-views e-agenda'\n        };\n        break;\n\n      case 'monthagenda':\n        view = {\n          align: 'Right',\n          showAlwaysInPopup: isItemInsidePopup,\n          prefixIcon: 'e-icon-month-agenda',\n          text: displayName || this.l10n.getConstant('monthAgenda'),\n          cssClass: 'e-views e-month-agenda'\n        };\n        break;\n\n      case 'timelineday':\n        view = {\n          align: 'Right',\n          showAlwaysInPopup: isItemInsidePopup,\n          prefixIcon: 'e-icon-timeline-day',\n          text: displayName || this.l10n.getConstant('timelineDay'),\n          cssClass: 'e-views e-timeline-day'\n        };\n        break;\n\n      case 'timelineweek':\n        view = {\n          align: 'Right',\n          showAlwaysInPopup: isItemInsidePopup,\n          prefixIcon: 'e-icon-timeline-week',\n          text: displayName || this.l10n.getConstant('timelineWeek'),\n          cssClass: 'e-views e-timeline-week'\n        };\n        break;\n\n      case 'timelineworkweek':\n        view = {\n          align: 'Right',\n          showAlwaysInPopup: isItemInsidePopup,\n          prefixIcon: 'e-icon-timeline-workweek',\n          text: displayName || this.l10n.getConstant('timelineWorkWeek'),\n          cssClass: 'e-views e-timeline-work-week'\n        };\n        break;\n\n      case 'timelinemonth':\n        view = {\n          align: 'Right',\n          showAlwaysInPopup: isItemInsidePopup,\n          prefixIcon: 'e-icon-timeline-month',\n          text: displayName || this.l10n.getConstant('timelineMonth'),\n          cssClass: 'e-views e-timeline-month'\n        };\n        break;\n\n      case 'timelineyear':\n        orientationClass = item.orientation === 'Vertical' ? 'vertical' : 'horizontal';\n        view = {\n          align: 'Right',\n          showAlwaysInPopup: isItemInsidePopup,\n          prefixIcon: 'e-icon-timeline-year-' + orientationClass,\n          text: displayName || this.l10n.getConstant('timelineYear'),\n          cssClass: 'e-views e-timeline-year'\n        };\n        break;\n    }\n\n    return view;\n  };\n\n  HeaderRenderer.prototype.renderHeaderPopup = function () {\n    var headerPopupEle = createElement('div', {\n      className: cls.HEADER_POPUP_CLASS\n    });\n    var headerCalendarEle = createElement('div', {\n      className: cls.HEADER_CALENDAR_CLASS\n    });\n    headerPopupEle.appendChild(headerCalendarEle);\n    this.element.appendChild(headerPopupEle);\n    this.headerPopup = new Popup(headerPopupEle, {\n      actionOnScroll: 'hide',\n      targetType: 'relative',\n      relateTo: this.getPopUpRelativeElement(),\n      position: {\n        X: 'left',\n        Y: 'bottom'\n      },\n      enableRtl: this.parent.enableRtl\n    });\n    var calendarView = this.getCalendarView();\n    var isDisplayDate = this.parent.currentView === 'Month' && !isNullOrUndefined(this.parent.activeViewOptions.displayDate) && !this.hasSelectedDate();\n    this.headerCalendar = new Calendar({\n      value: isDisplayDate ? this.parent.activeViewOptions.displayDate : this.parent.selectedDate,\n      min: this.parent.minDate,\n      max: this.parent.maxDate,\n      firstDayOfWeek: this.parent.activeViewOptions.firstDayOfWeek,\n      enableRtl: this.parent.enableRtl,\n      locale: this.parent.locale,\n      depth: calendarView,\n      start: calendarView,\n      calendarMode: this.parent.calendarMode,\n      change: this.calendarChange.bind(this)\n    });\n    this.setCalendarTimezone();\n    this.headerCalendar.appendTo(headerCalendarEle);\n    this.headerPopup.hide();\n  };\n\n  HeaderRenderer.prototype.calendarChange = function (args) {\n    if (args.value.getTime() !== this.parent.selectedDate.getTime()) {\n      var calendarDate = util.resetTime(new Date(args.value));\n      this.parent.changeDate(calendarDate);\n    }\n\n    this.headerPopup.hide();\n  };\n\n  HeaderRenderer.prototype.setCalendarTimezone = function () {\n    if (this.headerCalendar) {\n      this.headerCalendar.timezone = this.parent.timezone || this.parent.tzModule.getLocalTimezoneName();\n    }\n  };\n\n  HeaderRenderer.prototype.calculateViewIndex = function (args) {\n    var target = closest(args.originalEvent.target, '.e-views');\n    var views = [].slice.call(this.element.querySelectorAll('.e-views'));\n    return views.indexOf(target);\n  };\n\n  HeaderRenderer.prototype.toolbarClickHandler = function (args) {\n    if (!args.item) {\n      return;\n    }\n\n    var strClass = args.item.cssClass.replace('e-views ', '');\n    var data;\n    var isSameTime;\n    var currentTime;\n\n    switch (strClass) {\n      case 'e-date-range':\n        if (!this.headerPopup) {\n          this.renderHeaderPopup();\n        }\n\n        if (this.headerPopup.element.classList.contains(cls.POPUP_OPEN)) {\n          this.headerPopup.hide();\n        } else {\n          this.headerPopup.show();\n        }\n\n        break;\n\n      case 'e-day':\n        this.parent.changeView('Day', args.originalEvent, undefined, this.calculateViewIndex(args));\n        break;\n\n      case 'e-week':\n        this.parent.changeView('Week', args.originalEvent, undefined, this.calculateViewIndex(args));\n        break;\n\n      case 'e-work-week':\n        this.parent.changeView('WorkWeek', args.originalEvent, undefined, this.calculateViewIndex(args));\n        break;\n\n      case 'e-month':\n        this.parent.changeView('Month', args.originalEvent, undefined, this.calculateViewIndex(args));\n        break;\n\n      case 'e-year':\n        this.parent.changeView('Year', args.originalEvent, undefined, this.calculateViewIndex(args));\n        break;\n\n      case 'e-agenda':\n        this.parent.changeView('Agenda', args.originalEvent, undefined, this.calculateViewIndex(args));\n        break;\n\n      case 'e-month-agenda':\n        this.parent.changeView('MonthAgenda', args.originalEvent, undefined, this.calculateViewIndex(args));\n        break;\n\n      case 'e-timeline-day':\n        this.parent.changeView('TimelineDay', args.originalEvent, undefined, this.calculateViewIndex(args));\n        break;\n\n      case 'e-timeline-week':\n        this.parent.changeView('TimelineWeek', args.originalEvent, undefined, this.calculateViewIndex(args));\n        break;\n\n      case 'e-timeline-work-week':\n        this.parent.changeView('TimelineWorkWeek', args.originalEvent, undefined, this.calculateViewIndex(args));\n        break;\n\n      case 'e-timeline-month':\n        this.parent.changeView('TimelineMonth', args.originalEvent, undefined, this.calculateViewIndex(args));\n        break;\n\n      case 'e-timeline-year':\n        this.parent.changeView('TimelineYear', args.originalEvent, undefined, this.calculateViewIndex(args));\n        break;\n\n      case 'e-today':\n        currentTime = util.resetTime(this.parent.getCurrentTime());\n\n        if (this.parent.currentView === 'Agenda' || !this.parent.isSelectedDate(currentTime) || this.parent.currentView === 'Month' && this.parent.activeViewOptions.displayDate && !this.hasSelectedDate() && util.resetTime(this.parent.activeViewOptions.displayDate) !== currentTime || this.parent.currentView === 'Month' && this.parent.activeViewOptions.numberOfWeeks > 0 && !this.hasSelectedDate() && util.resetTime(util.firstDateOfMonth(this.parent.selectedDate)) !== currentTime) {\n          this.parent.changeDate(currentTime, args.originalEvent);\n        }\n\n        break;\n\n      case 'e-prev':\n        this.parent.changeDate(this.parent.activeView.getNextPreviousDate('previous'), args.originalEvent);\n        break;\n\n      case 'e-next':\n        this.parent.changeDate(this.parent.activeView.getNextPreviousDate('next'), args.originalEvent);\n        break;\n\n      case 'e-add':\n        isSameTime = this.parent.activeCellsData.startTime.getTime() === this.parent.activeCellsData.endTime.getTime();\n\n        if (this.parent.activeCellsData && !isSameTime) {\n          data = this.parent.activeCellsData;\n        } else {\n          var interval = this.parent.activeViewOptions.timeScale.interval;\n          var slotCount = this.parent.activeViewOptions.timeScale.slotCount;\n          var msInterval = interval * util.MS_PER_MINUTE / slotCount;\n          var startTime = new Date(this.parent.selectedDate.getTime());\n          var currentTime_1 = this.parent.getCurrentTime();\n          startTime.setHours(currentTime_1.getHours(), Math.round(startTime.getMinutes() / msInterval) * msInterval, 0);\n          var endTime = new Date(new Date(startTime.getTime()).setMilliseconds(startTime.getMilliseconds() + msInterval));\n          data = {\n            startTime: startTime,\n            endTime: endTime,\n            isAllDay: false\n          };\n        }\n\n        this.parent.eventWindow.openEditor(extend(data, {\n          cancel: false,\n          event: args.originalEvent\n        }), 'Add');\n        break;\n    }\n\n    if (isNullOrUndefined(this.toolbarObj)) {\n      return;\n    }\n\n    var toolbarPopUp = this.toolbarObj.element.querySelector('.e-toolbar-pop');\n\n    if (toolbarPopUp && args.item.type !== 'Input') {\n      toolbarPopUp.ej2_instances[0].hide({\n        name: 'SlideUp',\n        duration: 100\n      });\n    }\n  };\n\n  HeaderRenderer.prototype.hasSelectedDate = function () {\n    var selectedTime = util.resetTime(this.parent.selectedDate).getTime();\n    return selectedTime >= this.parent.activeView.getStartDate().getTime() && selectedTime <= this.parent.activeView.getEndDate().getTime();\n  };\n\n  HeaderRenderer.prototype.getHeaderElement = function () {\n    return this.toolbarObj.element;\n  };\n\n  HeaderRenderer.prototype.updateHeaderItems = function (classType) {\n    var prevNavEle = this.toolbarObj.element.querySelector('.e-prev');\n    var nextNavEle = this.toolbarObj.element.querySelector('.e-next');\n    var dateRangeEle = this.toolbarObj.element.querySelector('.e-date-range');\n\n    if (prevNavEle) {\n      if (classType === 'add') {\n        addClass([prevNavEle], cls.HIDDEN_CLASS);\n      } else {\n        removeClass([prevNavEle], cls.HIDDEN_CLASS);\n      }\n    }\n\n    if (nextNavEle) {\n      if (classType === 'add') {\n        addClass([nextNavEle], cls.HIDDEN_CLASS);\n      } else {\n        removeClass([nextNavEle], cls.HIDDEN_CLASS);\n      }\n    }\n\n    if (dateRangeEle) {\n      if (classType === 'add') {\n        addClass([dateRangeEle], cls.TEXT_ELLIPSIS);\n      } else {\n        removeClass([dateRangeEle], cls.TEXT_ELLIPSIS);\n      }\n    }\n  };\n\n  HeaderRenderer.prototype.previousNextIconHandler = function () {\n    var dates = this.parent.currentView === 'Agenda' ? [this.parent.getCurrentViewDates()[0]] : this.parent.getCurrentViewDates();\n    var prevNavEle = this.toolbarObj.element.querySelector('.' + cls.PREVIOUS_DATE_CLASS);\n    var nextNavEle = this.toolbarObj.element.querySelector('.' + cls.NEXT_DATE_CLASS);\n    var firstDate = new Date(dates[0].getTime());\n    var lastDate = new Date(dates[dates.length - 1].getTime());\n\n    if (this.parent.currentView === 'WorkWeek' || this.parent.currentView === 'TimelineWorkWeek') {\n      firstDate = util.getWeekFirstDate(util.resetTime(this.parent.selectedDate), this.parent.firstDayOfWeek);\n      lastDate = util.addDays(firstDate, 7 * this.parent.activeViewOptions.interval);\n    }\n\n    if (this.parent.currentView === 'Month') {\n      var isCustomMonth = !isNullOrUndefined(this.parent.activeViewOptions.displayDate) || this.parent.activeViewOptions.numberOfWeeks > 0;\n      firstDate = isCustomMonth ? this.parent.activeView.getStartDate() : util.firstDateOfMonth(this.parent.selectedDate);\n      lastDate = isCustomMonth ? this.parent.activeView.getEndDate() : util.lastDateOfMonth(util.addMonths(firstDate, this.parent.activeViewOptions.interval - 1));\n    }\n\n    if (!isNullOrUndefined(prevNavEle)) {\n      this.toolbarObj.enableItems(prevNavEle, firstDate > this.parent.minDate);\n    }\n\n    if (!isNullOrUndefined(nextNavEle)) {\n      this.toolbarObj.enableItems(nextNavEle, lastDate < this.parent.maxDate);\n    }\n\n    this.setCalendarMinMaxDate();\n  };\n\n  HeaderRenderer.prototype.getModuleName = function () {\n    return 'headerbar';\n  };\n\n  HeaderRenderer.prototype.destroy = function () {\n    if (this.headerPopup && !this.headerPopup.isDestroyed) {\n      this.headerPopup.destroy();\n      this.headerPopup = null;\n    }\n\n    if (this.headerCalendar && !this.headerCalendar.isDestroyed) {\n      this.headerCalendar.destroy();\n      this.headerCalendar = null;\n    }\n\n    if (this.toolbarObj && !this.toolbarObj.isDestroyed) {\n      this.toolbarObj.destroy();\n      this.removeEventListener();\n      remove(this.element);\n      this.toolbarObj = null;\n    }\n\n    this.element = null;\n    this.parent = null;\n    this.l10n = null;\n  };\n\n  return HeaderRenderer;\n}();\n\nexport { HeaderRenderer };","map":{"version":3,"sources":["D:/4_PROJECTS/RubyGYM/client/node_modules/@syncfusion/ej2-schedule/src/schedule/renderer/header-renderer.js"],"names":["isNullOrUndefined","createElement","remove","closest","addClass","removeClass","extend","Toolbar","Calendar","Popup","events","util","cls","HeaderRenderer","parent","l10n","localeObj","renderHeader","addEventListener","prototype","on","documentClick","closeHeaderPopup","removeEventListener","off","e","closestEle","event","target","closestPop","contentWrap","element","querySelector","CONTENT_WRAP_CLASS","isAdaptive","classList","contains","POPUP_OPEN","SCROLL_HIDDEN","popupEle","popupObj","ej2_instances","hide","hideHeaderPopup","headerPopup","className","TOOLBAR_CONTAINER","toolbarEle","HEADER_TOOLBAR","appendChild","insertBefore","firstElementChild","renderToolbar","_this","items","getItems","trigger","actionBegin","requestType","args","toolbarObj","overflowMode","clicked","toolbarClickHandler","bind","enableRtl","locale","appendTo","prevNavEle","setAttribute","getConstant","nextNavEle","updateAddIcon","updateActiveView","actionComplete","updateItems","dataBind","getPopUpRelativeElement","setDayOfWeek","index","headerCalendar","firstDayOfWeek","setCalendarDate","date","value","setCalendarMinMaxDate","min","minDate","max","maxDate","getCalendarView","indexOf","currentView","setCalendarView","calendarView","depth","start","refresh","selEle","slice","call","querySelectorAll","length","viewIndex","updateDateRange","text","innerHTML","refreshOverflow","addEle","eventSettings","allowAdding","HIDDEN_CLASS","getDateRangeText","dateString","globalize","formatDate","selectedDate","format","calendar","getCalendarMode","capitalizeFirstWord","push","align","prefixIcon","tooltipText","overflow","cssClass","htmlAttributes","suffixIcon","enableAdaptiveUI","showAlwaysInPopup","views","type","_i","_a","item","getItemObject","viewName","displayName","toLowerCase","option","view","orientationClass","isItemInsidePopup","orientation","renderHeaderPopup","headerPopupEle","HEADER_POPUP_CLASS","headerCalendarEle","HEADER_CALENDAR_CLASS","actionOnScroll","targetType","relateTo","position","X","Y","isDisplayDate","activeViewOptions","displayDate","hasSelectedDate","calendarMode","change","calendarChange","setCalendarTimezone","getTime","calendarDate","resetTime","Date","changeDate","timezone","tzModule","getLocalTimezoneName","calculateViewIndex","originalEvent","strClass","replace","data","isSameTime","currentTime","show","changeView","undefined","getCurrentTime","isSelectedDate","numberOfWeeks","firstDateOfMonth","activeView","getNextPreviousDate","activeCellsData","startTime","endTime","interval","timeScale","slotCount","msInterval","MS_PER_MINUTE","currentTime_1","setHours","getHours","Math","round","getMinutes","setMilliseconds","getMilliseconds","isAllDay","eventWindow","openEditor","cancel","toolbarPopUp","name","duration","selectedTime","getStartDate","getEndDate","getHeaderElement","updateHeaderItems","classType","dateRangeEle","TEXT_ELLIPSIS","previousNextIconHandler","dates","getCurrentViewDates","PREVIOUS_DATE_CLASS","NEXT_DATE_CLASS","firstDate","lastDate","getWeekFirstDate","addDays","isCustomMonth","lastDateOfMonth","addMonths","enableItems","getModuleName","destroy","isDestroyed"],"mappings":"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","sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\r\nimport { isNullOrUndefined, createElement, remove, closest, addClass, removeClass, extend } from '@syncfusion/ej2-base';\r\nimport { Toolbar } from '@syncfusion/ej2-navigations';\r\nimport { Calendar } from '@syncfusion/ej2-calendars';\r\nimport { Popup } from '@syncfusion/ej2-popups';\r\nimport * as events from '../base/constant';\r\nimport * as util from '../base/util';\r\nimport * as cls from '../base/css-constant';\r\n/**\r\n * Header module\r\n */\r\nvar HeaderRenderer = /** @class */ (function () {\r\n    function HeaderRenderer(parent) {\r\n        this.parent = parent;\r\n        this.l10n = this.parent.localeObj;\r\n        this.renderHeader();\r\n        this.addEventListener();\r\n    }\r\n    HeaderRenderer.prototype.addEventListener = function () {\r\n        this.parent.on(events.documentClick, this.closeHeaderPopup, this);\r\n    };\r\n    HeaderRenderer.prototype.removeEventListener = function () {\r\n        this.parent.off(events.documentClick, this.closeHeaderPopup);\r\n    };\r\n    HeaderRenderer.prototype.closeHeaderPopup = function (e) {\r\n        var closestEle = closest(e.event.target, '.e-date-range,.e-header-popup,.e-day,.e-selected');\r\n        var closestPop = closest(e.event.target, '.e-hor-nav,.e-toolbar-pop');\r\n        var contentWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\r\n        if (this.parent.isAdaptive) {\r\n            if (!isNullOrUndefined(closestPop) && (closestPop.classList.contains('e-toolbar-pop') ||\r\n                closestPop.classList.contains('e-hor-nav')) && !(closestPop.classList.contains('e-hor-nav') &&\r\n                this.element.querySelector('.e-toolbar-pop').classList.contains(cls.POPUP_OPEN))) {\r\n                addClass([contentWrap], cls.SCROLL_HIDDEN);\r\n            }\r\n            else {\r\n                removeClass([contentWrap], cls.SCROLL_HIDDEN);\r\n                var popupEle = this.element.querySelector('.e-toolbar-pop');\r\n                if (!isNullOrUndefined(popupEle)) {\r\n                    var popupObj = popupEle.ej2_instances[0];\r\n                    if (popupObj && !(!isNullOrUndefined(closestPop) && closestPop.classList.contains('e-hor-nav') &&\r\n                        popupEle.classList.contains(cls.POPUP_OPEN))) {\r\n                        popupObj.hide();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (!isNullOrUndefined(closestEle)) {\r\n            return;\r\n        }\r\n        this.hideHeaderPopup();\r\n    };\r\n    HeaderRenderer.prototype.hideHeaderPopup = function () {\r\n        if (this.headerPopup) {\r\n            this.headerPopup.hide();\r\n        }\r\n    };\r\n    HeaderRenderer.prototype.renderHeader = function () {\r\n        this.element = createElement('div', { className: cls.TOOLBAR_CONTAINER });\r\n        var toolbarEle = createElement('div', { className: cls.HEADER_TOOLBAR });\r\n        this.element.appendChild(toolbarEle);\r\n        this.parent.element.insertBefore(this.element, this.parent.element.firstElementChild);\r\n        this.renderToolbar();\r\n    };\r\n    HeaderRenderer.prototype.renderToolbar = function () {\r\n        var _this = this;\r\n        var items = this.getItems();\r\n        this.parent.trigger(events.actionBegin, { requestType: 'toolbarItemRendering', items: items }, function (args) {\r\n            _this.toolbarObj = new Toolbar({\r\n                items: args.items,\r\n                overflowMode: 'Popup',\r\n                clicked: _this.toolbarClickHandler.bind(_this),\r\n                enableRtl: _this.parent.enableRtl,\r\n                locale: _this.parent.locale\r\n            });\r\n            _this.toolbarObj.appendTo(_this.parent.element.querySelector('.' + cls.HEADER_TOOLBAR));\r\n            var prevNavEle = _this.toolbarObj.element.querySelector('.e-prev');\r\n            if (prevNavEle) {\r\n                prevNavEle.firstElementChild.setAttribute('title', _this.l10n.getConstant('previous'));\r\n            }\r\n            var nextNavEle = _this.toolbarObj.element.querySelector('.e-next');\r\n            if (nextNavEle) {\r\n                nextNavEle.firstElementChild.setAttribute('title', _this.l10n.getConstant('next'));\r\n            }\r\n            _this.updateAddIcon();\r\n            _this.updateActiveView();\r\n            _this.parent.trigger(events.actionComplete, { requestType: 'toolBarItemRendered', items: _this.toolbarObj.items });\r\n        });\r\n    };\r\n    HeaderRenderer.prototype.updateItems = function () {\r\n        var _this = this;\r\n        if (this.toolbarObj) {\r\n            var items = this.getItems();\r\n            this.parent.trigger(events.actionBegin, { requestType: 'toolbarItemRendering', items: items }, function (args) {\r\n                _this.toolbarObj.items = args.items;\r\n                _this.toolbarObj.dataBind();\r\n                _this.parent.trigger(events.actionComplete, { requestType: 'toolBarItemRendered', items: _this.toolbarObj.items });\r\n            });\r\n        }\r\n    };\r\n    HeaderRenderer.prototype.getPopUpRelativeElement = function () {\r\n        if (this.parent.isAdaptive) {\r\n            return this.toolbarObj.element;\r\n        }\r\n        return this.element.querySelector('.e-date-range');\r\n    };\r\n    HeaderRenderer.prototype.setDayOfWeek = function (index) {\r\n        if (this.headerCalendar) {\r\n            this.headerCalendar.firstDayOfWeek = index;\r\n            this.headerCalendar.dataBind();\r\n        }\r\n    };\r\n    HeaderRenderer.prototype.setCalendarDate = function (date) {\r\n        if (this.headerCalendar) {\r\n            this.headerCalendar.value = date;\r\n            this.headerCalendar.dataBind();\r\n        }\r\n    };\r\n    HeaderRenderer.prototype.setCalendarMinMaxDate = function () {\r\n        if (this.headerCalendar) {\r\n            this.headerCalendar.min = this.parent.minDate;\r\n            this.headerCalendar.max = this.parent.maxDate;\r\n            this.headerCalendar.dataBind();\r\n        }\r\n    };\r\n    HeaderRenderer.prototype.getCalendarView = function () {\r\n        if (['Month', 'MonthAgenda', 'TimelineMonth'].indexOf(this.parent.currentView) > -1) {\r\n            return 'Year';\r\n        }\r\n        else if (['Year', 'TimelineYear'].indexOf(this.parent.currentView) > -1) {\r\n            return 'Decade';\r\n        }\r\n        else {\r\n            return 'Month';\r\n        }\r\n    };\r\n    HeaderRenderer.prototype.setCalendarView = function () {\r\n        if (this.headerCalendar) {\r\n            var calendarView = this.getCalendarView();\r\n            this.headerCalendar.depth = calendarView;\r\n            this.headerCalendar.start = calendarView;\r\n            this.headerCalendar.refresh();\r\n        }\r\n    };\r\n    HeaderRenderer.prototype.updateActiveView = function () {\r\n        var selEle = [].slice.call(this.toolbarObj.element.querySelectorAll('.e-views'));\r\n        removeClass(selEle, ['e-active-view']);\r\n        if (selEle.length > 0 && selEle[this.parent.viewIndex]) {\r\n            addClass([selEle[this.parent.viewIndex]], ['e-active-view']);\r\n        }\r\n    };\r\n    HeaderRenderer.prototype.updateDateRange = function (text) {\r\n        var selEle = this.toolbarObj.element.querySelector('.e-date-range');\r\n        if (selEle) {\r\n            selEle.setAttribute('aria-label', text);\r\n            selEle.querySelector('.e-tbar-btn-text').innerHTML = text;\r\n            this.refresh();\r\n        }\r\n    };\r\n    HeaderRenderer.prototype.refresh = function () {\r\n        if (this.toolbarObj) {\r\n            this.toolbarObj.refreshOverflow();\r\n        }\r\n    };\r\n    HeaderRenderer.prototype.updateAddIcon = function () {\r\n        var addEle = this.toolbarObj.element.querySelector('.e-add');\r\n        if (addEle) {\r\n            if (!this.parent.eventSettings.allowAdding) {\r\n                addClass([addEle], cls.HIDDEN_CLASS);\r\n            }\r\n            else {\r\n                removeClass([addEle], cls.HIDDEN_CLASS);\r\n            }\r\n        }\r\n    };\r\n    HeaderRenderer.prototype.getDateRangeText = function () {\r\n        var dateString = this.parent.globalize.formatDate(this.parent.selectedDate, {\r\n            format: 'MMMM y', calendar: this.parent.getCalendarMode()\r\n        });\r\n        return util.capitalizeFirstWord(dateString, 'single');\r\n    };\r\n    HeaderRenderer.prototype.getItems = function () {\r\n        var items = [];\r\n        items.push({\r\n            align: 'Left', prefixIcon: 'e-icon-prev', tooltipText: 'Previous', overflow: 'Show',\r\n            cssClass: 'e-prev', htmlAttributes: { 'aria-label': 'previous period', 'role': 'navigation' }\r\n        });\r\n        items.push({\r\n            align: 'Left', prefixIcon: 'e-icon-next', tooltipText: 'Next', overflow: 'Show',\r\n            cssClass: 'e-next', htmlAttributes: { 'aria-label': 'next period', 'role': 'navigation' }\r\n        });\r\n        items.push({\r\n            align: 'Left', text: this.getDateRangeText(), suffixIcon: 'e-icon-down-arrow', cssClass: 'e-date-range',\r\n            overflow: 'Show',\r\n            htmlAttributes: { 'aria-atomic': 'true', 'aria-live': 'assertive', 'aria-label': 'title', 'role': 'navigation' }\r\n        });\r\n        if (this.parent.isAdaptive || this.parent.enableAdaptiveUI) {\r\n            items.push({\r\n                align: 'Right', showAlwaysInPopup: (this.parent.isAdaptive || this.parent.enableAdaptiveUI), prefixIcon: 'e-icon-add',\r\n                text: this.l10n.getConstant('newEvent'), cssClass: 'e-add', overflow: 'Show'\r\n            });\r\n            items.push({\r\n                align: 'Right', showAlwaysInPopup: (this.parent.isAdaptive || this.parent.enableAdaptiveUI), prefixIcon: 'e-icon-today',\r\n                text: this.l10n.getConstant('today'), cssClass: 'e-today', overflow: 'Show'\r\n            });\r\n        }\r\n        else {\r\n            items.push({\r\n                align: 'Right', showAlwaysInPopup: (this.parent.isAdaptive || this.parent.enableAdaptiveUI), prefixIcon: 'e-icon-day',\r\n                text: this.l10n.getConstant('today'), cssClass: 'e-today', overflow: 'Show'\r\n            });\r\n            if (this.parent.views.length > 1) {\r\n                items.push({ align: 'Right', type: 'Separator', cssClass: 'e-schedule-seperator' });\r\n            }\r\n        }\r\n        if (this.parent.views.length > 1) {\r\n            for (var _i = 0, _a = this.parent.views; _i < _a.length; _i++) {\r\n                var item = _a[_i];\r\n                items.push(this.getItemObject(item));\r\n            }\r\n        }\r\n        return items;\r\n    };\r\n    HeaderRenderer.prototype.getItemObject = function (item) {\r\n        var viewName;\r\n        var displayName;\r\n        if (typeof (item) === 'string') {\r\n            viewName = item.toLowerCase();\r\n            displayName = null;\r\n        }\r\n        else {\r\n            viewName = item.option.toLowerCase();\r\n            displayName = item.displayName;\r\n        }\r\n        var view;\r\n        var orientationClass;\r\n        var isItemInsidePopup = this.parent.isAdaptive || this.parent.enableAdaptiveUI;\r\n        switch (viewName) {\r\n            case 'day':\r\n                view = {\r\n                    align: 'Right', showAlwaysInPopup: isItemInsidePopup, prefixIcon: 'e-icon-day',\r\n                    text: displayName || this.l10n.getConstant('day'), cssClass: 'e-views e-day'\r\n                };\r\n                break;\r\n            case 'week':\r\n                view = {\r\n                    align: 'Right', showAlwaysInPopup: isItemInsidePopup, prefixIcon: 'e-icon-week',\r\n                    text: displayName || this.l10n.getConstant('week'), cssClass: 'e-views e-week'\r\n                };\r\n                break;\r\n            case 'workweek':\r\n                view = {\r\n                    align: 'Right', showAlwaysInPopup: isItemInsidePopup, prefixIcon: 'e-icon-workweek',\r\n                    text: displayName || this.l10n.getConstant('workWeek'), cssClass: 'e-views e-work-week'\r\n                };\r\n                break;\r\n            case 'month':\r\n                view = {\r\n                    align: 'Right', showAlwaysInPopup: isItemInsidePopup, prefixIcon: 'e-icon-month',\r\n                    text: displayName || this.l10n.getConstant('month'), cssClass: 'e-views e-month'\r\n                };\r\n                break;\r\n            case 'year':\r\n                view = {\r\n                    align: 'Right', showAlwaysInPopup: isItemInsidePopup, prefixIcon: 'e-icon-year',\r\n                    text: displayName || this.l10n.getConstant('year'), cssClass: 'e-views e-year'\r\n                };\r\n                break;\r\n            case 'agenda':\r\n                view = {\r\n                    align: 'Right', showAlwaysInPopup: isItemInsidePopup, prefixIcon: 'e-icon-agenda',\r\n                    text: displayName || this.l10n.getConstant('agenda'), cssClass: 'e-views e-agenda'\r\n                };\r\n                break;\r\n            case 'monthagenda':\r\n                view = {\r\n                    align: 'Right', showAlwaysInPopup: isItemInsidePopup, prefixIcon: 'e-icon-month-agenda',\r\n                    text: displayName || this.l10n.getConstant('monthAgenda'), cssClass: 'e-views e-month-agenda'\r\n                };\r\n                break;\r\n            case 'timelineday':\r\n                view = {\r\n                    align: 'Right', showAlwaysInPopup: isItemInsidePopup, prefixIcon: 'e-icon-timeline-day',\r\n                    text: displayName || this.l10n.getConstant('timelineDay'), cssClass: 'e-views e-timeline-day'\r\n                };\r\n                break;\r\n            case 'timelineweek':\r\n                view = {\r\n                    align: 'Right', showAlwaysInPopup: isItemInsidePopup, prefixIcon: 'e-icon-timeline-week',\r\n                    text: displayName || this.l10n.getConstant('timelineWeek'), cssClass: 'e-views e-timeline-week'\r\n                };\r\n                break;\r\n            case 'timelineworkweek':\r\n                view = {\r\n                    align: 'Right', showAlwaysInPopup: isItemInsidePopup, prefixIcon: 'e-icon-timeline-workweek',\r\n                    text: displayName || this.l10n.getConstant('timelineWorkWeek'), cssClass: 'e-views e-timeline-work-week'\r\n                };\r\n                break;\r\n            case 'timelinemonth':\r\n                view = {\r\n                    align: 'Right', showAlwaysInPopup: isItemInsidePopup, prefixIcon: 'e-icon-timeline-month',\r\n                    text: displayName || this.l10n.getConstant('timelineMonth'), cssClass: 'e-views e-timeline-month'\r\n                };\r\n                break;\r\n            case 'timelineyear':\r\n                orientationClass = (item.orientation === 'Vertical') ? 'vertical' : 'horizontal';\r\n                view = {\r\n                    align: 'Right', showAlwaysInPopup: isItemInsidePopup, prefixIcon: 'e-icon-timeline-year-' + orientationClass,\r\n                    text: displayName || this.l10n.getConstant('timelineYear'), cssClass: 'e-views e-timeline-year'\r\n                };\r\n                break;\r\n        }\r\n        return view;\r\n    };\r\n    HeaderRenderer.prototype.renderHeaderPopup = function () {\r\n        var headerPopupEle = createElement('div', { className: cls.HEADER_POPUP_CLASS });\r\n        var headerCalendarEle = createElement('div', { className: cls.HEADER_CALENDAR_CLASS });\r\n        headerPopupEle.appendChild(headerCalendarEle);\r\n        this.element.appendChild(headerPopupEle);\r\n        this.headerPopup = new Popup(headerPopupEle, {\r\n            actionOnScroll: 'hide',\r\n            targetType: 'relative',\r\n            relateTo: this.getPopUpRelativeElement(),\r\n            position: { X: 'left', Y: 'bottom' },\r\n            enableRtl: this.parent.enableRtl\r\n        });\r\n        var calendarView = this.getCalendarView();\r\n        var isDisplayDate = this.parent.currentView === 'Month' &&\r\n            !isNullOrUndefined(this.parent.activeViewOptions.displayDate) && !this.hasSelectedDate();\r\n        this.headerCalendar = new Calendar({\r\n            value: isDisplayDate ? this.parent.activeViewOptions.displayDate : this.parent.selectedDate,\r\n            min: this.parent.minDate,\r\n            max: this.parent.maxDate,\r\n            firstDayOfWeek: this.parent.activeViewOptions.firstDayOfWeek,\r\n            enableRtl: this.parent.enableRtl,\r\n            locale: this.parent.locale,\r\n            depth: calendarView,\r\n            start: calendarView,\r\n            calendarMode: this.parent.calendarMode,\r\n            change: this.calendarChange.bind(this)\r\n        });\r\n        this.setCalendarTimezone();\r\n        this.headerCalendar.appendTo(headerCalendarEle);\r\n        this.headerPopup.hide();\r\n    };\r\n    HeaderRenderer.prototype.calendarChange = function (args) {\r\n        if (args.value.getTime() !== this.parent.selectedDate.getTime()) {\r\n            var calendarDate = util.resetTime(new Date(args.value));\r\n            this.parent.changeDate(calendarDate);\r\n        }\r\n        this.headerPopup.hide();\r\n    };\r\n    HeaderRenderer.prototype.setCalendarTimezone = function () {\r\n        if (this.headerCalendar) {\r\n            this.headerCalendar.timezone = this.parent.timezone || this.parent.tzModule.getLocalTimezoneName();\r\n        }\r\n    };\r\n    HeaderRenderer.prototype.calculateViewIndex = function (args) {\r\n        var target = closest(args.originalEvent.target, '.e-views');\r\n        var views = [].slice.call(this.element.querySelectorAll('.e-views'));\r\n        return views.indexOf(target);\r\n    };\r\n    HeaderRenderer.prototype.toolbarClickHandler = function (args) {\r\n        if (!args.item) {\r\n            return;\r\n        }\r\n        var strClass = args.item.cssClass.replace('e-views ', '');\r\n        var data;\r\n        var isSameTime;\r\n        var currentTime;\r\n        switch (strClass) {\r\n            case 'e-date-range':\r\n                if (!this.headerPopup) {\r\n                    this.renderHeaderPopup();\r\n                }\r\n                if (this.headerPopup.element.classList.contains(cls.POPUP_OPEN)) {\r\n                    this.headerPopup.hide();\r\n                }\r\n                else {\r\n                    this.headerPopup.show();\r\n                }\r\n                break;\r\n            case 'e-day':\r\n                this.parent.changeView('Day', args.originalEvent, undefined, this.calculateViewIndex(args));\r\n                break;\r\n            case 'e-week':\r\n                this.parent.changeView('Week', args.originalEvent, undefined, this.calculateViewIndex(args));\r\n                break;\r\n            case 'e-work-week':\r\n                this.parent.changeView('WorkWeek', args.originalEvent, undefined, this.calculateViewIndex(args));\r\n                break;\r\n            case 'e-month':\r\n                this.parent.changeView('Month', args.originalEvent, undefined, this.calculateViewIndex(args));\r\n                break;\r\n            case 'e-year':\r\n                this.parent.changeView('Year', args.originalEvent, undefined, this.calculateViewIndex(args));\r\n                break;\r\n            case 'e-agenda':\r\n                this.parent.changeView('Agenda', args.originalEvent, undefined, this.calculateViewIndex(args));\r\n                break;\r\n            case 'e-month-agenda':\r\n                this.parent.changeView('MonthAgenda', args.originalEvent, undefined, this.calculateViewIndex(args));\r\n                break;\r\n            case 'e-timeline-day':\r\n                this.parent.changeView('TimelineDay', args.originalEvent, undefined, this.calculateViewIndex(args));\r\n                break;\r\n            case 'e-timeline-week':\r\n                this.parent.changeView('TimelineWeek', args.originalEvent, undefined, this.calculateViewIndex(args));\r\n                break;\r\n            case 'e-timeline-work-week':\r\n                this.parent.changeView('TimelineWorkWeek', args.originalEvent, undefined, this.calculateViewIndex(args));\r\n                break;\r\n            case 'e-timeline-month':\r\n                this.parent.changeView('TimelineMonth', args.originalEvent, undefined, this.calculateViewIndex(args));\r\n                break;\r\n            case 'e-timeline-year':\r\n                this.parent.changeView('TimelineYear', args.originalEvent, undefined, this.calculateViewIndex(args));\r\n                break;\r\n            case 'e-today':\r\n                currentTime = util.resetTime(this.parent.getCurrentTime());\r\n                if (this.parent.currentView === 'Agenda' || !this.parent.isSelectedDate(currentTime) ||\r\n                    this.parent.currentView === 'Month' && this.parent.activeViewOptions.displayDate && !this.hasSelectedDate() &&\r\n                        util.resetTime(this.parent.activeViewOptions.displayDate) !== currentTime || this.parent.currentView === 'Month' &&\r\n                    this.parent.activeViewOptions.numberOfWeeks > 0 && !this.hasSelectedDate()\r\n                    && util.resetTime(util.firstDateOfMonth(this.parent.selectedDate)) !== currentTime) {\r\n                    this.parent.changeDate(currentTime, args.originalEvent);\r\n                }\r\n                break;\r\n            case 'e-prev':\r\n                this.parent.changeDate(this.parent.activeView.getNextPreviousDate('previous'), args.originalEvent);\r\n                break;\r\n            case 'e-next':\r\n                this.parent.changeDate(this.parent.activeView.getNextPreviousDate('next'), args.originalEvent);\r\n                break;\r\n            case 'e-add':\r\n                isSameTime = this.parent.activeCellsData.startTime.getTime() === this.parent.activeCellsData.endTime.getTime();\r\n                if (this.parent.activeCellsData && !isSameTime) {\r\n                    data = this.parent.activeCellsData;\r\n                }\r\n                else {\r\n                    var interval = this.parent.activeViewOptions.timeScale.interval;\r\n                    var slotCount = this.parent.activeViewOptions.timeScale.slotCount;\r\n                    var msInterval = (interval * util.MS_PER_MINUTE) / slotCount;\r\n                    var startTime = new Date(this.parent.selectedDate.getTime());\r\n                    var currentTime_1 = this.parent.getCurrentTime();\r\n                    startTime.setHours(currentTime_1.getHours(), (Math.round(startTime.getMinutes() / msInterval) * msInterval), 0);\r\n                    var endTime = new Date(new Date(startTime.getTime()).setMilliseconds(startTime.getMilliseconds() + msInterval));\r\n                    data = { startTime: startTime, endTime: endTime, isAllDay: false };\r\n                }\r\n                this.parent.eventWindow.openEditor(extend(data, { cancel: false, event: args.originalEvent }), 'Add');\r\n                break;\r\n        }\r\n        if (isNullOrUndefined(this.toolbarObj)) {\r\n            return;\r\n        }\r\n        var toolbarPopUp = this.toolbarObj.element.querySelector('.e-toolbar-pop');\r\n        if (toolbarPopUp && args.item.type !== 'Input') {\r\n            toolbarPopUp.ej2_instances[0].hide({ name: 'SlideUp', duration: 100 });\r\n        }\r\n    };\r\n    HeaderRenderer.prototype.hasSelectedDate = function () {\r\n        var selectedTime = util.resetTime(this.parent.selectedDate).getTime();\r\n        return selectedTime >= this.parent.activeView.getStartDate().getTime() &&\r\n            selectedTime <= this.parent.activeView.getEndDate().getTime();\r\n    };\r\n    HeaderRenderer.prototype.getHeaderElement = function () {\r\n        return this.toolbarObj.element;\r\n    };\r\n    HeaderRenderer.prototype.updateHeaderItems = function (classType) {\r\n        var prevNavEle = this.toolbarObj.element.querySelector('.e-prev');\r\n        var nextNavEle = this.toolbarObj.element.querySelector('.e-next');\r\n        var dateRangeEle = this.toolbarObj.element.querySelector('.e-date-range');\r\n        if (prevNavEle) {\r\n            if (classType === 'add') {\r\n                addClass([prevNavEle], cls.HIDDEN_CLASS);\r\n            }\r\n            else {\r\n                removeClass([prevNavEle], cls.HIDDEN_CLASS);\r\n            }\r\n        }\r\n        if (nextNavEle) {\r\n            if (classType === 'add') {\r\n                addClass([nextNavEle], cls.HIDDEN_CLASS);\r\n            }\r\n            else {\r\n                removeClass([nextNavEle], cls.HIDDEN_CLASS);\r\n            }\r\n        }\r\n        if (dateRangeEle) {\r\n            if (classType === 'add') {\r\n                addClass([dateRangeEle], cls.TEXT_ELLIPSIS);\r\n            }\r\n            else {\r\n                removeClass([dateRangeEle], cls.TEXT_ELLIPSIS);\r\n            }\r\n        }\r\n    };\r\n    HeaderRenderer.prototype.previousNextIconHandler = function () {\r\n        var dates = (this.parent.currentView === 'Agenda' ?\r\n            [this.parent.getCurrentViewDates()[0]] : this.parent.getCurrentViewDates());\r\n        var prevNavEle = this.toolbarObj.element.querySelector('.' + cls.PREVIOUS_DATE_CLASS);\r\n        var nextNavEle = this.toolbarObj.element.querySelector('.' + cls.NEXT_DATE_CLASS);\r\n        var firstDate = new Date(dates[0].getTime());\r\n        var lastDate = new Date(dates[dates.length - 1].getTime());\r\n        if (this.parent.currentView === 'WorkWeek' || this.parent.currentView === 'TimelineWorkWeek') {\r\n            firstDate = util.getWeekFirstDate(util.resetTime(this.parent.selectedDate), this.parent.firstDayOfWeek);\r\n            lastDate = util.addDays(firstDate, 7 * this.parent.activeViewOptions.interval);\r\n        }\r\n        if (this.parent.currentView === 'Month') {\r\n            var isCustomMonth = !isNullOrUndefined(this.parent.activeViewOptions.displayDate) ||\r\n                this.parent.activeViewOptions.numberOfWeeks > 0;\r\n            firstDate = isCustomMonth ? this.parent.activeView.getStartDate() : util.firstDateOfMonth(this.parent.selectedDate);\r\n            lastDate = isCustomMonth ? this.parent.activeView.getEndDate() :\r\n                util.lastDateOfMonth(util.addMonths(firstDate, this.parent.activeViewOptions.interval - 1));\r\n        }\r\n        if (!isNullOrUndefined(prevNavEle)) {\r\n            this.toolbarObj.enableItems(prevNavEle, firstDate > this.parent.minDate);\r\n        }\r\n        if (!isNullOrUndefined(nextNavEle)) {\r\n            this.toolbarObj.enableItems(nextNavEle, lastDate < this.parent.maxDate);\r\n        }\r\n        this.setCalendarMinMaxDate();\r\n    };\r\n    HeaderRenderer.prototype.getModuleName = function () {\r\n        return 'headerbar';\r\n    };\r\n    HeaderRenderer.prototype.destroy = function () {\r\n        if (this.headerPopup && !this.headerPopup.isDestroyed) {\r\n            this.headerPopup.destroy();\r\n            this.headerPopup = null;\r\n        }\r\n        if (this.headerCalendar && !this.headerCalendar.isDestroyed) {\r\n            this.headerCalendar.destroy();\r\n            this.headerCalendar = null;\r\n        }\r\n        if (this.toolbarObj && !this.toolbarObj.isDestroyed) {\r\n            this.toolbarObj.destroy();\r\n            this.removeEventListener();\r\n            remove(this.element);\r\n            this.toolbarObj = null;\r\n        }\r\n        this.element = null;\r\n        this.parent = null;\r\n        this.l10n = null;\r\n    };\r\n    return HeaderRenderer;\r\n}());\r\nexport { HeaderRenderer };\r\n"]},"metadata":{},"sourceType":"module"}