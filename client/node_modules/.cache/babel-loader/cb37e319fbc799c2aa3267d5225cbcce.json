{"ast":null,"code":"/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module ui/viewcollection\n */\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport Collection from '@ckeditor/ckeditor5-utils/src/collection';\n/**\n * Collects {@link module:ui/view~View} instances.\n *\n *\t\tconst parentView = new ParentView( locale );\n *\t\tconst collection = new ViewCollection( locale );\n *\n *\t\tcollection.setParent( parentView.element );\n *\n *\t\tconst viewA = new ChildView( locale );\n *\t\tconst viewB = new ChildView( locale );\n *\n * View collection renders and manages view {@link module:ui/view~View#element elements}:\n *\n *\t\tcollection.add( viewA );\n *\t\tcollection.add( viewB );\n *\n *\t\tconsole.log( parentView.element.firsChild ); // -> viewA.element\n *\t\tconsole.log( parentView.element.lastChild ); // -> viewB.element\n *\n * It {@link module:ui/viewcollection~ViewCollection#delegate propagates} DOM events too:\n *\n *\t\t// Delegate #click and #keydown events from viewA and viewB to the parentView.\n *\t\tcollection.delegate( 'click' ).to( parentView );\n *\n *\t\tparentView.on( 'click', ( evt ) => {\n *\t\t\tconsole.log( `${ evt.source } has been clicked.` );\n *\t\t} );\n *\n *\t\t// This event will be delegated to the parentView.\n *\t\tviewB.fire( 'click' );\n *\n * **Note**: A view collection can be used directly in the {@link module:ui/template~TemplateDefinition definition}\n * of a {@link module:ui/template~Template template}.\n *\n * @extends module:utils/collection~Collection\n * @mixes module:utils/observablemixin~ObservableMixin\n */\n\nexport default class ViewCollection extends Collection {\n  /**\n   * Creates a new instance of the {@link module:ui/viewcollection~ViewCollection}.\n   *\n   * @param {Iterable.<module:ui/view~View>} [initialItems] The initial items of the collection.\n   */\n  constructor() {\n    let initialItems = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    super(initialItems, {\n      // An #id Number attribute should be legal and not break the `ViewCollection` instance.\n      // https://github.com/ckeditor/ckeditor5-ui/issues/93\n      idProperty: 'viewUid'\n    }); // Handle {@link module:ui/view~View#element} in DOM when a new view is added to the collection.\n\n    this.on('add', (evt, view, index) => {\n      this._renderViewIntoCollectionParent(view, index);\n    }); // Handle {@link module:ui/view~View#element} in DOM when a view is removed from the collection.\n\n    this.on('remove', (evt, view) => {\n      if (view.element && this._parentElement) {\n        view.element.remove();\n      }\n    });\n    /**\n     * A parent element within which child views are rendered and managed in DOM.\n     *\n     * @protected\n     * @member {HTMLElement}\n     */\n\n    this._parentElement = null;\n  }\n  /**\n   * Destroys the view collection along with child views.\n   * See the view {@link module:ui/view~View#destroy} method.\n   */\n\n\n  destroy() {\n    this.map(view => view.destroy());\n  }\n  /**\n   * Sets the parent HTML element of this collection. When parent is set, {@link #add adding} and\n   * {@link #remove removing} views in the collection synchronizes their\n   * {@link module:ui/view~View#element elements} in the parent element.\n   *\n   * @param {HTMLElement} element A new parent element.\n   */\n\n\n  setParent(elementOrDocFragment) {\n    this._parentElement = elementOrDocFragment; // Take care of the initial collection items passed to the constructor.\n\n    for (const view of this) {\n      this._renderViewIntoCollectionParent(view);\n    }\n  }\n  /**\n   * Delegates selected events coming from within views in the collection to any\n   * {@link module:utils/emittermixin~Emitter}.\n   *\n   * For the following views and collection:\n   *\n   *\t\tconst viewA = new View();\n   *\t\tconst viewB = new View();\n   *\t\tconst viewC = new View();\n   *\n   *\t\tconst views = parentView.createCollection();\n   *\n   *\t\tviews.delegate( 'eventX' ).to( viewB );\n   *\t\tviews.delegate( 'eventX', 'eventY' ).to( viewC );\n   *\n   *\t\tviews.add( viewA );\n   *\n   * the `eventX` is delegated (fired by) `viewB` and `viewC` along with `customData`:\n   *\n   *\t\tviewA.fire( 'eventX', customData );\n   *\n   * and `eventY` is delegated (fired by) `viewC` along with `customData`:\n   *\n   *\t\tviewA.fire( 'eventY', customData );\n   *\n   * See {@link module:utils/emittermixin~Emitter#delegate}.\n   *\n   * @param {...String} events {@link module:ui/view~View} event names to be delegated to another\n   * {@link module:utils/emittermixin~Emitter}.\n   * @returns {Object}\n   * @returns {Function} return.to A function which accepts the destination of\n   * {@link module:utils/emittermixin~Emitter#delegate delegated} events.\n   */\n\n\n  delegate() {\n    for (var _len = arguments.length, events = new Array(_len), _key = 0; _key < _len; _key++) {\n      events[_key] = arguments[_key];\n    }\n\n    if (!events.length || !isStringArray(events)) {\n      /**\n       * All event names must be strings.\n       *\n       * @error ui-viewcollection-delegate-wrong-events\n       */\n      throw new CKEditorError('ui-viewcollection-delegate-wrong-events', this);\n    }\n\n    return {\n      /**\n       * Selects destination for {@link module:utils/emittermixin~Emitter#delegate} events.\n       *\n       * @memberOf module:ui/viewcollection~ViewCollection#delegate\n       * @function module:ui/viewcollection~ViewCollection#delegate.to\n       * @param {module:utils/emittermixin~Emitter} dest An `Emitter` instance which is\n       * the destination for delegated events.\n       */\n      to: dest => {\n        // Activate delegating on existing views in this collection.\n        for (const view of this) {\n          for (const evtName of events) {\n            view.delegate(evtName).to(dest);\n          }\n        } // Activate delegating on future views in this collection.\n\n\n        this.on('add', (evt, view) => {\n          for (const evtName of events) {\n            view.delegate(evtName).to(dest);\n          }\n        }); // Deactivate delegating when view is removed from this collection.\n\n        this.on('remove', (evt, view) => {\n          for (const evtName of events) {\n            view.stopDelegating(evtName, dest);\n          }\n        });\n      }\n    };\n  }\n  /**\n   * This method {@link module:ui/view~View#render renders} a new view added to the collection.\n   *\n   * If the {@link #_parentElement parent element} of the collection is set, this method also adds\n   * the view's {@link module:ui/view~View#element} as a child of the parent in DOM at a specified index.\n   *\n   * **Note**: If index is not specified, the view's element is pushed as the last child\n   * of the parent element.\n   *\n   * @private\n   * @param {module:ui/view~View} view A new view added to the collection.\n   * @param {Number} [index] An index the view holds in the collection. When not specified,\n   * the view is added at the end.\n   */\n\n\n  _renderViewIntoCollectionParent(view, index) {\n    if (!view.isRendered) {\n      view.render();\n    }\n\n    if (view.element && this._parentElement) {\n      this._parentElement.insertBefore(view.element, this._parentElement.children[index]);\n    }\n  }\n  /**\n   * Removes a child view from the collection. If the {@link #setParent parent element} of the\n   * collection has been set, the {@link module:ui/view~View#element element} of the view is also removed\n   * in DOM, reflecting the order of the collection.\n   *\n   * See the {@link #add} method.\n   *\n   * @method #remove\n   * @param {module:ui/view~View|Number|String} subject The view to remove, its id or index in the collection.\n   * @returns {Object} The removed view.\n   */\n\n\n} // Check if all entries of the array are of `String` type.\n//\n// @private\n// @param {Array} arr An array to be checked.\n// @returns {Boolean}\n\nfunction isStringArray(arr) {\n  return arr.every(a => typeof a == 'string');\n}","map":{"version":3,"sources":["D:/Project/nhap_mon_cnpm/my-app/node_modules/@ckeditor/ckeditor5-ui/src/viewcollection.js"],"names":["CKEditorError","Collection","ViewCollection","constructor","initialItems","idProperty","on","evt","view","index","_renderViewIntoCollectionParent","element","_parentElement","remove","destroy","map","setParent","elementOrDocFragment","delegate","events","length","isStringArray","to","dest","evtName","stopDelegating","isRendered","render","insertBefore","children","arr","every","a"],"mappings":"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","sourcesContent":["/**\n * @license Copyright (c) 2003-2021, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\n */\n\n/**\n * @module ui/viewcollection\n */\n\nimport CKEditorError from '@ckeditor/ckeditor5-utils/src/ckeditorerror';\nimport Collection from '@ckeditor/ckeditor5-utils/src/collection';\n\n/**\n * Collects {@link module:ui/view~View} instances.\n *\n *\t\tconst parentView = new ParentView( locale );\n *\t\tconst collection = new ViewCollection( locale );\n *\n *\t\tcollection.setParent( parentView.element );\n *\n *\t\tconst viewA = new ChildView( locale );\n *\t\tconst viewB = new ChildView( locale );\n *\n * View collection renders and manages view {@link module:ui/view~View#element elements}:\n *\n *\t\tcollection.add( viewA );\n *\t\tcollection.add( viewB );\n *\n *\t\tconsole.log( parentView.element.firsChild ); // -> viewA.element\n *\t\tconsole.log( parentView.element.lastChild ); // -> viewB.element\n *\n * It {@link module:ui/viewcollection~ViewCollection#delegate propagates} DOM events too:\n *\n *\t\t// Delegate #click and #keydown events from viewA and viewB to the parentView.\n *\t\tcollection.delegate( 'click' ).to( parentView );\n *\n *\t\tparentView.on( 'click', ( evt ) => {\n *\t\t\tconsole.log( `${ evt.source } has been clicked.` );\n *\t\t} );\n *\n *\t\t// This event will be delegated to the parentView.\n *\t\tviewB.fire( 'click' );\n *\n * **Note**: A view collection can be used directly in the {@link module:ui/template~TemplateDefinition definition}\n * of a {@link module:ui/template~Template template}.\n *\n * @extends module:utils/collection~Collection\n * @mixes module:utils/observablemixin~ObservableMixin\n */\nexport default class ViewCollection extends Collection {\n\t/**\n\t * Creates a new instance of the {@link module:ui/viewcollection~ViewCollection}.\n\t *\n\t * @param {Iterable.<module:ui/view~View>} [initialItems] The initial items of the collection.\n\t */\n\tconstructor( initialItems = [] ) {\n\t\tsuper( initialItems, {\n\t\t\t// An #id Number attribute should be legal and not break the `ViewCollection` instance.\n\t\t\t// https://github.com/ckeditor/ckeditor5-ui/issues/93\n\t\t\tidProperty: 'viewUid'\n\t\t} );\n\n\t\t// Handle {@link module:ui/view~View#element} in DOM when a new view is added to the collection.\n\t\tthis.on( 'add', ( evt, view, index ) => {\n\t\t\tthis._renderViewIntoCollectionParent( view, index );\n\t\t} );\n\n\t\t// Handle {@link module:ui/view~View#element} in DOM when a view is removed from the collection.\n\t\tthis.on( 'remove', ( evt, view ) => {\n\t\t\tif ( view.element && this._parentElement ) {\n\t\t\t\tview.element.remove();\n\t\t\t}\n\t\t} );\n\n\t\t/**\n\t\t * A parent element within which child views are rendered and managed in DOM.\n\t\t *\n\t\t * @protected\n\t\t * @member {HTMLElement}\n\t\t */\n\t\tthis._parentElement = null;\n\t}\n\n\t/**\n\t * Destroys the view collection along with child views.\n\t * See the view {@link module:ui/view~View#destroy} method.\n\t */\n\tdestroy() {\n\t\tthis.map( view => view.destroy() );\n\t}\n\n\t/**\n\t * Sets the parent HTML element of this collection. When parent is set, {@link #add adding} and\n\t * {@link #remove removing} views in the collection synchronizes their\n\t * {@link module:ui/view~View#element elements} in the parent element.\n\t *\n\t * @param {HTMLElement} element A new parent element.\n\t */\n\tsetParent( elementOrDocFragment ) {\n\t\tthis._parentElement = elementOrDocFragment;\n\n\t\t// Take care of the initial collection items passed to the constructor.\n\t\tfor ( const view of this ) {\n\t\t\tthis._renderViewIntoCollectionParent( view );\n\t\t}\n\t}\n\n\t/**\n\t * Delegates selected events coming from within views in the collection to any\n\t * {@link module:utils/emittermixin~Emitter}.\n\t *\n\t * For the following views and collection:\n\t *\n\t *\t\tconst viewA = new View();\n\t *\t\tconst viewB = new View();\n\t *\t\tconst viewC = new View();\n\t *\n\t *\t\tconst views = parentView.createCollection();\n\t *\n\t *\t\tviews.delegate( 'eventX' ).to( viewB );\n\t *\t\tviews.delegate( 'eventX', 'eventY' ).to( viewC );\n\t *\n\t *\t\tviews.add( viewA );\n\t *\n\t * the `eventX` is delegated (fired by) `viewB` and `viewC` along with `customData`:\n\t *\n\t *\t\tviewA.fire( 'eventX', customData );\n\t *\n\t * and `eventY` is delegated (fired by) `viewC` along with `customData`:\n\t *\n\t *\t\tviewA.fire( 'eventY', customData );\n\t *\n\t * See {@link module:utils/emittermixin~Emitter#delegate}.\n\t *\n\t * @param {...String} events {@link module:ui/view~View} event names to be delegated to another\n\t * {@link module:utils/emittermixin~Emitter}.\n\t * @returns {Object}\n\t * @returns {Function} return.to A function which accepts the destination of\n\t * {@link module:utils/emittermixin~Emitter#delegate delegated} events.\n\t */\n\tdelegate( ...events ) {\n\t\tif ( !events.length || !isStringArray( events ) ) {\n\t\t\t/**\n\t\t\t * All event names must be strings.\n\t\t\t *\n\t\t\t * @error ui-viewcollection-delegate-wrong-events\n\t\t\t */\n\t\t\tthrow new CKEditorError(\n\t\t\t\t'ui-viewcollection-delegate-wrong-events',\n\t\t\t\tthis\n\t\t\t);\n\t\t}\n\n\t\treturn {\n\t\t\t/**\n\t\t\t * Selects destination for {@link module:utils/emittermixin~Emitter#delegate} events.\n\t\t\t *\n\t\t\t * @memberOf module:ui/viewcollection~ViewCollection#delegate\n\t\t\t * @function module:ui/viewcollection~ViewCollection#delegate.to\n\t\t\t * @param {module:utils/emittermixin~Emitter} dest An `Emitter` instance which is\n\t\t\t * the destination for delegated events.\n\t\t\t */\n\t\t\tto: dest => {\n\t\t\t\t// Activate delegating on existing views in this collection.\n\t\t\t\tfor ( const view of this ) {\n\t\t\t\t\tfor ( const evtName of events ) {\n\t\t\t\t\t\tview.delegate( evtName ).to( dest );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Activate delegating on future views in this collection.\n\t\t\t\tthis.on( 'add', ( evt, view ) => {\n\t\t\t\t\tfor ( const evtName of events ) {\n\t\t\t\t\t\tview.delegate( evtName ).to( dest );\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t\t// Deactivate delegating when view is removed from this collection.\n\t\t\t\tthis.on( 'remove', ( evt, view ) => {\n\t\t\t\t\tfor ( const evtName of events ) {\n\t\t\t\t\t\tview.stopDelegating( evtName, dest );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\t\t};\n\t}\n\n\t/**\n\t * This method {@link module:ui/view~View#render renders} a new view added to the collection.\n\t *\n\t * If the {@link #_parentElement parent element} of the collection is set, this method also adds\n\t * the view's {@link module:ui/view~View#element} as a child of the parent in DOM at a specified index.\n\t *\n\t * **Note**: If index is not specified, the view's element is pushed as the last child\n\t * of the parent element.\n\t *\n\t * @private\n\t * @param {module:ui/view~View} view A new view added to the collection.\n\t * @param {Number} [index] An index the view holds in the collection. When not specified,\n\t * the view is added at the end.\n\t */\n\t_renderViewIntoCollectionParent( view, index ) {\n\t\tif ( !view.isRendered ) {\n\t\t\tview.render();\n\t\t}\n\n\t\tif ( view.element && this._parentElement ) {\n\t\t\tthis._parentElement.insertBefore( view.element, this._parentElement.children[ index ] );\n\t\t}\n\t}\n\n\t/**\n\t * Removes a child view from the collection. If the {@link #setParent parent element} of the\n\t * collection has been set, the {@link module:ui/view~View#element element} of the view is also removed\n\t * in DOM, reflecting the order of the collection.\n\t *\n\t * See the {@link #add} method.\n\t *\n\t * @method #remove\n\t * @param {module:ui/view~View|Number|String} subject The view to remove, its id or index in the collection.\n\t * @returns {Object} The removed view.\n\t */\n}\n\n// Check if all entries of the array are of `String` type.\n//\n// @private\n// @param {Array} arr An array to be checked.\n// @returns {Boolean}\nfunction isStringArray( arr ) {\n\treturn arr.every( a => typeof a == 'string' );\n}\n"]},"metadata":{},"sourceType":"module"}