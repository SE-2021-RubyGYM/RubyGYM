{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { isNullOrUndefined, extend, EventHandler, formatUnit, Browser } from '@syncfusion/ej2-base';\nimport { createElement, remove, addClass, removeClass, append, prepend } from '@syncfusion/ej2-base';\nimport { ViewBase } from './view-base';\nimport { VerticalEvent } from '../event-renderer/vertical-view';\nimport { MonthEvent } from '../event-renderer/month';\nimport * as util from '../base/util';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\r\n * vertical view\r\n */\n\nvar VerticalView =\n/** @class */\nfunction (_super) {\n  __extends(VerticalView, _super);\n\n  function VerticalView(parent) {\n    var _this = _super.call(this, parent) || this;\n\n    _this.viewClass = 'e-day-view';\n    _this.isInverseTableSelect = true;\n    _this.baseCssClass = 'e-vertical-view';\n    _this.appointment = null;\n    return _this;\n  }\n\n  VerticalView.prototype.getModuleName = function () {\n    return 'verticalView';\n  };\n\n  VerticalView.prototype.addEventListener = function () {\n    this.parent.on(event.scrollUiUpdate, this.scrollUiUpdate, this);\n    this.parent.on(event.dataReady, this.renderEvents, this);\n  };\n\n  VerticalView.prototype.removeEventListener = function () {\n    if (this.parent) {\n      this.parent.off(event.scrollUiUpdate, this.scrollUiUpdate);\n      this.parent.off(event.dataReady, this.renderEvents);\n    }\n  };\n\n  VerticalView.prototype.renderEvents = function () {\n    this.appointment = this.parent.activeViewOptions.timeScale.enable ? new VerticalEvent(this.parent) : new MonthEvent(this.parent);\n    this.appointment.renderAppointments();\n    this.parent.notify(event.eventsLoaded, {});\n  };\n\n  VerticalView.prototype.onContentScroll = function (e) {\n    this.parent.removeNewEventElement();\n    var target = e.target;\n    this.parent.notify(event.virtualScroll, e);\n    this.scrollLeftPanel(target);\n    this.scrollTopPanel(target);\n\n    if (!this.parent.isAdaptive) {\n      this.parent.uiStateValues.top = target.scrollTop;\n    }\n\n    this.parent.uiStateValues.left = target.scrollLeft;\n\n    if (!isNullOrUndefined(this.parent.quickPopup)) {\n      this.parent.quickPopup.quickPopupHide();\n    }\n\n    this.setPersistence();\n  };\n\n  VerticalView.prototype.onAdaptiveMove = function (e) {\n    if (this.parent.uiStateValues.action) {\n      e.preventDefault();\n    }\n  };\n\n  VerticalView.prototype.onAdaptiveScroll = function (e) {\n    if (this.parent && !this.parent.isDestroyed) {\n      this.parent.removeNewEventElement();\n      this.parent.uiStateValues.top = e.target.scrollTop;\n    }\n  };\n\n  VerticalView.prototype.scrollLeftPanel = function (target) {\n    var leftPanel = this.getLeftPanelElement();\n\n    if (!isNullOrUndefined(leftPanel)) {\n      leftPanel.scrollTop = target.scrollTop;\n    }\n  };\n\n  VerticalView.prototype.scrollUiUpdate = function (args) {\n    if (!this.parent) {\n      return;\n    }\n\n    var dateHeader = this.parent.element.querySelector('.' + cls.DATE_HEADER_WRAP_CLASS);\n    var headerBarHeight = this.getHeaderBarHeight();\n    var timeCells = this.getLeftPanelElement();\n    var content = this.getScrollableElement();\n    var header = this.getDatesHeaderElement();\n    var scrollerHeight = this.parent.element.offsetHeight - headerBarHeight - header.offsetHeight;\n    this.setColWidth(content);\n    this.setContentHeight(content, timeCells, scrollerHeight);\n    var scrollBarWidth = util.getScrollBarWidth(); // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    header.firstElementChild.style[args.cssProperties.rtlBorder] = ''; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    header.style[args.cssProperties.rtlPadding] = '';\n    var isDateHeaderScroll = this.parent.enableAllDayScroll ? !(content.offsetWidth - content.clientWidth <= dateHeader.offsetWidth - dateHeader.clientWidth && dateHeader.classList.contains('e-all-day-scroll')) : true;\n\n    if (content.offsetWidth - content.clientWidth > 0 && isDateHeaderScroll) {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      header.firstElementChild.style[args.cssProperties.border] = scrollBarWidth > 0 ? '1px' : '0px'; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n      header.style[args.cssProperties.padding] = scrollBarWidth > 0 ? scrollBarWidth - 1 + 'px' : '0px';\n    } else {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      header.firstElementChild.style[args.cssProperties.border] = ''; // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n      header.style[args.cssProperties.padding] = '';\n    }\n\n    if (!args.isPreventScrollUpdate) {\n      if (this.parent.uiStateValues.isInitial) {\n        this.scrollToWorkHour();\n        this.parent.uiStateValues.isInitial = false;\n      } else {\n        if (timeCells) {\n          timeCells.scrollTop = this.parent.uiStateValues.top;\n        }\n\n        content.scrollTop = this.parent.uiStateValues.top;\n        content.scrollLeft = this.parent.uiStateValues.left;\n      }\n    }\n\n    if (this.parent.activeViewOptions.timeScale.enable) {\n      this.highlightCurrentTime();\n    }\n\n    this.retainScrollPosition();\n  };\n\n  VerticalView.prototype.setContentHeight = function (element, leftPanelElement, height) {\n    if (this.parent.isAdaptive && !this.isTimelineView()) {\n      element.style.height = this.parent.height === 'auto' ? 'auto' : formatUnit(height);\n    } else {\n      if (!isNullOrUndefined(leftPanelElement)) {\n        leftPanelElement.style.height = this.parent.height === 'auto' ? 'auto' : formatUnit(height - this.getScrollXIndent(element));\n      }\n\n      element.style.height = this.parent.height === 'auto' ? 'auto' : formatUnit(height);\n    }\n  };\n\n  VerticalView.prototype.scrollToWorkHour = function () {\n    if (this.parent.workHours.highlight) {\n      var firstWorkHourCell = this.element.querySelector('.' + cls.WORK_HOURS_CLASS);\n\n      if (firstWorkHourCell) {\n        this.getScrollableElement().scrollTop = firstWorkHourCell.offsetTop;\n        this.parent.uiStateValues.top = firstWorkHourCell.offsetTop;\n        this.parent.uiStateValues.left = 0;\n      }\n    }\n  };\n\n  VerticalView.prototype.scrollToHour = function (hour, scrollDate) {\n    var date = this.parent.getStartEndTime(hour);\n\n    if (isNullOrUndefined(date) || !isNullOrUndefined(scrollDate)) {\n      return;\n    }\n\n    this.getScrollableElement().scrollTop = this.getTopFromDateTime(date);\n  };\n\n  VerticalView.prototype.generateColumnLevels = function () {\n    var level = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);\n    var columnLevels = [];\n\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      columnLevels = this.parent.resourceBase.generateResourceLevels(level);\n\n      if (this.parent.uiStateValues.isGroupAdaptive && this.parent.resourceBase.lastResourceLevel.length > 0) {\n        var resourceLevel = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n        var resStartHour = resourceLevel.resourceData[resourceLevel.resource.startHourField];\n        var resEndHour = resourceLevel.resourceData[resourceLevel.resource.endHourField];\n        var dateSlots = this.getDateSlots(resourceLevel.renderDates, resourceLevel.workDays, resStartHour, resEndHour);\n        columnLevels = [dateSlots];\n      }\n    } else {\n      columnLevels.push(level);\n    }\n\n    this.colLevels = columnLevels;\n    return columnLevels;\n  }; // eslint-disable-next-line max-len\n\n\n  VerticalView.prototype.getDateSlots = function (renderDates, workDays, workStartHour, workEndHour) {\n    if (workStartHour === void 0) {\n      workStartHour = this.parent.workHours.start;\n    }\n\n    if (workEndHour === void 0) {\n      workEndHour = this.parent.workHours.end;\n    }\n\n    var dateCol = [];\n    var start = this.parent.getStartEndTime(workStartHour);\n    var end = this.parent.getStartEndTime(workEndHour);\n\n    for (var _i = 0, renderDates_1 = renderDates; _i < renderDates_1.length; _i++) {\n      var col = renderDates_1[_i];\n      var classList = [cls.HEADER_CELLS_CLASS];\n\n      if (this.isCurrentDate(col)) {\n        classList.push(cls.CURRENT_DAY_CLASS);\n      }\n\n      dateCol.push({\n        date: col,\n        type: 'dateHeader',\n        className: classList,\n        colSpan: 1,\n        workDays: workDays,\n        startHour: new Date(+start),\n        endHour: new Date(+end)\n      });\n    }\n\n    return dateCol;\n  };\n\n  VerticalView.prototype.isWorkHourRange = function (date) {\n    return this.getStartHour().getTime() <= date.getTime() && this.getEndHour().getTime() >= date.getTime();\n  };\n\n  VerticalView.prototype.highlightCurrentTime = function () {\n    var _this = this;\n\n    if (this.parent.activeViewOptions.headerRows.length > 0 && this.parent.activeViewOptions.headerRows.slice(-1)[0].option !== 'Hour') {\n      return;\n    }\n\n    if (this.parent.showTimeIndicator && this.isWorkHourRange(this.parent.getCurrentTime())) {\n      var currentDateIndex = this.getCurrentTimeIndicatorIndex();\n\n      if (currentDateIndex.length > 0) {\n        var workCells = [].slice.call(this.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS));\n\n        if (workCells.length > 0) {\n          this.changeCurrentTimePosition();\n        }\n\n        if (isNullOrUndefined(this.currentTimeIndicatorTimer)) {\n          var currentDate = this.parent.getCurrentTime();\n          var interval = util.MS_PER_MINUTE - (currentDate.getSeconds() * 1000 + currentDate.getMilliseconds());\n\n          if (interval <= util.MS_PER_MINUTE - 1000) {\n            window.setTimeout(function () {\n              if (!isNullOrUndefined(_this.currentTimeIndicatorTimer)) {\n                _this.clearCurrentTimeIndicatorTimer();\n\n                _this.changeCurrentTimePosition();\n\n                _this.updateCurrentTimeIndicatorTimer();\n              }\n            }, interval);\n          }\n\n          this.updateCurrentTimeIndicatorTimer();\n        }\n      } else {\n        this.clearCurrentTimeIndicatorTimer();\n      }\n    } else {\n      this.clearCurrentTimeIndicatorTimer();\n    }\n  };\n\n  VerticalView.prototype.getCurrentTimeIndicatorIndex = function () {\n    var currentDateIndex = [];\n\n    if (!isNullOrUndefined(this.parent.resourceBase) && this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n      var count = 0;\n\n      for (var _i = 0, _a = this.parent.resourceBase.lastResourceLevel; _i < _a.length; _i++) {\n        var resource = _a[_i];\n        var index = this.parent.getIndexOfDate(resource.renderDates, util.resetTime(this.parent.getCurrentTime()));\n\n        if (index >= 0) {\n          var resIndex = this.parent.activeViewOptions.group.byDate ? this.parent.resourceBase.lastResourceLevel.length * index + count : count + index;\n          currentDateIndex.push(resIndex);\n        }\n\n        count += this.parent.activeViewOptions.group.byDate ? 1 : resource.renderDates.length;\n      }\n    } else {\n      var renderDates = this.parent.uiStateValues.isGroupAdaptive && this.parent.resourceBase.lastResourceLevel.length > 0 ? this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex].renderDates : this.renderDates;\n      var index = this.parent.getIndexOfDate(renderDates, util.resetTime(this.parent.getCurrentTime()));\n\n      if (index >= 0) {\n        currentDateIndex.push(index);\n      }\n    }\n\n    return currentDateIndex;\n  };\n\n  VerticalView.prototype.clearCurrentTimeIndicatorTimer = function () {\n    if (!isNullOrUndefined(this.currentTimeIndicatorTimer)) {\n      window.clearInterval(this.currentTimeIndicatorTimer);\n      this.currentTimeIndicatorTimer = null;\n      this.removeCurrentTimeIndicatorElements();\n    }\n  };\n\n  VerticalView.prototype.updateCurrentTimeIndicatorTimer = function () {\n    var _this = this;\n\n    this.currentTimeIndicatorTimer = window.setInterval(function () {\n      _this.changeCurrentTimePosition();\n    }, util.MS_PER_MINUTE);\n  };\n\n  VerticalView.prototype.removeCurrentTimeIndicatorElements = function () {\n    var queryString = '.' + cls.PREVIOUS_TIMELINE_CLASS + ',.' + cls.CURRENT_TIMELINE_CLASS + ',.' + cls.CURRENT_TIME_CLASS;\n    var timeIndicator = [].slice.call(this.element.querySelectorAll(queryString));\n\n    for (var _i = 0, timeIndicator_1 = timeIndicator; _i < timeIndicator_1.length; _i++) {\n      var indicator = timeIndicator_1[_i];\n      remove(indicator);\n    }\n  };\n\n  VerticalView.prototype.changeCurrentTimePosition = function () {\n    if (!this.parent || this.parent && this.parent.isDestroyed) {\n      return;\n    }\n\n    this.removeCurrentTimeIndicatorElements();\n    var currentDateIndex = this.getCurrentTimeIndicatorIndex();\n    var firstRow = this.parent.getContentTable().rows[0];\n    var top = this.getTopFromDateTime(this.parent.getCurrentTime());\n    var topInPx = formatUnit(top);\n    var rowIndex = Math.floor(top / firstRow.cells[0].offsetHeight);\n    var timeCellsWrap = this.getLeftPanelElement();\n    var timeTrs = [].slice.call(timeCellsWrap.querySelectorAll('tr'));\n\n    if (isNullOrUndefined(rowIndex) || isNaN(rowIndex) || rowIndex === timeTrs.length) {\n      return;\n    }\n\n    var curTimeWrap = [].slice.call(this.element.querySelectorAll('.' + cls.TIMELINE_WRAPPER_CLASS));\n\n    for (var i = 0, length_1 = currentDateIndex[0]; i < length_1; i++) {\n      curTimeWrap[i].appendChild(createElement('div', {\n        className: cls.PREVIOUS_TIMELINE_CLASS,\n        styles: 'top:' + topInPx\n      }));\n    }\n\n    for (var _i = 0, currentDateIndex_1 = currentDateIndex; _i < currentDateIndex_1.length; _i++) {\n      var day = currentDateIndex_1[_i];\n      curTimeWrap[day].appendChild(createElement('div', {\n        className: cls.CURRENT_TIMELINE_CLASS,\n        styles: 'top:' + topInPx\n      }));\n    }\n\n    var currentTimeEle = createElement('div', {\n      innerHTML: this.parent.getTimeString(this.parent.getCurrentTime()),\n      className: cls.CURRENT_TIME_CLASS,\n      styles: 'top:' + topInPx\n    });\n\n    if (rowIndex <= timeTrs.length) {\n      removeClass(timeCellsWrap.querySelectorAll('.' + cls.HIDE_CHILDS_CLASS), cls.HIDE_CHILDS_CLASS);\n\n      if (timeTrs[rowIndex]) {\n        addClass([timeTrs[rowIndex].lastElementChild], cls.HIDE_CHILDS_CLASS);\n      }\n\n      prepend([currentTimeEle], timeCellsWrap);\n      currentTimeEle.style.top = formatUnit(currentTimeEle.offsetTop - currentTimeEle.offsetHeight / 2);\n    }\n  };\n\n  VerticalView.prototype.getTopFromDateTime = function (date) {\n    var startHour = this.getStartHour();\n    var diffInMinutes = (date.getHours() - startHour.getHours()) * 60 + (date.getMinutes() - startHour.getMinutes());\n    return diffInMinutes * this.getWorkCellHeight() * this.parent.activeViewOptions.timeScale.slotCount / this.parent.activeViewOptions.timeScale.interval;\n  };\n\n  VerticalView.prototype.getWorkCellHeight = function () {\n    return parseFloat(this.element.querySelector('.' + cls.WORK_CELLS_CLASS).getBoundingClientRect().height.toFixed(2));\n  };\n\n  VerticalView.prototype.getTdContent = function (date, type, groupIndex) {\n    var cntEle;\n    var wrapper = createElement('div');\n    var templateName = '';\n    var templateId = this.parent.element.id + '_';\n\n    switch (type) {\n      case 'dateHeader':\n        if (this.parent.activeViewOptions.dateHeaderTemplate) {\n          templateName = 'dateHeaderTemplate';\n          var args = {\n            date: date,\n            type: type\n          };\n          var viewName = this.parent.activeViewOptions.dateHeaderTemplateName;\n          cntEle = [].slice.call(this.parent.getDateHeaderTemplate()(args, this.parent, templateName, templateId + viewName + templateName, false));\n        } else {\n          wrapper.innerHTML = this.parent.activeView.isTimelineView() ? \"<span class=\\\"e-header-date e-navigate\\\">\" + this.getTimelineDate(date) + \"</span>\" : \"<div class=\\\"e-header-day\\\">\" + util.capitalizeFirstWord(this.getDayName(date), 'single') + \"</div>\" + (\"<div class=\\\"e-header-date e-navigate\\\" role=\\\"link\\\">\" + this.getDate(date) + \"</div>\");\n          cntEle = [].slice.call(wrapper.childNodes);\n        }\n\n        break;\n\n      case 'majorSlot':\n        if (this.parent.activeViewOptions.timeScale.majorSlotTemplate) {\n          templateName = 'majorSlotTemplate';\n          var args = {\n            date: date,\n            type: type\n          };\n          cntEle = [].slice.call(this.parent.getMajorSlotTemplate()(args, this.parent, templateName, templateId + templateName, false));\n        } else {\n          wrapper.innerHTML = \"<span>\" + this.getTime(date) + \"</span>\";\n          cntEle = [].slice.call(wrapper.childNodes);\n        }\n\n        break;\n\n      case 'minorSlot':\n        if (this.parent.activeViewOptions.timeScale.minorSlotTemplate) {\n          templateName = 'minorSlotTemplate';\n          var args = {\n            date: date,\n            type: type\n          };\n          cntEle = [].slice.call(this.parent.getMinorSlotTemplate()(args, this.parent, templateName, templateId + templateName, false));\n        } else {\n          cntEle = [].slice.call(wrapper.childNodes);\n        }\n\n        break;\n\n      case 'alldayCells':\n        if (this.parent.activeViewOptions.cellTemplate) {\n          var viewName = this.parent.activeViewOptions.cellTemplateName;\n          templateName = 'cellTemplate';\n          var args = {\n            date: date,\n            type: type,\n            groupIndex: groupIndex\n          };\n          cntEle = [].slice.call(this.parent.getCellTemplate()(args, this.parent, templateName, templateId + viewName + templateName, false));\n        }\n\n        break;\n    }\n\n    return cntEle;\n  };\n\n  VerticalView.prototype.refreshHeader = function () {\n    remove(this.element.querySelector('tbody tr'));\n    this.renderHeader();\n    this.parent.notify(event.contentReady, {});\n  };\n\n  VerticalView.prototype.renderLayout = function (type) {\n    this.setPanel(createElement('div', {\n      className: cls.TABLE_WRAP_CLASS\n    }));\n    var clsList = [this.baseCssClass, this.viewClass];\n    clsList.push(type);\n\n    if (this.parent.activeViewOptions.group.byDate) {\n      clsList.push('e-by-date');\n    }\n\n    if (!this.parent.activeViewOptions.timeScale.enable) {\n      addClass([this.element], [cls.TIMESCALE_DISABLE, this.viewClass]);\n    }\n\n    if (this.parent.activeViewOptions.allowVirtualScrolling) {\n      clsList.push(cls.VIRTUAL_SCROLL_CLASS);\n    }\n\n    if (this.parent.eventSettings.ignoreWhitespace) {\n      clsList.push(cls.IGNORE_WHITESPACE);\n    }\n\n    this.renderPanel(type);\n    addClass([this.element], clsList);\n    this.element.appendChild(this.createTableLayout(cls.OUTER_TABLE_CLASS));\n    this.element.querySelector('table').setAttribute('role', 'presentation');\n    this.colLevels = this.generateColumnLevels();\n    this.renderHeader();\n    this.renderContent();\n\n    if (this.parent.uiStateValues.isGroupAdaptive && !this.parent.element.querySelector('.' + cls.RESOURCE_TOOLBAR_CONTAINER)) {\n      this.renderResourceMobileLayout();\n    }\n\n    this.parent.notify(event.contentReady, {});\n  };\n\n  VerticalView.prototype.renderHeader = function () {\n    var tr = createElement('tr');\n    var dateTd = createElement('td');\n    dateTd.appendChild(this.renderDatesHeader());\n\n    if (this.parent.activeViewOptions.timeScale.enable) {\n      var indentTd = createElement('td', {\n        className: cls.LEFT_INDENT_CLASS\n      });\n      indentTd.appendChild(this.renderLeftIndent());\n      tr.appendChild(indentTd);\n    }\n\n    tr.appendChild(dateTd);\n    prepend([tr], this.element.querySelector('tbody'));\n  };\n\n  VerticalView.prototype.renderContent = function () {\n    var tr = createElement('tr');\n    var workTd = createElement('td');\n\n    if (this.parent.isAdaptive) {\n      workTd.setAttribute('colspan', this.parent.activeViewOptions.timeScale.enable ? '2' : '1');\n      var scrollContainer = createElement('div', {\n        className: cls.SCROLL_CONTAINER_CLASS\n      });\n\n      if (this.parent.activeViewOptions.timeScale.enable) {\n        scrollContainer.appendChild(this.renderTimeCells());\n      }\n\n      scrollContainer.appendChild(this.renderContentArea());\n      workTd.appendChild(scrollContainer);\n      EventHandler.add(scrollContainer, 'scroll', this.onAdaptiveScroll, this);\n      EventHandler.add(scrollContainer, Browser.touchMoveEvent, this.onAdaptiveMove, this);\n      tr.appendChild(workTd);\n    } else {\n      workTd.appendChild(this.renderContentArea());\n\n      if (this.parent.activeViewOptions.timeScale.enable) {\n        var timesTd = createElement('td');\n        timesTd.appendChild(this.renderTimeCells());\n        tr.appendChild(timesTd);\n      }\n\n      tr.appendChild(workTd);\n    }\n\n    this.element.querySelector('tbody').appendChild(tr);\n  };\n\n  VerticalView.prototype.renderLeftIndent = function () {\n    var wrap = createElement('div', {\n      className: cls.LEFT_INDENT_WRAP_CLASS\n    });\n    var tbl = this.createTableLayout();\n    var trEle = createElement('tr');\n    var rowCount = this.colLevels.length;\n    var nth;\n\n    for (var i = 0; i < rowCount; i++) {\n      var ntr_1 = trEle.cloneNode();\n      var data_1 = {\n        className: [this.colLevels[i][0] && this.colLevels[i][0].className[0]],\n        type: 'emptyCells'\n      };\n\n      if (this.parent.activeViewOptions.showWeekNumber && data_1.className.indexOf(cls.HEADER_CELLS_CLASS) !== -1) {\n        data_1.className.push(cls.WEEK_NUMBER_CLASS);\n        var weekNo = this.parent.getWeekNumberContent(this.renderDates);\n        data_1.template = [createElement('span', {\n          innerHTML: '' + weekNo,\n          attrs: {\n            title: this.parent.localeObj.getConstant('week') + ' ' + weekNo\n          }\n        })];\n      }\n\n      nth = this.createTd(data_1);\n      this.parent.renderHeaderIndentTemplate(data_1, nth);\n      ntr_1.appendChild(nth);\n      tbl.querySelector('tbody').appendChild(ntr_1);\n    }\n\n    var ntr = trEle.cloneNode();\n    var appointmentExpandCollapse = createElement('div', {\n      attrs: {\n        'tabindex': '0',\n        'role': 'list',\n        title: this.parent.localeObj.getConstant('expandAllDaySection'),\n        'aria-disabled': 'false',\n        'aria-label': 'Expand section'\n      },\n      className: cls.ALLDAY_APPOINTMENT_SECTION_CLASS + ' ' + cls.APPOINTMENT_ROW_EXPAND_CLASS + ' ' + cls.ICON + ' ' + cls.DISABLE_CLASS\n    });\n    var data = {\n      className: [cls.ALLDAY_CELLS_CLASS],\n      type: 'emptyCells'\n    };\n    nth = this.createTd(data);\n    nth.appendChild(appointmentExpandCollapse);\n    this.parent.renderHeaderIndentTemplate(data, nth);\n    ntr.appendChild(nth);\n    tbl.querySelector('tbody').appendChild(ntr);\n    wrap.appendChild(tbl);\n    return wrap;\n  };\n\n  VerticalView.prototype.renderDatesHeader = function () {\n    var container = createElement('div', {\n      className: cls.DATE_HEADER_CONTAINER_CLASS\n    });\n    var wrap = createElement('div', {\n      className: cls.DATE_HEADER_WRAP_CLASS\n    });\n    container.appendChild(wrap);\n    var tbl = this.createTableLayout();\n    var trEle = createElement('tr');\n    var rowCount = this.colLevels.length;\n    var lastLevel = this.colLevels[rowCount - 1];\n\n    for (var i = 0; i < rowCount; i++) {\n      var ntr = trEle.cloneNode();\n      addClass([ntr], cls.HEADER_ROW_CLASS);\n      var level = this.colLevels[i];\n\n      for (var j = 0; j < level.length; j++) {\n        ntr.appendChild(this.createTd(level[j]));\n      }\n\n      tbl.querySelector('tbody').appendChild(ntr);\n    }\n\n    this.createAllDayRow(tbl, lastLevel);\n    this.createColGroup(tbl, lastLevel);\n    wrap.appendChild(tbl);\n    return container;\n  };\n\n  VerticalView.prototype.createAllDayRow = function (table, tdData) {\n    var ntr = createElement('tr');\n    addClass([ntr], cls.ALLDAY_ROW_CLASS);\n\n    for (var j = 0; j < tdData.length; j++) {\n      var td = extend({}, tdData[j]);\n      td.className = [cls.ALLDAY_CELLS_CLASS];\n      td.type = 'alldayCells';\n      var ntd = this.createTd(td);\n      ntd.setAttribute('data-date', td.date.getTime().toString());\n\n      if (!isNullOrUndefined(td.groupIndex)) {\n        ntd.setAttribute('data-group-index', '' + td.groupIndex);\n      } else if (this.parent.uiStateValues.isGroupAdaptive) {\n        ntd.setAttribute('data-group-index', '' + this.parent.uiStateValues.groupIndex);\n      }\n\n      this.wireCellEvents(ntd);\n      ntr.appendChild(ntd);\n    }\n\n    table.querySelector('tbody').appendChild(ntr);\n    var thead = createElement('thead');\n    thead.appendChild(this.createEventWrapper('allDay'));\n    prepend([thead], table);\n  };\n\n  VerticalView.prototype.createTd = function (td) {\n    var tdEle = createElement('td');\n    this.addAttributes(td, tdEle);\n\n    if (td.date && td.type) {\n      var ele = this.getTdContent(td.date, td.type, td.groupIndex);\n\n      if (ele && ele.length) {\n        append(ele, tdEle);\n      }\n    }\n\n    if (!this.parent.isMinMaxDate(util.resetTime(new Date('' + td.date)))) {\n      addClass([tdEle], cls.DISABLE_DATES);\n    }\n\n    if (td.type === 'resourceHeader') {\n      this.setResourceHeaderContent(tdEle, td);\n    }\n\n    if (td.type === 'dateHeader' && td.className.indexOf(cls.HEADER_CELLS_CLASS) >= 0) {\n      tdEle.setAttribute('data-date', td.date.getTime().toString());\n\n      if (!isNullOrUndefined(td.groupIndex)) {\n        tdEle.setAttribute('data-group-index', '' + td.groupIndex);\n      }\n\n      this.wireMouseEvents(tdEle);\n    }\n\n    var args = {\n      elementType: td.type,\n      element: tdEle,\n      date: td.date,\n      groupIndex: td.groupIndex\n    };\n    this.parent.trigger(event.renderCell, args);\n    return tdEle;\n  };\n\n  VerticalView.prototype.wireCellEvents = function (element) {\n    EventHandler.add(element, 'mousedown', this.parent.workCellAction.cellMouseDown, this.parent.workCellAction);\n    this.wireMouseEvents(element);\n  };\n\n  VerticalView.prototype.wireMouseEvents = function (element) {\n    EventHandler.add(element, 'click', this.parent.workCellAction.cellClick, this.parent.workCellAction);\n\n    if (!this.parent.isAdaptive) {\n      EventHandler.add(element, 'dblclick', this.parent.workCellAction.cellDblClick, this.parent.workCellAction);\n    }\n  };\n\n  VerticalView.prototype.renderTimeCells = function () {\n    var _this = this;\n\n    var wrap = createElement('div', {\n      className: cls.TIME_CELLS_WRAP_CLASS\n    });\n    var tbl = this.createTableLayout();\n    var trEle = createElement('tr');\n\n    var handler = function (r) {\n      r.type = r.first ? 'majorSlot' : 'minorSlot';\n      r.className = r.last ? [cls.TIME_CELLS_CLASS, cls.TIME_SLOT_CLASS] : [cls.TIME_SLOT_CLASS];\n      var ntr = trEle.cloneNode();\n      var data = {\n        date: r.date,\n        type: r.type,\n        className: r.className\n      };\n      ntr.appendChild(_this.createTd(data));\n      tbl.querySelector('tbody').appendChild(ntr);\n      return r;\n    };\n\n    this.getTimeSlotRows(handler);\n    wrap.appendChild(tbl);\n    return wrap;\n  };\n\n  VerticalView.prototype.renderContentArea = function () {\n    var wrap = createElement('div', {\n      className: cls.CONTENT_WRAP_CLASS\n    });\n    var tbl = this.createTableLayout(cls.CONTENT_TABLE_CLASS);\n    this.addAutoHeightClass(tbl);\n    this.renderContentTable(tbl);\n    this.createColGroup(tbl, this.colLevels.slice(-1)[0]);\n    wrap.appendChild(tbl);\n    this.wireCellEvents(tbl.querySelector('tbody'));\n    EventHandler.add(wrap, 'scroll', this.onContentScroll, this);\n    EventHandler.add(wrap, Browser.touchMoveEvent, this.onAdaptiveMove, this);\n    return wrap;\n  };\n\n  VerticalView.prototype.renderContentTable = function (table) {\n    var _this = this;\n\n    var tr = createElement('tr', {\n      attrs: {\n        role: 'row'\n      }\n    });\n    var td = createElement('td', {\n      attrs: {\n        role: 'gridcell',\n        'aria-selected': 'false'\n      }\n    });\n    var tbody = table.querySelector('tbody');\n\n    var handler = function (r) {\n      var ntr = tr.cloneNode();\n\n      for (var _i = 0, _a = _this.colLevels[_this.colLevels.length - 1]; _i < _a.length; _i++) {\n        var tdData = _a[_i];\n\n        var ntd = _this.createContentTd(tdData, r, td);\n\n        ntr.appendChild(ntd);\n      }\n\n      tbody.appendChild(ntr);\n      return r;\n    };\n\n    this.getTimeSlotRows(handler);\n    this.renderContentTableHeader(table);\n  };\n\n  VerticalView.prototype.createContentTd = function (tdData, r, td) {\n    var ntd = td.cloneNode();\n\n    if (tdData.colSpan) {\n      ntd.setAttribute('colspan', tdData.colSpan.toString());\n    }\n\n    var clsName = this.getContentTdClass(r);\n    var cellDate = util.resetTime(tdData.date);\n\n    if (!this.parent.isMinMaxDate(cellDate)) {\n      clsName.push(cls.DISABLE_DATES);\n    }\n\n    util.setTime(cellDate, util.getDateInMs(r.date));\n    var type = 'workCells';\n\n    if (tdData.className.indexOf(cls.RESOURCE_PARENT_CLASS) !== -1) {\n      clsName.push(cls.RESOURCE_GROUP_CELLS_CLASS);\n      type = 'resourceGroupCells';\n    }\n\n    if (this.parent.workHours.highlight && (this.parent.activeViewOptions.timeScale.enable && this.isWorkHour(cellDate, tdData.startHour, tdData.endHour, tdData.workDays) || !this.parent.activeViewOptions.timeScale.enable && this.isWorkDay(cellDate, tdData.workDays))) {\n      clsName.push(cls.WORK_HOURS_CLASS);\n    }\n\n    addClass([ntd], clsName);\n\n    if (this.parent.activeViewOptions.cellTemplate) {\n      var args_1 = {\n        date: cellDate,\n        type: type,\n        groupIndex: tdData.groupIndex\n      };\n      var scheduleId = this.parent.element.id + '_';\n      var viewName = this.parent.activeViewOptions.cellTemplateName;\n      var templateId = scheduleId + viewName + 'cellTemplate';\n      var tooltipTemplate = [].slice.call(this.parent.getCellTemplate()(args_1, this.parent, 'cellTemplate', templateId, false));\n      append(tooltipTemplate, ntd);\n    }\n\n    ntd.setAttribute('data-date', cellDate.getTime().toString());\n\n    if (!isNullOrUndefined(tdData.groupIndex) || this.parent.uiStateValues.isGroupAdaptive) {\n      var groupIndex = this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex : tdData.groupIndex;\n      ntd.setAttribute('data-group-index', '' + groupIndex);\n    }\n\n    var args = {\n      elementType: type,\n      element: ntd,\n      date: cellDate,\n      groupIndex: tdData.groupIndex\n    };\n    this.parent.trigger(event.renderCell, args);\n    return ntd;\n  };\n\n  VerticalView.prototype.getContentTdClass = function (r) {\n    return r.last ? [cls.WORK_CELLS_CLASS] : [cls.WORK_CELLS_CLASS, cls.ALTERNATE_CELLS_CLASS];\n  };\n\n  VerticalView.prototype.renderContentTableHeader = function (table) {\n    var thead = createElement('thead');\n    thead.appendChild(this.createEventWrapper());\n\n    if (this.parent.activeViewOptions.timeScale.enable) {\n      thead.appendChild(this.createEventWrapper('timeIndicator'));\n    }\n\n    prepend([thead], table);\n  };\n\n  VerticalView.prototype.createEventWrapper = function (type) {\n    if (type === void 0) {\n      type = '';\n    }\n\n    var tr = createElement('tr');\n    var levels = this.colLevels.slice(-1)[0];\n\n    for (var i = 0, len = levels.length; i < len; i++) {\n      var col = levels[i];\n      var appointmentWrap = createElement('td', {\n        className: type === 'allDay' ? cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS : type === 'timeIndicator' ? cls.TIMELINE_WRAPPER_CLASS : cls.DAY_WRAPPER_CLASS,\n        attrs: {\n          'data-date': col.date.getTime().toString()\n        }\n      });\n\n      if (!isNullOrUndefined(col.groupIndex)) {\n        appointmentWrap.setAttribute('data-group-index', col.groupIndex.toString());\n      }\n\n      if (type === '') {\n        var innerWrapper = createElement('div', {\n          id: cls.APPOINTMENT_WRAPPER_CLASS + '-' + i.toString(),\n          className: cls.APPOINTMENT_WRAPPER_CLASS\n        });\n        appointmentWrap.appendChild(innerWrapper);\n      }\n\n      tr.appendChild(appointmentWrap);\n    }\n\n    return tr;\n  };\n\n  VerticalView.prototype.getScrollableElement = function () {\n    if (this.parent.isAdaptive && !this.isTimelineView()) {\n      return this.element.querySelector('.' + cls.SCROLL_CONTAINER_CLASS);\n    } else {\n      return this.getContentAreaElement();\n    }\n  };\n\n  VerticalView.prototype.getLeftPanelElement = function () {\n    return this.element.querySelector('.' + cls.TIME_CELLS_WRAP_CLASS);\n  };\n\n  VerticalView.prototype.getEndDateFromStartDate = function (start) {\n    var msMajorInterval = this.parent.activeViewOptions.timeScale.interval * util.MS_PER_MINUTE;\n    var msInterval = msMajorInterval / this.parent.activeViewOptions.timeScale.slotCount;\n    var end = new Date(start.getTime());\n    end.setMilliseconds(end.getMilliseconds() + msInterval);\n    return end;\n  };\n\n  VerticalView.prototype.getTimeSlotRows = function (handler) {\n    var rows = [];\n    var startHour = this.getStartHour();\n    var endHour = this.getEndHour();\n    var msMajorInterval = this.parent.activeViewOptions.timeScale.interval * util.MS_PER_MINUTE;\n    var msInterval = msMajorInterval / this.parent.activeViewOptions.timeScale.slotCount;\n    var length = Math.round(util.MS_PER_DAY / msInterval);\n    var msStartHour = startHour.getTime();\n    var msEndHour = endHour.getTime();\n\n    if (msStartHour !== msEndHour) {\n      length = Math.abs(msEndHour - msStartHour) / msInterval - (new Date(msEndHour).getTimezoneOffset() - new Date(msStartHour).getTimezoneOffset()) / (60 / this.parent.activeViewOptions.timeScale.slotCount);\n    }\n\n    if (!this.parent.activeViewOptions.timeScale.enable) {\n      length = 1;\n    }\n\n    var start = this.parent.getStartEndTime(this.parent.workHours.start);\n    var end = this.parent.getStartEndTime(this.parent.workHours.end);\n\n    for (var i = 0; i < length; i++) {\n      var dt = new Date(msStartHour + msInterval * i);\n\n      if (util.isDaylightSavingTime(dt) || new Date(msStartHour).getTimezoneOffset() !== dt.getTimezoneOffset()) {\n        var timeOffset = new Date(msStartHour).getTimezoneOffset() - dt.getTimezoneOffset();\n        dt = new Date(dt.getTime() - 1000 * 60 * timeOffset);\n      }\n\n      var majorTickDivider = i % (msMajorInterval / msInterval);\n      var row = {\n        date: new Date('' + dt),\n        startHour: start,\n        endHour: end,\n        first: majorTickDivider === 0,\n        middle: majorTickDivider < this.parent.activeViewOptions.timeScale.slotCount - 1,\n        last: majorTickDivider === this.parent.activeViewOptions.timeScale.slotCount - 1,\n        type: ''\n      };\n\n      if (handler) {\n        handler(row);\n      }\n\n      rows.push(row);\n    }\n\n    return rows;\n  };\n\n  VerticalView.prototype.destroy = function () {\n    if (!this.parent || this.parent && this.parent.isDestroyed) {\n      return;\n    }\n\n    this.clearCurrentTimeIndicatorTimer();\n\n    if (this.element) {\n      if (this.appointment) {\n        this.appointment.destroy();\n        this.appointment = null;\n      }\n\n      var contentScrollableEle = this.getContentAreaElement();\n\n      if (contentScrollableEle) {\n        EventHandler.remove(contentScrollableEle, 'scroll', this.onContentScroll);\n        EventHandler.remove(contentScrollableEle, Browser.touchMoveEvent, this.onAdaptiveMove);\n      }\n\n      if (this.parent.resourceBase) {\n        this.parent.resourceBase.destroy();\n      }\n\n      if (this.parent.scheduleTouchModule) {\n        this.parent.scheduleTouchModule.resetValues();\n      }\n\n      _super.prototype.destroy.call(this);\n    }\n  };\n\n  return VerticalView;\n}(ViewBase);\n\nexport { VerticalView };","map":{"version":3,"sources":["D:/HUST/20211/Introduction to Software Engineering/Project/Sprint 2/RubyGYM/client/node_modules/@syncfusion/ej2-schedule/src/schedule/renderer/vertical-view.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","isNullOrUndefined","extend","EventHandler","formatUnit","Browser","createElement","remove","addClass","removeClass","append","prepend","ViewBase","VerticalEvent","MonthEvent","util","event","cls","VerticalView","_super","parent","_this","call","viewClass","isInverseTableSelect","baseCssClass","appointment","getModuleName","addEventListener","on","scrollUiUpdate","dataReady","renderEvents","removeEventListener","off","activeViewOptions","timeScale","enable","renderAppointments","notify","eventsLoaded","onContentScroll","e","removeNewEventElement","target","virtualScroll","scrollLeftPanel","scrollTopPanel","isAdaptive","uiStateValues","top","scrollTop","left","scrollLeft","quickPopup","quickPopupHide","setPersistence","onAdaptiveMove","action","preventDefault","onAdaptiveScroll","isDestroyed","leftPanel","getLeftPanelElement","args","dateHeader","element","querySelector","DATE_HEADER_WRAP_CLASS","headerBarHeight","getHeaderBarHeight","timeCells","content","getScrollableElement","header","getDatesHeaderElement","scrollerHeight","offsetHeight","setColWidth","setContentHeight","scrollBarWidth","getScrollBarWidth","firstElementChild","style","cssProperties","rtlBorder","rtlPadding","isDateHeaderScroll","enableAllDayScroll","offsetWidth","clientWidth","classList","contains","border","padding","isPreventScrollUpdate","isInitial","scrollToWorkHour","highlightCurrentTime","retainScrollPosition","leftPanelElement","height","isTimelineView","getScrollXIndent","workHours","highlight","firstWorkHourCell","WORK_HOURS_CLASS","offsetTop","scrollToHour","hour","scrollDate","date","getStartEndTime","getTopFromDateTime","generateColumnLevels","level","getDateSlots","renderDates","workDays","columnLevels","group","resources","length","resourceBase","generateResourceLevels","isGroupAdaptive","lastResourceLevel","resourceLevel","groupIndex","resStartHour","resourceData","resource","startHourField","resEndHour","endHourField","dateSlots","push","colLevels","workStartHour","workEndHour","start","end","dateCol","_i","renderDates_1","col","HEADER_CELLS_CLASS","isCurrentDate","CURRENT_DAY_CLASS","type","className","colSpan","startHour","Date","endHour","isWorkHourRange","getStartHour","getTime","getEndHour","headerRows","slice","option","showTimeIndicator","getCurrentTime","currentDateIndex","getCurrentTimeIndicatorIndex","workCells","querySelectorAll","WORK_CELLS_CLASS","changeCurrentTimePosition","currentTimeIndicatorTimer","currentDate","interval","MS_PER_MINUTE","getSeconds","getMilliseconds","window","setTimeout","clearCurrentTimeIndicatorTimer","updateCurrentTimeIndicatorTimer","count","_a","index","getIndexOfDate","resetTime","resIndex","byDate","clearInterval","removeCurrentTimeIndicatorElements","setInterval","queryString","PREVIOUS_TIMELINE_CLASS","CURRENT_TIMELINE_CLASS","CURRENT_TIME_CLASS","timeIndicator","timeIndicator_1","indicator","firstRow","getContentTable","rows","topInPx","rowIndex","Math","floor","cells","timeCellsWrap","timeTrs","isNaN","curTimeWrap","TIMELINE_WRAPPER_CLASS","i","length_1","appendChild","styles","currentDateIndex_1","day","currentTimeEle","innerHTML","getTimeString","HIDE_CHILDS_CLASS","lastElementChild","diffInMinutes","getHours","getMinutes","getWorkCellHeight","slotCount","parseFloat","getBoundingClientRect","toFixed","getTdContent","cntEle","wrapper","templateName","templateId","id","dateHeaderTemplate","viewName","dateHeaderTemplateName","getDateHeaderTemplate","activeView","getTimelineDate","capitalizeFirstWord","getDayName","getDate","childNodes","majorSlotTemplate","getMajorSlotTemplate","minorSlotTemplate","getMinorSlotTemplate","cellTemplate","cellTemplateName","getCellTemplate","refreshHeader","renderHeader","contentReady","renderLayout","setPanel","TABLE_WRAP_CLASS","clsList","TIMESCALE_DISABLE","allowVirtualScrolling","VIRTUAL_SCROLL_CLASS","eventSettings","ignoreWhitespace","IGNORE_WHITESPACE","renderPanel","createTableLayout","OUTER_TABLE_CLASS","setAttribute","renderContent","RESOURCE_TOOLBAR_CONTAINER","renderResourceMobileLayout","tr","dateTd","renderDatesHeader","indentTd","LEFT_INDENT_CLASS","renderLeftIndent","workTd","scrollContainer","SCROLL_CONTAINER_CLASS","renderTimeCells","renderContentArea","add","touchMoveEvent","timesTd","wrap","LEFT_INDENT_WRAP_CLASS","tbl","trEle","rowCount","nth","ntr_1","cloneNode","data_1","showWeekNumber","indexOf","WEEK_NUMBER_CLASS","weekNo","getWeekNumberContent","template","attrs","title","localeObj","getConstant","createTd","renderHeaderIndentTemplate","ntr","appointmentExpandCollapse","ALLDAY_APPOINTMENT_SECTION_CLASS","APPOINTMENT_ROW_EXPAND_CLASS","ICON","DISABLE_CLASS","data","ALLDAY_CELLS_CLASS","container","DATE_HEADER_CONTAINER_CLASS","lastLevel","HEADER_ROW_CLASS","j","createAllDayRow","createColGroup","table","tdData","ALLDAY_ROW_CLASS","td","ntd","toString","wireCellEvents","thead","createEventWrapper","tdEle","addAttributes","ele","isMinMaxDate","DISABLE_DATES","setResourceHeaderContent","wireMouseEvents","elementType","trigger","renderCell","workCellAction","cellMouseDown","cellClick","cellDblClick","TIME_CELLS_WRAP_CLASS","handler","r","first","last","TIME_CELLS_CLASS","TIME_SLOT_CLASS","getTimeSlotRows","CONTENT_WRAP_CLASS","CONTENT_TABLE_CLASS","addAutoHeightClass","renderContentTable","role","tbody","createContentTd","renderContentTableHeader","clsName","getContentTdClass","cellDate","setTime","getDateInMs","RESOURCE_PARENT_CLASS","RESOURCE_GROUP_CELLS_CLASS","isWorkHour","isWorkDay","args_1","scheduleId","tooltipTemplate","ALTERNATE_CELLS_CLASS","levels","len","appointmentWrap","ALLDAY_APPOINTMENT_WRAPPER_CLASS","DAY_WRAPPER_CLASS","innerWrapper","APPOINTMENT_WRAPPER_CLASS","getContentAreaElement","getEndDateFromStartDate","msMajorInterval","msInterval","setMilliseconds","round","MS_PER_DAY","msStartHour","msEndHour","abs","getTimezoneOffset","dt","isDaylightSavingTime","timeOffset","majorTickDivider","row","middle","destroy","contentScrollableEle","scheduleTouchModule","resetValues"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { isNullOrUndefined, extend, EventHandler, formatUnit, Browser } from '@syncfusion/ej2-base';\r\nimport { createElement, remove, addClass, removeClass, append, prepend } from '@syncfusion/ej2-base';\r\nimport { ViewBase } from './view-base';\r\nimport { VerticalEvent } from '../event-renderer/vertical-view';\r\nimport { MonthEvent } from '../event-renderer/month';\r\nimport * as util from '../base/util';\r\nimport * as event from '../base/constant';\r\nimport * as cls from '../base/css-constant';\r\n/**\r\n * vertical view\r\n */\r\nvar VerticalView = /** @class */ (function (_super) {\r\n    __extends(VerticalView, _super);\r\n    function VerticalView(parent) {\r\n        var _this = _super.call(this, parent) || this;\r\n        _this.viewClass = 'e-day-view';\r\n        _this.isInverseTableSelect = true;\r\n        _this.baseCssClass = 'e-vertical-view';\r\n        _this.appointment = null;\r\n        return _this;\r\n    }\r\n    VerticalView.prototype.getModuleName = function () {\r\n        return 'verticalView';\r\n    };\r\n    VerticalView.prototype.addEventListener = function () {\r\n        this.parent.on(event.scrollUiUpdate, this.scrollUiUpdate, this);\r\n        this.parent.on(event.dataReady, this.renderEvents, this);\r\n    };\r\n    VerticalView.prototype.removeEventListener = function () {\r\n        if (this.parent) {\r\n            this.parent.off(event.scrollUiUpdate, this.scrollUiUpdate);\r\n            this.parent.off(event.dataReady, this.renderEvents);\r\n        }\r\n    };\r\n    VerticalView.prototype.renderEvents = function () {\r\n        this.appointment = this.parent.activeViewOptions.timeScale.enable ?\r\n            new VerticalEvent(this.parent) : new MonthEvent(this.parent);\r\n        this.appointment.renderAppointments();\r\n        this.parent.notify(event.eventsLoaded, {});\r\n    };\r\n    VerticalView.prototype.onContentScroll = function (e) {\r\n        this.parent.removeNewEventElement();\r\n        var target = e.target;\r\n        this.parent.notify(event.virtualScroll, e);\r\n        this.scrollLeftPanel(target);\r\n        this.scrollTopPanel(target);\r\n        if (!this.parent.isAdaptive) {\r\n            this.parent.uiStateValues.top = target.scrollTop;\r\n        }\r\n        this.parent.uiStateValues.left = target.scrollLeft;\r\n        if (!isNullOrUndefined(this.parent.quickPopup)) {\r\n            this.parent.quickPopup.quickPopupHide();\r\n        }\r\n        this.setPersistence();\r\n    };\r\n    VerticalView.prototype.onAdaptiveMove = function (e) {\r\n        if (this.parent.uiStateValues.action) {\r\n            e.preventDefault();\r\n        }\r\n    };\r\n    VerticalView.prototype.onAdaptiveScroll = function (e) {\r\n        if (this.parent && !this.parent.isDestroyed) {\r\n            this.parent.removeNewEventElement();\r\n            this.parent.uiStateValues.top = e.target.scrollTop;\r\n        }\r\n    };\r\n    VerticalView.prototype.scrollLeftPanel = function (target) {\r\n        var leftPanel = this.getLeftPanelElement();\r\n        if (!isNullOrUndefined(leftPanel)) {\r\n            leftPanel.scrollTop = target.scrollTop;\r\n        }\r\n    };\r\n    VerticalView.prototype.scrollUiUpdate = function (args) {\r\n        if (!this.parent) {\r\n            return;\r\n        }\r\n        var dateHeader = this.parent.element.querySelector('.' + cls.DATE_HEADER_WRAP_CLASS);\r\n        var headerBarHeight = this.getHeaderBarHeight();\r\n        var timeCells = this.getLeftPanelElement();\r\n        var content = this.getScrollableElement();\r\n        var header = this.getDatesHeaderElement();\r\n        var scrollerHeight = this.parent.element.offsetHeight - headerBarHeight - header.offsetHeight;\r\n        this.setColWidth(content);\r\n        this.setContentHeight(content, timeCells, scrollerHeight);\r\n        var scrollBarWidth = util.getScrollBarWidth();\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        header.firstElementChild.style[args.cssProperties.rtlBorder] = '';\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        header.style[args.cssProperties.rtlPadding] = '';\r\n        var isDateHeaderScroll = this.parent.enableAllDayScroll ? !((content.offsetWidth - content.clientWidth) <=\r\n            (dateHeader.offsetWidth - dateHeader.clientWidth) && dateHeader.classList.contains('e-all-day-scroll')) : true;\r\n        if (content.offsetWidth - content.clientWidth > 0 && isDateHeaderScroll) {\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            header.firstElementChild.style[args.cssProperties.border] = scrollBarWidth > 0 ? '1px' : '0px';\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            header.style[args.cssProperties.padding] = scrollBarWidth > 0 ? scrollBarWidth - 1 + 'px' : '0px';\r\n        }\r\n        else {\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            header.firstElementChild.style[args.cssProperties.border] = '';\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            header.style[args.cssProperties.padding] = '';\r\n        }\r\n        if (!args.isPreventScrollUpdate) {\r\n            if (this.parent.uiStateValues.isInitial) {\r\n                this.scrollToWorkHour();\r\n                this.parent.uiStateValues.isInitial = false;\r\n            }\r\n            else {\r\n                if (timeCells) {\r\n                    timeCells.scrollTop = this.parent.uiStateValues.top;\r\n                }\r\n                content.scrollTop = this.parent.uiStateValues.top;\r\n                content.scrollLeft = this.parent.uiStateValues.left;\r\n            }\r\n        }\r\n        if (this.parent.activeViewOptions.timeScale.enable) {\r\n            this.highlightCurrentTime();\r\n        }\r\n        this.retainScrollPosition();\r\n    };\r\n    VerticalView.prototype.setContentHeight = function (element, leftPanelElement, height) {\r\n        if (this.parent.isAdaptive && !this.isTimelineView()) {\r\n            element.style.height = (this.parent.height === 'auto') ? 'auto' : formatUnit(height);\r\n        }\r\n        else {\r\n            if (!isNullOrUndefined(leftPanelElement)) {\r\n                leftPanelElement.style.height = (this.parent.height === 'auto') ? 'auto'\r\n                    : formatUnit(height - this.getScrollXIndent(element));\r\n            }\r\n            element.style.height = (this.parent.height === 'auto') ? 'auto' : formatUnit(height);\r\n        }\r\n    };\r\n    VerticalView.prototype.scrollToWorkHour = function () {\r\n        if (this.parent.workHours.highlight) {\r\n            var firstWorkHourCell = this.element.querySelector('.' + cls.WORK_HOURS_CLASS);\r\n            if (firstWorkHourCell) {\r\n                this.getScrollableElement().scrollTop = firstWorkHourCell.offsetTop;\r\n                this.parent.uiStateValues.top = firstWorkHourCell.offsetTop;\r\n                this.parent.uiStateValues.left = 0;\r\n            }\r\n        }\r\n    };\r\n    VerticalView.prototype.scrollToHour = function (hour, scrollDate) {\r\n        var date = this.parent.getStartEndTime(hour);\r\n        if (isNullOrUndefined(date) || !isNullOrUndefined(scrollDate)) {\r\n            return;\r\n        }\r\n        this.getScrollableElement().scrollTop = this.getTopFromDateTime(date);\r\n    };\r\n    VerticalView.prototype.generateColumnLevels = function () {\r\n        var level = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);\r\n        var columnLevels = [];\r\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\r\n            columnLevels = this.parent.resourceBase.generateResourceLevels(level);\r\n            if (this.parent.uiStateValues.isGroupAdaptive && this.parent.resourceBase.lastResourceLevel.length > 0) {\r\n                var resourceLevel = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\r\n                var resStartHour = resourceLevel.resourceData[resourceLevel.resource.startHourField];\r\n                var resEndHour = resourceLevel.resourceData[resourceLevel.resource.endHourField];\r\n                var dateSlots = this.getDateSlots(resourceLevel.renderDates, resourceLevel.workDays, resStartHour, resEndHour);\r\n                columnLevels = [dateSlots];\r\n            }\r\n        }\r\n        else {\r\n            columnLevels.push(level);\r\n        }\r\n        this.colLevels = columnLevels;\r\n        return columnLevels;\r\n    };\r\n    // eslint-disable-next-line max-len\r\n    VerticalView.prototype.getDateSlots = function (renderDates, workDays, workStartHour, workEndHour) {\r\n        if (workStartHour === void 0) { workStartHour = this.parent.workHours.start; }\r\n        if (workEndHour === void 0) { workEndHour = this.parent.workHours.end; }\r\n        var dateCol = [];\r\n        var start = this.parent.getStartEndTime(workStartHour);\r\n        var end = this.parent.getStartEndTime(workEndHour);\r\n        for (var _i = 0, renderDates_1 = renderDates; _i < renderDates_1.length; _i++) {\r\n            var col = renderDates_1[_i];\r\n            var classList = [cls.HEADER_CELLS_CLASS];\r\n            if (this.isCurrentDate(col)) {\r\n                classList.push(cls.CURRENT_DAY_CLASS);\r\n            }\r\n            dateCol.push({\r\n                date: col, type: 'dateHeader', className: classList, colSpan: 1,\r\n                workDays: workDays, startHour: new Date(+start), endHour: new Date(+end)\r\n            });\r\n        }\r\n        return dateCol;\r\n    };\r\n    VerticalView.prototype.isWorkHourRange = function (date) {\r\n        return (this.getStartHour().getTime() <= date.getTime()) && (this.getEndHour().getTime() >= date.getTime());\r\n    };\r\n    VerticalView.prototype.highlightCurrentTime = function () {\r\n        var _this = this;\r\n        if (this.parent.activeViewOptions.headerRows.length > 0 &&\r\n            this.parent.activeViewOptions.headerRows.slice(-1)[0].option !== 'Hour') {\r\n            return;\r\n        }\r\n        if (this.parent.showTimeIndicator && this.isWorkHourRange(this.parent.getCurrentTime())) {\r\n            var currentDateIndex = this.getCurrentTimeIndicatorIndex();\r\n            if (currentDateIndex.length > 0) {\r\n                var workCells = [].slice.call(this.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS));\r\n                if (workCells.length > 0) {\r\n                    this.changeCurrentTimePosition();\r\n                }\r\n                if (isNullOrUndefined(this.currentTimeIndicatorTimer)) {\r\n                    var currentDate = this.parent.getCurrentTime();\r\n                    var interval = util.MS_PER_MINUTE - ((currentDate.getSeconds() * 1000) + currentDate.getMilliseconds());\r\n                    if (interval <= (util.MS_PER_MINUTE - 1000)) {\r\n                        window.setTimeout(function () {\r\n                            if (!isNullOrUndefined(_this.currentTimeIndicatorTimer)) {\r\n                                _this.clearCurrentTimeIndicatorTimer();\r\n                                _this.changeCurrentTimePosition();\r\n                                _this.updateCurrentTimeIndicatorTimer();\r\n                            }\r\n                        }, interval);\r\n                    }\r\n                    this.updateCurrentTimeIndicatorTimer();\r\n                }\r\n            }\r\n            else {\r\n                this.clearCurrentTimeIndicatorTimer();\r\n            }\r\n        }\r\n        else {\r\n            this.clearCurrentTimeIndicatorTimer();\r\n        }\r\n    };\r\n    VerticalView.prototype.getCurrentTimeIndicatorIndex = function () {\r\n        var currentDateIndex = [];\r\n        if (!isNullOrUndefined(this.parent.resourceBase) && (this.parent.activeViewOptions.group.resources.length > 0) &&\r\n            !this.parent.uiStateValues.isGroupAdaptive) {\r\n            var count = 0;\r\n            for (var _i = 0, _a = this.parent.resourceBase.lastResourceLevel; _i < _a.length; _i++) {\r\n                var resource = _a[_i];\r\n                var index = this.parent.getIndexOfDate(resource.renderDates, util.resetTime(this.parent.getCurrentTime()));\r\n                if (index >= 0) {\r\n                    var resIndex = this.parent.activeViewOptions.group.byDate ?\r\n                        (this.parent.resourceBase.lastResourceLevel.length * index) + count : count + index;\r\n                    currentDateIndex.push(resIndex);\r\n                }\r\n                count += this.parent.activeViewOptions.group.byDate ? 1 : resource.renderDates.length;\r\n            }\r\n        }\r\n        else {\r\n            var renderDates = (this.parent.uiStateValues.isGroupAdaptive && this.parent.resourceBase.lastResourceLevel.length > 0)\r\n                ? this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex].renderDates : this.renderDates;\r\n            var index = this.parent.getIndexOfDate(renderDates, util.resetTime(this.parent.getCurrentTime()));\r\n            if (index >= 0) {\r\n                currentDateIndex.push(index);\r\n            }\r\n        }\r\n        return currentDateIndex;\r\n    };\r\n    VerticalView.prototype.clearCurrentTimeIndicatorTimer = function () {\r\n        if (!isNullOrUndefined(this.currentTimeIndicatorTimer)) {\r\n            window.clearInterval(this.currentTimeIndicatorTimer);\r\n            this.currentTimeIndicatorTimer = null;\r\n            this.removeCurrentTimeIndicatorElements();\r\n        }\r\n    };\r\n    VerticalView.prototype.updateCurrentTimeIndicatorTimer = function () {\r\n        var _this = this;\r\n        this.currentTimeIndicatorTimer = window.setInterval(function () { _this.changeCurrentTimePosition(); }, util.MS_PER_MINUTE);\r\n    };\r\n    VerticalView.prototype.removeCurrentTimeIndicatorElements = function () {\r\n        var queryString = '.' + cls.PREVIOUS_TIMELINE_CLASS + ',.' + cls.CURRENT_TIMELINE_CLASS + ',.' + cls.CURRENT_TIME_CLASS;\r\n        var timeIndicator = [].slice.call(this.element.querySelectorAll(queryString));\r\n        for (var _i = 0, timeIndicator_1 = timeIndicator; _i < timeIndicator_1.length; _i++) {\r\n            var indicator = timeIndicator_1[_i];\r\n            remove(indicator);\r\n        }\r\n    };\r\n    VerticalView.prototype.changeCurrentTimePosition = function () {\r\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\r\n            return;\r\n        }\r\n        this.removeCurrentTimeIndicatorElements();\r\n        var currentDateIndex = this.getCurrentTimeIndicatorIndex();\r\n        var firstRow = this.parent.getContentTable().rows[0];\r\n        var top = this.getTopFromDateTime(this.parent.getCurrentTime());\r\n        var topInPx = formatUnit(top);\r\n        var rowIndex = Math.floor(top / firstRow.cells[0].offsetHeight);\r\n        var timeCellsWrap = this.getLeftPanelElement();\r\n        var timeTrs = [].slice.call(timeCellsWrap.querySelectorAll('tr'));\r\n        if (isNullOrUndefined(rowIndex) || isNaN(rowIndex) || rowIndex === timeTrs.length) {\r\n            return;\r\n        }\r\n        var curTimeWrap = [].slice.call(this.element.querySelectorAll('.' + cls.TIMELINE_WRAPPER_CLASS));\r\n        for (var i = 0, length_1 = currentDateIndex[0]; i < length_1; i++) {\r\n            curTimeWrap[i].appendChild(createElement('div', { className: cls.PREVIOUS_TIMELINE_CLASS, styles: 'top:' + topInPx }));\r\n        }\r\n        for (var _i = 0, currentDateIndex_1 = currentDateIndex; _i < currentDateIndex_1.length; _i++) {\r\n            var day = currentDateIndex_1[_i];\r\n            curTimeWrap[day].appendChild(createElement('div', { className: cls.CURRENT_TIMELINE_CLASS, styles: 'top:' + topInPx }));\r\n        }\r\n        var currentTimeEle = createElement('div', {\r\n            innerHTML: this.parent.getTimeString(this.parent.getCurrentTime()),\r\n            className: cls.CURRENT_TIME_CLASS,\r\n            styles: 'top:' + topInPx\r\n        });\r\n        if (rowIndex <= timeTrs.length) {\r\n            removeClass(timeCellsWrap.querySelectorAll('.' + cls.HIDE_CHILDS_CLASS), cls.HIDE_CHILDS_CLASS);\r\n            if (timeTrs[rowIndex]) {\r\n                addClass([timeTrs[rowIndex].lastElementChild], cls.HIDE_CHILDS_CLASS);\r\n            }\r\n            prepend([currentTimeEle], timeCellsWrap);\r\n            currentTimeEle.style.top = formatUnit(currentTimeEle.offsetTop - (currentTimeEle.offsetHeight / 2));\r\n        }\r\n    };\r\n    VerticalView.prototype.getTopFromDateTime = function (date) {\r\n        var startHour = this.getStartHour();\r\n        var diffInMinutes = ((date.getHours() - startHour.getHours()) * 60) + (date.getMinutes() - startHour.getMinutes());\r\n        return (diffInMinutes * this.getWorkCellHeight() * this.parent.activeViewOptions.timeScale.slotCount) /\r\n            this.parent.activeViewOptions.timeScale.interval;\r\n    };\r\n    VerticalView.prototype.getWorkCellHeight = function () {\r\n        return parseFloat(this.element.querySelector('.' + cls.WORK_CELLS_CLASS).getBoundingClientRect().height.toFixed(2));\r\n    };\r\n    VerticalView.prototype.getTdContent = function (date, type, groupIndex) {\r\n        var cntEle;\r\n        var wrapper = createElement('div');\r\n        var templateName = '';\r\n        var templateId = this.parent.element.id + '_';\r\n        switch (type) {\r\n            case 'dateHeader':\r\n                if (this.parent.activeViewOptions.dateHeaderTemplate) {\r\n                    templateName = 'dateHeaderTemplate';\r\n                    var args = { date: date, type: type };\r\n                    var viewName = this.parent.activeViewOptions.dateHeaderTemplateName;\r\n                    cntEle = [].slice.call(this.parent.getDateHeaderTemplate()(args, this.parent, templateName, templateId + viewName + templateName, false));\r\n                }\r\n                else {\r\n                    wrapper.innerHTML = this.parent.activeView.isTimelineView() ?\r\n                        \"<span class=\\\"e-header-date e-navigate\\\">\" + this.getTimelineDate(date) + \"</span>\" :\r\n                        \"<div class=\\\"e-header-day\\\">\" + util.capitalizeFirstWord(this.getDayName(date), 'single') + \"</div>\" +\r\n                            (\"<div class=\\\"e-header-date e-navigate\\\" role=\\\"link\\\">\" + this.getDate(date) + \"</div>\");\r\n                    cntEle = [].slice.call(wrapper.childNodes);\r\n                }\r\n                break;\r\n            case 'majorSlot':\r\n                if (this.parent.activeViewOptions.timeScale.majorSlotTemplate) {\r\n                    templateName = 'majorSlotTemplate';\r\n                    var args = { date: date, type: type };\r\n                    cntEle = [].slice.call(this.parent.getMajorSlotTemplate()(args, this.parent, templateName, templateId + templateName, false));\r\n                }\r\n                else {\r\n                    wrapper.innerHTML = \"<span>\" + this.getTime(date) + \"</span>\";\r\n                    cntEle = [].slice.call(wrapper.childNodes);\r\n                }\r\n                break;\r\n            case 'minorSlot':\r\n                if (this.parent.activeViewOptions.timeScale.minorSlotTemplate) {\r\n                    templateName = 'minorSlotTemplate';\r\n                    var args = { date: date, type: type };\r\n                    cntEle = [].slice.call(this.parent.getMinorSlotTemplate()(args, this.parent, templateName, templateId + templateName, false));\r\n                }\r\n                else {\r\n                    cntEle = [].slice.call(wrapper.childNodes);\r\n                }\r\n                break;\r\n            case 'alldayCells':\r\n                if (this.parent.activeViewOptions.cellTemplate) {\r\n                    var viewName = this.parent.activeViewOptions.cellTemplateName;\r\n                    templateName = 'cellTemplate';\r\n                    var args = { date: date, type: type, groupIndex: groupIndex };\r\n                    cntEle = [].slice.call(this.parent.getCellTemplate()(args, this.parent, templateName, templateId + viewName + templateName, false));\r\n                }\r\n                break;\r\n        }\r\n        return cntEle;\r\n    };\r\n    VerticalView.prototype.refreshHeader = function () {\r\n        remove(this.element.querySelector('tbody tr'));\r\n        this.renderHeader();\r\n        this.parent.notify(event.contentReady, {});\r\n    };\r\n    VerticalView.prototype.renderLayout = function (type) {\r\n        this.setPanel(createElement('div', { className: cls.TABLE_WRAP_CLASS }));\r\n        var clsList = [this.baseCssClass, this.viewClass];\r\n        clsList.push(type);\r\n        if (this.parent.activeViewOptions.group.byDate) {\r\n            clsList.push('e-by-date');\r\n        }\r\n        if (!this.parent.activeViewOptions.timeScale.enable) {\r\n            addClass([this.element], [cls.TIMESCALE_DISABLE, this.viewClass]);\r\n        }\r\n        if (this.parent.activeViewOptions.allowVirtualScrolling) {\r\n            clsList.push(cls.VIRTUAL_SCROLL_CLASS);\r\n        }\r\n        if (this.parent.eventSettings.ignoreWhitespace) {\r\n            clsList.push(cls.IGNORE_WHITESPACE);\r\n        }\r\n        this.renderPanel(type);\r\n        addClass([this.element], clsList);\r\n        this.element.appendChild(this.createTableLayout(cls.OUTER_TABLE_CLASS));\r\n        this.element.querySelector('table').setAttribute('role', 'presentation');\r\n        this.colLevels = this.generateColumnLevels();\r\n        this.renderHeader();\r\n        this.renderContent();\r\n        if (this.parent.uiStateValues.isGroupAdaptive && !this.parent.element.querySelector('.' + cls.RESOURCE_TOOLBAR_CONTAINER)) {\r\n            this.renderResourceMobileLayout();\r\n        }\r\n        this.parent.notify(event.contentReady, {});\r\n    };\r\n    VerticalView.prototype.renderHeader = function () {\r\n        var tr = createElement('tr');\r\n        var dateTd = createElement('td');\r\n        dateTd.appendChild(this.renderDatesHeader());\r\n        if (this.parent.activeViewOptions.timeScale.enable) {\r\n            var indentTd = createElement('td', { className: cls.LEFT_INDENT_CLASS });\r\n            indentTd.appendChild(this.renderLeftIndent());\r\n            tr.appendChild(indentTd);\r\n        }\r\n        tr.appendChild(dateTd);\r\n        prepend([tr], this.element.querySelector('tbody'));\r\n    };\r\n    VerticalView.prototype.renderContent = function () {\r\n        var tr = createElement('tr');\r\n        var workTd = createElement('td');\r\n        if (this.parent.isAdaptive) {\r\n            workTd.setAttribute('colspan', (this.parent.activeViewOptions.timeScale.enable ? '2' : '1'));\r\n            var scrollContainer = createElement('div', { className: cls.SCROLL_CONTAINER_CLASS });\r\n            if (this.parent.activeViewOptions.timeScale.enable) {\r\n                scrollContainer.appendChild(this.renderTimeCells());\r\n            }\r\n            scrollContainer.appendChild(this.renderContentArea());\r\n            workTd.appendChild(scrollContainer);\r\n            EventHandler.add(scrollContainer, 'scroll', this.onAdaptiveScroll, this);\r\n            EventHandler.add(scrollContainer, Browser.touchMoveEvent, this.onAdaptiveMove, this);\r\n            tr.appendChild(workTd);\r\n        }\r\n        else {\r\n            workTd.appendChild(this.renderContentArea());\r\n            if (this.parent.activeViewOptions.timeScale.enable) {\r\n                var timesTd = createElement('td');\r\n                timesTd.appendChild(this.renderTimeCells());\r\n                tr.appendChild(timesTd);\r\n            }\r\n            tr.appendChild(workTd);\r\n        }\r\n        this.element.querySelector('tbody').appendChild(tr);\r\n    };\r\n    VerticalView.prototype.renderLeftIndent = function () {\r\n        var wrap = createElement('div', { className: cls.LEFT_INDENT_WRAP_CLASS });\r\n        var tbl = this.createTableLayout();\r\n        var trEle = createElement('tr');\r\n        var rowCount = this.colLevels.length;\r\n        var nth;\r\n        for (var i = 0; i < rowCount; i++) {\r\n            var ntr_1 = trEle.cloneNode();\r\n            var data_1 = { className: [(this.colLevels[i][0] && this.colLevels[i][0].className[0])], type: 'emptyCells' };\r\n            if (this.parent.activeViewOptions.showWeekNumber && data_1.className.indexOf(cls.HEADER_CELLS_CLASS) !== -1) {\r\n                data_1.className.push(cls.WEEK_NUMBER_CLASS);\r\n                var weekNo = this.parent.getWeekNumberContent(this.renderDates);\r\n                data_1.template = [createElement('span', {\r\n                        innerHTML: '' + weekNo,\r\n                        attrs: { title: this.parent.localeObj.getConstant('week') + ' ' + weekNo }\r\n                    })];\r\n            }\r\n            nth = this.createTd(data_1);\r\n            this.parent.renderHeaderIndentTemplate(data_1, nth);\r\n            ntr_1.appendChild(nth);\r\n            tbl.querySelector('tbody').appendChild(ntr_1);\r\n        }\r\n        var ntr = trEle.cloneNode();\r\n        var appointmentExpandCollapse = createElement('div', {\r\n            attrs: {\r\n                'tabindex': '0', 'role': 'list',\r\n                title: this.parent.localeObj.getConstant('expandAllDaySection'), 'aria-disabled': 'false', 'aria-label': 'Expand section'\r\n            },\r\n            className: cls.ALLDAY_APPOINTMENT_SECTION_CLASS + ' ' + cls.APPOINTMENT_ROW_EXPAND_CLASS + ' ' +\r\n                cls.ICON + ' ' + cls.DISABLE_CLASS\r\n        });\r\n        var data = { className: [cls.ALLDAY_CELLS_CLASS], type: 'emptyCells' };\r\n        nth = this.createTd(data);\r\n        nth.appendChild(appointmentExpandCollapse);\r\n        this.parent.renderHeaderIndentTemplate(data, nth);\r\n        ntr.appendChild(nth);\r\n        tbl.querySelector('tbody').appendChild(ntr);\r\n        wrap.appendChild(tbl);\r\n        return wrap;\r\n    };\r\n    VerticalView.prototype.renderDatesHeader = function () {\r\n        var container = createElement('div', { className: cls.DATE_HEADER_CONTAINER_CLASS });\r\n        var wrap = createElement('div', { className: cls.DATE_HEADER_WRAP_CLASS });\r\n        container.appendChild(wrap);\r\n        var tbl = this.createTableLayout();\r\n        var trEle = createElement('tr');\r\n        var rowCount = this.colLevels.length;\r\n        var lastLevel = this.colLevels[rowCount - 1];\r\n        for (var i = 0; i < rowCount; i++) {\r\n            var ntr = trEle.cloneNode();\r\n            addClass([ntr], cls.HEADER_ROW_CLASS);\r\n            var level = this.colLevels[i];\r\n            for (var j = 0; j < level.length; j++) {\r\n                ntr.appendChild(this.createTd(level[j]));\r\n            }\r\n            tbl.querySelector('tbody').appendChild(ntr);\r\n        }\r\n        this.createAllDayRow(tbl, lastLevel);\r\n        this.createColGroup(tbl, lastLevel);\r\n        wrap.appendChild(tbl);\r\n        return container;\r\n    };\r\n    VerticalView.prototype.createAllDayRow = function (table, tdData) {\r\n        var ntr = createElement('tr');\r\n        addClass([ntr], cls.ALLDAY_ROW_CLASS);\r\n        for (var j = 0; j < tdData.length; j++) {\r\n            var td = extend({}, tdData[j]);\r\n            td.className = [cls.ALLDAY_CELLS_CLASS];\r\n            td.type = 'alldayCells';\r\n            var ntd = this.createTd(td);\r\n            ntd.setAttribute('data-date', td.date.getTime().toString());\r\n            if (!isNullOrUndefined(td.groupIndex)) {\r\n                ntd.setAttribute('data-group-index', '' + td.groupIndex);\r\n            }\r\n            else if (this.parent.uiStateValues.isGroupAdaptive) {\r\n                ntd.setAttribute('data-group-index', '' + this.parent.uiStateValues.groupIndex);\r\n            }\r\n            this.wireCellEvents(ntd);\r\n            ntr.appendChild(ntd);\r\n        }\r\n        table.querySelector('tbody').appendChild(ntr);\r\n        var thead = createElement('thead');\r\n        thead.appendChild(this.createEventWrapper('allDay'));\r\n        prepend([thead], table);\r\n    };\r\n    VerticalView.prototype.createTd = function (td) {\r\n        var tdEle = createElement('td');\r\n        this.addAttributes(td, tdEle);\r\n        if (td.date && td.type) {\r\n            var ele = this.getTdContent(td.date, td.type, td.groupIndex);\r\n            if (ele && ele.length) {\r\n                append(ele, tdEle);\r\n            }\r\n        }\r\n        if (!this.parent.isMinMaxDate(util.resetTime(new Date('' + td.date)))) {\r\n            addClass([tdEle], cls.DISABLE_DATES);\r\n        }\r\n        if (td.type === 'resourceHeader') {\r\n            this.setResourceHeaderContent(tdEle, td);\r\n        }\r\n        if (td.type === 'dateHeader' && td.className.indexOf(cls.HEADER_CELLS_CLASS) >= 0) {\r\n            tdEle.setAttribute('data-date', td.date.getTime().toString());\r\n            if (!isNullOrUndefined(td.groupIndex)) {\r\n                tdEle.setAttribute('data-group-index', '' + td.groupIndex);\r\n            }\r\n            this.wireMouseEvents(tdEle);\r\n        }\r\n        var args = { elementType: td.type, element: tdEle, date: td.date, groupIndex: td.groupIndex };\r\n        this.parent.trigger(event.renderCell, args);\r\n        return tdEle;\r\n    };\r\n    VerticalView.prototype.wireCellEvents = function (element) {\r\n        EventHandler.add(element, 'mousedown', this.parent.workCellAction.cellMouseDown, this.parent.workCellAction);\r\n        this.wireMouseEvents(element);\r\n    };\r\n    VerticalView.prototype.wireMouseEvents = function (element) {\r\n        EventHandler.add(element, 'click', this.parent.workCellAction.cellClick, this.parent.workCellAction);\r\n        if (!this.parent.isAdaptive) {\r\n            EventHandler.add(element, 'dblclick', this.parent.workCellAction.cellDblClick, this.parent.workCellAction);\r\n        }\r\n    };\r\n    VerticalView.prototype.renderTimeCells = function () {\r\n        var _this = this;\r\n        var wrap = createElement('div', { className: cls.TIME_CELLS_WRAP_CLASS });\r\n        var tbl = this.createTableLayout();\r\n        var trEle = createElement('tr');\r\n        var handler = function (r) {\r\n            r.type = r.first ? 'majorSlot' : 'minorSlot';\r\n            r.className = r.last ? [cls.TIME_CELLS_CLASS, cls.TIME_SLOT_CLASS] : [cls.TIME_SLOT_CLASS];\r\n            var ntr = trEle.cloneNode();\r\n            var data = { date: r.date, type: r.type, className: r.className };\r\n            ntr.appendChild(_this.createTd(data));\r\n            tbl.querySelector('tbody').appendChild(ntr);\r\n            return r;\r\n        };\r\n        this.getTimeSlotRows(handler);\r\n        wrap.appendChild(tbl);\r\n        return wrap;\r\n    };\r\n    VerticalView.prototype.renderContentArea = function () {\r\n        var wrap = createElement('div', { className: cls.CONTENT_WRAP_CLASS });\r\n        var tbl = this.createTableLayout(cls.CONTENT_TABLE_CLASS);\r\n        this.addAutoHeightClass(tbl);\r\n        this.renderContentTable(tbl);\r\n        this.createColGroup(tbl, this.colLevels.slice(-1)[0]);\r\n        wrap.appendChild(tbl);\r\n        this.wireCellEvents(tbl.querySelector('tbody'));\r\n        EventHandler.add(wrap, 'scroll', this.onContentScroll, this);\r\n        EventHandler.add(wrap, Browser.touchMoveEvent, this.onAdaptiveMove, this);\r\n        return wrap;\r\n    };\r\n    VerticalView.prototype.renderContentTable = function (table) {\r\n        var _this = this;\r\n        var tr = createElement('tr', { attrs: { role: 'row' } });\r\n        var td = createElement('td', { attrs: { role: 'gridcell', 'aria-selected': 'false' } });\r\n        var tbody = table.querySelector('tbody');\r\n        var handler = function (r) {\r\n            var ntr = tr.cloneNode();\r\n            for (var _i = 0, _a = _this.colLevels[_this.colLevels.length - 1]; _i < _a.length; _i++) {\r\n                var tdData = _a[_i];\r\n                var ntd = _this.createContentTd(tdData, r, td);\r\n                ntr.appendChild(ntd);\r\n            }\r\n            tbody.appendChild(ntr);\r\n            return r;\r\n        };\r\n        this.getTimeSlotRows(handler);\r\n        this.renderContentTableHeader(table);\r\n    };\r\n    VerticalView.prototype.createContentTd = function (tdData, r, td) {\r\n        var ntd = td.cloneNode();\r\n        if (tdData.colSpan) {\r\n            ntd.setAttribute('colspan', tdData.colSpan.toString());\r\n        }\r\n        var clsName = this.getContentTdClass(r);\r\n        var cellDate = util.resetTime(tdData.date);\r\n        if (!this.parent.isMinMaxDate(cellDate)) {\r\n            clsName.push(cls.DISABLE_DATES);\r\n        }\r\n        util.setTime(cellDate, util.getDateInMs(r.date));\r\n        var type = 'workCells';\r\n        if (tdData.className.indexOf(cls.RESOURCE_PARENT_CLASS) !== -1) {\r\n            clsName.push(cls.RESOURCE_GROUP_CELLS_CLASS);\r\n            type = 'resourceGroupCells';\r\n        }\r\n        if (this.parent.workHours.highlight && ((this.parent.activeViewOptions.timeScale.enable &&\r\n            this.isWorkHour(cellDate, tdData.startHour, tdData.endHour, tdData.workDays)) ||\r\n            (!this.parent.activeViewOptions.timeScale.enable && this.isWorkDay(cellDate, tdData.workDays)))) {\r\n            clsName.push(cls.WORK_HOURS_CLASS);\r\n        }\r\n        addClass([ntd], clsName);\r\n        if (this.parent.activeViewOptions.cellTemplate) {\r\n            var args_1 = { date: cellDate, type: type, groupIndex: tdData.groupIndex };\r\n            var scheduleId = this.parent.element.id + '_';\r\n            var viewName = this.parent.activeViewOptions.cellTemplateName;\r\n            var templateId = scheduleId + viewName + 'cellTemplate';\r\n            var tooltipTemplate = [].slice.call(this.parent.getCellTemplate()(args_1, this.parent, 'cellTemplate', templateId, false));\r\n            append(tooltipTemplate, ntd);\r\n        }\r\n        ntd.setAttribute('data-date', cellDate.getTime().toString());\r\n        if (!isNullOrUndefined(tdData.groupIndex) || this.parent.uiStateValues.isGroupAdaptive) {\r\n            var groupIndex = this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex :\r\n                tdData.groupIndex;\r\n            ntd.setAttribute('data-group-index', '' + groupIndex);\r\n        }\r\n        var args = { elementType: type, element: ntd, date: cellDate, groupIndex: tdData.groupIndex };\r\n        this.parent.trigger(event.renderCell, args);\r\n        return ntd;\r\n    };\r\n    VerticalView.prototype.getContentTdClass = function (r) {\r\n        return r.last ? [cls.WORK_CELLS_CLASS] : [cls.WORK_CELLS_CLASS, cls.ALTERNATE_CELLS_CLASS];\r\n    };\r\n    VerticalView.prototype.renderContentTableHeader = function (table) {\r\n        var thead = createElement('thead');\r\n        thead.appendChild(this.createEventWrapper());\r\n        if (this.parent.activeViewOptions.timeScale.enable) {\r\n            thead.appendChild(this.createEventWrapper('timeIndicator'));\r\n        }\r\n        prepend([thead], table);\r\n    };\r\n    VerticalView.prototype.createEventWrapper = function (type) {\r\n        if (type === void 0) { type = ''; }\r\n        var tr = createElement('tr');\r\n        var levels = this.colLevels.slice(-1)[0];\r\n        for (var i = 0, len = levels.length; i < len; i++) {\r\n            var col = levels[i];\r\n            var appointmentWrap = createElement('td', {\r\n                className: (type === 'allDay') ? cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS : (type === 'timeIndicator') ?\r\n                    cls.TIMELINE_WRAPPER_CLASS : cls.DAY_WRAPPER_CLASS, attrs: { 'data-date': col.date.getTime().toString() }\r\n            });\r\n            if (!isNullOrUndefined(col.groupIndex)) {\r\n                appointmentWrap.setAttribute('data-group-index', col.groupIndex.toString());\r\n            }\r\n            if (type === '') {\r\n                var innerWrapper = createElement('div', {\r\n                    id: cls.APPOINTMENT_WRAPPER_CLASS + '-' + i.toString(),\r\n                    className: cls.APPOINTMENT_WRAPPER_CLASS\r\n                });\r\n                appointmentWrap.appendChild(innerWrapper);\r\n            }\r\n            tr.appendChild(appointmentWrap);\r\n        }\r\n        return tr;\r\n    };\r\n    VerticalView.prototype.getScrollableElement = function () {\r\n        if (this.parent.isAdaptive && !this.isTimelineView()) {\r\n            return this.element.querySelector('.' + cls.SCROLL_CONTAINER_CLASS);\r\n        }\r\n        else {\r\n            return this.getContentAreaElement();\r\n        }\r\n    };\r\n    VerticalView.prototype.getLeftPanelElement = function () {\r\n        return this.element.querySelector('.' + cls.TIME_CELLS_WRAP_CLASS);\r\n    };\r\n    VerticalView.prototype.getEndDateFromStartDate = function (start) {\r\n        var msMajorInterval = this.parent.activeViewOptions.timeScale.interval * util.MS_PER_MINUTE;\r\n        var msInterval = msMajorInterval / this.parent.activeViewOptions.timeScale.slotCount;\r\n        var end = new Date(start.getTime());\r\n        end.setMilliseconds(end.getMilliseconds() + msInterval);\r\n        return end;\r\n    };\r\n    VerticalView.prototype.getTimeSlotRows = function (handler) {\r\n        var rows = [];\r\n        var startHour = this.getStartHour();\r\n        var endHour = this.getEndHour();\r\n        var msMajorInterval = this.parent.activeViewOptions.timeScale.interval * util.MS_PER_MINUTE;\r\n        var msInterval = msMajorInterval / this.parent.activeViewOptions.timeScale.slotCount;\r\n        var length = Math.round(util.MS_PER_DAY / msInterval);\r\n        var msStartHour = startHour.getTime();\r\n        var msEndHour = endHour.getTime();\r\n        if (msStartHour !== msEndHour) {\r\n            length = (Math.abs(msEndHour - msStartHour) / msInterval) - ((new Date(msEndHour).getTimezoneOffset()\r\n                - new Date(msStartHour).getTimezoneOffset()) / (60 / this.parent.activeViewOptions.timeScale.slotCount));\r\n        }\r\n        if (!this.parent.activeViewOptions.timeScale.enable) {\r\n            length = 1;\r\n        }\r\n        var start = this.parent.getStartEndTime(this.parent.workHours.start);\r\n        var end = this.parent.getStartEndTime(this.parent.workHours.end);\r\n        for (var i = 0; i < length; i++) {\r\n            var dt = new Date(msStartHour + (msInterval * i));\r\n            if (util.isDaylightSavingTime(dt) || new Date(msStartHour).getTimezoneOffset() !== dt.getTimezoneOffset()) {\r\n                var timeOffset = new Date(msStartHour).getTimezoneOffset() - dt.getTimezoneOffset();\r\n                dt = new Date(dt.getTime() - (1000 * 60 * timeOffset));\r\n            }\r\n            var majorTickDivider = i % (msMajorInterval / msInterval);\r\n            var row = {\r\n                date: new Date('' + dt),\r\n                startHour: start,\r\n                endHour: end,\r\n                first: (majorTickDivider === 0),\r\n                middle: (majorTickDivider < this.parent.activeViewOptions.timeScale.slotCount - 1),\r\n                last: (majorTickDivider === this.parent.activeViewOptions.timeScale.slotCount - 1),\r\n                type: ''\r\n            };\r\n            if (handler) {\r\n                handler(row);\r\n            }\r\n            rows.push(row);\r\n        }\r\n        return rows;\r\n    };\r\n    VerticalView.prototype.destroy = function () {\r\n        if (!this.parent || this.parent && this.parent.isDestroyed) {\r\n            return;\r\n        }\r\n        this.clearCurrentTimeIndicatorTimer();\r\n        if (this.element) {\r\n            if (this.appointment) {\r\n                this.appointment.destroy();\r\n                this.appointment = null;\r\n            }\r\n            var contentScrollableEle = this.getContentAreaElement();\r\n            if (contentScrollableEle) {\r\n                EventHandler.remove(contentScrollableEle, 'scroll', this.onContentScroll);\r\n                EventHandler.remove(contentScrollableEle, Browser.touchMoveEvent, this.onAdaptiveMove);\r\n            }\r\n            if (this.parent.resourceBase) {\r\n                this.parent.resourceBase.destroy();\r\n            }\r\n            if (this.parent.scheduleTouchModule) {\r\n                this.parent.scheduleTouchModule.resetValues();\r\n            }\r\n            _super.prototype.destroy.call(this);\r\n        }\r\n    };\r\n    return VerticalView;\r\n}(ViewBase));\r\nexport { VerticalView };\r\n"]},"metadata":{},"sourceType":"module"}