{"ast":null,"code":"/**\r\n * Copyright 2013-2015, Facebook, Inc.\r\n * All rights reserved.\r\n *\r\n * This source code is licensed under the BSD-style license found in the\r\n * LICENSE file in the root directory of this source tree. An additional grant\r\n * of patent rights can be found in the PATENTS file in the same directory.\r\n *\r\n * @providesModule ReactMultiChild\r\n * @typechecks static-only\r\n */\n'use strict';\n\nvar ReactComponentEnvironment = require('./ReactComponentEnvironment');\n\nvar ReactMultiChildUpdateTypes = require('./ReactMultiChildUpdateTypes');\n\nvar ReactCurrentOwner = require('./ReactCurrentOwner');\n\nvar ReactReconciler = require('./ReactReconciler');\n\nvar ReactChildReconciler = require('./ReactChildReconciler');\n\nvar flattenChildren = require('./flattenChildren');\n/**\r\n * Updating children of a component may trigger recursive updates. The depth is\r\n * used to batch recursive updates to render markup more efficiently.\r\n *\r\n * @type {number}\r\n * @private\r\n */\n\n\nvar updateDepth = 0;\n/**\r\n * Queue of update configuration objects.\r\n *\r\n * Each object has a `type` property that is in `ReactMultiChildUpdateTypes`.\r\n *\r\n * @type {array<object>}\r\n * @private\r\n */\n\nvar updateQueue = [];\n/**\r\n * Queue of markup to be rendered.\r\n *\r\n * @type {array<string>}\r\n * @private\r\n */\n\nvar markupQueue = [];\n/**\r\n * Enqueues markup to be rendered and inserted at a supplied index.\r\n *\r\n * @param {string} parentID ID of the parent component.\r\n * @param {string} markup Markup that renders into an element.\r\n * @param {number} toIndex Destination index.\r\n * @private\r\n */\n\nfunction enqueueInsertMarkup(parentID, markup, toIndex) {\n  // NOTE: Null values reduce hidden classes.\n  updateQueue.push({\n    parentID: parentID,\n    parentNode: null,\n    type: ReactMultiChildUpdateTypes.INSERT_MARKUP,\n    markupIndex: markupQueue.push(markup) - 1,\n    content: null,\n    fromIndex: null,\n    toIndex: toIndex\n  });\n}\n/**\r\n * Enqueues moving an existing element to another index.\r\n *\r\n * @param {string} parentID ID of the parent component.\r\n * @param {number} fromIndex Source index of the existing element.\r\n * @param {number} toIndex Destination index of the element.\r\n * @private\r\n */\n\n\nfunction enqueueMove(parentID, fromIndex, toIndex) {\n  // NOTE: Null values reduce hidden classes.\n  updateQueue.push({\n    parentID: parentID,\n    parentNode: null,\n    type: ReactMultiChildUpdateTypes.MOVE_EXISTING,\n    markupIndex: null,\n    content: null,\n    fromIndex: fromIndex,\n    toIndex: toIndex\n  });\n}\n/**\r\n * Enqueues removing an element at an index.\r\n *\r\n * @param {string} parentID ID of the parent component.\r\n * @param {number} fromIndex Index of the element to remove.\r\n * @private\r\n */\n\n\nfunction enqueueRemove(parentID, fromIndex) {\n  // NOTE: Null values reduce hidden classes.\n  updateQueue.push({\n    parentID: parentID,\n    parentNode: null,\n    type: ReactMultiChildUpdateTypes.REMOVE_NODE,\n    markupIndex: null,\n    content: null,\n    fromIndex: fromIndex,\n    toIndex: null\n  });\n}\n/**\r\n * Enqueues setting the markup of a node.\r\n *\r\n * @param {string} parentID ID of the parent component.\r\n * @param {string} markup Markup that renders into an element.\r\n * @private\r\n */\n\n\nfunction enqueueSetMarkup(parentID, markup) {\n  // NOTE: Null values reduce hidden classes.\n  updateQueue.push({\n    parentID: parentID,\n    parentNode: null,\n    type: ReactMultiChildUpdateTypes.SET_MARKUP,\n    markupIndex: null,\n    content: markup,\n    fromIndex: null,\n    toIndex: null\n  });\n}\n/**\r\n * Enqueues setting the text content.\r\n *\r\n * @param {string} parentID ID of the parent component.\r\n * @param {string} textContent Text content to set.\r\n * @private\r\n */\n\n\nfunction enqueueTextContent(parentID, textContent) {\n  // NOTE: Null values reduce hidden classes.\n  updateQueue.push({\n    parentID: parentID,\n    parentNode: null,\n    type: ReactMultiChildUpdateTypes.TEXT_CONTENT,\n    markupIndex: null,\n    content: textContent,\n    fromIndex: null,\n    toIndex: null\n  });\n}\n/**\r\n * Processes any enqueued updates.\r\n *\r\n * @private\r\n */\n\n\nfunction processQueue() {\n  if (updateQueue.length) {\n    ReactComponentEnvironment.processChildrenUpdates(updateQueue, markupQueue);\n    clearQueue();\n  }\n}\n/**\r\n * Clears any enqueued updates.\r\n *\r\n * @private\r\n */\n\n\nfunction clearQueue() {\n  updateQueue.length = 0;\n  markupQueue.length = 0;\n}\n/**\r\n * ReactMultiChild are capable of reconciling multiple children.\r\n *\r\n * @class ReactMultiChild\r\n * @internal\r\n */\n\n\nvar ReactMultiChild = {\n  /**\r\n   * Provides common functionality for components that must reconcile multiple\r\n   * children. This is used by `ReactDOMComponent` to mount, update, and\r\n   * unmount child components.\r\n   *\r\n   * @lends {ReactMultiChild.prototype}\r\n   */\n  Mixin: {\n    _reconcilerInstantiateChildren: function (nestedChildren, transaction, context) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (this._currentElement) {\n          try {\n            ReactCurrentOwner.current = this._currentElement._owner;\n            return ReactChildReconciler.instantiateChildren(nestedChildren, transaction, context);\n          } finally {\n            ReactCurrentOwner.current = null;\n          }\n        }\n      }\n\n      return ReactChildReconciler.instantiateChildren(nestedChildren, transaction, context);\n    },\n    _reconcilerUpdateChildren: function (prevChildren, nextNestedChildrenElements, transaction, context) {\n      var nextChildren;\n\n      if (process.env.NODE_ENV !== 'production') {\n        if (this._currentElement) {\n          try {\n            ReactCurrentOwner.current = this._currentElement._owner;\n            nextChildren = flattenChildren(nextNestedChildrenElements);\n          } finally {\n            ReactCurrentOwner.current = null;\n          }\n\n          return ReactChildReconciler.updateChildren(prevChildren, nextChildren, transaction, context);\n        }\n      }\n\n      nextChildren = flattenChildren(nextNestedChildrenElements);\n      return ReactChildReconciler.updateChildren(prevChildren, nextChildren, transaction, context);\n    },\n\n    /**\r\n     * Generates a \"mount image\" for each of the supplied children. In the case\r\n     * of `ReactDOMComponent`, a mount image is a string of markup.\r\n     *\r\n     * @param {?object} nestedChildren Nested child maps.\r\n     * @return {array} An array of mounted representations.\r\n     * @internal\r\n     */\n    mountChildren: function (nestedChildren, transaction, context) {\n      var children = this._reconcilerInstantiateChildren(nestedChildren, transaction, context);\n\n      this._renderedChildren = children;\n      var mountImages = [];\n      var index = 0;\n\n      for (var name in children) {\n        if (children.hasOwnProperty(name)) {\n          var child = children[name]; // Inlined for performance, see `ReactInstanceHandles.createReactID`.\n\n          var rootID = this._rootNodeID + name;\n          var mountImage = ReactReconciler.mountComponent(child, rootID, transaction, context);\n          child._mountIndex = index++;\n          mountImages.push(mountImage);\n        }\n      }\n\n      return mountImages;\n    },\n\n    /**\r\n     * Replaces any rendered children with a text content string.\r\n     *\r\n     * @param {string} nextContent String of content.\r\n     * @internal\r\n     */\n    updateTextContent: function (nextContent) {\n      updateDepth++;\n      var errorThrown = true;\n\n      try {\n        var prevChildren = this._renderedChildren; // Remove any rendered children.\n\n        ReactChildReconciler.unmountChildren(prevChildren); // TODO: The setTextContent operation should be enough\n\n        for (var name in prevChildren) {\n          if (prevChildren.hasOwnProperty(name)) {\n            this._unmountChild(prevChildren[name]);\n          }\n        } // Set new text content.\n\n\n        this.setTextContent(nextContent);\n        errorThrown = false;\n      } finally {\n        updateDepth--;\n\n        if (!updateDepth) {\n          if (errorThrown) {\n            clearQueue();\n          } else {\n            processQueue();\n          }\n        }\n      }\n    },\n\n    /**\r\n     * Replaces any rendered children with a markup string.\r\n     *\r\n     * @param {string} nextMarkup String of markup.\r\n     * @internal\r\n     */\n    updateMarkup: function (nextMarkup) {\n      updateDepth++;\n      var errorThrown = true;\n\n      try {\n        var prevChildren = this._renderedChildren; // Remove any rendered children.\n\n        ReactChildReconciler.unmountChildren(prevChildren);\n\n        for (var name in prevChildren) {\n          if (prevChildren.hasOwnProperty(name)) {\n            this._unmountChildByName(prevChildren[name], name);\n          }\n        }\n\n        this.setMarkup(nextMarkup);\n        errorThrown = false;\n      } finally {\n        updateDepth--;\n\n        if (!updateDepth) {\n          if (errorThrown) {\n            clearQueue();\n          } else {\n            processQueue();\n          }\n        }\n      }\n    },\n\n    /**\r\n     * Updates the rendered children with new children.\r\n     *\r\n     * @param {?object} nextNestedChildrenElements Nested child element maps.\r\n     * @param {ReactReconcileTransaction} transaction\r\n     * @internal\r\n     */\n    updateChildren: function (nextNestedChildrenElements, transaction, context) {\n      updateDepth++;\n      var errorThrown = true;\n\n      try {\n        this._updateChildren(nextNestedChildrenElements, transaction, context);\n\n        errorThrown = false;\n      } finally {\n        updateDepth--;\n\n        if (!updateDepth) {\n          if (errorThrown) {\n            clearQueue();\n          } else {\n            processQueue();\n          }\n        }\n      }\n    },\n\n    /**\r\n     * Improve performance by isolating this hot code path from the try/catch\r\n     * block in `updateChildren`.\r\n     *\r\n     * @param {?object} nextNestedChildrenElements Nested child element maps.\r\n     * @param {ReactReconcileTransaction} transaction\r\n     * @final\r\n     * @protected\r\n     */\n    _updateChildren: function (nextNestedChildrenElements, transaction, context) {\n      var prevChildren = this._renderedChildren;\n\n      var nextChildren = this._reconcilerUpdateChildren(prevChildren, nextNestedChildrenElements, transaction, context);\n\n      this._renderedChildren = nextChildren;\n\n      if (!nextChildren && !prevChildren) {\n        return;\n      }\n\n      var name; // `nextIndex` will increment for each child in `nextChildren`, but\n      // `lastIndex` will be the last index visited in `prevChildren`.\n\n      var lastIndex = 0;\n      var nextIndex = 0;\n\n      for (name in nextChildren) {\n        if (!nextChildren.hasOwnProperty(name)) {\n          continue;\n        }\n\n        var prevChild = prevChildren && prevChildren[name];\n        var nextChild = nextChildren[name];\n\n        if (prevChild === nextChild) {\n          this.moveChild(prevChild, nextIndex, lastIndex);\n          lastIndex = Math.max(prevChild._mountIndex, lastIndex);\n          prevChild._mountIndex = nextIndex;\n        } else {\n          if (prevChild) {\n            // Update `lastIndex` before `_mountIndex` gets unset by unmounting.\n            lastIndex = Math.max(prevChild._mountIndex, lastIndex);\n\n            this._unmountChild(prevChild);\n          } // The child must be instantiated before it's mounted.\n\n\n          this._mountChildByNameAtIndex(nextChild, name, nextIndex, transaction, context);\n        }\n\n        nextIndex++;\n      } // Remove children that are no longer present.\n\n\n      for (name in prevChildren) {\n        if (prevChildren.hasOwnProperty(name) && !(nextChildren && nextChildren.hasOwnProperty(name))) {\n          this._unmountChild(prevChildren[name]);\n        }\n      }\n    },\n\n    /**\r\n     * Unmounts all rendered children. This should be used to clean up children\r\n     * when this component is unmounted.\r\n     *\r\n     * @internal\r\n     */\n    unmountChildren: function () {\n      var renderedChildren = this._renderedChildren;\n      ReactChildReconciler.unmountChildren(renderedChildren);\n      this._renderedChildren = null;\n    },\n\n    /**\r\n     * Moves a child component to the supplied index.\r\n     *\r\n     * @param {ReactComponent} child Component to move.\r\n     * @param {number} toIndex Destination index of the element.\r\n     * @param {number} lastIndex Last index visited of the siblings of `child`.\r\n     * @protected\r\n     */\n    moveChild: function (child, toIndex, lastIndex) {\n      // If the index of `child` is less than `lastIndex`, then it needs to\n      // be moved. Otherwise, we do not need to move it because a child will be\n      // inserted or moved before `child`.\n      if (child._mountIndex < lastIndex) {\n        enqueueMove(this._rootNodeID, child._mountIndex, toIndex);\n      }\n    },\n\n    /**\r\n     * Creates a child component.\r\n     *\r\n     * @param {ReactComponent} child Component to create.\r\n     * @param {string} mountImage Markup to insert.\r\n     * @protected\r\n     */\n    createChild: function (child, mountImage) {\n      enqueueInsertMarkup(this._rootNodeID, mountImage, child._mountIndex);\n    },\n\n    /**\r\n     * Removes a child component.\r\n     *\r\n     * @param {ReactComponent} child Child to remove.\r\n     * @protected\r\n     */\n    removeChild: function (child) {\n      enqueueRemove(this._rootNodeID, child._mountIndex);\n    },\n\n    /**\r\n     * Sets this text content string.\r\n     *\r\n     * @param {string} textContent Text content to set.\r\n     * @protected\r\n     */\n    setTextContent: function (textContent) {\n      enqueueTextContent(this._rootNodeID, textContent);\n    },\n\n    /**\r\n     * Sets this markup string.\r\n     *\r\n     * @param {string} markup Markup to set.\r\n     * @protected\r\n     */\n    setMarkup: function (markup) {\n      enqueueSetMarkup(this._rootNodeID, markup);\n    },\n\n    /**\r\n     * Mounts a child with the supplied name.\r\n     *\r\n     * NOTE: This is part of `updateChildren` and is here for readability.\r\n     *\r\n     * @param {ReactComponent} child Component to mount.\r\n     * @param {string} name Name of the child.\r\n     * @param {number} index Index at which to insert the child.\r\n     * @param {ReactReconcileTransaction} transaction\r\n     * @private\r\n     */\n    _mountChildByNameAtIndex: function (child, name, index, transaction, context) {\n      // Inlined for performance, see `ReactInstanceHandles.createReactID`.\n      var rootID = this._rootNodeID + name;\n      var mountImage = ReactReconciler.mountComponent(child, rootID, transaction, context);\n      child._mountIndex = index;\n      this.createChild(child, mountImage);\n    },\n\n    /**\r\n     * Unmounts a rendered child.\r\n     *\r\n     * NOTE: This is part of `updateChildren` and is here for readability.\r\n     *\r\n     * @param {ReactComponent} child Component to unmount.\r\n     * @private\r\n     */\n    _unmountChild: function (child) {\n      this.removeChild(child);\n      child._mountIndex = null;\n    }\n  }\n};\nmodule.exports = ReactMultiChild;","map":{"version":3,"sources":["F:/Administrator/Documents/Code for fun/Web/Project Introduction to SE/RubyGYM/client/node_modules/jsx-to-string/node_modules/react/lib/ReactMultiChild.js"],"names":["ReactComponentEnvironment","require","ReactMultiChildUpdateTypes","ReactCurrentOwner","ReactReconciler","ReactChildReconciler","flattenChildren","updateDepth","updateQueue","markupQueue","enqueueInsertMarkup","parentID","markup","toIndex","push","parentNode","type","INSERT_MARKUP","markupIndex","content","fromIndex","enqueueMove","MOVE_EXISTING","enqueueRemove","REMOVE_NODE","enqueueSetMarkup","SET_MARKUP","enqueueTextContent","textContent","TEXT_CONTENT","processQueue","length","processChildrenUpdates","clearQueue","ReactMultiChild","Mixin","_reconcilerInstantiateChildren","nestedChildren","transaction","context","process","env","NODE_ENV","_currentElement","current","_owner","instantiateChildren","_reconcilerUpdateChildren","prevChildren","nextNestedChildrenElements","nextChildren","updateChildren","mountChildren","children","_renderedChildren","mountImages","index","name","hasOwnProperty","child","rootID","_rootNodeID","mountImage","mountComponent","_mountIndex","updateTextContent","nextContent","errorThrown","unmountChildren","_unmountChild","setTextContent","updateMarkup","nextMarkup","_unmountChildByName","setMarkup","_updateChildren","lastIndex","nextIndex","prevChild","nextChild","moveChild","Math","max","_mountChildByNameAtIndex","renderedChildren","createChild","removeChild","module","exports"],"mappings":"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","sourcesContent":["/**\r\n * Copyright 2013-2015, Facebook, Inc.\r\n * All rights reserved.\r\n *\r\n * This source code is licensed under the BSD-style license found in the\r\n * LICENSE file in the root directory of this source tree. An additional grant\r\n * of patent rights can be found in the PATENTS file in the same directory.\r\n *\r\n * @providesModule ReactMultiChild\r\n * @typechecks static-only\r\n */\r\n\r\n'use strict';\r\n\r\nvar ReactComponentEnvironment = require('./ReactComponentEnvironment');\r\nvar ReactMultiChildUpdateTypes = require('./ReactMultiChildUpdateTypes');\r\n\r\nvar ReactCurrentOwner = require('./ReactCurrentOwner');\r\nvar ReactReconciler = require('./ReactReconciler');\r\nvar ReactChildReconciler = require('./ReactChildReconciler');\r\n\r\nvar flattenChildren = require('./flattenChildren');\r\n\r\n/**\r\n * Updating children of a component may trigger recursive updates. The depth is\r\n * used to batch recursive updates to render markup more efficiently.\r\n *\r\n * @type {number}\r\n * @private\r\n */\r\nvar updateDepth = 0;\r\n\r\n/**\r\n * Queue of update configuration objects.\r\n *\r\n * Each object has a `type` property that is in `ReactMultiChildUpdateTypes`.\r\n *\r\n * @type {array<object>}\r\n * @private\r\n */\r\nvar updateQueue = [];\r\n\r\n/**\r\n * Queue of markup to be rendered.\r\n *\r\n * @type {array<string>}\r\n * @private\r\n */\r\nvar markupQueue = [];\r\n\r\n/**\r\n * Enqueues markup to be rendered and inserted at a supplied index.\r\n *\r\n * @param {string} parentID ID of the parent component.\r\n * @param {string} markup Markup that renders into an element.\r\n * @param {number} toIndex Destination index.\r\n * @private\r\n */\r\nfunction enqueueInsertMarkup(parentID, markup, toIndex) {\r\n  // NOTE: Null values reduce hidden classes.\r\n  updateQueue.push({\r\n    parentID: parentID,\r\n    parentNode: null,\r\n    type: ReactMultiChildUpdateTypes.INSERT_MARKUP,\r\n    markupIndex: markupQueue.push(markup) - 1,\r\n    content: null,\r\n    fromIndex: null,\r\n    toIndex: toIndex\r\n  });\r\n}\r\n\r\n/**\r\n * Enqueues moving an existing element to another index.\r\n *\r\n * @param {string} parentID ID of the parent component.\r\n * @param {number} fromIndex Source index of the existing element.\r\n * @param {number} toIndex Destination index of the element.\r\n * @private\r\n */\r\nfunction enqueueMove(parentID, fromIndex, toIndex) {\r\n  // NOTE: Null values reduce hidden classes.\r\n  updateQueue.push({\r\n    parentID: parentID,\r\n    parentNode: null,\r\n    type: ReactMultiChildUpdateTypes.MOVE_EXISTING,\r\n    markupIndex: null,\r\n    content: null,\r\n    fromIndex: fromIndex,\r\n    toIndex: toIndex\r\n  });\r\n}\r\n\r\n/**\r\n * Enqueues removing an element at an index.\r\n *\r\n * @param {string} parentID ID of the parent component.\r\n * @param {number} fromIndex Index of the element to remove.\r\n * @private\r\n */\r\nfunction enqueueRemove(parentID, fromIndex) {\r\n  // NOTE: Null values reduce hidden classes.\r\n  updateQueue.push({\r\n    parentID: parentID,\r\n    parentNode: null,\r\n    type: ReactMultiChildUpdateTypes.REMOVE_NODE,\r\n    markupIndex: null,\r\n    content: null,\r\n    fromIndex: fromIndex,\r\n    toIndex: null\r\n  });\r\n}\r\n\r\n/**\r\n * Enqueues setting the markup of a node.\r\n *\r\n * @param {string} parentID ID of the parent component.\r\n * @param {string} markup Markup that renders into an element.\r\n * @private\r\n */\r\nfunction enqueueSetMarkup(parentID, markup) {\r\n  // NOTE: Null values reduce hidden classes.\r\n  updateQueue.push({\r\n    parentID: parentID,\r\n    parentNode: null,\r\n    type: ReactMultiChildUpdateTypes.SET_MARKUP,\r\n    markupIndex: null,\r\n    content: markup,\r\n    fromIndex: null,\r\n    toIndex: null\r\n  });\r\n}\r\n\r\n/**\r\n * Enqueues setting the text content.\r\n *\r\n * @param {string} parentID ID of the parent component.\r\n * @param {string} textContent Text content to set.\r\n * @private\r\n */\r\nfunction enqueueTextContent(parentID, textContent) {\r\n  // NOTE: Null values reduce hidden classes.\r\n  updateQueue.push({\r\n    parentID: parentID,\r\n    parentNode: null,\r\n    type: ReactMultiChildUpdateTypes.TEXT_CONTENT,\r\n    markupIndex: null,\r\n    content: textContent,\r\n    fromIndex: null,\r\n    toIndex: null\r\n  });\r\n}\r\n\r\n/**\r\n * Processes any enqueued updates.\r\n *\r\n * @private\r\n */\r\nfunction processQueue() {\r\n  if (updateQueue.length) {\r\n    ReactComponentEnvironment.processChildrenUpdates(updateQueue, markupQueue);\r\n    clearQueue();\r\n  }\r\n}\r\n\r\n/**\r\n * Clears any enqueued updates.\r\n *\r\n * @private\r\n */\r\nfunction clearQueue() {\r\n  updateQueue.length = 0;\r\n  markupQueue.length = 0;\r\n}\r\n\r\n/**\r\n * ReactMultiChild are capable of reconciling multiple children.\r\n *\r\n * @class ReactMultiChild\r\n * @internal\r\n */\r\nvar ReactMultiChild = {\r\n\r\n  /**\r\n   * Provides common functionality for components that must reconcile multiple\r\n   * children. This is used by `ReactDOMComponent` to mount, update, and\r\n   * unmount child components.\r\n   *\r\n   * @lends {ReactMultiChild.prototype}\r\n   */\r\n  Mixin: {\r\n\r\n    _reconcilerInstantiateChildren: function (nestedChildren, transaction, context) {\r\n      if (process.env.NODE_ENV !== 'production') {\r\n        if (this._currentElement) {\r\n          try {\r\n            ReactCurrentOwner.current = this._currentElement._owner;\r\n            return ReactChildReconciler.instantiateChildren(nestedChildren, transaction, context);\r\n          } finally {\r\n            ReactCurrentOwner.current = null;\r\n          }\r\n        }\r\n      }\r\n      return ReactChildReconciler.instantiateChildren(nestedChildren, transaction, context);\r\n    },\r\n\r\n    _reconcilerUpdateChildren: function (prevChildren, nextNestedChildrenElements, transaction, context) {\r\n      var nextChildren;\r\n      if (process.env.NODE_ENV !== 'production') {\r\n        if (this._currentElement) {\r\n          try {\r\n            ReactCurrentOwner.current = this._currentElement._owner;\r\n            nextChildren = flattenChildren(nextNestedChildrenElements);\r\n          } finally {\r\n            ReactCurrentOwner.current = null;\r\n          }\r\n          return ReactChildReconciler.updateChildren(prevChildren, nextChildren, transaction, context);\r\n        }\r\n      }\r\n      nextChildren = flattenChildren(nextNestedChildrenElements);\r\n      return ReactChildReconciler.updateChildren(prevChildren, nextChildren, transaction, context);\r\n    },\r\n\r\n    /**\r\n     * Generates a \"mount image\" for each of the supplied children. In the case\r\n     * of `ReactDOMComponent`, a mount image is a string of markup.\r\n     *\r\n     * @param {?object} nestedChildren Nested child maps.\r\n     * @return {array} An array of mounted representations.\r\n     * @internal\r\n     */\r\n    mountChildren: function (nestedChildren, transaction, context) {\r\n      var children = this._reconcilerInstantiateChildren(nestedChildren, transaction, context);\r\n      this._renderedChildren = children;\r\n      var mountImages = [];\r\n      var index = 0;\r\n      for (var name in children) {\r\n        if (children.hasOwnProperty(name)) {\r\n          var child = children[name];\r\n          // Inlined for performance, see `ReactInstanceHandles.createReactID`.\r\n          var rootID = this._rootNodeID + name;\r\n          var mountImage = ReactReconciler.mountComponent(child, rootID, transaction, context);\r\n          child._mountIndex = index++;\r\n          mountImages.push(mountImage);\r\n        }\r\n      }\r\n      return mountImages;\r\n    },\r\n\r\n    /**\r\n     * Replaces any rendered children with a text content string.\r\n     *\r\n     * @param {string} nextContent String of content.\r\n     * @internal\r\n     */\r\n    updateTextContent: function (nextContent) {\r\n      updateDepth++;\r\n      var errorThrown = true;\r\n      try {\r\n        var prevChildren = this._renderedChildren;\r\n        // Remove any rendered children.\r\n        ReactChildReconciler.unmountChildren(prevChildren);\r\n        // TODO: The setTextContent operation should be enough\r\n        for (var name in prevChildren) {\r\n          if (prevChildren.hasOwnProperty(name)) {\r\n            this._unmountChild(prevChildren[name]);\r\n          }\r\n        }\r\n        // Set new text content.\r\n        this.setTextContent(nextContent);\r\n        errorThrown = false;\r\n      } finally {\r\n        updateDepth--;\r\n        if (!updateDepth) {\r\n          if (errorThrown) {\r\n            clearQueue();\r\n          } else {\r\n            processQueue();\r\n          }\r\n        }\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Replaces any rendered children with a markup string.\r\n     *\r\n     * @param {string} nextMarkup String of markup.\r\n     * @internal\r\n     */\r\n    updateMarkup: function (nextMarkup) {\r\n      updateDepth++;\r\n      var errorThrown = true;\r\n      try {\r\n        var prevChildren = this._renderedChildren;\r\n        // Remove any rendered children.\r\n        ReactChildReconciler.unmountChildren(prevChildren);\r\n        for (var name in prevChildren) {\r\n          if (prevChildren.hasOwnProperty(name)) {\r\n            this._unmountChildByName(prevChildren[name], name);\r\n          }\r\n        }\r\n        this.setMarkup(nextMarkup);\r\n        errorThrown = false;\r\n      } finally {\r\n        updateDepth--;\r\n        if (!updateDepth) {\r\n          if (errorThrown) {\r\n            clearQueue();\r\n          } else {\r\n            processQueue();\r\n          }\r\n        }\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Updates the rendered children with new children.\r\n     *\r\n     * @param {?object} nextNestedChildrenElements Nested child element maps.\r\n     * @param {ReactReconcileTransaction} transaction\r\n     * @internal\r\n     */\r\n    updateChildren: function (nextNestedChildrenElements, transaction, context) {\r\n      updateDepth++;\r\n      var errorThrown = true;\r\n      try {\r\n        this._updateChildren(nextNestedChildrenElements, transaction, context);\r\n        errorThrown = false;\r\n      } finally {\r\n        updateDepth--;\r\n        if (!updateDepth) {\r\n          if (errorThrown) {\r\n            clearQueue();\r\n          } else {\r\n            processQueue();\r\n          }\r\n        }\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Improve performance by isolating this hot code path from the try/catch\r\n     * block in `updateChildren`.\r\n     *\r\n     * @param {?object} nextNestedChildrenElements Nested child element maps.\r\n     * @param {ReactReconcileTransaction} transaction\r\n     * @final\r\n     * @protected\r\n     */\r\n    _updateChildren: function (nextNestedChildrenElements, transaction, context) {\r\n      var prevChildren = this._renderedChildren;\r\n      var nextChildren = this._reconcilerUpdateChildren(prevChildren, nextNestedChildrenElements, transaction, context);\r\n      this._renderedChildren = nextChildren;\r\n      if (!nextChildren && !prevChildren) {\r\n        return;\r\n      }\r\n      var name;\r\n      // `nextIndex` will increment for each child in `nextChildren`, but\r\n      // `lastIndex` will be the last index visited in `prevChildren`.\r\n      var lastIndex = 0;\r\n      var nextIndex = 0;\r\n      for (name in nextChildren) {\r\n        if (!nextChildren.hasOwnProperty(name)) {\r\n          continue;\r\n        }\r\n        var prevChild = prevChildren && prevChildren[name];\r\n        var nextChild = nextChildren[name];\r\n        if (prevChild === nextChild) {\r\n          this.moveChild(prevChild, nextIndex, lastIndex);\r\n          lastIndex = Math.max(prevChild._mountIndex, lastIndex);\r\n          prevChild._mountIndex = nextIndex;\r\n        } else {\r\n          if (prevChild) {\r\n            // Update `lastIndex` before `_mountIndex` gets unset by unmounting.\r\n            lastIndex = Math.max(prevChild._mountIndex, lastIndex);\r\n            this._unmountChild(prevChild);\r\n          }\r\n          // The child must be instantiated before it's mounted.\r\n          this._mountChildByNameAtIndex(nextChild, name, nextIndex, transaction, context);\r\n        }\r\n        nextIndex++;\r\n      }\r\n      // Remove children that are no longer present.\r\n      for (name in prevChildren) {\r\n        if (prevChildren.hasOwnProperty(name) && !(nextChildren && nextChildren.hasOwnProperty(name))) {\r\n          this._unmountChild(prevChildren[name]);\r\n        }\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Unmounts all rendered children. This should be used to clean up children\r\n     * when this component is unmounted.\r\n     *\r\n     * @internal\r\n     */\r\n    unmountChildren: function () {\r\n      var renderedChildren = this._renderedChildren;\r\n      ReactChildReconciler.unmountChildren(renderedChildren);\r\n      this._renderedChildren = null;\r\n    },\r\n\r\n    /**\r\n     * Moves a child component to the supplied index.\r\n     *\r\n     * @param {ReactComponent} child Component to move.\r\n     * @param {number} toIndex Destination index of the element.\r\n     * @param {number} lastIndex Last index visited of the siblings of `child`.\r\n     * @protected\r\n     */\r\n    moveChild: function (child, toIndex, lastIndex) {\r\n      // If the index of `child` is less than `lastIndex`, then it needs to\r\n      // be moved. Otherwise, we do not need to move it because a child will be\r\n      // inserted or moved before `child`.\r\n      if (child._mountIndex < lastIndex) {\r\n        enqueueMove(this._rootNodeID, child._mountIndex, toIndex);\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Creates a child component.\r\n     *\r\n     * @param {ReactComponent} child Component to create.\r\n     * @param {string} mountImage Markup to insert.\r\n     * @protected\r\n     */\r\n    createChild: function (child, mountImage) {\r\n      enqueueInsertMarkup(this._rootNodeID, mountImage, child._mountIndex);\r\n    },\r\n\r\n    /**\r\n     * Removes a child component.\r\n     *\r\n     * @param {ReactComponent} child Child to remove.\r\n     * @protected\r\n     */\r\n    removeChild: function (child) {\r\n      enqueueRemove(this._rootNodeID, child._mountIndex);\r\n    },\r\n\r\n    /**\r\n     * Sets this text content string.\r\n     *\r\n     * @param {string} textContent Text content to set.\r\n     * @protected\r\n     */\r\n    setTextContent: function (textContent) {\r\n      enqueueTextContent(this._rootNodeID, textContent);\r\n    },\r\n\r\n    /**\r\n     * Sets this markup string.\r\n     *\r\n     * @param {string} markup Markup to set.\r\n     * @protected\r\n     */\r\n    setMarkup: function (markup) {\r\n      enqueueSetMarkup(this._rootNodeID, markup);\r\n    },\r\n\r\n    /**\r\n     * Mounts a child with the supplied name.\r\n     *\r\n     * NOTE: This is part of `updateChildren` and is here for readability.\r\n     *\r\n     * @param {ReactComponent} child Component to mount.\r\n     * @param {string} name Name of the child.\r\n     * @param {number} index Index at which to insert the child.\r\n     * @param {ReactReconcileTransaction} transaction\r\n     * @private\r\n     */\r\n    _mountChildByNameAtIndex: function (child, name, index, transaction, context) {\r\n      // Inlined for performance, see `ReactInstanceHandles.createReactID`.\r\n      var rootID = this._rootNodeID + name;\r\n      var mountImage = ReactReconciler.mountComponent(child, rootID, transaction, context);\r\n      child._mountIndex = index;\r\n      this.createChild(child, mountImage);\r\n    },\r\n\r\n    /**\r\n     * Unmounts a rendered child.\r\n     *\r\n     * NOTE: This is part of `updateChildren` and is here for readability.\r\n     *\r\n     * @param {ReactComponent} child Component to unmount.\r\n     * @private\r\n     */\r\n    _unmountChild: function (child) {\r\n      this.removeChild(child);\r\n      child._mountIndex = null;\r\n    }\r\n\r\n  }\r\n\r\n};\r\n\r\nmodule.exports = ReactMultiChild;"]},"metadata":{},"sourceType":"script"}