{"ast":null,"code":"/**\r\n * Copyright 2013-2015, Facebook, Inc.\r\n * All rights reserved.\r\n *\r\n * This source code is licensed under the BSD-style license found in the\r\n * LICENSE file in the root directory of this source tree. An additional grant\r\n * of patent rights can be found in the PATENTS file in the same directory.\r\n *\r\n * @providesModule ReactDOMComponent\r\n * @typechecks static-only\r\n */\n\n/* global hasOwnProperty:true */\n'use strict';\n\nvar AutoFocusUtils = require('./AutoFocusUtils');\n\nvar CSSPropertyOperations = require('./CSSPropertyOperations');\n\nvar DOMProperty = require('./DOMProperty');\n\nvar DOMPropertyOperations = require('./DOMPropertyOperations');\n\nvar EventConstants = require('./EventConstants');\n\nvar ReactBrowserEventEmitter = require('./ReactBrowserEventEmitter');\n\nvar ReactComponentBrowserEnvironment = require('./ReactComponentBrowserEnvironment');\n\nvar ReactDOMButton = require('./ReactDOMButton');\n\nvar ReactDOMInput = require('./ReactDOMInput');\n\nvar ReactDOMOption = require('./ReactDOMOption');\n\nvar ReactDOMSelect = require('./ReactDOMSelect');\n\nvar ReactDOMTextarea = require('./ReactDOMTextarea');\n\nvar ReactMount = require('./ReactMount');\n\nvar ReactMultiChild = require('./ReactMultiChild');\n\nvar ReactPerf = require('./ReactPerf');\n\nvar ReactUpdateQueue = require('./ReactUpdateQueue');\n\nvar assign = require('./Object.assign');\n\nvar canDefineProperty = require('./canDefineProperty');\n\nvar escapeTextContentForBrowser = require('./escapeTextContentForBrowser');\n\nvar invariant = require('fbjs/lib/invariant');\n\nvar isEventSupported = require('./isEventSupported');\n\nvar keyOf = require('fbjs/lib/keyOf');\n\nvar setInnerHTML = require('./setInnerHTML');\n\nvar setTextContent = require('./setTextContent');\n\nvar shallowEqual = require('fbjs/lib/shallowEqual');\n\nvar validateDOMNesting = require('./validateDOMNesting');\n\nvar warning = require('fbjs/lib/warning');\n\nvar deleteListener = ReactBrowserEventEmitter.deleteListener;\nvar listenTo = ReactBrowserEventEmitter.listenTo;\nvar registrationNameModules = ReactBrowserEventEmitter.registrationNameModules; // For quickly matching children type, to test if can be treated as content.\n\nvar CONTENT_TYPES = {\n  'string': true,\n  'number': true\n};\nvar CHILDREN = keyOf({\n  children: null\n});\nvar STYLE = keyOf({\n  style: null\n});\nvar HTML = keyOf({\n  __html: null\n});\nvar ELEMENT_NODE_TYPE = 1;\n\nfunction getDeclarationErrorAddendum(internalInstance) {\n  if (internalInstance) {\n    var owner = internalInstance._currentElement._owner || null;\n\n    if (owner) {\n      var name = owner.getName();\n\n      if (name) {\n        return ' This DOM node was rendered by `' + name + '`.';\n      }\n    }\n  }\n\n  return '';\n}\n\nvar legacyPropsDescriptor;\n\nif (process.env.NODE_ENV !== 'production') {\n  legacyPropsDescriptor = {\n    props: {\n      enumerable: false,\n      get: function () {\n        var component = this._reactInternalComponent;\n        process.env.NODE_ENV !== 'production' ? warning(false, 'ReactDOMComponent: Do not access .props of a DOM node; instead, ' + 'recreate the props as `render` did originally or read the DOM ' + 'properties/attributes directly from this node (e.g., ' + 'this.refs.box.className).%s', getDeclarationErrorAddendum(component)) : undefined;\n        return component._currentElement.props;\n      }\n    }\n  };\n}\n\nfunction legacyGetDOMNode() {\n  if (process.env.NODE_ENV !== 'production') {\n    var component = this._reactInternalComponent;\n    process.env.NODE_ENV !== 'production' ? warning(false, 'ReactDOMComponent: Do not access .getDOMNode() of a DOM node; ' + 'instead, use the node directly.%s', getDeclarationErrorAddendum(component)) : undefined;\n  }\n\n  return this;\n}\n\nfunction legacyIsMounted() {\n  var component = this._reactInternalComponent;\n\n  if (process.env.NODE_ENV !== 'production') {\n    process.env.NODE_ENV !== 'production' ? warning(false, 'ReactDOMComponent: Do not access .isMounted() of a DOM node.%s', getDeclarationErrorAddendum(component)) : undefined;\n  }\n\n  return !!component;\n}\n\nfunction legacySetStateEtc() {\n  if (process.env.NODE_ENV !== 'production') {\n    var component = this._reactInternalComponent;\n    process.env.NODE_ENV !== 'production' ? warning(false, 'ReactDOMComponent: Do not access .setState(), .replaceState(), or ' + '.forceUpdate() of a DOM node. This is a no-op.%s', getDeclarationErrorAddendum(component)) : undefined;\n  }\n}\n\nfunction legacySetProps(partialProps, callback) {\n  var component = this._reactInternalComponent;\n\n  if (process.env.NODE_ENV !== 'production') {\n    process.env.NODE_ENV !== 'production' ? warning(false, 'ReactDOMComponent: Do not access .setProps() of a DOM node. ' + 'Instead, call ReactDOM.render again at the top level.%s', getDeclarationErrorAddendum(component)) : undefined;\n  }\n\n  if (!component) {\n    return;\n  }\n\n  ReactUpdateQueue.enqueueSetPropsInternal(component, partialProps);\n\n  if (callback) {\n    ReactUpdateQueue.enqueueCallbackInternal(component, callback);\n  }\n}\n\nfunction legacyReplaceProps(partialProps, callback) {\n  var component = this._reactInternalComponent;\n\n  if (process.env.NODE_ENV !== 'production') {\n    process.env.NODE_ENV !== 'production' ? warning(false, 'ReactDOMComponent: Do not access .replaceProps() of a DOM node. ' + 'Instead, call ReactDOM.render again at the top level.%s', getDeclarationErrorAddendum(component)) : undefined;\n  }\n\n  if (!component) {\n    return;\n  }\n\n  ReactUpdateQueue.enqueueReplacePropsInternal(component, partialProps);\n\n  if (callback) {\n    ReactUpdateQueue.enqueueCallbackInternal(component, callback);\n  }\n}\n\nfunction friendlyStringify(obj) {\n  if (typeof obj === 'object') {\n    if (Array.isArray(obj)) {\n      return '[' + obj.map(friendlyStringify).join(', ') + ']';\n    } else {\n      var pairs = [];\n\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) {\n          var keyEscaped = /^[a-z$_][\\w$_]*$/i.test(key) ? key : JSON.stringify(key);\n          pairs.push(keyEscaped + ': ' + friendlyStringify(obj[key]));\n        }\n      }\n\n      return '{' + pairs.join(', ') + '}';\n    }\n  } else if (typeof obj === 'string') {\n    return JSON.stringify(obj);\n  } else if (typeof obj === 'function') {\n    return '[function object]';\n  } // Differs from JSON.stringify in that undefined becauses undefined and that\n  // inf and nan don't become null\n\n\n  return String(obj);\n}\n\nvar styleMutationWarning = {};\n\nfunction checkAndWarnForMutatedStyle(style1, style2, component) {\n  if (style1 == null || style2 == null) {\n    return;\n  }\n\n  if (shallowEqual(style1, style2)) {\n    return;\n  }\n\n  var componentName = component._tag;\n  var owner = component._currentElement._owner;\n  var ownerName;\n\n  if (owner) {\n    ownerName = owner.getName();\n  }\n\n  var hash = ownerName + '|' + componentName;\n\n  if (styleMutationWarning.hasOwnProperty(hash)) {\n    return;\n  }\n\n  styleMutationWarning[hash] = true;\n  process.env.NODE_ENV !== 'production' ? warning(false, '`%s` was passed a style object that has previously been mutated. ' + 'Mutating `style` is deprecated. Consider cloning it beforehand. Check ' + 'the `render` %s. Previous style: %s. Mutated style: %s.', componentName, owner ? 'of `' + ownerName + '`' : 'using <' + componentName + '>', friendlyStringify(style1), friendlyStringify(style2)) : undefined;\n}\n/**\r\n * @param {object} component\r\n * @param {?object} props\r\n */\n\n\nfunction assertValidProps(component, props) {\n  if (!props) {\n    return;\n  } // Note the use of `==` which checks for null or undefined.\n\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (voidElementTags[component._tag]) {\n      process.env.NODE_ENV !== 'production' ? warning(props.children == null && props.dangerouslySetInnerHTML == null, '%s is a void element tag and must not have `children` or ' + 'use `props.dangerouslySetInnerHTML`.%s', component._tag, component._currentElement._owner ? ' Check the render method of ' + component._currentElement._owner.getName() + '.' : '') : undefined;\n    }\n  }\n\n  if (props.dangerouslySetInnerHTML != null) {\n    !(props.children == null) ? process.env.NODE_ENV !== 'production' ? invariant(false, 'Can only set one of `children` or `props.dangerouslySetInnerHTML`.') : invariant(false) : undefined;\n    !(typeof props.dangerouslySetInnerHTML === 'object' && HTML in props.dangerouslySetInnerHTML) ? process.env.NODE_ENV !== 'production' ? invariant(false, '`props.dangerouslySetInnerHTML` must be in the form `{__html: ...}`. ' + 'Please visit https://fb.me/react-invariant-dangerously-set-inner-html ' + 'for more information.') : invariant(false) : undefined;\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    process.env.NODE_ENV !== 'production' ? warning(props.innerHTML == null, 'Directly setting property `innerHTML` is not permitted. ' + 'For more information, lookup documentation on `dangerouslySetInnerHTML`.') : undefined;\n    process.env.NODE_ENV !== 'production' ? warning(!props.contentEditable || props.children == null, 'A component is `contentEditable` and contains `children` managed by ' + 'React. It is now your responsibility to guarantee that none of ' + 'those nodes are unexpectedly modified or duplicated. This is ' + 'probably not intentional.') : undefined;\n  }\n\n  !(props.style == null || typeof props.style === 'object') ? process.env.NODE_ENV !== 'production' ? invariant(false, 'The `style` prop expects a mapping from style properties to values, ' + 'not a string. For example, style={{marginRight: spacing + \\'em\\'}} when ' + 'using JSX.%s', getDeclarationErrorAddendum(component)) : invariant(false) : undefined;\n}\n\nfunction enqueuePutListener(id, registrationName, listener, transaction) {\n  if (process.env.NODE_ENV !== 'production') {\n    // IE8 has no API for event capturing and the `onScroll` event doesn't\n    // bubble.\n    process.env.NODE_ENV !== 'production' ? warning(registrationName !== 'onScroll' || isEventSupported('scroll', true), 'This browser doesn\\'t support the `onScroll` event') : undefined;\n  }\n\n  var container = ReactMount.findReactContainerForID(id);\n\n  if (container) {\n    var doc = container.nodeType === ELEMENT_NODE_TYPE ? container.ownerDocument : container;\n    listenTo(registrationName, doc);\n  }\n\n  transaction.getReactMountReady().enqueue(putListener, {\n    id: id,\n    registrationName: registrationName,\n    listener: listener\n  });\n}\n\nfunction putListener() {\n  var listenerToPut = this;\n  ReactBrowserEventEmitter.putListener(listenerToPut.id, listenerToPut.registrationName, listenerToPut.listener);\n} // There are so many media events, it makes sense to just\n// maintain a list rather than create a `trapBubbledEvent` for each\n\n\nvar mediaEvents = {\n  topAbort: 'abort',\n  topCanPlay: 'canplay',\n  topCanPlayThrough: 'canplaythrough',\n  topDurationChange: 'durationchange',\n  topEmptied: 'emptied',\n  topEncrypted: 'encrypted',\n  topEnded: 'ended',\n  topError: 'error',\n  topLoadedData: 'loadeddata',\n  topLoadedMetadata: 'loadedmetadata',\n  topLoadStart: 'loadstart',\n  topPause: 'pause',\n  topPlay: 'play',\n  topPlaying: 'playing',\n  topProgress: 'progress',\n  topRateChange: 'ratechange',\n  topSeeked: 'seeked',\n  topSeeking: 'seeking',\n  topStalled: 'stalled',\n  topSuspend: 'suspend',\n  topTimeUpdate: 'timeupdate',\n  topVolumeChange: 'volumechange',\n  topWaiting: 'waiting'\n};\n\nfunction trapBubbledEventsLocal() {\n  var inst = this; // If a component renders to null or if another component fatals and causes\n  // the state of the tree to be corrupted, `node` here can be null.\n\n  !inst._rootNodeID ? process.env.NODE_ENV !== 'production' ? invariant(false, 'Must be mounted to trap events') : invariant(false) : undefined;\n  var node = ReactMount.getNode(inst._rootNodeID);\n  !node ? process.env.NODE_ENV !== 'production' ? invariant(false, 'trapBubbledEvent(...): Requires node to be rendered.') : invariant(false) : undefined;\n\n  switch (inst._tag) {\n    case 'iframe':\n      inst._wrapperState.listeners = [ReactBrowserEventEmitter.trapBubbledEvent(EventConstants.topLevelTypes.topLoad, 'load', node)];\n      break;\n\n    case 'video':\n    case 'audio':\n      inst._wrapperState.listeners = []; // create listener for each media event\n\n      for (var event in mediaEvents) {\n        if (mediaEvents.hasOwnProperty(event)) {\n          inst._wrapperState.listeners.push(ReactBrowserEventEmitter.trapBubbledEvent(EventConstants.topLevelTypes[event], mediaEvents[event], node));\n        }\n      }\n\n      break;\n\n    case 'img':\n      inst._wrapperState.listeners = [ReactBrowserEventEmitter.trapBubbledEvent(EventConstants.topLevelTypes.topError, 'error', node), ReactBrowserEventEmitter.trapBubbledEvent(EventConstants.topLevelTypes.topLoad, 'load', node)];\n      break;\n\n    case 'form':\n      inst._wrapperState.listeners = [ReactBrowserEventEmitter.trapBubbledEvent(EventConstants.topLevelTypes.topReset, 'reset', node), ReactBrowserEventEmitter.trapBubbledEvent(EventConstants.topLevelTypes.topSubmit, 'submit', node)];\n      break;\n  }\n}\n\nfunction mountReadyInputWrapper() {\n  ReactDOMInput.mountReadyWrapper(this);\n}\n\nfunction postUpdateSelectWrapper() {\n  ReactDOMSelect.postUpdateWrapper(this);\n} // For HTML, certain tags should omit their close tag. We keep a whitelist for\n// those special cased tags.\n\n\nvar omittedCloseTags = {\n  'area': true,\n  'base': true,\n  'br': true,\n  'col': true,\n  'embed': true,\n  'hr': true,\n  'img': true,\n  'input': true,\n  'keygen': true,\n  'link': true,\n  'meta': true,\n  'param': true,\n  'source': true,\n  'track': true,\n  'wbr': true\n}; // NOTE: menuitem's close tag should be omitted, but that causes problems.\n\nvar newlineEatingTags = {\n  'listing': true,\n  'pre': true,\n  'textarea': true\n}; // For HTML, certain tags cannot have children. This has the same purpose as\n// `omittedCloseTags` except that `menuitem` should still have its closing tag.\n\nvar voidElementTags = assign({\n  'menuitem': true\n}, omittedCloseTags); // We accept any tag to be rendered but since this gets injected into arbitrary\n// HTML, we want to make sure that it's a safe tag.\n// http://www.w3.org/TR/REC-xml/#NT-Name\n\nvar VALID_TAG_REGEX = /^[a-zA-Z][a-zA-Z:_\\.\\-\\d]*$/; // Simplified subset\n\nvar validatedTagCache = {};\nvar hasOwnProperty = {}.hasOwnProperty;\n\nfunction validateDangerousTag(tag) {\n  if (!hasOwnProperty.call(validatedTagCache, tag)) {\n    !VALID_TAG_REGEX.test(tag) ? process.env.NODE_ENV !== 'production' ? invariant(false, 'Invalid tag: %s', tag) : invariant(false) : undefined;\n    validatedTagCache[tag] = true;\n  }\n}\n\nfunction processChildContextDev(context, inst) {\n  // Pass down our tag name to child components for validation purposes\n  context = assign({}, context);\n  var info = context[validateDOMNesting.ancestorInfoContextKey];\n  context[validateDOMNesting.ancestorInfoContextKey] = validateDOMNesting.updatedAncestorInfo(info, inst._tag, inst);\n  return context;\n}\n\nfunction isCustomComponent(tagName, props) {\n  return tagName.indexOf('-') >= 0 || props.is != null;\n}\n/**\r\n * Creates a new React class that is idempotent and capable of containing other\r\n * React components. It accepts event listeners and DOM properties that are\r\n * valid according to `DOMProperty`.\r\n *\r\n *  - Event listeners: `onClick`, `onMouseDown`, etc.\r\n *  - DOM properties: `className`, `name`, `title`, etc.\r\n *\r\n * The `style` property functions differently from the DOM API. It accepts an\r\n * object mapping of style properties to values.\r\n *\r\n * @constructor ReactDOMComponent\r\n * @extends ReactMultiChild\r\n */\n\n\nfunction ReactDOMComponent(tag) {\n  validateDangerousTag(tag);\n  this._tag = tag.toLowerCase();\n  this._renderedChildren = null;\n  this._previousStyle = null;\n  this._previousStyleCopy = null;\n  this._rootNodeID = null;\n  this._wrapperState = null;\n  this._topLevelWrapper = null;\n  this._nodeWithLegacyProperties = null;\n\n  if (process.env.NODE_ENV !== 'production') {\n    this._unprocessedContextDev = null;\n    this._processedContextDev = null;\n  }\n}\n\nReactDOMComponent.displayName = 'ReactDOMComponent';\nReactDOMComponent.Mixin = {\n  construct: function (element) {\n    this._currentElement = element;\n  },\n\n  /**\r\n   * Generates root tag markup then recurses. This method has side effects and\r\n   * is not idempotent.\r\n   *\r\n   * @internal\r\n   * @param {string} rootID The root DOM ID for this node.\r\n   * @param {ReactReconcileTransaction|ReactServerRenderingTransaction} transaction\r\n   * @param {object} context\r\n   * @return {string} The computed markup.\r\n   */\n  mountComponent: function (rootID, transaction, context) {\n    this._rootNodeID = rootID;\n    var props = this._currentElement.props;\n\n    switch (this._tag) {\n      case 'iframe':\n      case 'img':\n      case 'form':\n      case 'video':\n      case 'audio':\n        this._wrapperState = {\n          listeners: null\n        };\n        transaction.getReactMountReady().enqueue(trapBubbledEventsLocal, this);\n        break;\n\n      case 'button':\n        props = ReactDOMButton.getNativeProps(this, props, context);\n        break;\n\n      case 'input':\n        ReactDOMInput.mountWrapper(this, props, context);\n        props = ReactDOMInput.getNativeProps(this, props, context);\n        break;\n\n      case 'option':\n        ReactDOMOption.mountWrapper(this, props, context);\n        props = ReactDOMOption.getNativeProps(this, props, context);\n        break;\n\n      case 'select':\n        ReactDOMSelect.mountWrapper(this, props, context);\n        props = ReactDOMSelect.getNativeProps(this, props, context);\n        context = ReactDOMSelect.processChildContext(this, props, context);\n        break;\n\n      case 'textarea':\n        ReactDOMTextarea.mountWrapper(this, props, context);\n        props = ReactDOMTextarea.getNativeProps(this, props, context);\n        break;\n    }\n\n    assertValidProps(this, props);\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (context[validateDOMNesting.ancestorInfoContextKey]) {\n        validateDOMNesting(this._tag, this, context[validateDOMNesting.ancestorInfoContextKey]);\n      }\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      this._unprocessedContextDev = context;\n      this._processedContextDev = processChildContextDev(context, this);\n      context = this._processedContextDev;\n    }\n\n    var mountImage;\n\n    if (transaction.useCreateElement) {\n      var ownerDocument = context[ReactMount.ownerDocumentContextKey];\n      var el = ownerDocument.createElement(this._currentElement.type);\n      DOMPropertyOperations.setAttributeForID(el, this._rootNodeID); // Populate node cache\n\n      ReactMount.getID(el);\n\n      this._updateDOMProperties({}, props, transaction, el);\n\n      this._createInitialChildren(transaction, props, context, el);\n\n      mountImage = el;\n    } else {\n      var tagOpen = this._createOpenTagMarkupAndPutListeners(transaction, props);\n\n      var tagContent = this._createContentMarkup(transaction, props, context);\n\n      if (!tagContent && omittedCloseTags[this._tag]) {\n        mountImage = tagOpen + '/>';\n      } else {\n        mountImage = tagOpen + '>' + tagContent + '</' + this._currentElement.type + '>';\n      }\n    }\n\n    switch (this._tag) {\n      case 'input':\n        transaction.getReactMountReady().enqueue(mountReadyInputWrapper, this);\n      // falls through\n\n      case 'button':\n      case 'select':\n      case 'textarea':\n        if (props.autoFocus) {\n          transaction.getReactMountReady().enqueue(AutoFocusUtils.focusDOMComponent, this);\n        }\n\n        break;\n    }\n\n    return mountImage;\n  },\n\n  /**\r\n   * Creates markup for the open tag and all attributes.\r\n   *\r\n   * This method has side effects because events get registered.\r\n   *\r\n   * Iterating over object properties is faster than iterating over arrays.\r\n   * @see http://jsperf.com/obj-vs-arr-iteration\r\n   *\r\n   * @private\r\n   * @param {ReactReconcileTransaction|ReactServerRenderingTransaction} transaction\r\n   * @param {object} props\r\n   * @return {string} Markup of opening tag.\r\n   */\n  _createOpenTagMarkupAndPutListeners: function (transaction, props) {\n    var ret = '<' + this._currentElement.type;\n\n    for (var propKey in props) {\n      if (!props.hasOwnProperty(propKey)) {\n        continue;\n      }\n\n      var propValue = props[propKey];\n\n      if (propValue == null) {\n        continue;\n      }\n\n      if (registrationNameModules.hasOwnProperty(propKey)) {\n        if (propValue) {\n          enqueuePutListener(this._rootNodeID, propKey, propValue, transaction);\n        }\n      } else {\n        if (propKey === STYLE) {\n          if (propValue) {\n            if (process.env.NODE_ENV !== 'production') {\n              // See `_updateDOMProperties`. style block\n              this._previousStyle = propValue;\n            }\n\n            propValue = this._previousStyleCopy = assign({}, props.style);\n          }\n\n          propValue = CSSPropertyOperations.createMarkupForStyles(propValue);\n        }\n\n        var markup = null;\n\n        if (this._tag != null && isCustomComponent(this._tag, props)) {\n          if (propKey !== CHILDREN) {\n            markup = DOMPropertyOperations.createMarkupForCustomAttribute(propKey, propValue);\n          }\n        } else {\n          markup = DOMPropertyOperations.createMarkupForProperty(propKey, propValue);\n        }\n\n        if (markup) {\n          ret += ' ' + markup;\n        }\n      }\n    } // For static pages, no need to put React ID and checksum. Saves lots of\n    // bytes.\n\n\n    if (transaction.renderToStaticMarkup) {\n      return ret;\n    }\n\n    var markupForID = DOMPropertyOperations.createMarkupForID(this._rootNodeID);\n    return ret + ' ' + markupForID;\n  },\n\n  /**\r\n   * Creates markup for the content between the tags.\r\n   *\r\n   * @private\r\n   * @param {ReactReconcileTransaction|ReactServerRenderingTransaction} transaction\r\n   * @param {object} props\r\n   * @param {object} context\r\n   * @return {string} Content markup.\r\n   */\n  _createContentMarkup: function (transaction, props, context) {\n    var ret = ''; // Intentional use of != to avoid catching zero/false.\n\n    var innerHTML = props.dangerouslySetInnerHTML;\n\n    if (innerHTML != null) {\n      if (innerHTML.__html != null) {\n        ret = innerHTML.__html;\n      }\n    } else {\n      var contentToUse = CONTENT_TYPES[typeof props.children] ? props.children : null;\n      var childrenToUse = contentToUse != null ? null : props.children;\n\n      if (contentToUse != null) {\n        // TODO: Validate that text is allowed as a child of this node\n        ret = escapeTextContentForBrowser(contentToUse);\n      } else if (childrenToUse != null) {\n        var mountImages = this.mountChildren(childrenToUse, transaction, context);\n        ret = mountImages.join('');\n      }\n    }\n\n    if (newlineEatingTags[this._tag] && ret.charAt(0) === '\\n') {\n      // text/html ignores the first character in these tags if it's a newline\n      // Prefer to break application/xml over text/html (for now) by adding\n      // a newline specifically to get eaten by the parser. (Alternately for\n      // textareas, replacing \"^\\n\" with \"\\r\\n\" doesn't get eaten, and the first\n      // \\r is normalized out by HTMLTextAreaElement#value.)\n      // See: <http://www.w3.org/TR/html-polyglot/#newlines-in-textarea-and-pre>\n      // See: <http://www.w3.org/TR/html5/syntax.html#element-restrictions>\n      // See: <http://www.w3.org/TR/html5/syntax.html#newlines>\n      // See: Parsing of \"textarea\" \"listing\" and \"pre\" elements\n      //  from <http://www.w3.org/TR/html5/syntax.html#parsing-main-inbody>\n      return '\\n' + ret;\n    } else {\n      return ret;\n    }\n  },\n  _createInitialChildren: function (transaction, props, context, el) {\n    // Intentional use of != to avoid catching zero/false.\n    var innerHTML = props.dangerouslySetInnerHTML;\n\n    if (innerHTML != null) {\n      if (innerHTML.__html != null) {\n        setInnerHTML(el, innerHTML.__html);\n      }\n    } else {\n      var contentToUse = CONTENT_TYPES[typeof props.children] ? props.children : null;\n      var childrenToUse = contentToUse != null ? null : props.children;\n\n      if (contentToUse != null) {\n        // TODO: Validate that text is allowed as a child of this node\n        setTextContent(el, contentToUse);\n      } else if (childrenToUse != null) {\n        var mountImages = this.mountChildren(childrenToUse, transaction, context);\n\n        for (var i = 0; i < mountImages.length; i++) {\n          el.appendChild(mountImages[i]);\n        }\n      }\n    }\n  },\n\n  /**\r\n   * Receives a next element and updates the component.\r\n   *\r\n   * @internal\r\n   * @param {ReactElement} nextElement\r\n   * @param {ReactReconcileTransaction|ReactServerRenderingTransaction} transaction\r\n   * @param {object} context\r\n   */\n  receiveComponent: function (nextElement, transaction, context) {\n    var prevElement = this._currentElement;\n    this._currentElement = nextElement;\n    this.updateComponent(transaction, prevElement, nextElement, context);\n  },\n\n  /**\r\n   * Updates a native DOM component after it has already been allocated and\r\n   * attached to the DOM. Reconciles the root DOM node, then recurses.\r\n   *\r\n   * @param {ReactReconcileTransaction} transaction\r\n   * @param {ReactElement} prevElement\r\n   * @param {ReactElement} nextElement\r\n   * @internal\r\n   * @overridable\r\n   */\n  updateComponent: function (transaction, prevElement, nextElement, context) {\n    var lastProps = prevElement.props;\n    var nextProps = this._currentElement.props;\n\n    switch (this._tag) {\n      case 'button':\n        lastProps = ReactDOMButton.getNativeProps(this, lastProps);\n        nextProps = ReactDOMButton.getNativeProps(this, nextProps);\n        break;\n\n      case 'input':\n        ReactDOMInput.updateWrapper(this);\n        lastProps = ReactDOMInput.getNativeProps(this, lastProps);\n        nextProps = ReactDOMInput.getNativeProps(this, nextProps);\n        break;\n\n      case 'option':\n        lastProps = ReactDOMOption.getNativeProps(this, lastProps);\n        nextProps = ReactDOMOption.getNativeProps(this, nextProps);\n        break;\n\n      case 'select':\n        lastProps = ReactDOMSelect.getNativeProps(this, lastProps);\n        nextProps = ReactDOMSelect.getNativeProps(this, nextProps);\n        break;\n\n      case 'textarea':\n        ReactDOMTextarea.updateWrapper(this);\n        lastProps = ReactDOMTextarea.getNativeProps(this, lastProps);\n        nextProps = ReactDOMTextarea.getNativeProps(this, nextProps);\n        break;\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      // If the context is reference-equal to the old one, pass down the same\n      // processed object so the update bailout in ReactReconciler behaves\n      // correctly (and identically in dev and prod). See #5005.\n      if (this._unprocessedContextDev !== context) {\n        this._unprocessedContextDev = context;\n        this._processedContextDev = processChildContextDev(context, this);\n      }\n\n      context = this._processedContextDev;\n    }\n\n    assertValidProps(this, nextProps);\n\n    this._updateDOMProperties(lastProps, nextProps, transaction, null);\n\n    this._updateDOMChildren(lastProps, nextProps, transaction, context);\n\n    if (!canDefineProperty && this._nodeWithLegacyProperties) {\n      this._nodeWithLegacyProperties.props = nextProps;\n    }\n\n    if (this._tag === 'select') {\n      // <select> value update needs to occur after <option> children\n      // reconciliation\n      transaction.getReactMountReady().enqueue(postUpdateSelectWrapper, this);\n    }\n  },\n\n  /**\r\n   * Reconciles the properties by detecting differences in property values and\r\n   * updating the DOM as necessary. This function is probably the single most\r\n   * critical path for performance optimization.\r\n   *\r\n   * TODO: Benchmark whether checking for changed values in memory actually\r\n   *       improves performance (especially statically positioned elements).\r\n   * TODO: Benchmark the effects of putting this at the top since 99% of props\r\n   *       do not change for a given reconciliation.\r\n   * TODO: Benchmark areas that can be improved with caching.\r\n   *\r\n   * @private\r\n   * @param {object} lastProps\r\n   * @param {object} nextProps\r\n   * @param {ReactReconcileTransaction} transaction\r\n   * @param {?DOMElement} node\r\n   */\n  _updateDOMProperties: function (lastProps, nextProps, transaction, node) {\n    var propKey;\n    var styleName;\n    var styleUpdates;\n\n    for (propKey in lastProps) {\n      if (nextProps.hasOwnProperty(propKey) || !lastProps.hasOwnProperty(propKey)) {\n        continue;\n      }\n\n      if (propKey === STYLE) {\n        var lastStyle = this._previousStyleCopy;\n\n        for (styleName in lastStyle) {\n          if (lastStyle.hasOwnProperty(styleName)) {\n            styleUpdates = styleUpdates || {};\n            styleUpdates[styleName] = '';\n          }\n        }\n\n        this._previousStyleCopy = null;\n      } else if (registrationNameModules.hasOwnProperty(propKey)) {\n        if (lastProps[propKey]) {\n          // Only call deleteListener if there was a listener previously or\n          // else willDeleteListener gets called when there wasn't actually a\n          // listener (e.g., onClick={null})\n          deleteListener(this._rootNodeID, propKey);\n        }\n      } else if (DOMProperty.properties[propKey] || DOMProperty.isCustomAttribute(propKey)) {\n        if (!node) {\n          node = ReactMount.getNode(this._rootNodeID);\n        }\n\n        DOMPropertyOperations.deleteValueForProperty(node, propKey);\n      }\n    }\n\n    for (propKey in nextProps) {\n      var nextProp = nextProps[propKey];\n      var lastProp = propKey === STYLE ? this._previousStyleCopy : lastProps[propKey];\n\n      if (!nextProps.hasOwnProperty(propKey) || nextProp === lastProp) {\n        continue;\n      }\n\n      if (propKey === STYLE) {\n        if (nextProp) {\n          if (process.env.NODE_ENV !== 'production') {\n            checkAndWarnForMutatedStyle(this._previousStyleCopy, this._previousStyle, this);\n            this._previousStyle = nextProp;\n          }\n\n          nextProp = this._previousStyleCopy = assign({}, nextProp);\n        } else {\n          this._previousStyleCopy = null;\n        }\n\n        if (lastProp) {\n          // Unset styles on `lastProp` but not on `nextProp`.\n          for (styleName in lastProp) {\n            if (lastProp.hasOwnProperty(styleName) && (!nextProp || !nextProp.hasOwnProperty(styleName))) {\n              styleUpdates = styleUpdates || {};\n              styleUpdates[styleName] = '';\n            }\n          } // Update styles that changed since `lastProp`.\n\n\n          for (styleName in nextProp) {\n            if (nextProp.hasOwnProperty(styleName) && lastProp[styleName] !== nextProp[styleName]) {\n              styleUpdates = styleUpdates || {};\n              styleUpdates[styleName] = nextProp[styleName];\n            }\n          }\n        } else {\n          // Relies on `updateStylesByID` not mutating `styleUpdates`.\n          styleUpdates = nextProp;\n        }\n      } else if (registrationNameModules.hasOwnProperty(propKey)) {\n        if (nextProp) {\n          enqueuePutListener(this._rootNodeID, propKey, nextProp, transaction);\n        } else if (lastProp) {\n          deleteListener(this._rootNodeID, propKey);\n        }\n      } else if (isCustomComponent(this._tag, nextProps)) {\n        if (!node) {\n          node = ReactMount.getNode(this._rootNodeID);\n        }\n\n        if (propKey === CHILDREN) {\n          nextProp = null;\n        }\n\n        DOMPropertyOperations.setValueForAttribute(node, propKey, nextProp);\n      } else if (DOMProperty.properties[propKey] || DOMProperty.isCustomAttribute(propKey)) {\n        if (!node) {\n          node = ReactMount.getNode(this._rootNodeID);\n        } // If we're updating to null or undefined, we should remove the property\n        // from the DOM node instead of inadvertantly setting to a string. This\n        // brings us in line with the same behavior we have on initial render.\n\n\n        if (nextProp != null) {\n          DOMPropertyOperations.setValueForProperty(node, propKey, nextProp);\n        } else {\n          DOMPropertyOperations.deleteValueForProperty(node, propKey);\n        }\n      }\n    }\n\n    if (styleUpdates) {\n      if (!node) {\n        node = ReactMount.getNode(this._rootNodeID);\n      }\n\n      CSSPropertyOperations.setValueForStyles(node, styleUpdates);\n    }\n  },\n\n  /**\r\n   * Reconciles the children with the various properties that affect the\r\n   * children content.\r\n   *\r\n   * @param {object} lastProps\r\n   * @param {object} nextProps\r\n   * @param {ReactReconcileTransaction} transaction\r\n   * @param {object} context\r\n   */\n  _updateDOMChildren: function (lastProps, nextProps, transaction, context) {\n    var lastContent = CONTENT_TYPES[typeof lastProps.children] ? lastProps.children : null;\n    var nextContent = CONTENT_TYPES[typeof nextProps.children] ? nextProps.children : null;\n    var lastHtml = lastProps.dangerouslySetInnerHTML && lastProps.dangerouslySetInnerHTML.__html;\n    var nextHtml = nextProps.dangerouslySetInnerHTML && nextProps.dangerouslySetInnerHTML.__html; // Note the use of `!=` which checks for null or undefined.\n\n    var lastChildren = lastContent != null ? null : lastProps.children;\n    var nextChildren = nextContent != null ? null : nextProps.children; // If we're switching from children to content/html or vice versa, remove\n    // the old content\n\n    var lastHasContentOrHtml = lastContent != null || lastHtml != null;\n    var nextHasContentOrHtml = nextContent != null || nextHtml != null;\n\n    if (lastChildren != null && nextChildren == null) {\n      this.updateChildren(null, transaction, context);\n    } else if (lastHasContentOrHtml && !nextHasContentOrHtml) {\n      this.updateTextContent('');\n    }\n\n    if (nextContent != null) {\n      if (lastContent !== nextContent) {\n        this.updateTextContent('' + nextContent);\n      }\n    } else if (nextHtml != null) {\n      if (lastHtml !== nextHtml) {\n        this.updateMarkup('' + nextHtml);\n      }\n    } else if (nextChildren != null) {\n      this.updateChildren(nextChildren, transaction, context);\n    }\n  },\n\n  /**\r\n   * Destroys all event registrations for this instance. Does not remove from\r\n   * the DOM. That must be done by the parent.\r\n   *\r\n   * @internal\r\n   */\n  unmountComponent: function () {\n    switch (this._tag) {\n      case 'iframe':\n      case 'img':\n      case 'form':\n      case 'video':\n      case 'audio':\n        var listeners = this._wrapperState.listeners;\n\n        if (listeners) {\n          for (var i = 0; i < listeners.length; i++) {\n            listeners[i].remove();\n          }\n        }\n\n        break;\n\n      case 'input':\n        ReactDOMInput.unmountWrapper(this);\n        break;\n\n      case 'html':\n      case 'head':\n      case 'body':\n        /**\r\n         * Components like <html> <head> and <body> can't be removed or added\r\n         * easily in a cross-browser way, however it's valuable to be able to\r\n         * take advantage of React's reconciliation for styling and <title>\r\n         * management. So we just document it and throw in dangerous cases.\r\n         */\n        !false ? process.env.NODE_ENV !== 'production' ? invariant(false, '<%s> tried to unmount. Because of cross-browser quirks it is ' + 'impossible to unmount some top-level components (eg <html>, ' + '<head>, and <body>) reliably and efficiently. To fix this, have a ' + 'single top-level component that never unmounts render these ' + 'elements.', this._tag) : invariant(false) : undefined;\n        break;\n    }\n\n    this.unmountChildren();\n    ReactBrowserEventEmitter.deleteAllListeners(this._rootNodeID);\n    ReactComponentBrowserEnvironment.unmountIDFromEnvironment(this._rootNodeID);\n    this._rootNodeID = null;\n    this._wrapperState = null;\n\n    if (this._nodeWithLegacyProperties) {\n      var node = this._nodeWithLegacyProperties;\n      node._reactInternalComponent = null;\n      this._nodeWithLegacyProperties = null;\n    }\n  },\n  getPublicInstance: function () {\n    if (!this._nodeWithLegacyProperties) {\n      var node = ReactMount.getNode(this._rootNodeID);\n      node._reactInternalComponent = this;\n      node.getDOMNode = legacyGetDOMNode;\n      node.isMounted = legacyIsMounted;\n      node.setState = legacySetStateEtc;\n      node.replaceState = legacySetStateEtc;\n      node.forceUpdate = legacySetStateEtc;\n      node.setProps = legacySetProps;\n      node.replaceProps = legacyReplaceProps;\n\n      if (process.env.NODE_ENV !== 'production') {\n        if (canDefineProperty) {\n          Object.defineProperties(node, legacyPropsDescriptor);\n        } else {\n          // updateComponent will update this property on subsequent renders\n          node.props = this._currentElement.props;\n        }\n      } else {\n        // updateComponent will update this property on subsequent renders\n        node.props = this._currentElement.props;\n      }\n\n      this._nodeWithLegacyProperties = node;\n    }\n\n    return this._nodeWithLegacyProperties;\n  }\n};\nReactPerf.measureMethods(ReactDOMComponent, 'ReactDOMComponent', {\n  mountComponent: 'mountComponent',\n  updateComponent: 'updateComponent'\n});\nassign(ReactDOMComponent.prototype, ReactDOMComponent.Mixin, ReactMultiChild.Mixin);\nmodule.exports = ReactDOMComponent;","map":{"version":3,"sources":["F:/Administrator/Documents/Code for fun/Web/Project Introduction to SE/RubyGYM/client/node_modules/jsx-to-string/node_modules/react/lib/ReactDOMComponent.js"],"names":["AutoFocusUtils","require","CSSPropertyOperations","DOMProperty","DOMPropertyOperations","EventConstants","ReactBrowserEventEmitter","ReactComponentBrowserEnvironment","ReactDOMButton","ReactDOMInput","ReactDOMOption","ReactDOMSelect","ReactDOMTextarea","ReactMount","ReactMultiChild","ReactPerf","ReactUpdateQueue","assign","canDefineProperty","escapeTextContentForBrowser","invariant","isEventSupported","keyOf","setInnerHTML","setTextContent","shallowEqual","validateDOMNesting","warning","deleteListener","listenTo","registrationNameModules","CONTENT_TYPES","CHILDREN","children","STYLE","style","HTML","__html","ELEMENT_NODE_TYPE","getDeclarationErrorAddendum","internalInstance","owner","_currentElement","_owner","name","getName","legacyPropsDescriptor","process","env","NODE_ENV","props","enumerable","get","component","_reactInternalComponent","undefined","legacyGetDOMNode","legacyIsMounted","legacySetStateEtc","legacySetProps","partialProps","callback","enqueueSetPropsInternal","enqueueCallbackInternal","legacyReplaceProps","enqueueReplacePropsInternal","friendlyStringify","obj","Array","isArray","map","join","pairs","key","Object","prototype","hasOwnProperty","call","keyEscaped","test","JSON","stringify","push","String","styleMutationWarning","checkAndWarnForMutatedStyle","style1","style2","componentName","_tag","ownerName","hash","assertValidProps","voidElementTags","dangerouslySetInnerHTML","innerHTML","contentEditable","enqueuePutListener","id","registrationName","listener","transaction","container","findReactContainerForID","doc","nodeType","ownerDocument","getReactMountReady","enqueue","putListener","listenerToPut","mediaEvents","topAbort","topCanPlay","topCanPlayThrough","topDurationChange","topEmptied","topEncrypted","topEnded","topError","topLoadedData","topLoadedMetadata","topLoadStart","topPause","topPlay","topPlaying","topProgress","topRateChange","topSeeked","topSeeking","topStalled","topSuspend","topTimeUpdate","topVolumeChange","topWaiting","trapBubbledEventsLocal","inst","_rootNodeID","node","getNode","_wrapperState","listeners","trapBubbledEvent","topLevelTypes","topLoad","event","topReset","topSubmit","mountReadyInputWrapper","mountReadyWrapper","postUpdateSelectWrapper","postUpdateWrapper","omittedCloseTags","newlineEatingTags","VALID_TAG_REGEX","validatedTagCache","validateDangerousTag","tag","processChildContextDev","context","info","ancestorInfoContextKey","updatedAncestorInfo","isCustomComponent","tagName","indexOf","is","ReactDOMComponent","toLowerCase","_renderedChildren","_previousStyle","_previousStyleCopy","_topLevelWrapper","_nodeWithLegacyProperties","_unprocessedContextDev","_processedContextDev","displayName","Mixin","construct","element","mountComponent","rootID","getNativeProps","mountWrapper","processChildContext","mountImage","useCreateElement","ownerDocumentContextKey","el","createElement","type","setAttributeForID","getID","_updateDOMProperties","_createInitialChildren","tagOpen","_createOpenTagMarkupAndPutListeners","tagContent","_createContentMarkup","autoFocus","focusDOMComponent","ret","propKey","propValue","createMarkupForStyles","markup","createMarkupForCustomAttribute","createMarkupForProperty","renderToStaticMarkup","markupForID","createMarkupForID","contentToUse","childrenToUse","mountImages","mountChildren","charAt","i","length","appendChild","receiveComponent","nextElement","prevElement","updateComponent","lastProps","nextProps","updateWrapper","_updateDOMChildren","styleName","styleUpdates","lastStyle","properties","isCustomAttribute","deleteValueForProperty","nextProp","lastProp","setValueForAttribute","setValueForProperty","setValueForStyles","lastContent","nextContent","lastHtml","nextHtml","lastChildren","nextChildren","lastHasContentOrHtml","nextHasContentOrHtml","updateChildren","updateTextContent","updateMarkup","unmountComponent","remove","unmountWrapper","unmountChildren","deleteAllListeners","unmountIDFromEnvironment","getPublicInstance","getDOMNode","isMounted","setState","replaceState","forceUpdate","setProps","replaceProps","defineProperties","measureMethods","module","exports"],"mappings":"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","sourcesContent":["/**\r\n * Copyright 2013-2015, Facebook, Inc.\r\n * All rights reserved.\r\n *\r\n * This source code is licensed under the BSD-style license found in the\r\n * LICENSE file in the root directory of this source tree. An additional grant\r\n * of patent rights can be found in the PATENTS file in the same directory.\r\n *\r\n * @providesModule ReactDOMComponent\r\n * @typechecks static-only\r\n */\r\n\r\n/* global hasOwnProperty:true */\r\n\r\n'use strict';\r\n\r\nvar AutoFocusUtils = require('./AutoFocusUtils');\r\nvar CSSPropertyOperations = require('./CSSPropertyOperations');\r\nvar DOMProperty = require('./DOMProperty');\r\nvar DOMPropertyOperations = require('./DOMPropertyOperations');\r\nvar EventConstants = require('./EventConstants');\r\nvar ReactBrowserEventEmitter = require('./ReactBrowserEventEmitter');\r\nvar ReactComponentBrowserEnvironment = require('./ReactComponentBrowserEnvironment');\r\nvar ReactDOMButton = require('./ReactDOMButton');\r\nvar ReactDOMInput = require('./ReactDOMInput');\r\nvar ReactDOMOption = require('./ReactDOMOption');\r\nvar ReactDOMSelect = require('./ReactDOMSelect');\r\nvar ReactDOMTextarea = require('./ReactDOMTextarea');\r\nvar ReactMount = require('./ReactMount');\r\nvar ReactMultiChild = require('./ReactMultiChild');\r\nvar ReactPerf = require('./ReactPerf');\r\nvar ReactUpdateQueue = require('./ReactUpdateQueue');\r\n\r\nvar assign = require('./Object.assign');\r\nvar canDefineProperty = require('./canDefineProperty');\r\nvar escapeTextContentForBrowser = require('./escapeTextContentForBrowser');\r\nvar invariant = require('fbjs/lib/invariant');\r\nvar isEventSupported = require('./isEventSupported');\r\nvar keyOf = require('fbjs/lib/keyOf');\r\nvar setInnerHTML = require('./setInnerHTML');\r\nvar setTextContent = require('./setTextContent');\r\nvar shallowEqual = require('fbjs/lib/shallowEqual');\r\nvar validateDOMNesting = require('./validateDOMNesting');\r\nvar warning = require('fbjs/lib/warning');\r\n\r\nvar deleteListener = ReactBrowserEventEmitter.deleteListener;\r\nvar listenTo = ReactBrowserEventEmitter.listenTo;\r\nvar registrationNameModules = ReactBrowserEventEmitter.registrationNameModules;\r\n\r\n// For quickly matching children type, to test if can be treated as content.\r\nvar CONTENT_TYPES = { 'string': true, 'number': true };\r\n\r\nvar CHILDREN = keyOf({ children: null });\r\nvar STYLE = keyOf({ style: null });\r\nvar HTML = keyOf({ __html: null });\r\n\r\nvar ELEMENT_NODE_TYPE = 1;\r\n\r\nfunction getDeclarationErrorAddendum(internalInstance) {\r\n  if (internalInstance) {\r\n    var owner = internalInstance._currentElement._owner || null;\r\n    if (owner) {\r\n      var name = owner.getName();\r\n      if (name) {\r\n        return ' This DOM node was rendered by `' + name + '`.';\r\n      }\r\n    }\r\n  }\r\n  return '';\r\n}\r\n\r\nvar legacyPropsDescriptor;\r\nif (process.env.NODE_ENV !== 'production') {\r\n  legacyPropsDescriptor = {\r\n    props: {\r\n      enumerable: false,\r\n      get: function () {\r\n        var component = this._reactInternalComponent;\r\n        process.env.NODE_ENV !== 'production' ? warning(false, 'ReactDOMComponent: Do not access .props of a DOM node; instead, ' + 'recreate the props as `render` did originally or read the DOM ' + 'properties/attributes directly from this node (e.g., ' + 'this.refs.box.className).%s', getDeclarationErrorAddendum(component)) : undefined;\r\n        return component._currentElement.props;\r\n      }\r\n    }\r\n  };\r\n}\r\n\r\nfunction legacyGetDOMNode() {\r\n  if (process.env.NODE_ENV !== 'production') {\r\n    var component = this._reactInternalComponent;\r\n    process.env.NODE_ENV !== 'production' ? warning(false, 'ReactDOMComponent: Do not access .getDOMNode() of a DOM node; ' + 'instead, use the node directly.%s', getDeclarationErrorAddendum(component)) : undefined;\r\n  }\r\n  return this;\r\n}\r\n\r\nfunction legacyIsMounted() {\r\n  var component = this._reactInternalComponent;\r\n  if (process.env.NODE_ENV !== 'production') {\r\n    process.env.NODE_ENV !== 'production' ? warning(false, 'ReactDOMComponent: Do not access .isMounted() of a DOM node.%s', getDeclarationErrorAddendum(component)) : undefined;\r\n  }\r\n  return !!component;\r\n}\r\n\r\nfunction legacySetStateEtc() {\r\n  if (process.env.NODE_ENV !== 'production') {\r\n    var component = this._reactInternalComponent;\r\n    process.env.NODE_ENV !== 'production' ? warning(false, 'ReactDOMComponent: Do not access .setState(), .replaceState(), or ' + '.forceUpdate() of a DOM node. This is a no-op.%s', getDeclarationErrorAddendum(component)) : undefined;\r\n  }\r\n}\r\n\r\nfunction legacySetProps(partialProps, callback) {\r\n  var component = this._reactInternalComponent;\r\n  if (process.env.NODE_ENV !== 'production') {\r\n    process.env.NODE_ENV !== 'production' ? warning(false, 'ReactDOMComponent: Do not access .setProps() of a DOM node. ' + 'Instead, call ReactDOM.render again at the top level.%s', getDeclarationErrorAddendum(component)) : undefined;\r\n  }\r\n  if (!component) {\r\n    return;\r\n  }\r\n  ReactUpdateQueue.enqueueSetPropsInternal(component, partialProps);\r\n  if (callback) {\r\n    ReactUpdateQueue.enqueueCallbackInternal(component, callback);\r\n  }\r\n}\r\n\r\nfunction legacyReplaceProps(partialProps, callback) {\r\n  var component = this._reactInternalComponent;\r\n  if (process.env.NODE_ENV !== 'production') {\r\n    process.env.NODE_ENV !== 'production' ? warning(false, 'ReactDOMComponent: Do not access .replaceProps() of a DOM node. ' + 'Instead, call ReactDOM.render again at the top level.%s', getDeclarationErrorAddendum(component)) : undefined;\r\n  }\r\n  if (!component) {\r\n    return;\r\n  }\r\n  ReactUpdateQueue.enqueueReplacePropsInternal(component, partialProps);\r\n  if (callback) {\r\n    ReactUpdateQueue.enqueueCallbackInternal(component, callback);\r\n  }\r\n}\r\n\r\nfunction friendlyStringify(obj) {\r\n  if (typeof obj === 'object') {\r\n    if (Array.isArray(obj)) {\r\n      return '[' + obj.map(friendlyStringify).join(', ') + ']';\r\n    } else {\r\n      var pairs = [];\r\n      for (var key in obj) {\r\n        if (Object.prototype.hasOwnProperty.call(obj, key)) {\r\n          var keyEscaped = /^[a-z$_][\\w$_]*$/i.test(key) ? key : JSON.stringify(key);\r\n          pairs.push(keyEscaped + ': ' + friendlyStringify(obj[key]));\r\n        }\r\n      }\r\n      return '{' + pairs.join(', ') + '}';\r\n    }\r\n  } else if (typeof obj === 'string') {\r\n    return JSON.stringify(obj);\r\n  } else if (typeof obj === 'function') {\r\n    return '[function object]';\r\n  }\r\n  // Differs from JSON.stringify in that undefined becauses undefined and that\r\n  // inf and nan don't become null\r\n  return String(obj);\r\n}\r\n\r\nvar styleMutationWarning = {};\r\n\r\nfunction checkAndWarnForMutatedStyle(style1, style2, component) {\r\n  if (style1 == null || style2 == null) {\r\n    return;\r\n  }\r\n  if (shallowEqual(style1, style2)) {\r\n    return;\r\n  }\r\n\r\n  var componentName = component._tag;\r\n  var owner = component._currentElement._owner;\r\n  var ownerName;\r\n  if (owner) {\r\n    ownerName = owner.getName();\r\n  }\r\n\r\n  var hash = ownerName + '|' + componentName;\r\n\r\n  if (styleMutationWarning.hasOwnProperty(hash)) {\r\n    return;\r\n  }\r\n\r\n  styleMutationWarning[hash] = true;\r\n\r\n  process.env.NODE_ENV !== 'production' ? warning(false, '`%s` was passed a style object that has previously been mutated. ' + 'Mutating `style` is deprecated. Consider cloning it beforehand. Check ' + 'the `render` %s. Previous style: %s. Mutated style: %s.', componentName, owner ? 'of `' + ownerName + '`' : 'using <' + componentName + '>', friendlyStringify(style1), friendlyStringify(style2)) : undefined;\r\n}\r\n\r\n/**\r\n * @param {object} component\r\n * @param {?object} props\r\n */\r\nfunction assertValidProps(component, props) {\r\n  if (!props) {\r\n    return;\r\n  }\r\n  // Note the use of `==` which checks for null or undefined.\r\n  if (process.env.NODE_ENV !== 'production') {\r\n    if (voidElementTags[component._tag]) {\r\n      process.env.NODE_ENV !== 'production' ? warning(props.children == null && props.dangerouslySetInnerHTML == null, '%s is a void element tag and must not have `children` or ' + 'use `props.dangerouslySetInnerHTML`.%s', component._tag, component._currentElement._owner ? ' Check the render method of ' + component._currentElement._owner.getName() + '.' : '') : undefined;\r\n    }\r\n  }\r\n  if (props.dangerouslySetInnerHTML != null) {\r\n    !(props.children == null) ? process.env.NODE_ENV !== 'production' ? invariant(false, 'Can only set one of `children` or `props.dangerouslySetInnerHTML`.') : invariant(false) : undefined;\r\n    !(typeof props.dangerouslySetInnerHTML === 'object' && HTML in props.dangerouslySetInnerHTML) ? process.env.NODE_ENV !== 'production' ? invariant(false, '`props.dangerouslySetInnerHTML` must be in the form `{__html: ...}`. ' + 'Please visit https://fb.me/react-invariant-dangerously-set-inner-html ' + 'for more information.') : invariant(false) : undefined;\r\n  }\r\n  if (process.env.NODE_ENV !== 'production') {\r\n    process.env.NODE_ENV !== 'production' ? warning(props.innerHTML == null, 'Directly setting property `innerHTML` is not permitted. ' + 'For more information, lookup documentation on `dangerouslySetInnerHTML`.') : undefined;\r\n    process.env.NODE_ENV !== 'production' ? warning(!props.contentEditable || props.children == null, 'A component is `contentEditable` and contains `children` managed by ' + 'React. It is now your responsibility to guarantee that none of ' + 'those nodes are unexpectedly modified or duplicated. This is ' + 'probably not intentional.') : undefined;\r\n  }\r\n  !(props.style == null || typeof props.style === 'object') ? process.env.NODE_ENV !== 'production' ? invariant(false, 'The `style` prop expects a mapping from style properties to values, ' + 'not a string. For example, style={{marginRight: spacing + \\'em\\'}} when ' + 'using JSX.%s', getDeclarationErrorAddendum(component)) : invariant(false) : undefined;\r\n}\r\n\r\nfunction enqueuePutListener(id, registrationName, listener, transaction) {\r\n  if (process.env.NODE_ENV !== 'production') {\r\n    // IE8 has no API for event capturing and the `onScroll` event doesn't\r\n    // bubble.\r\n    process.env.NODE_ENV !== 'production' ? warning(registrationName !== 'onScroll' || isEventSupported('scroll', true), 'This browser doesn\\'t support the `onScroll` event') : undefined;\r\n  }\r\n  var container = ReactMount.findReactContainerForID(id);\r\n  if (container) {\r\n    var doc = container.nodeType === ELEMENT_NODE_TYPE ? container.ownerDocument : container;\r\n    listenTo(registrationName, doc);\r\n  }\r\n  transaction.getReactMountReady().enqueue(putListener, {\r\n    id: id,\r\n    registrationName: registrationName,\r\n    listener: listener\r\n  });\r\n}\r\n\r\nfunction putListener() {\r\n  var listenerToPut = this;\r\n  ReactBrowserEventEmitter.putListener(listenerToPut.id, listenerToPut.registrationName, listenerToPut.listener);\r\n}\r\n\r\n// There are so many media events, it makes sense to just\r\n// maintain a list rather than create a `trapBubbledEvent` for each\r\nvar mediaEvents = {\r\n  topAbort: 'abort',\r\n  topCanPlay: 'canplay',\r\n  topCanPlayThrough: 'canplaythrough',\r\n  topDurationChange: 'durationchange',\r\n  topEmptied: 'emptied',\r\n  topEncrypted: 'encrypted',\r\n  topEnded: 'ended',\r\n  topError: 'error',\r\n  topLoadedData: 'loadeddata',\r\n  topLoadedMetadata: 'loadedmetadata',\r\n  topLoadStart: 'loadstart',\r\n  topPause: 'pause',\r\n  topPlay: 'play',\r\n  topPlaying: 'playing',\r\n  topProgress: 'progress',\r\n  topRateChange: 'ratechange',\r\n  topSeeked: 'seeked',\r\n  topSeeking: 'seeking',\r\n  topStalled: 'stalled',\r\n  topSuspend: 'suspend',\r\n  topTimeUpdate: 'timeupdate',\r\n  topVolumeChange: 'volumechange',\r\n  topWaiting: 'waiting'\r\n};\r\n\r\nfunction trapBubbledEventsLocal() {\r\n  var inst = this;\r\n  // If a component renders to null or if another component fatals and causes\r\n  // the state of the tree to be corrupted, `node` here can be null.\r\n  !inst._rootNodeID ? process.env.NODE_ENV !== 'production' ? invariant(false, 'Must be mounted to trap events') : invariant(false) : undefined;\r\n  var node = ReactMount.getNode(inst._rootNodeID);\r\n  !node ? process.env.NODE_ENV !== 'production' ? invariant(false, 'trapBubbledEvent(...): Requires node to be rendered.') : invariant(false) : undefined;\r\n\r\n  switch (inst._tag) {\r\n    case 'iframe':\r\n      inst._wrapperState.listeners = [ReactBrowserEventEmitter.trapBubbledEvent(EventConstants.topLevelTypes.topLoad, 'load', node)];\r\n      break;\r\n    case 'video':\r\n    case 'audio':\r\n\r\n      inst._wrapperState.listeners = [];\r\n      // create listener for each media event\r\n      for (var event in mediaEvents) {\r\n        if (mediaEvents.hasOwnProperty(event)) {\r\n          inst._wrapperState.listeners.push(ReactBrowserEventEmitter.trapBubbledEvent(EventConstants.topLevelTypes[event], mediaEvents[event], node));\r\n        }\r\n      }\r\n\r\n      break;\r\n    case 'img':\r\n      inst._wrapperState.listeners = [ReactBrowserEventEmitter.trapBubbledEvent(EventConstants.topLevelTypes.topError, 'error', node), ReactBrowserEventEmitter.trapBubbledEvent(EventConstants.topLevelTypes.topLoad, 'load', node)];\r\n      break;\r\n    case 'form':\r\n      inst._wrapperState.listeners = [ReactBrowserEventEmitter.trapBubbledEvent(EventConstants.topLevelTypes.topReset, 'reset', node), ReactBrowserEventEmitter.trapBubbledEvent(EventConstants.topLevelTypes.topSubmit, 'submit', node)];\r\n      break;\r\n  }\r\n}\r\n\r\nfunction mountReadyInputWrapper() {\r\n  ReactDOMInput.mountReadyWrapper(this);\r\n}\r\n\r\nfunction postUpdateSelectWrapper() {\r\n  ReactDOMSelect.postUpdateWrapper(this);\r\n}\r\n\r\n// For HTML, certain tags should omit their close tag. We keep a whitelist for\r\n// those special cased tags.\r\n\r\nvar omittedCloseTags = {\r\n  'area': true,\r\n  'base': true,\r\n  'br': true,\r\n  'col': true,\r\n  'embed': true,\r\n  'hr': true,\r\n  'img': true,\r\n  'input': true,\r\n  'keygen': true,\r\n  'link': true,\r\n  'meta': true,\r\n  'param': true,\r\n  'source': true,\r\n  'track': true,\r\n  'wbr': true\r\n};\r\n\r\n// NOTE: menuitem's close tag should be omitted, but that causes problems.\r\nvar newlineEatingTags = {\r\n  'listing': true,\r\n  'pre': true,\r\n  'textarea': true\r\n};\r\n\r\n// For HTML, certain tags cannot have children. This has the same purpose as\r\n// `omittedCloseTags` except that `menuitem` should still have its closing tag.\r\n\r\nvar voidElementTags = assign({\r\n  'menuitem': true\r\n}, omittedCloseTags);\r\n\r\n// We accept any tag to be rendered but since this gets injected into arbitrary\r\n// HTML, we want to make sure that it's a safe tag.\r\n// http://www.w3.org/TR/REC-xml/#NT-Name\r\n\r\nvar VALID_TAG_REGEX = /^[a-zA-Z][a-zA-Z:_\\.\\-\\d]*$/; // Simplified subset\r\nvar validatedTagCache = {};\r\nvar hasOwnProperty = ({}).hasOwnProperty;\r\n\r\nfunction validateDangerousTag(tag) {\r\n  if (!hasOwnProperty.call(validatedTagCache, tag)) {\r\n    !VALID_TAG_REGEX.test(tag) ? process.env.NODE_ENV !== 'production' ? invariant(false, 'Invalid tag: %s', tag) : invariant(false) : undefined;\r\n    validatedTagCache[tag] = true;\r\n  }\r\n}\r\n\r\nfunction processChildContextDev(context, inst) {\r\n  // Pass down our tag name to child components for validation purposes\r\n  context = assign({}, context);\r\n  var info = context[validateDOMNesting.ancestorInfoContextKey];\r\n  context[validateDOMNesting.ancestorInfoContextKey] = validateDOMNesting.updatedAncestorInfo(info, inst._tag, inst);\r\n  return context;\r\n}\r\n\r\nfunction isCustomComponent(tagName, props) {\r\n  return tagName.indexOf('-') >= 0 || props.is != null;\r\n}\r\n\r\n/**\r\n * Creates a new React class that is idempotent and capable of containing other\r\n * React components. It accepts event listeners and DOM properties that are\r\n * valid according to `DOMProperty`.\r\n *\r\n *  - Event listeners: `onClick`, `onMouseDown`, etc.\r\n *  - DOM properties: `className`, `name`, `title`, etc.\r\n *\r\n * The `style` property functions differently from the DOM API. It accepts an\r\n * object mapping of style properties to values.\r\n *\r\n * @constructor ReactDOMComponent\r\n * @extends ReactMultiChild\r\n */\r\nfunction ReactDOMComponent(tag) {\r\n  validateDangerousTag(tag);\r\n  this._tag = tag.toLowerCase();\r\n  this._renderedChildren = null;\r\n  this._previousStyle = null;\r\n  this._previousStyleCopy = null;\r\n  this._rootNodeID = null;\r\n  this._wrapperState = null;\r\n  this._topLevelWrapper = null;\r\n  this._nodeWithLegacyProperties = null;\r\n  if (process.env.NODE_ENV !== 'production') {\r\n    this._unprocessedContextDev = null;\r\n    this._processedContextDev = null;\r\n  }\r\n}\r\n\r\nReactDOMComponent.displayName = 'ReactDOMComponent';\r\n\r\nReactDOMComponent.Mixin = {\r\n\r\n  construct: function (element) {\r\n    this._currentElement = element;\r\n  },\r\n\r\n  /**\r\n   * Generates root tag markup then recurses. This method has side effects and\r\n   * is not idempotent.\r\n   *\r\n   * @internal\r\n   * @param {string} rootID The root DOM ID for this node.\r\n   * @param {ReactReconcileTransaction|ReactServerRenderingTransaction} transaction\r\n   * @param {object} context\r\n   * @return {string} The computed markup.\r\n   */\r\n  mountComponent: function (rootID, transaction, context) {\r\n    this._rootNodeID = rootID;\r\n\r\n    var props = this._currentElement.props;\r\n\r\n    switch (this._tag) {\r\n      case 'iframe':\r\n      case 'img':\r\n      case 'form':\r\n      case 'video':\r\n      case 'audio':\r\n        this._wrapperState = {\r\n          listeners: null\r\n        };\r\n        transaction.getReactMountReady().enqueue(trapBubbledEventsLocal, this);\r\n        break;\r\n      case 'button':\r\n        props = ReactDOMButton.getNativeProps(this, props, context);\r\n        break;\r\n      case 'input':\r\n        ReactDOMInput.mountWrapper(this, props, context);\r\n        props = ReactDOMInput.getNativeProps(this, props, context);\r\n        break;\r\n      case 'option':\r\n        ReactDOMOption.mountWrapper(this, props, context);\r\n        props = ReactDOMOption.getNativeProps(this, props, context);\r\n        break;\r\n      case 'select':\r\n        ReactDOMSelect.mountWrapper(this, props, context);\r\n        props = ReactDOMSelect.getNativeProps(this, props, context);\r\n        context = ReactDOMSelect.processChildContext(this, props, context);\r\n        break;\r\n      case 'textarea':\r\n        ReactDOMTextarea.mountWrapper(this, props, context);\r\n        props = ReactDOMTextarea.getNativeProps(this, props, context);\r\n        break;\r\n    }\r\n\r\n    assertValidProps(this, props);\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      if (context[validateDOMNesting.ancestorInfoContextKey]) {\r\n        validateDOMNesting(this._tag, this, context[validateDOMNesting.ancestorInfoContextKey]);\r\n      }\r\n    }\r\n\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      this._unprocessedContextDev = context;\r\n      this._processedContextDev = processChildContextDev(context, this);\r\n      context = this._processedContextDev;\r\n    }\r\n\r\n    var mountImage;\r\n    if (transaction.useCreateElement) {\r\n      var ownerDocument = context[ReactMount.ownerDocumentContextKey];\r\n      var el = ownerDocument.createElement(this._currentElement.type);\r\n      DOMPropertyOperations.setAttributeForID(el, this._rootNodeID);\r\n      // Populate node cache\r\n      ReactMount.getID(el);\r\n      this._updateDOMProperties({}, props, transaction, el);\r\n      this._createInitialChildren(transaction, props, context, el);\r\n      mountImage = el;\r\n    } else {\r\n      var tagOpen = this._createOpenTagMarkupAndPutListeners(transaction, props);\r\n      var tagContent = this._createContentMarkup(transaction, props, context);\r\n      if (!tagContent && omittedCloseTags[this._tag]) {\r\n        mountImage = tagOpen + '/>';\r\n      } else {\r\n        mountImage = tagOpen + '>' + tagContent + '</' + this._currentElement.type + '>';\r\n      }\r\n    }\r\n\r\n    switch (this._tag) {\r\n      case 'input':\r\n        transaction.getReactMountReady().enqueue(mountReadyInputWrapper, this);\r\n      // falls through\r\n      case 'button':\r\n      case 'select':\r\n      case 'textarea':\r\n        if (props.autoFocus) {\r\n          transaction.getReactMountReady().enqueue(AutoFocusUtils.focusDOMComponent, this);\r\n        }\r\n        break;\r\n    }\r\n\r\n    return mountImage;\r\n  },\r\n\r\n  /**\r\n   * Creates markup for the open tag and all attributes.\r\n   *\r\n   * This method has side effects because events get registered.\r\n   *\r\n   * Iterating over object properties is faster than iterating over arrays.\r\n   * @see http://jsperf.com/obj-vs-arr-iteration\r\n   *\r\n   * @private\r\n   * @param {ReactReconcileTransaction|ReactServerRenderingTransaction} transaction\r\n   * @param {object} props\r\n   * @return {string} Markup of opening tag.\r\n   */\r\n  _createOpenTagMarkupAndPutListeners: function (transaction, props) {\r\n    var ret = '<' + this._currentElement.type;\r\n\r\n    for (var propKey in props) {\r\n      if (!props.hasOwnProperty(propKey)) {\r\n        continue;\r\n      }\r\n      var propValue = props[propKey];\r\n      if (propValue == null) {\r\n        continue;\r\n      }\r\n      if (registrationNameModules.hasOwnProperty(propKey)) {\r\n        if (propValue) {\r\n          enqueuePutListener(this._rootNodeID, propKey, propValue, transaction);\r\n        }\r\n      } else {\r\n        if (propKey === STYLE) {\r\n          if (propValue) {\r\n            if (process.env.NODE_ENV !== 'production') {\r\n              // See `_updateDOMProperties`. style block\r\n              this._previousStyle = propValue;\r\n            }\r\n            propValue = this._previousStyleCopy = assign({}, props.style);\r\n          }\r\n          propValue = CSSPropertyOperations.createMarkupForStyles(propValue);\r\n        }\r\n        var markup = null;\r\n        if (this._tag != null && isCustomComponent(this._tag, props)) {\r\n          if (propKey !== CHILDREN) {\r\n            markup = DOMPropertyOperations.createMarkupForCustomAttribute(propKey, propValue);\r\n          }\r\n        } else {\r\n          markup = DOMPropertyOperations.createMarkupForProperty(propKey, propValue);\r\n        }\r\n        if (markup) {\r\n          ret += ' ' + markup;\r\n        }\r\n      }\r\n    }\r\n\r\n    // For static pages, no need to put React ID and checksum. Saves lots of\r\n    // bytes.\r\n    if (transaction.renderToStaticMarkup) {\r\n      return ret;\r\n    }\r\n\r\n    var markupForID = DOMPropertyOperations.createMarkupForID(this._rootNodeID);\r\n    return ret + ' ' + markupForID;\r\n  },\r\n\r\n  /**\r\n   * Creates markup for the content between the tags.\r\n   *\r\n   * @private\r\n   * @param {ReactReconcileTransaction|ReactServerRenderingTransaction} transaction\r\n   * @param {object} props\r\n   * @param {object} context\r\n   * @return {string} Content markup.\r\n   */\r\n  _createContentMarkup: function (transaction, props, context) {\r\n    var ret = '';\r\n\r\n    // Intentional use of != to avoid catching zero/false.\r\n    var innerHTML = props.dangerouslySetInnerHTML;\r\n    if (innerHTML != null) {\r\n      if (innerHTML.__html != null) {\r\n        ret = innerHTML.__html;\r\n      }\r\n    } else {\r\n      var contentToUse = CONTENT_TYPES[typeof props.children] ? props.children : null;\r\n      var childrenToUse = contentToUse != null ? null : props.children;\r\n      if (contentToUse != null) {\r\n        // TODO: Validate that text is allowed as a child of this node\r\n        ret = escapeTextContentForBrowser(contentToUse);\r\n      } else if (childrenToUse != null) {\r\n        var mountImages = this.mountChildren(childrenToUse, transaction, context);\r\n        ret = mountImages.join('');\r\n      }\r\n    }\r\n    if (newlineEatingTags[this._tag] && ret.charAt(0) === '\\n') {\r\n      // text/html ignores the first character in these tags if it's a newline\r\n      // Prefer to break application/xml over text/html (for now) by adding\r\n      // a newline specifically to get eaten by the parser. (Alternately for\r\n      // textareas, replacing \"^\\n\" with \"\\r\\n\" doesn't get eaten, and the first\r\n      // \\r is normalized out by HTMLTextAreaElement#value.)\r\n      // See: <http://www.w3.org/TR/html-polyglot/#newlines-in-textarea-and-pre>\r\n      // See: <http://www.w3.org/TR/html5/syntax.html#element-restrictions>\r\n      // See: <http://www.w3.org/TR/html5/syntax.html#newlines>\r\n      // See: Parsing of \"textarea\" \"listing\" and \"pre\" elements\r\n      //  from <http://www.w3.org/TR/html5/syntax.html#parsing-main-inbody>\r\n      return '\\n' + ret;\r\n    } else {\r\n      return ret;\r\n    }\r\n  },\r\n\r\n  _createInitialChildren: function (transaction, props, context, el) {\r\n    // Intentional use of != to avoid catching zero/false.\r\n    var innerHTML = props.dangerouslySetInnerHTML;\r\n    if (innerHTML != null) {\r\n      if (innerHTML.__html != null) {\r\n        setInnerHTML(el, innerHTML.__html);\r\n      }\r\n    } else {\r\n      var contentToUse = CONTENT_TYPES[typeof props.children] ? props.children : null;\r\n      var childrenToUse = contentToUse != null ? null : props.children;\r\n      if (contentToUse != null) {\r\n        // TODO: Validate that text is allowed as a child of this node\r\n        setTextContent(el, contentToUse);\r\n      } else if (childrenToUse != null) {\r\n        var mountImages = this.mountChildren(childrenToUse, transaction, context);\r\n        for (var i = 0; i < mountImages.length; i++) {\r\n          el.appendChild(mountImages[i]);\r\n        }\r\n      }\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Receives a next element and updates the component.\r\n   *\r\n   * @internal\r\n   * @param {ReactElement} nextElement\r\n   * @param {ReactReconcileTransaction|ReactServerRenderingTransaction} transaction\r\n   * @param {object} context\r\n   */\r\n  receiveComponent: function (nextElement, transaction, context) {\r\n    var prevElement = this._currentElement;\r\n    this._currentElement = nextElement;\r\n    this.updateComponent(transaction, prevElement, nextElement, context);\r\n  },\r\n\r\n  /**\r\n   * Updates a native DOM component after it has already been allocated and\r\n   * attached to the DOM. Reconciles the root DOM node, then recurses.\r\n   *\r\n   * @param {ReactReconcileTransaction} transaction\r\n   * @param {ReactElement} prevElement\r\n   * @param {ReactElement} nextElement\r\n   * @internal\r\n   * @overridable\r\n   */\r\n  updateComponent: function (transaction, prevElement, nextElement, context) {\r\n    var lastProps = prevElement.props;\r\n    var nextProps = this._currentElement.props;\r\n\r\n    switch (this._tag) {\r\n      case 'button':\r\n        lastProps = ReactDOMButton.getNativeProps(this, lastProps);\r\n        nextProps = ReactDOMButton.getNativeProps(this, nextProps);\r\n        break;\r\n      case 'input':\r\n        ReactDOMInput.updateWrapper(this);\r\n        lastProps = ReactDOMInput.getNativeProps(this, lastProps);\r\n        nextProps = ReactDOMInput.getNativeProps(this, nextProps);\r\n        break;\r\n      case 'option':\r\n        lastProps = ReactDOMOption.getNativeProps(this, lastProps);\r\n        nextProps = ReactDOMOption.getNativeProps(this, nextProps);\r\n        break;\r\n      case 'select':\r\n        lastProps = ReactDOMSelect.getNativeProps(this, lastProps);\r\n        nextProps = ReactDOMSelect.getNativeProps(this, nextProps);\r\n        break;\r\n      case 'textarea':\r\n        ReactDOMTextarea.updateWrapper(this);\r\n        lastProps = ReactDOMTextarea.getNativeProps(this, lastProps);\r\n        nextProps = ReactDOMTextarea.getNativeProps(this, nextProps);\r\n        break;\r\n    }\r\n\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      // If the context is reference-equal to the old one, pass down the same\r\n      // processed object so the update bailout in ReactReconciler behaves\r\n      // correctly (and identically in dev and prod). See #5005.\r\n      if (this._unprocessedContextDev !== context) {\r\n        this._unprocessedContextDev = context;\r\n        this._processedContextDev = processChildContextDev(context, this);\r\n      }\r\n      context = this._processedContextDev;\r\n    }\r\n\r\n    assertValidProps(this, nextProps);\r\n    this._updateDOMProperties(lastProps, nextProps, transaction, null);\r\n    this._updateDOMChildren(lastProps, nextProps, transaction, context);\r\n\r\n    if (!canDefineProperty && this._nodeWithLegacyProperties) {\r\n      this._nodeWithLegacyProperties.props = nextProps;\r\n    }\r\n\r\n    if (this._tag === 'select') {\r\n      // <select> value update needs to occur after <option> children\r\n      // reconciliation\r\n      transaction.getReactMountReady().enqueue(postUpdateSelectWrapper, this);\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Reconciles the properties by detecting differences in property values and\r\n   * updating the DOM as necessary. This function is probably the single most\r\n   * critical path for performance optimization.\r\n   *\r\n   * TODO: Benchmark whether checking for changed values in memory actually\r\n   *       improves performance (especially statically positioned elements).\r\n   * TODO: Benchmark the effects of putting this at the top since 99% of props\r\n   *       do not change for a given reconciliation.\r\n   * TODO: Benchmark areas that can be improved with caching.\r\n   *\r\n   * @private\r\n   * @param {object} lastProps\r\n   * @param {object} nextProps\r\n   * @param {ReactReconcileTransaction} transaction\r\n   * @param {?DOMElement} node\r\n   */\r\n  _updateDOMProperties: function (lastProps, nextProps, transaction, node) {\r\n    var propKey;\r\n    var styleName;\r\n    var styleUpdates;\r\n    for (propKey in lastProps) {\r\n      if (nextProps.hasOwnProperty(propKey) || !lastProps.hasOwnProperty(propKey)) {\r\n        continue;\r\n      }\r\n      if (propKey === STYLE) {\r\n        var lastStyle = this._previousStyleCopy;\r\n        for (styleName in lastStyle) {\r\n          if (lastStyle.hasOwnProperty(styleName)) {\r\n            styleUpdates = styleUpdates || {};\r\n            styleUpdates[styleName] = '';\r\n          }\r\n        }\r\n        this._previousStyleCopy = null;\r\n      } else if (registrationNameModules.hasOwnProperty(propKey)) {\r\n        if (lastProps[propKey]) {\r\n          // Only call deleteListener if there was a listener previously or\r\n          // else willDeleteListener gets called when there wasn't actually a\r\n          // listener (e.g., onClick={null})\r\n          deleteListener(this._rootNodeID, propKey);\r\n        }\r\n      } else if (DOMProperty.properties[propKey] || DOMProperty.isCustomAttribute(propKey)) {\r\n        if (!node) {\r\n          node = ReactMount.getNode(this._rootNodeID);\r\n        }\r\n        DOMPropertyOperations.deleteValueForProperty(node, propKey);\r\n      }\r\n    }\r\n    for (propKey in nextProps) {\r\n      var nextProp = nextProps[propKey];\r\n      var lastProp = propKey === STYLE ? this._previousStyleCopy : lastProps[propKey];\r\n      if (!nextProps.hasOwnProperty(propKey) || nextProp === lastProp) {\r\n        continue;\r\n      }\r\n      if (propKey === STYLE) {\r\n        if (nextProp) {\r\n          if (process.env.NODE_ENV !== 'production') {\r\n            checkAndWarnForMutatedStyle(this._previousStyleCopy, this._previousStyle, this);\r\n            this._previousStyle = nextProp;\r\n          }\r\n          nextProp = this._previousStyleCopy = assign({}, nextProp);\r\n        } else {\r\n          this._previousStyleCopy = null;\r\n        }\r\n        if (lastProp) {\r\n          // Unset styles on `lastProp` but not on `nextProp`.\r\n          for (styleName in lastProp) {\r\n            if (lastProp.hasOwnProperty(styleName) && (!nextProp || !nextProp.hasOwnProperty(styleName))) {\r\n              styleUpdates = styleUpdates || {};\r\n              styleUpdates[styleName] = '';\r\n            }\r\n          }\r\n          // Update styles that changed since `lastProp`.\r\n          for (styleName in nextProp) {\r\n            if (nextProp.hasOwnProperty(styleName) && lastProp[styleName] !== nextProp[styleName]) {\r\n              styleUpdates = styleUpdates || {};\r\n              styleUpdates[styleName] = nextProp[styleName];\r\n            }\r\n          }\r\n        } else {\r\n          // Relies on `updateStylesByID` not mutating `styleUpdates`.\r\n          styleUpdates = nextProp;\r\n        }\r\n      } else if (registrationNameModules.hasOwnProperty(propKey)) {\r\n        if (nextProp) {\r\n          enqueuePutListener(this._rootNodeID, propKey, nextProp, transaction);\r\n        } else if (lastProp) {\r\n          deleteListener(this._rootNodeID, propKey);\r\n        }\r\n      } else if (isCustomComponent(this._tag, nextProps)) {\r\n        if (!node) {\r\n          node = ReactMount.getNode(this._rootNodeID);\r\n        }\r\n        if (propKey === CHILDREN) {\r\n          nextProp = null;\r\n        }\r\n        DOMPropertyOperations.setValueForAttribute(node, propKey, nextProp);\r\n      } else if (DOMProperty.properties[propKey] || DOMProperty.isCustomAttribute(propKey)) {\r\n        if (!node) {\r\n          node = ReactMount.getNode(this._rootNodeID);\r\n        }\r\n        // If we're updating to null or undefined, we should remove the property\r\n        // from the DOM node instead of inadvertantly setting to a string. This\r\n        // brings us in line with the same behavior we have on initial render.\r\n        if (nextProp != null) {\r\n          DOMPropertyOperations.setValueForProperty(node, propKey, nextProp);\r\n        } else {\r\n          DOMPropertyOperations.deleteValueForProperty(node, propKey);\r\n        }\r\n      }\r\n    }\r\n    if (styleUpdates) {\r\n      if (!node) {\r\n        node = ReactMount.getNode(this._rootNodeID);\r\n      }\r\n      CSSPropertyOperations.setValueForStyles(node, styleUpdates);\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Reconciles the children with the various properties that affect the\r\n   * children content.\r\n   *\r\n   * @param {object} lastProps\r\n   * @param {object} nextProps\r\n   * @param {ReactReconcileTransaction} transaction\r\n   * @param {object} context\r\n   */\r\n  _updateDOMChildren: function (lastProps, nextProps, transaction, context) {\r\n    var lastContent = CONTENT_TYPES[typeof lastProps.children] ? lastProps.children : null;\r\n    var nextContent = CONTENT_TYPES[typeof nextProps.children] ? nextProps.children : null;\r\n\r\n    var lastHtml = lastProps.dangerouslySetInnerHTML && lastProps.dangerouslySetInnerHTML.__html;\r\n    var nextHtml = nextProps.dangerouslySetInnerHTML && nextProps.dangerouslySetInnerHTML.__html;\r\n\r\n    // Note the use of `!=` which checks for null or undefined.\r\n    var lastChildren = lastContent != null ? null : lastProps.children;\r\n    var nextChildren = nextContent != null ? null : nextProps.children;\r\n\r\n    // If we're switching from children to content/html or vice versa, remove\r\n    // the old content\r\n    var lastHasContentOrHtml = lastContent != null || lastHtml != null;\r\n    var nextHasContentOrHtml = nextContent != null || nextHtml != null;\r\n    if (lastChildren != null && nextChildren == null) {\r\n      this.updateChildren(null, transaction, context);\r\n    } else if (lastHasContentOrHtml && !nextHasContentOrHtml) {\r\n      this.updateTextContent('');\r\n    }\r\n\r\n    if (nextContent != null) {\r\n      if (lastContent !== nextContent) {\r\n        this.updateTextContent('' + nextContent);\r\n      }\r\n    } else if (nextHtml != null) {\r\n      if (lastHtml !== nextHtml) {\r\n        this.updateMarkup('' + nextHtml);\r\n      }\r\n    } else if (nextChildren != null) {\r\n      this.updateChildren(nextChildren, transaction, context);\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Destroys all event registrations for this instance. Does not remove from\r\n   * the DOM. That must be done by the parent.\r\n   *\r\n   * @internal\r\n   */\r\n  unmountComponent: function () {\r\n    switch (this._tag) {\r\n      case 'iframe':\r\n      case 'img':\r\n      case 'form':\r\n      case 'video':\r\n      case 'audio':\r\n        var listeners = this._wrapperState.listeners;\r\n        if (listeners) {\r\n          for (var i = 0; i < listeners.length; i++) {\r\n            listeners[i].remove();\r\n          }\r\n        }\r\n        break;\r\n      case 'input':\r\n        ReactDOMInput.unmountWrapper(this);\r\n        break;\r\n      case 'html':\r\n      case 'head':\r\n      case 'body':\r\n        /**\r\n         * Components like <html> <head> and <body> can't be removed or added\r\n         * easily in a cross-browser way, however it's valuable to be able to\r\n         * take advantage of React's reconciliation for styling and <title>\r\n         * management. So we just document it and throw in dangerous cases.\r\n         */\r\n        !false ? process.env.NODE_ENV !== 'production' ? invariant(false, '<%s> tried to unmount. Because of cross-browser quirks it is ' + 'impossible to unmount some top-level components (eg <html>, ' + '<head>, and <body>) reliably and efficiently. To fix this, have a ' + 'single top-level component that never unmounts render these ' + 'elements.', this._tag) : invariant(false) : undefined;\r\n        break;\r\n    }\r\n\r\n    this.unmountChildren();\r\n    ReactBrowserEventEmitter.deleteAllListeners(this._rootNodeID);\r\n    ReactComponentBrowserEnvironment.unmountIDFromEnvironment(this._rootNodeID);\r\n    this._rootNodeID = null;\r\n    this._wrapperState = null;\r\n    if (this._nodeWithLegacyProperties) {\r\n      var node = this._nodeWithLegacyProperties;\r\n      node._reactInternalComponent = null;\r\n      this._nodeWithLegacyProperties = null;\r\n    }\r\n  },\r\n\r\n  getPublicInstance: function () {\r\n    if (!this._nodeWithLegacyProperties) {\r\n      var node = ReactMount.getNode(this._rootNodeID);\r\n\r\n      node._reactInternalComponent = this;\r\n      node.getDOMNode = legacyGetDOMNode;\r\n      node.isMounted = legacyIsMounted;\r\n      node.setState = legacySetStateEtc;\r\n      node.replaceState = legacySetStateEtc;\r\n      node.forceUpdate = legacySetStateEtc;\r\n      node.setProps = legacySetProps;\r\n      node.replaceProps = legacyReplaceProps;\r\n\r\n      if (process.env.NODE_ENV !== 'production') {\r\n        if (canDefineProperty) {\r\n          Object.defineProperties(node, legacyPropsDescriptor);\r\n        } else {\r\n          // updateComponent will update this property on subsequent renders\r\n          node.props = this._currentElement.props;\r\n        }\r\n      } else {\r\n        // updateComponent will update this property on subsequent renders\r\n        node.props = this._currentElement.props;\r\n      }\r\n\r\n      this._nodeWithLegacyProperties = node;\r\n    }\r\n    return this._nodeWithLegacyProperties;\r\n  }\r\n\r\n};\r\n\r\nReactPerf.measureMethods(ReactDOMComponent, 'ReactDOMComponent', {\r\n  mountComponent: 'mountComponent',\r\n  updateComponent: 'updateComponent'\r\n});\r\n\r\nassign(ReactDOMComponent.prototype, ReactDOMComponent.Mixin, ReactMultiChild.Mixin);\r\n\r\nmodule.exports = ReactDOMComponent;"]},"metadata":{},"sourceType":"script"}